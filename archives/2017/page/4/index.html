<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="icon" href="/favicon.ico">
  
  <title>phpsmarter</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox-1.3.4.css">
  <!--在这里倒入jquery 方便处理部分页面的jquery-->
  <script src="https://cdn.staticfile.org/jquery/1.7/jquery.min.js" type="text/javascript" ></script>
</head>
<body class="home">
	<header class="site-header navfixed-false">
  <div class="container">
      <h1><a href="/" title="phpsmarter"><span class="octicon octicon-mark-github"></span> phpsmarter</a></h1>
      <nav class="site-header-nav" role="navigation">
        
              
              <a href="/"  class=" site-header-nav-item hvr-underline-from-center" title="首页">首页</a>
        
              
              <a href="/categories/"  class=" site-header-nav-item hvr-underline-from-center" title="分类">分类</a>
        
              
              <a href="/open-source/"  class=" site-header-nav-item hvr-underline-from-center" title="开源项目">开源项目</a>
        
              
              <a href="/message/"  class=" site-header-nav-item hvr-underline-from-center" title="留言板">留言板</a>
        
              
              <a href="/javascript/"  class=" site-header-nav-item hvr-underline-from-center" title="javascript">javascript</a>
        
      </nav>
  </div>
</header>

	<section class="banner-false">
    <div class="collection-head">
        <div class="container">
            <div class="collection-title">
                <h1 class="collection-header" id="site-description">
                    
                </h1>
                <div class="collection-info">
                    
                    
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-location">
                                   
                                        xi&#39;an, China
                                    
                                </span>
                                
                            
                        </span>
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-mark-github">
                                   
                                </span>
                                
                                    <a href="http://github.com/phpsmarter" target="_blank">phpsmarter</a>
                                
                            
                        </span>
                    
                </div>
            </div>
        </div>
    </div>
</section>
	   <section class="container">
    <div class="columns">
        <div class="column two-thirds">
            
                  <article id="post-javascript-装饰者模式" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/javascript-装饰者模式/">javascript-装饰者模式</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p>装饰者模式：给对象动态添加职责的方式就是装饰者模式，能够在不改变原对象的情况下，在运行的时候给对象添加新的职责。<br>参考《javascript设计模式与开发实践》</p>
</blockquote>
<p>###装饰函数<br>如果在给一个函数或对象添加功能的时候不想动原函数，或者原函数是别的程序员写的，这时候可以通过引用来增加函数功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">var</span> a=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//构造函数</span></div><div class="line">    alert(<span class="number">1</span>);</div><div class="line"> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> _a=a; <span class="comment">//_a作为中间变量</span></div><div class="line"></div><div class="line">a=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//重新赋值a变量</span></div><div class="line">   _a();  <span class="comment">//执行a函数</span></div><div class="line">   alert(<span class="number">2</span>); <span class="comment">//添加的功能</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面重点是介绍一个AOP的例子，AOP是面向切面编程，在下面的函数运行的时候，可以给把函数看做有一个生命周期，分为 运行前（before），运行中，运行后（after）。在运行前，运行后可以给函数对象添加不同的职责，这些添加的职责不会影响原函数对象的运行。</p>
<p>在javascript中几乎一切都是对象，函数作为一等对象，可以作为函数的参数传递，所以在js中使用装饰者模式的时候后很大的便利性。</p>
<p>#####AOP的标准模型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//argument对象是函数调用时，隐式传递的函数参数</span></div><div class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span>(<span class="params"> beforefn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>; <span class="comment">// 保存原函数的引用</span></div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// 返回包含了原函数和新函数的"代理"函数</span></div><div class="line">			beforefn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ); <span class="comment">// 执行新函数，且保证this</span></div><div class="line"><span class="comment">// 不被劫持，新函数接受的参数也会被原封不动地传入原函数，新函数在原函数之前执行</span></div><div class="line">			<span class="keyword">return</span> __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ); <span class="comment">// 执行原函数并返</span></div><div class="line"><span class="comment">//回原函数的执行结果， 并且保证this 不被劫持		</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> __self = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">		afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">		<span class="keyword">return</span> ret;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>实例：点击按钮时弹框之后统计弹框的参数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//log函数作为参数传递  </span></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>; <span class="comment">//保存原函数的引用，_在js中是可以使用的可以作为一个私有方法和变量的起始标志</span></div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//返回函数复合体</span></div><div class="line">			<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );<span class="comment">//原函数调用</span></div><div class="line">			afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );<span class="comment">//after函数调用</span></div><div class="line">			<span class="keyword">return</span> ret; <span class="comment">//返回原函数</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> showLogin = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'打开登录浮层'</span> );</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'上报标签为: '</span> + <span class="keyword">this</span>.getAttribute( <span class="string">'tag'</span> ) );</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	showLogin = showLogin.after( log ); <span class="comment">// 打开登录浮层之后上报数据</span></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'button'</span> ).onclick = showLogin;</div></pre></td></tr></table></figure></p>
<p>在javascript中。面向对象编程和函数式编程是不矛盾的。两者结合起来威力更大。随着学习的深入，你会觉得满满的都是套路和模式。到了这一步学习有点欲罢不能了。学习javascript真是有意思。</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Designpattern/' title=''>Designpattern</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-javascript策略模式-年底绩效的计算" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/javascript策略模式-年底绩效的计算/">javascript策略模式-年底绩效的计算</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p>策略模式：定义一系列的算法，把他们一个个封装起来，并且可以相互替换<br>参见《javascript设计模式与开发实践》</p>
</blockquote>
<p>解决问题：公司的绩效根据员工的工资和年度绩效来决定。每个人的工资和绩效是不同的，但是计算方法是相同的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> js版的策略模式</div><div class="line"></div><div class="line"><span class="comment">//定义三个不同绩效的策略，每个绩效的策略实际的计算结果还有传入的参数来计算</span></div><div class="line"><span class="keyword">var</span> strategies = &#123;</div><div class="line">		<span class="string">"S"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;  <span class="comment">//s是绩效，salary是传入的工资参数，下同</span></div><div class="line">			<span class="keyword">return</span> salary * <span class="number">4</span>;</div><div class="line">		&#125;,</div><div class="line">		<span class="string">"A"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> salary * <span class="number">3</span>;</div><div class="line">		&#125;,</div><div class="line">		<span class="string">"B"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> salary * <span class="number">2</span>;</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">        <span class="comment">//使用策略的计算函数，传入绩效和工资参数</span></div><div class="line">	<span class="keyword">var</span> calculateBonus = <span class="function"><span class="keyword">function</span>(<span class="params"> level, salary </span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> strategies[ level ]( salary );  <span class="comment">//根据参数选用不同的策略</span></div><div class="line">	&#125;;</div><div class="line">       <span class="comment">//使用时传入绩效等级和工资额</span></div><div class="line">	<span class="built_in">console</span>.log( calculateBonus( <span class="string">'S'</span>, <span class="number">20000</span> ) ); <span class="comment">// 输出：80000</span></div><div class="line">	<span class="built_in">console</span>.log( calculateBonus( <span class="string">'A'</span>, <span class="number">10000</span> ) ); <span class="comment">// 输出：30000</span></div></pre></td></tr></table></figure>
<p>通过策略模式，策略和实际的计算方法分工明确，关系解耦和，各自发生改变都不改变另一部分的代码结构和内容。在具体策略中也不会出现紧耦合的判读选择语句。</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Designpattern/' title=''>Designpattern</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-Javascript状态模式" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/Javascript状态模式/">javascript状态模式</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p>状态模式是解决某些需求场景的最好方法。状态模式的关键是区分事物内部的状态，事物内部的状态的改变往往会带来事物的行为的改变<br>参考《javascript模式设计与开发实践》第16章</p>
</blockquote>
<p>我在前面写了一个简单的教程，为了说明react/redux中的状态管理，《javascript模式设计与开发实践》里面有这样的模式。在下一步的重构中，如果从简单电灯的开关改为多级调光的电灯可以借鉴这样的模式。在简单的多个状态之间切换的时候，这样的模式是非常清晰的。</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//两个状态之间的切换，使用if-else来切换，在有多个状态的时候，这样的切换就会嵌套很多的条件判断语句，如果加入新的状态，修改代码也比较困难</div><div class="line">Light.prototype.buttonWasPressed = function()&#123;</div><div class="line">		if ( this.<span class="keyword">state</span> === 'off' )&#123;</div><div class="line">			console.<span class="keyword">log</span>( '开灯' );</div><div class="line">			this.<span class="keyword">state</span> = '<span class="keyword">on</span>';</div><div class="line">		&#125;else if ( this.<span class="keyword">state</span> === '<span class="keyword">on</span>' )&#123;</div><div class="line">			console.<span class="keyword">log</span>( '关灯' );</div><div class="line">			this.<span class="keyword">state</span> = 'off';</div><div class="line">		&#125;</div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>状态模式的关键就是：把事物的每种状态都封装成单独的类，跟此状态相关的行为都被封装在这个类的内部。只要有交互行为，只需要在上下文中，把这个请求委托给当前的状态对象即可，该状态对象会负责渲染它自身的行为。</p>
<ol>
<li>封装状态</li>
</ol>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> OffLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">		    <span class="keyword">this</span>.light = light;</div><div class="line">		    &#125;;</div><div class="line">	     </div><div class="line">	OffLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'弱光'</span> ); <span class="comment">// offLightState 对应的行为</span></div><div class="line">		  <span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.weakLightState ); <span class="comment">// 切换状态到weakLightState</span></div><div class="line">     &#125;;</div><div class="line">    <span class="comment">// WeakLightState：</span></div><div class="line">    <span class="keyword">var</span> WeakLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">	  <span class="keyword">this</span>.light = light;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    WeakLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'强光'</span> ); <span class="comment">// weakLightState 对应的行为</span></div><div class="line">		<span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.strongLightState ); <span class="comment">// 切换状态到strongLightState</span></div><div class="line">	   &#125;;</div><div class="line">	<span class="comment">// StrongLightState：</span></div><div class="line">	  <span class="keyword">var</span> StrongLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.light = light;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	 StrongLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'关灯'</span> ); <span class="comment">// strongLightState 对应的行为</span></div><div class="line">		<span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.offLightState ); <span class="comment">// 切换状态到offLightState</span></div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>在Light类中为每个状态类都创建一个状态对象，这样一来就可以很明显的看到电灯一共有多少个状态</p>
</blockquote>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span></span>()&#123;</div><div class="line">	<span class="built_in">this</span>.offLightState = <span class="keyword">new</span> <span class="type">OffLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.weakLightState = <span class="keyword">new</span> <span class="type">WeakLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.strongLightState = <span class="keyword">new</span> <span class="type">StrongLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.button = <span class="literal">null</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>在button按钮被按下的时候，通过self.currState.buttonWasPressed()将请求委托为当前的状态去执行。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Light.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> button = <span class="built_in">document</span>.createElement( <span class="string">'button'</span> ),</div><div class="line">	self = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild( button );</div><div class="line">	<span class="keyword">this</span>.button.innerHTML = <span class="string">'开关'</span>;</div><div class="line">	<span class="keyword">this</span>.currState = <span class="keyword">this</span>.offLightState; <span class="comment">// 设置当前状态</span></div><div class="line">	<span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		self.currState.buttonWasPressed();</div><div class="line">	&#125;	</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>最后提供一个setState的方法，状态对象通过这个方法来切换light对象的状态。状态对象的切换规律被定义在各个状态类中。<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Light.prototype.setState = <span class="function"><span class="keyword">function</span></span>( <span class="keyword">new</span><span class="type">State</span> )&#123;</div><div class="line">		<span class="built_in">this</span>.currState = <span class="keyword">new</span><span class="type">State</span>; <span class="comment">//设置下一个状态</span></div><div class="line">	&#125;;</div></pre></td></tr></table></figure></p>
<p>#####Javascript版本的状态机</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.currState = FSM.off; <span class="comment">// 设置当前状态</span></div><div class="line">		<span class="keyword">this</span>.button = <span class="literal">null</span>;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Light.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> button = <span class="built_in">document</span>.createElement( <span class="string">'button'</span> ),</div><div class="line">		self = <span class="keyword">this</span>;</div><div class="line">		button.innerHTML = <span class="string">'已关灯'</span>;</div><div class="line">		<span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild( button );</div><div class="line">		<span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="comment">//初始化下就是调用FSM.off的方法设置内部状态self.currState.buttonWasPressed.call( self ); // 把请求委托给FSM 状态机</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> FSM = &#123;</div><div class="line">		<span class="attr">off</span>: &#123;</div><div class="line">			<span class="attr">buttonWasPressed</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log( <span class="string">'关灯'</span> );</div><div class="line">				<span class="keyword">this</span>.button.innerHTML = <span class="string">'下一次按我是开灯'</span>;</div><div class="line">				<span class="keyword">this</span>.currState = FSM.on;</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">on</span>: &#123;</div><div class="line">			<span class="attr">buttonWasPressed</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log( <span class="string">'开灯'</span> );</div><div class="line">				<span class="keyword">this</span>.button.innerHTML = <span class="string">'下一次按我是关灯'</span>;</div><div class="line">				<span class="keyword">this</span>.currState = FSM.off;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> light = <span class="keyword">new</span> Light();</div><div class="line">	light.init();</div></pre></td></tr></table></figure>
<p>具体的实例详细看看书中的例子</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Designpattern/' title=''>Designpattern</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-javascript中的this关键字" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/javascript中的this关键字/">javascript中的this关键字</a>
  

      </h3>
      <div class="repo-list-description">
        
          <p>前面对这个问题总是雾里看花，像🌧像雾又像风。最近综合着看了一些书和文章才算是基本搞清楚了。<br>主要参考《javascrpt设计模式与开发指南》</p>
<p>javascript(缩写js)语言中的this和java,php中的this是完全不同的概念。<br>js中的this是动态的，总是指向一个对象，但是这个对象是谁，需要根据函数的调用上下文来决定。</p>
<ol>
<li>作为对象的方法调用(显示绑定)</li>
<li>作为普通的函数来调用(默认绑定)</li>
<li>作为构造器来调用</li>
<li>call和apply方法调用</li>
</ol>
<p>1作为对象的方法调用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">		<span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">		<span class="attr">getA</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			alert ( <span class="keyword">this</span> === obj ); <span class="comment">// 输出：true</span></div><div class="line">			alert ( <span class="keyword">this</span>.a ); <span class="comment">// 输出: 1</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	obj.getA();  <span class="comment">//函数被绑定在对象obj上，this指向obj对象</span></div><div class="line">	<span class="comment">//这种方法，可以立即看到绑定的对象是那一个，所以是最简单的</span></div></pre></td></tr></table></figure></p>
<p>2作为普通函数的调用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在浏览器的JavaScript 里，这个全局对象是window 对象。</span></div><div class="line">	<span class="built_in">window</span>.name = <span class="string">'globalName'</span>;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//这个函数没有指定对象，默认绑定在window对象上</span></div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">	&#125;;</div><div class="line">	<span class="built_in">console</span>.log( getName() ); <span class="comment">// 输出：globalName</span></div><div class="line"></div><div class="line">	<span class="comment">//或者：</span></div><div class="line">	<span class="built_in">window</span>.name = <span class="string">'globalName'</span>;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> myObject = &#123;</div><div class="line">		<span class="attr">name</span>: <span class="string">'sven'</span>,</div><div class="line">		<span class="attr">getName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">  <span class="comment">//下面这个引用是比较迷惑人的，在用变量引用一个对象的方法时候，变量仅仅指向函数本身，和原来函数定义在哪个对象里没有任何关系，这一点要注意</span></div><div class="line">	<span class="keyword">var</span> getName = myObject.getName; <span class="comment">//getName函数任然是默认绑定在window全局对象上</span></div><div class="line">	<span class="built_in">console</span>.log( getName() ); <span class="comment">// globalName</span></div></pre></td></tr></table></figure></p>
<p><code>下面这个实例，我个人认为是js this中最为迷惑的地方，需要注意，可能学了很长时间都对这个地方迷惑，没有什么原因，js就是这么规定的。</code></p>
<p><code>那，到底规定什么了？就是 函数内部的函数，也就是闭包函数的对象是默认绑定在全局，全局，全局 对象上的，一定，一定，一定 要记住这一点</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span>我是一个div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">	<span class="built_in">window</span>.id = <span class="string">'window'</span>;</div><div class="line"></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'div1'</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		alert ( <span class="keyword">this</span>.id ); <span class="comment">// 输出：'div1'</span></div><div class="line">		<span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//这个函数内部的函数，他是默认绑定在window上的</span></div><div class="line">			alert ( <span class="keyword">this</span>.id ); <span class="comment">// 输出：'window' </span></div><div class="line">		&#125;</div><div class="line">		callback();</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">  <span class="comment">//那么要是内部函数要使用外部函数绑定的对象怎么办。</span></div><div class="line">  <span class="comment">//好办，就是把外部函数的对象保存在一个变量中</span></div><div class="line">  <span class="comment">//经常在代码中看到的 var that=this就是这个作用</span></div><div class="line">  <span class="comment">//在内部函数要使用同一个对象就可以用that了。或者用 var  self=this </span></div><div class="line">  <span class="comment">//这仅仅是变量的名字不同，道理都一样</span></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'div1'</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// 保存div 的引用</span></div><div class="line">		<span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			alert ( that.id ); <span class="comment">// 输出：'div1'  //that指向了外部函数的对象</span></div><div class="line">		&#125;</div><div class="line">		callback();</div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<p>在 ECMA es5的严格模式下<br>问题又有改变了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">use strict </div><div class="line"></div><div class="line">这时候，内部函数的<span class="keyword">this</span>不在默认指向<span class="built_in">window</span>对象，而是指向undefine，实际就是没有默认绑定对象。</div></pre></td></tr></table></figure>
<p>3构造器调用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = <span class="string">'sven'</span>;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass();  <span class="comment">//当使用构造器调用的时候，构造器返回一个对象，this就指向这个对象</span></div><div class="line">	alert ( obj.name ); <span class="comment">// 输出：sven</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = <span class="string">'sven'</span>;</div><div class="line">		<span class="keyword">return</span> &#123; <span class="comment">// 显式地返回一个对象</span></div><div class="line">			name: <span class="string">'anne'</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div></pre></td></tr></table></figure></p>
<p>4call apply 调用<br>硬式绑定，通过传参方式动态改变函数的绑定对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> obj1 = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">'sven'</span>,</div><div class="line">	<span class="attr">getName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">'anne'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( obj1.getName() ); <span class="comment">// 输出: sven</span></div><div class="line"><span class="comment">//下面这个函数硬式绑定到obj2对象上</span></div><div class="line"><span class="built_in">console</span>.log( obj1.getName.call( obj2 ) ); <span class="comment">// 输出：anne</span></div></pre></td></tr></table></figure>
<p>这就是this。</p>
<p>关键字的内容，关键的地方是对概念有一定吃透，出问题都是概念不清楚引起的</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/javascript/' title=''>javascript</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-翻译-使用Reselect改进React和Redux程序性能" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/翻译-使用Reselect改进React和Redux程序性能/">翻译-使用Reselect改进React和Redux程序性能</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p><em>Written by Neil Fenton16 June 2016</em><br>  <a href="http://blog.rangle.io/react-and-redux-performance-with-reselect/" target="_blank" rel="external">原文请见</a></p>
</blockquote>
<p> <img src="https://ww2.sinaimg.cn/large/006tKfTcly1fdnldaaddyg31040g4747.gif" alt="图1"></p>
<p>React和Redux组合是非常棒的,当他们两个一起使用时,可以帮助我们在程序结构中分离关注点.即使React易用性非常强,但是总会遇到高性能需求的时间.</p>
<p>在React中最昂贵的操作就是渲染回路.当组件检测到输入的变化,渲染回路就会被触发(译注：这里的意思的组件的action会改变redux的state,变回最终又回到组件了).</p>
<p>当我们初次开始React程序的时候,我们不会担心渲染回路的花销问题.但是当我们的UI变得复杂的时候,我们需要考虑这一点.React提供了一些工具让我们能劫持渲染回路,如果渲染看上去不必要,我们就可以使用工具来阻止重渲染的发生.为了这么做,我们要敲入<code>componentShouldUpdate</code>生命周期事件,返回一个布尔值,通知组件是否应该进行更新.这是以<code>PureRenderMixin</code>作为基础,它比较输入的props和state和先前的props和state,如果两者相等就返回false.</p>
<p> 这个生命周期事件和Immutable集合一起可以实实在在的改进性能,因为我们可以很容易的决定是渲染还是不渲染组件.<br> 不幸的是,仅此而已.</p>
<p> 考虑到紧接着的问题:我们构建一个购物车,有三个输入类型：</p>
<ul>
<li>购物车里的货物</li>
<li>货物的数量</li>
<li>相应的税率(基于州或者省)</li>
</ul>
<p>问题是无论只要输入的状态一改变(新货物加入,数量的变化,选择州的变哈),每一个部分都要被重新计算和渲染.如果我们的购物车里有几百个东西,你可以想象一下这将会是一个很大的性能问题.改变税率肯能会触发购物车的重新计算,但是是不应该发生的.税率的变化仅仅会影响衍生的数据.仅仅总数,税的总数应该发生变化,并且发生后继的更新.接下来我们看看怎么修复这个问题.(译注：这段的意思是如果税率变化,在UI组件中是不应该发生渲染的,只有几个地方需要发生变化)</p>
<h2 id="Reselect前来救援"><a href="#Reselect前来救援" class="headerlink" title="Reselect前来救援"></a>Reselect前来救援</h2><p>Reselect用来记忆selectors的库.我们定义的selectors是作为函数获取Redux state的某一部分.使用记忆能力,我们可以组织不必要的衍生数据的重渲染和计算过程,由此加速了我们的app.</p>
<p>考虑下面这个示例:<br><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fdnmmp9vlrj30nr0we75c.jpg" alt=""></p>
<p>如果我们有几百甚至上千个条目,渲染购物车中的所有项目花费会非常的大,即使是税率的变化.用户每一次搜索的他的购物车的时候,我们是否应该一遍一遍的重计算？我们可以使用记忆性的selectors来阻止昂贵的计算过程.使用记忆selectors,如果Redux中的state的树很大,我们也不用担心没吃state变化的计算问题.我们也可以在前端增加额外的灵活性,把这些selectors分散到单个的组件中.</p>
<p>现在看看一个使用Reselect的简单selector:<br><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fdnrzja9zgj30nk080q31.jpg" alt="selector using Reselect"></p>
<p> 在上面的实例中,我们把item的获取函数分成两个函数,第一个函数(第3行)简单的额获取购物车中所有的items,第二个函数代表一个记忆性selector.Reselect暴露了<code>createSelector</code>API,我们可以借此创建一个记忆性的selector.这个意思是<code>getItemWithTotals</code>在第一次函数运行的时候将会进行运算.如果同一个函数再次被调用,但是输入值(<code>getItems</code>的值)没有变化,函数将会返回一个缓存(cached)的计算结果.如果items被修改了(例如：item添加,数量的变化,任何事情操作了<code>getItems</code>的结果),函数将会再次执行.</p>
<p> 这是一个非常有力的概念,允许我们在一个组件的state需要重计算的时候,完全的优化应该被渲染的组件.这意味着我们不在担心<code>getItems</code>和后继的每一次中价格的计算,但操作的时候,不会影响state的执行.</p>
<p> 我们继续这个方式来创建四个衍生数据的selectors.包括小计,税额总计和总价格.<br> <img src="https://ww3.sinaimg.cn/large/006tKfTcly1fdnshe7qxtj30ng0es0t4.jpg" alt="四个selectors"></p>
<h2 id="使用selector"><a href="#使用selector" class="headerlink" title="使用selector"></a>使用selector</h2><p>  selectors代码完成以后,让我们看看怎么在组件中使用<code>getItemWithTitals</code>selector:</p>
<p>  <img src="https://ww3.sinaimg.cn/large/006tKfTcly1fdnskl1pn9j30s8106gms.jpg" alt=""></p>
<p>   现在我们有了有了一个组件,仅仅感知购物车中的items.这是一个不错的方式因为它和总计和小计没有任何关联.他不是可以重用的组件,但是是性能非常好的组件.和这个组件无关的变化不会引起额外的重渲染.</p>
<p>   这个方式应用到其他的购物车上意味着我们将会有一个组件负责显示小计,总计和税额计算.</p>
<p>   早一点在应用中使用这些优化措施意味着未来需要修正性能问题的时候做的工作就比较少.我建议尽可能早的使用reselect.在组件之外使用Selectors意味着我们可以容易的测试这些数据衍生计算.在Redux中使用简单的模拟数据,基于提供的数据测试期待的输出结果.</p>
<p> 进一步了解这些概念,参考<a href="https://github.com/neilff/react-redux-performance" target="_blank" rel="external">demo</a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/翻译/' title=''>翻译</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post--翻译-Redux-Saga-完成时钟演示App" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/-翻译-Redux-Saga-完成时钟演示App/">翻译-Redux-Saga-完成时钟演示App</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p>翻译版本，<a href="http://ohyayanotherblog.ghost.io/redux-saga-finishing-the-clock-demo-app/" target="_blank" rel="external">原文请见</a><br><em>14 NOVEMBER 2016</em></p>
</blockquote>
<h2 id="实现Saga代码"><a href="#实现Saga代码" class="headerlink" title="实现Saga代码"></a>实现Saga代码</h2><p>这篇文章是三篇关于Redux Saga系列文章的第三篇,也是最后一篇.在第一部分我们先对有关的概念进行了热身.在第二部分,我们和Redux关系推进到了另一个高度.我们把Saga付诸实施.在最后一篇文章,我们把最后一部分内容写完.如果你没有克隆app repo，可以在这个<a href="https://github.com/granmoe/redux-saga-clock-tutorial" target="_blank" rel="external">地址克隆</a>,如果不想看这个repo,想直接跳到最终的app代码,可以<a href="https://github.com/granmoe/redux-saga-clock.git" target="_blank" rel="external">看这个repo</a>.   <a href="https://granmoe.github.io/redux-saga-clock/" target="_blank" rel="external">live demo看这里</a>.</p>
<hr>
<p><a href="http://www.jianshu.com/p/6f8678a6ad78" target="_blank" rel="external">第一部分译文请见</a>，<br><a href="http://www.jianshu.com/p/fad0136e77c0" target="_blank" rel="external">第二部分译文请见</a>，<br><a href="http://www.jianshu.com/p/88fc4236b505" target="_blank" rel="external">第三部分译文请见</a>.</p>
<hr>
<h2 id="What’s-my-name-agian"><a href="#What’s-my-name-agian" class="headerlink" title="What’s my name agian?"></a>What’s my name agian?</h2><p>在上一篇文章中,我们设计了基础但是有点幼稚的需求,创建了很初级时钟,可以对用户的交互操作做出一些响应.(译者：后面有几句似乎和技术没有太大关系,我就没有翻译了.请参见原文).</p>
<p>我们决定只使用最小化的redux state值有一个字段“milliseconds”来代表时钟的时间.因为我们的时钟需要向前,向后,重置,所以创建了相应的redux action去执行增,减,重置actions,这些actions可以改变state.<br>当我们进入某些saga code代码,创建一个saga监听三个actions(开始,暂停,回拨),只有收到相应action的时候,输出日志内容.最后,我们的目标是把日志输出替换成时钟实际运行的流程,例如每一秒种发送一个递减的action,因此app state的异步操作需要好好的设计.最后我们创建一个简单的React组件,可以让我们根据期望的saga代码的工作流程测试redux和saga action,观察state的更新.</p>
<p>现在我们来完成这件事,我们想给朋友留下深刻的印象,看上去有意思一点,所以会使用一些非常酷的SVG技术,当时间增加的时候,时钟可以画出一些图形.但是最重要的是使用Saga可以是app唱歌,跳舞.开始编码.</p>
<p>##实现Saga<br>我们的duck.js是非常小的,实际上仅仅需要很少几行代码去完成saga/redux.目前为止我们的duck代码是这样的:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">export</span> <span class="function"><span class="keyword">function</span>* <span class="title">rootSaga</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="keyword">yield</span> takeLatest([<span class="string">'start-clock'</span>, <span class="string">'pause-clock'</span>, <span class="string">'rewind-clock'</span>], handleClockAction)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Pushed this action to handleClockAction: '</span>, type)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>正如我们上一篇文章所讨论的,<code>takeLatest</code>将会监听action type数组中的任何一个action type,当每次发送的action和action type之一匹配的时候,会运行另一个流程(在我们的app中,是<code>handleClockAction</code>).<code>takeLatest</code>也会取消之前的运行流程,他也会传递整个action对象,我们可以在<code>handleClockAction</code>使用这个对象.</p>
<p>现在让我们考虑一下整个app应该怎么工作.所有的实际流程都是在<code>handelClockAction</code>中,在三个saga actions中,每一个action我们都做一些不同的工作.深入到代码的基础构架中.使用<code>if/else if</code>代码块替换<code>handleClockAction</code>的单行代码.这个代码块为每个action type提供分支判断逻辑,并且输出一些文本日志,验证代码的正确性.</p>
<p>给你几秒钟,耐心等待一下.</p>
<p>好了,下面的是我的<code>handelClockAction</code>的实际样子:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//if else if代码块进行分支判断执行流程</span></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'pause-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. Guess what needs to be done here?`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>现在运行app(npm start),转到localhost:8080,打开javascript终端,测试一些saga actions(他们和SVG图下面的按钮是连接在一起的).我们可以看到每次action执行时,有相应的日志输出.</p>
<p>当我们开始clock action,我们想让时钟每100毫秒递增一次.为了这样做,从saga导入助手函数”delay”.编辑redux-saga文件.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; delay, takeLatest &#125; <span class="keyword">from</span> <span class="string">'redux-saga'</span></div></pre></td></tr></table></figure>
<hr>
<p>delay非常简单，功能不言自明.它接收一个参数,毫秒数,然后暂停执行对应的时间.例如<code>yield delay(50)</code>.在<code>if/else if</code>代码块中添加一些逻辑代码,每1000ms,输出日志.请记住,你需要这个过程无限制的重复.我们可以使用非常简单的原生javascript代码控制流来实现.我想让你先猜猜怎么实现.</p>
<p>不要偷看.</p>
<p>花点时间考虑一下.</p>
<p>好了,下面是我的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;<span class="comment">//就是这个while(true)语句保持始终运行</span></div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'pause-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. Guess what needs to be done here?`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>在这一点上,打开js终端,查看日志输出,可以得到直观的信息.你将看到,start clock action暂停100毫秒,然后输出一些日志信息,之后无限地重复这个过程.注意一个关键事实,无论什么时间我们的<code>takeLatest</code>函数接收到匹配的action的时候,它会退出当前运行的<code>handleClockAction</code>.如果是暂停的action,什么事情也不做,但是还是要退出当前任何的action,猜猜我们应该怎么做？删除一点代码！暂停的时钟将会自动开始工作,因为<code>takeLatest</code>会退出当前的<code>handleClockAction</code>,不管时钟是向前还是向后运行,时钟都会停止.<br>确信你理解<code>takeLatest</code>的关键特性.在<code>handleClockAction</code>中做出合适的改变.应该想下面这样做:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>现在让我们在循环内真正的dispatch一个action.<br>（旁白：我们没有实际dispatch一个action，仅仅请求中间件来做这件事,暂时不要担心,我后面会解释清楚的.)</p>
<p>在Saga里面dispatch一个action,我们要使用<code>put</code> side effects,添加一行代码到duck文件里.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; put &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></div></pre></td></tr></table></figure>
<hr>
<p>通过<code>put</code>请求一个dispatch的action,简单的使用<code>yield put({ type: &#39;hi&#39;, data: &#39;I am an action&#39; })</code>就可以了.意思是在<code>put</code>里,可以调用一个action creator 返回一个单纯对象,像这样<code>yield put(someAction())</code>.(在javascript中函数的参数会立即求值).还记得我们在开始创建的那些redux action吗？我们要使用一个,转到while循环,试试<code>put</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())<span class="comment">//注意这一句</span></div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>在你的浏览器里试试.注意在SVG下面的时钟时间是递增的.</p>
<p>为了让时钟后退,可以重用start 时钟的大部分代码.</p>
<p>下面是回退的代码:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(decrementMilliseconds())<span class="comment">//递减</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>现在测试一下所有的saga actions,确保每件事情都工作正常.如果工作不正常,那绝对是你的错,不是我的错.开个玩笑.(译者:后面几句没有翻译)</p>
<p>激动人心的时刻是运行saga代码并且通过实验学到的了一些东西.一个提示：<code>delay</code>是阻塞的,其他的effect语句都是非阻塞的.试着使用<code>for</code>循环.要么把<code>while</code>条件改为false.我们已经放弃了promise的世界,现在我们可以使用这些简单的,可预测的,原生的javascript来表现出所有的控制流语句.</p>
<p>好了,把saga代码恢复到上面的样子.</p>
<p>做好了上面的恢复,我的saga代码已经完成,可以操作了(注意事项：在最终版本上,我已经把代码重新组织了一下,以便于阅读).</p>
<h2 id="Saga’s的方式处理异步操作"><a href="#Saga’s的方式处理异步操作" class="headerlink" title="Saga’s的方式处理异步操作"></a>Saga’s的方式处理异步操作</h2><p>好了.现在让我们再做一些事情,让我们谈谈代码是怎么工作的.Redux Saga中核心的概念是:我们实际没有像dispatch一个action到store一样执行异步操作.替代方法是:我们yield异步操作到saga middleware,然后middleware执行他们.简单的说,我们给Saga一个指示,告诉他我们希望发生什么.这些异步操作描述是遵循标准generator输出的单纯对象:<code>{value:any,done:boolean}</code>,这和我们在第一部分看到的完全一样.<br>例如,<code>yield put</code>发送一个对象到中间件,这个中间件包含一个action对象,可以dispatch一些内容给我们(译者:这个地方有点绕,其实是在异步操作完成以后,需要再次dispatch返回的结果,从而改变state，这样我们的组件才可以根据state的改变来渲染效果,例如从远程资源请求数据,通常都需要把整个操作分成几步来完成,每一步要改变不同的state,在dispatch中再dispatch)这样定义异步数据流有很多好处,其中之一是可测试性.我们可以很简单的在每一个side effect返回中间件的时候创建断言(继续关注后续的内容,有测试的深入介绍)</p>
<p> 我们应该遵循redux-saga的最佳实践,做些小小的更新,从redux-saga/effects中导入<code>call</code>,把<code>yield delay(100)</code>改为<code>yield call(delay,100)</code>.因为我们只想返回side-effects到saga中间件,saga提供了<code>call</code>effect把non-effects转变为effects.与仅仅yield<code>delay</code>自己(promise对象)不同,我们通过<code>call</code>把<code>delay</code>转变为effect,然后yield它.所有的non-effect都应该做相同的处理.<code>call</code>的语法调用一个函数,并且传递参数列表.例如:<code>yield call(fetch,url,options)</code>.最后,注意,<code>call</code>可以被promise对象,generators,或者函数使用.</p>
<h2 id="代码不要太丑陋"><a href="#代码不要太丑陋" class="headerlink" title="代码不要太丑陋"></a>代码不要太丑陋</h2><p> 我们需要创建一个文件作为app的配置,包含一些常量.为什么不叫做“config.js”在/src目录下创建,粘贴下面的内容.</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">const</span> MAX_RADIUS = <span class="number">40</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> hands = [  </div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">144000</span>, <span class="attr">maxTicks</span>: <span class="number">1</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">36000</span>, <span class="attr">maxTicks</span>: <span class="number">4</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">12000</span>, <span class="attr">maxTicks</span>: <span class="number">3</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">2000</span>, <span class="attr">maxTicks</span>: <span class="number">6</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">400</span>, <span class="attr">maxTicks</span>: <span class="number">5</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">100</span>, <span class="attr">maxTicks</span>: <span class="number">4</span> &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> STROKE_WIDTH = MAX_RADIUS / hands.length</div><div class="line"></div><div class="line">hands = hands.map(<span class="function">(<span class="params">hand, idx</span>) =&gt;</span> &#123;  </div><div class="line">  <span class="keyword">const</span> radius = STROKE_WIDTH * (hands.length - idx)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    ...hand,</div><div class="line">    radius,</div><div class="line">    <span class="attr">circumference</span>: <span class="number">2</span> * <span class="built_in">Math</span>.PI * radius,</div><div class="line">    <span class="attr">alpha</span>: <span class="number">1</span> - idx / hands.length</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> CLOCK_HANDS = hands</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> MINIMUM_MS = <span class="number">100</span></div></pre></td></tr></table></figure>
<hr>
<p> 这里面都有什么内容？让我解释一下,它是一组常量和计算量,描述SVG的外观.<br> 我不会详细讲这个内容,不是这里的重点.</p>
<p> 好了,现在我们的saga代码已经就绪,我们也定义了所有SVG需要的配置文件.再更新一下SVG内容,好完成app.jsx的代码.</p>
<h2 id="完成-HIM"><a href="#完成-HIM" class="headerlink" title="完成 HIM"></a>完成 HIM</h2><p> 下面是目前的app.jsx代码<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; incrementMilliseconds, decrementMilliseconds, resetClock, startClock, pauseClock, rewindClock &#125; <span class="keyword">from</span> <span class="string">'duck'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  </div><div class="line">  render () &#123;</div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      milliseconds,</div><div class="line">      incrementMilliseconds,</div><div class="line">      decrementMilliseconds,</div><div class="line">      resetClock,</div><div class="line">      startClock,</div><div class="line">      pauseClock,</div><div class="line">      rewindClock</div><div class="line">    &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;svg onClick=&#123; incrementMilliseconds &#125; onDoubleClick=&#123; resetClock &#125; onMouseLeave=&#123; decrementMilliseconds &#125;</div><div class="line">          className="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="500"&gt;</div><div class="line">          &lt;circle cx="50" cy="50" r=&#123; 30 &#125; stroke=&#123; 'rgba(1,1,1,1)' &#125; fill="orange" /&gt;</div><div class="line">        &lt;/svg&gt;</div><div class="line">        &lt;p&gt;&#123; milliseconds &#125;&lt;/p&gt;</div><div class="line">        &lt;p&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; startClock &#125;&gt;Start Clock&lt;/button&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; pauseClock &#125;&gt;Pause Clock&lt;/button&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; rewindClock &#125;&gt;Rewind Clock&lt;/button&gt;</div><div class="line">        &lt;/p&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default connect(state =&gt; (&#123;  </div><div class="line">  milliseconds: state.milliseconds</div><div class="line">&#125;), (&#123;</div><div class="line">  incrementMilliseconds,</div><div class="line">  decrementMilliseconds,</div><div class="line">  resetClock,</div><div class="line">  startClock,</div><div class="line">  pauseClock,</div><div class="line">  rewindClock</div><div class="line">&#125;))(Clock)</div></pre></td></tr></table></figure></p>
<hr>
<p> 我们需要导入conifg内容,通过props传递到组件.删除一些不必要的导入文件.不再直接调用特定的actions,因为我们仅仅在saga中发出action.更新一下代码.<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; startClock, rewindClock, pauseClock, resetClock &#125; <span class="keyword">from</span> <span class="string">'duck'</span>  </div><div class="line"><span class="keyword">import</span> &#123; CLOCK_HANDS, STROKE_WIDTH &#125; <span class="keyword">from</span> <span class="string">'config'</span></div></pre></td></tr></table></figure></p>
<hr>
<p> 现在我们有了数据,可以在SVG内画出漂亮的圆环.简单点的说我们使用同心圆代表小时/分钟/秒.时间流逝的时候,改变每一个圆环的长度.为了做SVG图片,使用了一些小技巧<a href="https://css-tricks.com/svg-line-animation-works/" target="_blank" rel="external">CSS Trick blog post</a></p>
<p> 我们不再通过props手段传递millseconds字段.每次更新milliseconds时,我们计算每一个时钟指针的位置.这像是烦人的数学计算.基本上我们遍历每一个指针,然后在下一个指针重复同样的过程,(时针就减掉小时的整倍好秒数,分钟和秒一样处理),把剩余的时间传递给下去.最小的指针对应的最小的精度单位,100ms(config.js中的MAXIMUM_MS),更新你的<code>connect</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function"><span class="params">state</span> =&gt;</span> &#123;  </div><div class="line">  <span class="keyword">const</span> currentTime = state.milliseconds</div><div class="line">  <span class="keyword">let</span> remainingTime = currentTime</div><div class="line"></div><div class="line">  <span class="keyword">const</span> getTicks = <span class="function">(<span class="params">hands, timeRemaining</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> [hand, ...tailHands] = hands</div><div class="line">    hand.ticks = <span class="built_in">Math</span>.floor(timeRemaining / hand.ms)</div><div class="line">    <span class="keyword">return</span> tailHands.length ? [hand, ...getTicks(tailHands, timeRemaining % hand.ms)] : [hand]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> hands = getTicks(CLOCK_HANDS, remainingTime)</div><div class="line">    .map(<span class="function">(<span class="params">hand, idx</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> offset = state.milliseconds &gt;= hand.ms ? <span class="number">1</span> : <span class="number">0</span></div><div class="line">      <span class="keyword">const</span> position = hand.circumference - ((hand.ticks + offset) / hand.maxTicks * hand.circumference)</div><div class="line"></div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...hand,</div><div class="line">        position</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    hands</div><div class="line">  &#125;</div><div class="line">&#125;, (&#123;</div><div class="line">  startClock,</div><div class="line">  rewindClock,</div><div class="line">  resetClock,</div><div class="line">  pauseClock</div><div class="line">&#125;))(Clock)</div></pre></td></tr></table></figure>
<hr>
<p> 现在我们需要在组件中导入新的<code>指针</code>属性.在渲染方法中给props解构赋值:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">render () &#123;  </div><div class="line"><span class="keyword">const</span> &#123;</div><div class="line">  hands,</div><div class="line">  startClock,</div><div class="line">  rewindClock,</div><div class="line">  resetClock,</div><div class="line">  pauseClock</div><div class="line">&#125; = <span class="keyword">this</span>.props</div></pre></td></tr></table></figure>
<hr>
<p> 为了最终版本,我们做一下最终的改变.我们更新SVG,启动<code>onMouseEnter</code>,回退<code>onMouseLeave</code>,暂停<code>onClick</code>.添加一下这些变化.</p>
<p> （译者：这一段也不翻了,原作者要喝伏特加).</p>
<p>  做好了吧,现在我们在SVG内创建同心圆,遍历<code>hands</code>并且创建<code>&lt;circle&gt;</code>SVG元素,使用我们的计算值设置每个指针的半径,位置和透明度.</p>
<p>  这是最终的更新,下面是<code>render()</code>函数返回的内容：<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">return</span> (  </div><div class="line">  &lt;svg onMouseEnter=&#123; startClock &#125; onMouseLeave=&#123; rewindClock &#125; onDoubleClick=&#123; resetClock &#125;</div><div class="line">    onClick=&#123; pauseClock &#125; className="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="500"&gt;</div><div class="line">    &#123; hands.map((hand, index) =&gt; &#123;</div><div class="line">      const &#123; radius, circumference, position, alpha &#125; = hand</div><div class="line">      return (</div><div class="line">        &lt;circle key=&#123; index &#125; cx="50" cy="50" r=&#123; radius &#125; stroke=&#123; `rgba(1,1,1,$&#123;alpha&#125;)` &#125; fill="none"</div><div class="line">          strokeWidth=&#123; STROKE_WIDTH &#125; strokeDasharray=&#123; circumference &#125; strokeDashoffset=&#123; position &#125; /&gt;</div><div class="line">      )</div><div class="line">    &#125;) &#125;</div><div class="line">  &lt;/svg&gt;</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p> 忘了件事情,返回duck.js文件,从config导入MINIMUM_MS:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; MINIMUM_MS &#125; <span class="keyword">from</span> <span class="string">'config'</span></div></pre></td></tr></table></figure>
<hr>
<p> 现在在delay函数调用时使用<code>MINIMUM_MS</code>替换<code>1000</code>.<br> 时钟每100ms就会滴答一下:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(MINIMUM_MS)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(MINIMUM_MS)</div><div class="line">      <span class="keyword">yield</span> put(decrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p> 看看在saga中控制流程的逻辑有多容易？</p>
<h2 id="给你的时钟上发条"><a href="#给你的时钟上发条" class="headerlink" title="给你的时钟上发条"></a>给你的时钟上发条</h2><p> 现在给这段代码拧发条,<code>npm start</code>,浏览器中打开localhost:8080.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-a754703b38f36735.gif?imageMogr2/auto-orient/strip" alt="redux-saga-clock.gif"></p>
<p> 这是一个能暂停,恢复,向前,向后和重置.看上去也很酷.</p>
<h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p> 感谢阅读这个教程,我们涉及到了js generator和Redux saga的有关内容.我希望能帮助你理解怎么使用Redux Saga,同时还有使用的好处和背后的合理性.</p>
<p> 如果你想了解更多的Redux Saga的内容,这里还有一些很好的教程.下面是我开始学习redux saga的时候帮助我入门的内容.</p>
<ul>
<li><a href="http://yelouafi.github.io/redux-saga/docs/introduction/BeginnerTutorial.html" target="_blank" rel="external">Redux的官方文档</a>是无价之宝</li>
<li><a href="http://wecodetheweb.com/2016/01/23/handling-async-in-redux-with-sagas/" target="_blank" rel="external">Niels Gerritsen’s的Redux Saga入门教程</a>.这是我最开始学习Redux saga的教程之一,结构很清晰,帮助我跨国一些概念障碍.</li>
<li><a href="http://joelhooks.com/blog/2016/03/20/build-an-image-gallery-using-redux-saga" target="_blank" rel="external">Joel Hooks的教程</a></li>
<li><a href="http://jaysoo.ca/2016/01/03/managing-processes-in-redux-using-sagas/" target="_blank" rel="external">Jack Hsu的文章</a>.我的实例实际是这个教程的扩展.</li>
</ul>
<p>我也喜欢下面的文章,解密generators,激励我写这篇文章,没有这两个文章,我都不知道generators讲的是什么玩意.</p>
<ul>
<li><a href="https://davidwalsh.name/es6-generators" target="_blank" rel="external">David Walsh的博客,关于ES6 generator的内容,作者是kyle Simpson</a></li>
<li><a href="http://www.2ality.com/2015/03/es6-generators.html2ality" target="_blank" rel="external">Axel Rauschmeyer的ES6 generators的文章</a></li>
</ul>
<p>感谢阅读!</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/翻译/' title=''>翻译</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/">Redux</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-Awesome Redux" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/Awesome Redux/">Redux-awesome</a>
  

      </h3>
      <div class="repo-list-description">
        
          <h1 id="Awesome-Redux"><a href="#Awesome-Redux" class="headerlink" title="Awesome Redux "></a>Awesome Redux <a href="https://github.com/sindresorhus/awesome" target="_blank" rel="external"><img src="https://cdn.rawgit.com/sindresorhus/awesome/d7305f38d29fed78fa85652e3a63e154dd8e8829/media/badge.svg" alt="Awesome"></a></h1><blockquote>
<p>List of repositories which use Redux</p>
</blockquote>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a><a href="https://github.com/reactjs/redux" target="_blank" rel="external">Redux</a></h2><h2 id="Documentation-of-Redux"><a href="#Documentation-of-Redux" class="headerlink" title="Documentation of Redux"></a><a href="http://redux.js.org" target="_blank" rel="external">Documentation of Redux</a></h2><h2 id="Documentation-of-Redux-Simple-Chinese-version"><a href="#Documentation-of-Redux-Simple-Chinese-version" class="headerlink" title="Documentation of Redux(Simple Chinese version)"></a><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="external">Documentation of Redux(Simple Chinese version)</a></h2><h2 id="Documentation-of-Redux-Russian-version-Work-in-progress"><a href="#Documentation-of-Redux-Russian-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Russian version) (Work in progress)"></a><a href="https://rajdee.gitbooks.io/redux-in-russian/" target="_blank" rel="external">Documentation of Redux(Russian version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Traditional-Chinese-version"><a href="#Documentation-of-Redux-Traditional-Chinese-version" class="headerlink" title="Documentation of Redux(Traditional Chinese version)"></a><a href="http://chentsulin.github.io/redux/index.html" target="_blank" rel="external">Documentation of Redux(Traditional Chinese version)</a></h2><h2 id="Documentation-of-Redux-Japanese-version-Work-in-progress"><a href="#Documentation-of-Redux-Japanese-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Japanese version) (Work in progress)"></a><a href="https://github.com/jposts/redux" target="_blank" rel="external">Documentation of Redux(Japanese version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Portuguese-version-Work-in-progress"><a href="#Documentation-of-Redux-Portuguese-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Portuguese version) (Work in progress)"></a><a href="https://github.com/franzejr/redux-in-portuguese/" target="_blank" rel="external">Documentation of Redux(Portuguese version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Spanish-version-Work-in-progress"><a href="#Documentation-of-Redux-Spanish-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Spanish version) (Work in progress)"></a><a href="https://sergiodxa.gitbooks.io/redux-en-espanol/content/" target="_blank" rel="external">Documentation of Redux(Spanish version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Korean-version"><a href="#Documentation-of-Redux-Korean-version" class="headerlink" title="Documentation of Redux(Korean version)"></a><a href="http://dobbit.github.io/redux/" target="_blank" rel="external">Documentation of Redux(Korean version)</a></h2><h2 id="Documentation-of-Redux-Sinhala-සිංහල-version-Work-in-progress"><a href="#Documentation-of-Redux-Sinhala-සිංහල-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Sinhala|සිංහල version) (Work in progress)"></a><a href="https://sandaruny.github.io/redux-sin/" target="_blank" rel="external">Documentation of Redux(Sinhala|සිංහල version)</a> (Work in progress)</h2><blockquote>
<p>Predictable state container for JavaScript apps</p>
</blockquote>
<h2 id="Marks"><a href="#Marks" class="headerlink" title="Marks"></a>Marks</h2><ul>
<li><a href="http://isomorphic.net" target="_blank" rel="external">Universal (Isomorphic)</a> - :metal:</li>
<li><a href="https://github.com/gaearon/react-transform-hmr" target="_blank" rel="external">Hot Reload</a> - :fire:</li>
</ul>
<h3 id="Presentations"><a href="#Presentations" class="headerlink" title="Presentations"></a>Presentations</h3><ul>
<li><a href="https://www.youtube.com/watch?v=d0oUGmSE6IY&amp;list=PLJBrYU54JD2pTblB20OmV7GL6H5J-p2g8" target="_blank" rel="external">Let’s learn React and Redux with Javascript’s new ES6 syntax, from Beginner to Intermediate to Advanced.</a></li>
<li><a href="https://github.com/chentsulin/redux-intro" target="_blank" rel="external">A introduction about Redux</a></li>
<li><a href="https://speakerdeck.com/chrisui/real-world-redux" target="_blank" rel="external">Real World Redux</a></li>
<li><a href="http://slides.com/omnidan/hor" target="_blank" rel="external">The power of higher-order reducers</a></li>
<li><a href="http://slides.com/evanschultz-1/reactive-angular" target="_blank" rel="external">Reactive Architecture with Redux and Angular</a></li>
<li><a href="http://slides.com/vladimirnovick/reduxinternals" target="_blank" rel="external">Redux Internals</a></li>
<li><a href="http://slides.com/scottprue-2/deck" target="_blank" rel="external">Replacing Angular 1 with React and Redux</a></li>
<li><a href="http://slides.com/cguedes/a-tour-on-react-ecosystem" target="_blank" rel="external">A tour on the React ecosystem</a></li>
<li><a href="http://slides.com/jenyaterpil/redux-from-twitter-hype-to-production#/" target="_blank" rel="external">Redux from Twitter hype to production</a></li>
</ul>
<hr>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><ul>
<li><a href="https://github.com/redux-effects" target="_blank" rel="external">Many tools and middlewares</a></li>
<li><a href="https://github.com/paulwittmann/redux-offline-docs" target="_blank" rel="external">Redux offline docs</a></li>
<li><a href="https://github.com/staltz/flux-challenge" target="_blank" rel="external">Flux challenge</a></li>
<li><a href="https://github.com/andrewngu/sound-redux" target="_blank" rel="external">Sound Redux - a simple Soundcloud client</a></li>
<li><a href="https://github.com/rwieruch/favesound-redux" target="_blank" rel="external">Favesound Redux - SoundCloud Client for Artists</a></li>
<li><a href="https://github.com/ipselon/structor" target="_blank" rel="external">Structor - a user interface builder for React</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external">generator-redux - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external">generator-reactapp - Yeoman generator for react app with redux</a></li>
<li><a href="http://rekit.js.org" target="_blank" rel="external">Rekit - Toolkit for building scalable web apps with React, Redux and React-router</a></li>
<li><a href="https://github.com/FormidableLabs/spectacle" target="_blank" rel="external">Spectacle - ReactJS based Presentation Library</a></li>
<li><a href="https://github.com/tayiorbeii/egghead.io_redux_course_notes" target="_blank" rel="external">Notes (and partial transcription) of Dan Abramov’s Redux course videos on http://egghead.io</a></li>
<li><a href="https://github.com/dwyl/learn-redux" target="_blank" rel="external">Comprehensive Notes for Learning (how to use) Redux to manage state in your Web/Mobile Apps</a></li>
<li><a href="https://maxfarseer.gitbooks.io/redux-course-ru/content/" target="_blank" rel="external">React Redux [RU tutorial]</a></li>
<li><a href="https://tonyhb.gitbooks.io/redux-without-profanity/content/index.html" target="_blank" rel="external">Redux without profanity</a></li>
<li><a href="https://medium.com/@sapegin/react-and-redux-single-page-applications-resources-22cd859b0c1d#.o66rolp0p" target="_blank" rel="external">React and Redux Single Page Applications Resources</a></li>
<li><a href="https://github.com/markerikson/redux-ecosystem-links" target="_blank" rel="external">A categorized list of Redux-related addons, libraries, and utilities</a></li>
<li><a href="http://makeitopen.com/tutorials/building-the-f8-app/planning/" target="_blank" rel="external">Building the F8 2016 App (Redux, GraphQL, React Native)</a></li>
<li><a href="https://github.com/salsita/redux-elm" target="_blank" rel="external">The Elm Architecture in JavaScript</a></li>
</ul>
<hr>
<h3 id="Articles-And-Tutorials"><a href="#Articles-And-Tutorials" class="headerlink" title="Articles And Tutorials"></a>Articles And Tutorials</h3><ul>
<li><a href="https://app.pluralsight.com/library/courses/react-redux-react-router-es6" target="_blank" rel="external">Building Applications with React and Redux in ES6 on Pluralsight</a></li>
<li><a href="http://davidandsuzi.com/writing-a-basic-app-in-redux" target="_blank" rel="external">Writing a Basic App in Redux</a></li>
<li><a href="https://github.com/happypoulp/redux-tutorial" target="_blank" rel="external">Learn how to use Redux step by step</a></li>
<li><a href="https://medium.com/@bananaoomarang/handcrafting-an-isomorphic-redux-application-with-love-40ada4468af4" target="_blank" rel="external">Tutorial: Handcrafting an Isomorphic Redux Application (With Love)</a></li>
<li><a href="http://www.jchapron.com/2015/08/14/getting-started-with-redux" target="_blank" rel="external">0 to 1 : Getting started with Redux</a></li>
<li><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="external">Redux Chinese Document</a></li>
<li><a href="https://github.com/chentsulin/redux" target="_blank" rel="external">Redux Document (Traditional Chinese)</a></li>
<li><a href="https://medium.com/@cpojer/relay-and-routing-36b5439bad9" target="_blank" rel="external">Relay and Routing</a></li>
<li><a href="https://medium.com/@meagle/understanding-87566abcfb7a" target="_blank" rel="external">Understanding Redux Middleware</a></li>
<li><a href="https://www.livecoding.tv/ekosz/videos" target="_blank" rel="external">Several videos about Redux + Falcor</a> and <a href="https://github.com/ekosz/postcard-sender" target="_blank" rel="external">Example code</a></li>
<li><a href="http://briantroncone.com/?p=529" target="_blank" rel="external">Redux Middleware: Behind the Scenes</a></li>
<li><a href="https://github.com/erikras/ducks-modular-redux" target="_blank" rel="external">A proposal for bundling reducers, action types and actions when using Redux</a></li>
<li><a href="http://teropa.info/blog/2015/09/10/full-stack-redux-tutorial.html" target="_blank" rel="external">Full-Stack Redux Tutorial - A Comprehensive Guide to Test-First Development with Redux, React, and Immutable</a> Source <a href="https://github.com/teropa/redux-voting-server" target="_blank" rel="external">Server</a> + <a href="https://github.com/teropa/redux-voting-client" target="_blank" rel="external">Client</a></li>
<li><a href="https://medium.com/lexical-labs-engineering/redux-best-practices-64d59775802e" target="_blank" rel="external">Redux best practices</a></li>
<li><a href="http://blog.workshape.io/the-3ree-stack-react-redux-rethinkdb-express-js" target="_blank" rel="external">The 3REE Stack: React + Redux + RethinkDB + Express.js</a></li>
<li><a href="http://engineering.wework.com/process/2015/10/01/react-reflux-to-redux" target="_blank" rel="external">React Tutorial - Converting Reflux to Redux</a></li>
<li><a href="https://github.com/yildizberkay/redux-example" target="_blank" rel="external">Redux example using 500px API (with ES6)</a></li>
<li><a href="http://blog.joanboixados.com/building-a-boilerplate-for-a-koa-redux-react-application-including-webpack-mocha-and-sass/" target="_blank" rel="external">Building a boilerplate for a Koa, Redux, React application including Webpack, Mocha and SASS</a> - This article explains in detail how <a href="https://github.com/mezod/boilerplate-koa-redux-react" target="_blank" rel="external">this koa-redux-react-boilerplate</a> was built and the technologies it uses.</li>
<li><a href="http://jaysoo.ca/2015/09/26/typed-react-and-redux" target="_blank" rel="external">Typed React and Redux</a></li>
<li><a href="https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6#.8k7536uqu" target="_blank" rel="external">A cartoon intro to Redux</a></li>
<li><a href="http://jamesknelson.com/join-the-dark-side-of-the-flux-responding-to-actions-with-actors" target="_blank" rel="external">Join The Dark Side Of The Flux: Responding to Actions with Actors</a></li>
<li><a href="http://jamesknelson.com/can-i-dispatch-multiple-actions-from-redux-action-creators" target="_blank" rel="external">Can I dispatch multiple actions from Redux action creators?</a></li>
<li><a href="http://www.youhavetolearncomputers.com/blog/2015/9/15/a-conceptual-overview-of-redux-or-how-i-fell-in-love-with-a-javascript-state-container" target="_blank" rel="external">Understanding Redux (or, How I Fell in Love with a JavaScript State Container)</a></li>
<li><a href="http://reactjsnews.com/your-first-redux-app" target="_blank" rel="external">Your First Immutable React &amp; Redux App</a></li>
<li><a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">Getting Started with Redux - Egghead’s video lessons from Dan Abramov</a></li>
<li><a href="https://egghead.io/series/react-testing-cookbook" target="_blank" rel="external">Redux Testing Video Lessons - a few short Egghead video lessons (some free, some require a subscription)</a></li>
<li><a href="https://medium.com/@dorsha/implement-login-modal-with-redux-reselect-and-reactjs-668c468bcbe3#.lnwisap8c" target="_blank" rel="external">Implementing a smart Login Modal with Redux, reselect and ReactJS</a></li>
<li><a href="http://www.sitepoint.com/how-to-build-a-todo-app-using-react-redux-and-immutable-js" target="_blank" rel="external">How to Build a Todo App Using React, Redux, and Immutable.js</a></li>
<li><a href="https://voice.kadira.io/rethinking-redux-f1e96daba60c#.hp5v516ie" target="_blank" rel="external">Rethinking Redux</a></li>
<li><a href="http://jaysoo.ca/2016/01/03/managing-processes-in-redux-using-sagas" target="_blank" rel="external">Managing Side Effects In React + Redux Using Sagas</a></li>
<li><a href="https://auth0.com/blog/2016/01/04/secure-your-react-and-redux-app-with-jwt-authentication" target="_blank" rel="external">Secure Your React and Redux App with JWT Authentication</a></li>
<li><a href="https://medium.com/@thisbejim/getting-started-with-redux-and-graphql-8384b3b25c56#.3anuh1m7x" target="_blank" rel="external">Getting started with Redux and GraphQL</a></li>
<li><a href="http://www.sitepoint.com/data-flows-angular-2-redux" target="_blank" rel="external">Data Flows with Angular 2 and Redux</a></li>
<li><a href="http://jamesknelson.com/simple-routing-redux-react" target="_blank" rel="external">Simple Routing with Redux and React</a></li>
<li><a href="https://riadbenguella.com/2015/12/28/redux-nowadays-from-actions-creators-to-sagas/" target="_blank" rel="external">Redux nowadays : From actions creators to sagas</a></li>
<li><a href="http://konkle.us/master-complex-redux-workflows-with-sagas" target="_blank" rel="external">Master Complex Redux Workflows with Sagas</a></li>
<li><a href="http://blog.jhades.org/angular-2-application-architecture-building-flux-like-apps-using-redux-and-immutable-js-js" target="_blank" rel="external">Angular 2 Application Architecture - Building Flux Apps with Redux and Immutable.js</a></li>
<li><a href="http://www.toptal.com/react/react-redux-and-immutablejs" target="_blank" rel="external">React, Redux and Immutable.js: Ingredients for Efficient Web Applications</a></li>
<li><a href="https://shellmonger.com/2016/02/16/an-introduction-to-react-redux-part-1" target="_blank" rel="external">An Introduction to React Redux (Part 1)</a></li>
<li><a href="https://shellmonger.com/2016/02/19/an-introduction-to-react-redux-part-2" target="_blank" rel="external">An Introduction to React Redux (Part 2)</a></li>
<li><a href="http://jaysoo.ca/2016/02/28/organizing-redux-application" target="_blank" rel="external">Rules For Structuring (Redux) Applications</a></li>
<li><a href="http://toranbillups.com/blog/archive/2016/01/22/redux-for-the-very-beginner" target="_blank" rel="external">Redux for the very beginner</a></li>
<li><a href="http://www.zohaib.me/redux-call-service-async/" target="_blank" rel="external">Redux - Calling web service asynchronously</a></li>
<li><a href="http://swizec.com/blog/animating-with-react-redux-and-d3/swizec/6775" target="_blank" rel="external">Animating with React, Redux, and d3</a></li>
<li><a href="http://joelhooks.com/blog/2016/03/20/build-an-image-gallery-using-redux-saga/" target="_blank" rel="external">Build an Image Gallery Using React, Redux and redux-saga</a></li>
<li><a href="https://medium.com/@matt.krick/introducing-redux-operations-332ab56e468b#.7e30nsxne" target="_blank" rel="external">Introducing redux-operations</a></li>
<li><a href="https://medium.com/@matt.krick/solving-redux-s-shortcoming-in-150-locs-540979ce6cf9#.sw0s478j6" target="_blank" rel="external">Solving Redux’s shortcoming in 150 LOCs</a></li>
<li><a href="https://medium.com/@rajaraodv/the-anatomy-of-a-react-redux-app-759282368c5a#.h05vq2uaj" target="_blank" rel="external">The Anatomy Of A React Redux App</a></li>
<li><a href="http://www.theodo.fr/blog/2016/03/getting-started-with-react-redux-and-immutable-a-test-driven-tutorial-part-2/" target="_blank" rel="external">Getting Started with React, Redux and Immutable: a Test-Driven Tutorial (Part 2)</a></li>
<li><a href="https://css-tricks.com/learning-react-redux/" target="_blank" rel="external">Leveling Up with React: Redux</a></li>
<li><a href="http://btholt.github.io/complete-intro-to-react/" target="_blank" rel="external">Complete intro to react</a></li>
<li><a href="https://medium.com/@nicktho/recreating-redux-behind-the-magic-curtain-c21edd542c9c#.a93sgufyi" target="_blank" rel="external">Recreating Redux — Behind the magic curtain</a></li>
<li><a href="https://stormpath.com/blog/build-a-redux-powered-react-application/" target="_blank" rel="external">Let’s Build a Redux Powered React Application</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/intro-to-react-redux-pros" target="_blank" rel="external">Deep Introduction to Redux - Seriese 1/3</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/redux-server-rendering-react-router-universal-web-app" target="_blank" rel="external">Universal Rendering with Redux and React-Router - Seriese 2/3</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/redux-unit-test-mocha-mocking" target="_blank" rel="external">Unit Testing Redux Apps - Seriese 3/3</a></li>
<li><a href="https://zen.id.au/using-aurelia-and-redux-together-for-good-times-all-around/" target="_blank" rel="external">Using Aurelia and Redux together for good times all around</a></li>
<li><a href="https://www.reindex.io/blog/redux-and-relay/" target="_blank" rel="external">Comparing Redux and Relay</a></li>
<li><a href="https://egghead.io/courses/building-react-applications-with-idiomatic-redux" target="_blank" rel="external">Building React Applications with Idiomatic Redux</a></li>
<li><a href="http://www.robinwieruch.de/the-soundcloud-client-in-react-redux" target="_blank" rel="external">The SoundCloud Client in React + Redux</a></li>
<li><a href="https://github.com/berwin/Blog/issues/4" target="_blank" rel="external">深入浅出 Redux</a></li>
<li><a href="http://houssein.me/redux/immutablejs/angular2/2016/07/04/angular2-with-immutablejs-and-redux.html" target="_blank" rel="external">Building Angular 2 applications with Immutable.js and Redux</a></li>
<li><a href="http://blog.ng-book.com/introduction-to-redux-with-typescript-and-angular-2/" target="_blank" rel="external">Tutorial: Building Redux in TypeScript with Angular 2</a></li>
<li><a href="http://blog.rangle.io/react-and-redux-performance-with-reselect/" target="_blank" rel="external">Improving React and Redux performance with Reselect</a></li>
<li><a href="http://blog.rangle.io/recipes-for-redux/" target="_blank" rel="external">Recipes for Redux</a></li>
<li><a href="http://blog.rangle.io/getting-started-with-redux-and-angular-2/" target="_blank" rel="external">Getting Started with Redux &amp; Angular 2</a></li>
<li><a href="https://el-tramo.be/blog/react-swift/" target="_blank" rel="external">Universal/Isomorphic React+Redux on a Swift Web Backend</a></li>
<li><a href="http://engineering.datadoghq.com/redux-doghouse--creating-reusable-react-redux-components-through-scoping/" target="_blank" rel="external">Creating Reusable React-Redux Components Through Scoping</a></li>
<li><a href="https://github.com/lewis617/react-redux-tutorial" target="_blank" rel="external">React+Redux系列教程</a></li>
<li><a href="https://lewis617.github.io/2016/11/20/r2-book/" target="_blank" rel="external">书籍：《React 与 Redux 开发实例精解》</a></li>
</ul>
<hr>
<h3 id="Boilerplate"><a href="#Boilerplate" class="headerlink" title="Boilerplate"></a>Boilerplate</h3><ul>
<li><a href="http://redux-minimal.js.org/" target="_blank" rel="external"><strong>redux-minimal</strong> - Minimalist react-redux starter kit which let’s you build rich real world apps</a></li>
<li><a href="https://github.com/nicksp/redux-webpack-es6-boilerplate" target="_blank" rel="external"><strong>Modern and Scalable React/Redux Boilerplate</strong> - Flexible starter kit using Webpack 2 (tree-shaking) / React Hot Loader v3 / Code Splitting for React Router / PostCSS / CSS Modules / custom <em>Ducks pattern</em> app architecture / best practices / Sentry error tracking / Enzyme test environment</a> :rocket:</li>
<li><a href="https://github.com/jaredpalmer/react-production-starter" target="_blank" rel="external"><strong>react-production-starter</strong> - React boilerplate with isomorphic rendering, async react-router routes, async redux reducers, async data fetching, and code-splitting.</a> :metal: :fire:</li>
<li><a href="https://github.com/hashnode/mern-starter" target="_blank" rel="external"><strong>mern.io</strong> - Simple full-stack boilerplate to get started with building isomorphic/universal apps, handles api part and also offers a cli to generate the boilerplate</a> :metal: :fire:</li>
<li><a href="https://github.com/combine/universal-react-redux" target="_blank" rel="external"><strong>universal-react-redux</strong> - Opinionated Universal React/Redux/Webpack with HMR. Continually updated.</a> :metal: :fire:</li>
<li><a href="https://github.com/coryhouse/react-slingshot" target="_blank" rel="external"><strong>react-slingshot</strong> - React Redux Starter Kit with hot reloading, tests and example app</a></li>
<li><a href="https://github.com/knowbody/react-redux-boilerplate" target="_blank" rel="external"><strong>react-redux-boilerplate</strong> - React Redux Boilerplate</a></li>
<li><a href="https://github.com/Keats/react-boilerplate" target="_blank" rel="external"><strong>react-boilerplate</strong> - React + Typescript + Sass boilerplate</a></li>
<li><a href="https://github.com/lcjnil/react-redux-scaffold" target="_blank" rel="external"><strong>react-redux-scaffold</strong> - Combination of redux, react-router and ES6+ support</a></li>
<li><a href="https://github.com/tsaiDavid/simple-redux-boilerplate" target="_blank" rel="external"><strong>simple-redux-boilerplate</strong> - Simple and guided React, Redux boilerplate w/ Transform HMR! :fire:</a></li>
<li><a href="https://github.com/Amorino/reactv" target="_blank" rel="external"><strong>reactv</strong> - React Redux example</a></li>
<li><a href="https://github.com/ellbee/redux-boilerplate" target="_blank" rel="external"><strong>redux-boilerplate</strong> - Boilerplate for Redux</a></li>
<li><a href="https://github.com/davezuko/react-redux-starter-kit" target="_blank" rel="external"><strong>react-redux-starter-kit</strong> - Get started with React, Redux, and React-Router.</a></li>
<li><a href="https://github.com/jackielii/simplest-redux-example" target="_blank" rel="external"><strong>simplest-redux-example</strong> - Simplest Redux + React example for beginners</a></li>
<li><a href="https://github.com/anorudes/redux-easy-boilerplate" target="_blank" rel="external"><strong>redux-easy-boilerplate</strong> - React Redux easy boilerplate</a></li>
<li><a href="https://github.com/dictyBase/dicty-redux" target="_blank" rel="external"><strong>dicty-redux</strong> - Starter kit to bootstrap React and Redux (Flux) based web application</a></li>
<li><a href="https://github.com/GordyD/3ree" target="_blank" rel="external"><strong>3ree</strong> - Boilerplate &amp; Demo for Universal Realtime Apps built with React + Redux + RethinkDB + Express</a></li>
<li><a href="https://github.com/rafaelchiti/react_scaffolding" target="_blank" rel="external"><strong>react_scaffolding</strong> - React + React Router 1.0 + Redux + Webpack &amp; Hot Module Replacement</a></li>
<li><a href="https://github.com/aybmab/express-redux-sample" target="_blank" rel="external"><strong>express-redux-sample</strong> - Express-Redux-PassportJs-MySQL Boilerplate</a></li>
<li><a href="https://github.com/GetExpert/redux-blog-example" target="_blank" rel="external"><strong>redux-blog-example</strong> - Redux-Webpack-Babel Blog Platform boilerplate</a></li>
<li><a href="https://github.com/omnidan/redux-undo-boilerplate" target="_blank" rel="external"><strong>redux-undo-boilerplate</strong> - a magical boilerplate with hot reloading and awesome error handling</a></li>
<li><a href="https://github.com/gpbl/redux500" target="_blank" rel="external"><strong>redux500</strong> - The Redux version of isomorphic500</a></li>
<li><a href="https://github.com/survivejs/redux-demo" target="_blank" rel="external"><strong>redux-demo</strong> - Redux port of SurviveJS - Webpack and React Kanban app</a></li>
<li><a href="https://github.com/erikras/react-redux-universal-hot-example" target="_blank" rel="external"><strong>react-redux-universal-hot-example</strong> - A starter boilerplate for a universal webapp using express, react, redux, webpack, and react-hot-loader</a> :metal:</li>
<li><a href="https://github.com/levjj/rde" target="_blank" rel="external"><strong>rde</strong> - Reactive Live Programming Environment</a></li>
<li><a href="https://github.com/cloudmu/react-redux-starter-kit" target="_blank" rel="external"><strong>React Redux Starter Kit</strong> - Yet another React and Redux based web application starter kit</a></li>
<li><a href="https://github.com/sullenor/skeleton" target="_blank" rel="external"><strong>skeleton</strong> - A simple project-stub to show the basic ideas. Also serves you as a quick start for your project (Mori + Redux)</a></li>
<li><a href="https://github.com/zalmoxisus/browser-redux" target="_blank" rel="external"><strong>browser-redux</strong> - Building Chrome apps and cross-browser extensions with Redux and Webpack</a></li>
<li><a href="https://github.com/chicoxyzzy/react-for-hipsters-boilerplate" target="_blank" rel="external"><strong>react-for-hipsters-boilerplate</strong> - Fresh boilerplate with brand new hot reloading confing and other hipster stuff</a></li>
<li><a href="https://github.com/mezod/boilerplate-koa-redux-react" target="_blank" rel="external"><strong>Documented Koa Redux React Webpack boilerplate</strong></a>- The building process of this boilerplate is deeply documented from 0 for learning purposes. <a href="http://blog.joanboixados.com/building-a-boilerplate-for-a-koa-redux-react-application-including-webpack-mocha-and-sass/" target="_blank" rel="external">You can find the docs here</a>.</li>
<li><a href="https://github.com/tuommii/err" target="_blank" rel="external"><strong>err</strong> - Electron, React, Redux-devtools boilerplate for building cross-platform apps.</a></li>
<li><a href="https://github.com/banzay/friends-app-redux" target="_blank" rel="external"><strong>friends-app-redux</strong> - React Redux Universal Hot Example</a></li>
<li><a href="https://github.com/caljrimmer/isomorphic-redux-app" target="_blank" rel="external"><strong>isomorphic-redux-app</strong> - Redux Isomorphic App (with async content)</a></li>
<li><a href="https://github.com/unicorn-standard/starter-kit" target="_blank" rel="external"><strong>starter-kit</strong> - Project boilerplate using React, Redux and Uniloc http://unicornstandard.com/packages/boilerplate.html</a></li>
<li><a href="https://github.com/tngan/loopback-redux-react-boilerplate" target="_blank" rel="external"><strong>loopback-redux-react-boilerplate</strong> - A boilerplate for a Redux-React application using LoopBack</a></li>
<li><a href="https://github.com/tomatau/breko-hub" target="_blank" rel="external"><strong>breko-hub</strong> - <strong>B</strong>abel <strong>Rea</strong>ct <strong>Ko</strong>a <strong>H</strong>ot <strong>U</strong>niversal <strong>B</strong>oilerplate – A simple, clean and consistent boilerplate for creating universal webapps with universal data fetching and SocketIO integration</a></li>
<li><a href="https://github.com/inderps/react-redux-cordova-boilerplate" target="_blank" rel="external"><strong>React Redux Cordova Boilerplate</strong></a></li>
<li><a href="https://github.com/mxstbr/react-boilerplate" target="_blank" rel="external"><strong>react-boilerplate</strong> - Performance orientated, offline-first boilerplate feat. hot-reloading, PostCSS and the best developer experience.</a></li>
<li><a href="https://github.com/choonkending/react-webpack-node" target="_blank" rel="external"><strong>react-webpack-node</strong> - Boilerplate for an universal React + Redux/alt Flux application using Webpack running on a node express server</a></li>
<li>[<strong>Hapi React Starter Kit</strong> - Universal, Redux, Redis, Socket.io, Intl] (<a href="https://github.com/Dindaleon/hapi-react-starter-kit" target="_blank" rel="external">https://github.com/Dindaleon/hapi-react-starter-kit</a>)</li>
<li>[<strong>Universal Redux Template</strong> - A clean, extensible react + redux boilerplate with universal rendering, testing and more] (<a href="https://github.com/mz026/universal-redux-template" target="_blank" rel="external">https://github.com/mz026/universal-redux-template</a>)</li>
<li><a href="https://github.com/colinmeinke/universal-js" target="_blank" rel="external"><strong>universal-js</strong> - A universal Javascript starter kit inc. React, Redux, Redux Dev Tools, Universal Redux Router, CSS Modules, hot module reloading, Babel for ES2015+ and ESLint</a></li>
<li><a href="https://github.com/WapGeaR/redux-react-material-boilerplate" target="_blank" rel="external"><strong>redux-react-material-boilerplate</strong> - Simple boilerplate inc. React, Redux, Hot reload and Material-ui</a></li>
<li><a href="https://github.com/exeto/react-redux-starter" target="_blank" rel="external"><strong>react-redux-starter</strong> - React Redux Starter</a></li>
<li><a href="https://github.com/Pitzcarraldo/reduxible" target="_blank" rel="external"><strong>Reduxible</strong> - The Fast and Easy way to make a React + Redux apps</a></li>
<li><a href="https://github.com/chen844033231/react-workflow" target="_blank" rel="external"><strong>react-workflow</strong> - A large SPA boilerplate for web development built on top of Facebook’s React library,use redux architecture</a></li>
<li><a href="https://github.com/PBRT/reactogo" target="_blank" rel="external"><strong>ReacToGo</strong> - A simple ES6 boilerplate with Redux architecture and ImmutableJS: Hot Reload, React UI Comp, Firebase, Router</a></li>
<li><a href="https://github.com/cristianszwarc/react_crud_localStorage" target="_blank" rel="external"><strong>React/Redux simple CRUD</strong> with persistent state and local async actions (add a manifest file and you get an offline webapp) </a></li>
<li><a href="https://github.com/FredericHeem/starhackit" target="_blank" rel="external"><strong>StarHackIt</strong> - An React/Redux Node full-stack starter kit with authentication and authorization code</a></li>
<li><a href="https://github.com/andrewcoelho/react-seed" target="_blank" rel="external"><strong>React Seed</strong> - A barebones scalable directory structure and package.json for facilitating new React + Redux projects. No fat to trim here!</a></li>
<li>[<strong>React/Redux with Auth boilerplate</strong> - Very simple boilerplate, good for fast creating admin panels / dashboard. Included: React, Redux, ReduxForm, React-Router, Simple Authenticate, Hot Reload and Webpack (with babel) :fire:] (<a href="https://github.com/WapGeaR/react-redux-boilerplate-auth" target="_blank" rel="external">https://github.com/WapGeaR/react-redux-boilerplate-auth</a>)</li>
<li><a href="https://github.com/Producters/docker-node-react-starter" target="_blank" rel="external"><strong>Docker + React/Redux + Node + PostgreSQL</strong> - full stack boilerplate with fully dockerized workflows for development, deployment, testing</a></li>
<li><a href="https://github.com/ufocoder/redux-universal-boilerplate" target="_blank" rel="external"><strong>Redux universal boilerplate</strong> - boilerplate for react universal application building on flux architecture based on redux implementation.</a></li>
<li><a href="https://github.com/kiki-le-singe/react-redux-universal-boilerplate" target="_blank" rel="external"><strong>React Redux Universal Boilerplate</strong> - An Universal ReactJS/Redux Boilerplate.</a></li>
<li><a href="https://github.com/douglascorrea/react-hot-redux-firebase-starter" target="_blank" rel="external"><strong>react-hot-redux-firebase-starter</strong> - Starter boilerplate for using React/Redux with Firebase 3.0 API, include the new React Hot Loader 3.0 :fire:</a></li>
<li><a href="https://github.com/btomashvili/react-redux-firebase-boilerplate" target="_blank" rel="external"><strong>React Redux Firebase Boilerplate</strong> - Designed for quickly spin up your apps with Firebase, using bunch of awesome new front-end technologies includes webpack build system, hot reloading, routing &amp; sass support. :fire:</a></li>
<li><a href="https://github.com/xkawi/react-universal-saga" target="_blank" rel="external"><strong>React Universal Saga</strong> - Universal React Starter Kit ft. Redux Saga</a></li>
<li><a href="https://github.com/rwieruch/react-redux-soundcloud" target="_blank" rel="external"><strong>React Redux SoundCloud Client</strong> - Seed Project for a SoundCloud Client with working Login + Extension Seed Projects</a></li>
<li><a href="https://github.com/barbar/vortigern" target="_blank" rel="external"><strong>vortigern</strong> - A universal boilerplate for building web applications w/ TypeScript, React, Redux and more.</a></li>
<li><a href="https://github.com/hdjirdeh/angular2-redux-contact-list" target="_blank" rel="external"><strong>angular2-redux-contact-list</strong> - Simple contact list built with Angular 2, Immutable.js and Redux</a></li>
<li><a href="https://github.com/lewis617/react-redux-seed" target="_blank" rel="external"><strong>react-redux-seed</strong> - 使用 React 与 Redux 实现 Universal 渲染的种子工程</a></li>
<li><a href="https://arc.js.org" target="_blank" rel="external"><strong>ARc</strong> - A progressive React starter kit based on Atomic Design with redux, redux-saga and redux-form</a></li>
<li><a href="https://github.com/dogada/edux" target="_blank" rel="external"><strong>edux</strong> - fast Redux without constants and switches. Actions and reducers are generated from single source.</a></li>
</ul>
<hr>
<h3 id="React-Native-A-framework-for-building-native-apps-using-React"><a href="#React-Native-A-framework-for-building-native-apps-using-React" class="headerlink" title="React Native - A framework for building native apps using React"></a><a href="https://facebook.github.io/react-native" target="_blank" rel="external">React Native - A framework for building native apps using React</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/nikgraf/CarteJaune" target="_blank" rel="external">CarteJaune - An open source Redux/ExponentJS (React Native) app leveraging redux-saga to keep track of your vaccinations</a></li>
<li><a href="https://github.com/soliury/noder-react-native" target="_blank" rel="external">noder-react-native - The mobile app of cnodejs.org written in React Native</a></li>
<li><a href="https://github.com/hzyIO/react-native-redux-counter" target="_blank" rel="external">react-native-redux-counter</a></li>
<li><a href="https://github.com/chentsulin/react-native-counter-ios-android" target="_blank" rel="external">react-native-counter-ios-android</a></li>
<li><a href="https://github.com/bruz/react-native-redux-groceries" target="_blank" rel="external">react-native-redux-groceries - An example app using React Native, Redux, Firebase, and AsyncStorage for offline data</a></li>
<li><a href="https://github.com/fraserxu/soundredux-native" target="_blank" rel="external">react-native-sound-cloud</a></li>
<li><a href="https://github.com/bartonhammond/snowflake" target="_blank" rel="external">snowflake - mobile app starter: Login, Logout, Reset Password, Update Profile, Hot Reload</a></li>
<li><a href="https://github.com/just4fun/uestc-bbs-react-native" target="_blank" rel="external">uestc-bbs-react-native - An iOS client for http://bbs.uestc.edu.cn/ written in React Native with Redux</a></li>
<li><a href="https://github.com/nara/movies-redux" target="_blank" rel="external">movies-redux - redux implementation of react-native movies example that is included in react-native source</a></li>
<li><a href="https://github.com/uiheros/react-native-redux-todo-list" target="_blank" rel="external">react-native-redux-todo-list - A sample todo list app developed by using react-native and redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="React-A-JavaScript-library-for-building-user-interfaces"><a href="#React-A-JavaScript-library-for-building-user-interfaces" class="headerlink" title="React - A JavaScript library for building user interfaces"></a><a href="http://facebook.github.io/react" target="_blank" rel="external">React - A JavaScript library for building user interfaces</a></h3><ul>
<li><p>Containers</p>
<ul>
<li><a href="https://github.com/LouisBarranqueiro/reapop" target="_blank" rel="external"><strong>reapop</strong> - A React &amp; Redux notifications system</a></li>
</ul>
</li>
<li><p>Middlewares</p>
<ul>
<li><a href="https://github.com/therewillbecode/redux-cheerio" target="_blank" rel="external"><strong>redux-cheerio</strong> - Make HTTP requests and then parse the responses with jQuery selectors using Cheerio</a><ul>
<li><a href="https://github.com/ezekielchentnik/redux-reporter" target="_blank" rel="external"><strong>redux-reporter</strong> - Report actions &amp; metadata to 3rd party providers, extremely useful for analytics and error handling (New Relic, Sentry, Adobe DTM, Keen, etc.)</a></li>
<li><a href="https://github.com/acdlite/redux-transduce" target="_blank" rel="external"><strong>redux-transduce</strong> - Transducer utilities for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-actions" target="_blank" rel="external"><strong>redux-actions</strong> - Flux Standard Action utilities for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-promise" target="_blank" rel="external"><strong>redux-promise</strong> - FSA-compliant promise middleware for Redux</a></li>
<li><a href="https://github.com/shanhaichik/redux-sync-promise" target="_blank" rel="external"><strong>redux-sync-promise</strong> - Middleware for writing asynchronous actions in synchronous style</a></li>
<li><a href="https://github.com/alanrubin/redux-simple-promise" target="_blank" rel="external"><strong>redux-simple-promise</strong> - FSA-compliant promise middleware for Redux with simple behaviour with minimal boilerplate declarations</a></li>
<li><a href="https://github.com/symbiont-io/redux-async" target="_blank" rel="external"><strong>redux-async</strong> - FSA-compliant promise property middleware for Redux</a></li>
<li><a href="https://github.com/zackargyle/redux-async-queue" target="_blank" rel="external"><strong>redux-async-queue</strong> - Manage queues of thunk actions</a></li>
<li><a href="https://github.com/KELiON/redux-async-initial-state" target="_blank" rel="external"><strong>redux-async-initial-state</strong> - Set initial Redux state asynchronously</a></li>
<li><a href="https://github.com/kolodny/redux-await" target="_blank" rel="external"><strong>redux-await</strong> - Manage async redux actions sanely</a></li>
<li><a href="https://github.com/acdlite/redux-rx" target="_blank" rel="external"><strong>redux-rx</strong> - RxJS utilities for Redux</a></li>
<li><a href="https://github.com/faassen/reselect" target="_blank" rel="external"><strong>reselect</strong> - Selector library for Redux like in NuclearJS</a></li>
<li><a href="https://github.com/rackt/react-redux" target="_blank" rel="external"><strong>react-redux</strong> - React bindings for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-react-router" target="_blank" rel="external"><strong>redux-react-router</strong> - Redux bindings for React Router – keep your router state inside your Redux store</a></li>
<li><a href="https://github.com/pburtchaell/redux-promise-middleware" target="_blank" rel="external"><strong>redux-promise-middleware</strong> - Redux middleware for resolving and rejecting promises</a></li>
<li><a href="https://github.com/gaearon/redux-thunk" target="_blank" rel="external"><strong>redux-thunk</strong> - Thunk middleware for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-batched-updates" target="_blank" rel="external"><strong>redux-batched-updates</strong> - Batch React updates that occur as a result of Redux dispatches, to prevent cascading renders.</a></li>
<li><a href="https://github.com/itsmepetrov/redux-combine-actions" target="_blank" rel="external"><strong>redux-combine-actions</strong> - Redux middleware that allows you to easy combine actions and dispatch them sequentially</a></li>
<li><a href="https://github.com/DenisIzmaylov/redux-catch-promise" target="_blank" rel="external"><strong>redux-catch-promise</strong> - Extended replacement of redux-thunk middleware to supporting async-await functions and implement server-side rendering for React components with async state</a></li>
<li><a href="https://github.com/lapanoid/redux-delegator" target="_blank" rel="external"><strong>redux-delegator</strong> - Compose redux reducers in a structured way</a></li>
<li><a href="https://github.com/michalkvasnicak/routex" target="_blank" rel="external"><strong>routex</strong> - Simple router for Redux universal applications. Can be used with React too</a></li>
<li><a href="https://github.com/rt2zz/redux-persist-store" target="_blank" rel="external"><strong>redux-persist-store</strong> - Persist and rehydrate a redux store</a></li>
<li><a href="https://github.com/gyzerok/adrenaline" target="_blank" rel="external"><strong>adrenaline</strong> - React bindings for Redux with Relay in mind</a></li>
<li><a href="https://github.com/elgerlambert/redux-localstorage" target="_blank" rel="external"><strong>redux-localstorage</strong> - Store enhancer that syncs (a subset) of your Redux store state to localstorage.</a></li>
<li><a href="https://github.com/michaelcontento/redux-storage" target="_blank" rel="external"><strong>redux-storage</strong> - Persistence layer for redux with flexible backends</a></li>
<li><a href="https://github.com/vicentedealencar/redux-pouchdb" target="_blank" rel="external"><strong>redux-pouchdb</strong> - sync store state to pouchdb</a></li>
<li><a href="https://github.com/vslinko/redux-vstack-router" target="_blank" rel="external"><strong>redux-vstack-router</strong> - Helpers to bind vstack-router to redux</a></li>
<li><a href="https://github.com/phated/redux-create-store" target="_blank" rel="external"><strong>redux-create-store</strong></a></li>
<li><a href="https://github.com/tappleby/redux-batched-subscribe" target="_blank" rel="external"><strong>redux-batched-subscribe</strong> - Batch calls to subscribe handlers with a custom function, including debouncing or React batched updates.</a></li>
<li><a href="https://github.com/fcomb/redux-logger" target="_blank" rel="external"><strong>redux-logger</strong> - Logger middleware for Redux</a></li>
<li><a href="https://github.com/low-ghost/redux-node-logger" target="_blank" rel="external"><strong>redux-node-logger</strong> - A Redux Logger for Node Environments</a></li>
<li><a href="https://github.com/fcomb/redux-diff-logger" target="_blank" rel="external"><strong>redux-diff-logger</strong> - Diff logger between states for Redux</a></li>
<li><a href="https://github.com/lapwinglabs/redux-debug" target="_blank" rel="external"><strong>redux-debug</strong> - debug(…) middleware for Redux</a></li>
<li><a href="https://github.com/idolize/redux-requests" target="_blank" rel="external"><strong>redux-requests</strong> - Avoid issuing duplicate HTTP requests</a></li>
<li><a href="https://github.com/rt2zz/redux-owl" target="_blank" rel="external"><strong>redux-owl</strong> - Redux One Way Linking</a></li>
<li><a href="https://github.com/pauldijou/redux-act" target="_blank" rel="external"><strong>redux-act</strong> - An opinionated lib to create actions and reducers for Redux</a></li>
<li><a href="https://github.com/FredericHeem/redux-act-async" target="_blank" rel="external"><strong>redux-act-async</strong> - Reducing boilerplate when creating asynchronous actions in Redux</a></li>
<li><a href="https://github.com/ngokevin/redux-raven-middleware" target="_blank" rel="external"><strong>redux-raven-middleware</strong> - Redux middleware for sending error reports to Sentry through raven-js</a></li>
<li><a href="https://github.com/callum/redux-routing" target="_blank" rel="external"><strong>redux-routing</strong> - Universal routing built on top of redux</a></li>
<li><a href="https://github.com/omnidan/redux-undo" target="_blank" rel="external"><strong>redux-undo</strong> - Simple undo/redo functionality for redux state containers</a></li>
<li><a href="https://github.com/danscan/rn-redux-mixpanel" target="_blank" rel="external"><strong>rn-redux-mixpanel</strong> - Configurable Redux middleware that sends your actions &amp; user profile data to Mixpanel</a></li>
<li><a href="https://github.com/ekosz/redux-falcor" target="_blank" rel="external"><strong>redux-falcor</strong> - Connect your redux front-end to your falcor back-end</a></li>
<li><a href="https://github.com/markdalgleish/redux-analytics" target="_blank" rel="external"><strong>redux-analytics</strong> - Trigger analytics events based on your event metadata</a></li>
<li><a href="https://github.com/omnidan/redux-ignore" target="_blank" rel="external"><strong>redux-ignore</strong> - Ignore redux actions by array or filter function</a></li>
<li><a href="https://github.com/omnidan/redux-recycle" target="_blank" rel="external"><strong>redux-recycle</strong> - Reset the redux state on certain actions</a></li>
<li><a href="https://github.com/indexiatech/re-notif" target="_blank" rel="external"><strong>re-notif</strong></a> A notification center based on React &amp; Redux.</li>
<li><a href="https://github.com/swennemans/redux-lunr" target="_blank" rel="external"><strong>redux-lunr</strong> - Make your redux store searchable with Lunr.js</a></li>
<li><a href="https://github.com/meadow/redux-ensure-fsa" target="_blank" rel="external"><strong>redux-ensure-fsa</strong> - Development middleware to check for FSA-compliant actions</a></li>
<li><a href="https://github.com/alexkuz/redux-pagan" target="_blank" rel="external"><strong>redux-pagan</strong> - internationalization via redux</a></li>
<li><a href="//github.com/wyze/redux-debounce"><strong>redux-debounce</strong></a> - Debounce your actions!</li>
<li><a href="https://github.com/stoeffel/redux-future" target="_blank" rel="external"><strong>redux-future</strong> - FSA-compliant future monad middleware for redux</a></li>
<li><a href="https://github.com/stoeffel/redux-io" target="_blank" rel="external"><strong>redux-io</strong> - FSA-compliant io monad middleware for redux</a></li>
<li><a href="https://github.com/stoeffel/redux-either" target="_blank" rel="external"><strong>redux-either</strong> - FSA-compliant either monad middleware for redux</a></li>
<li><a href="https://github.com/gpfunk/redux-timeout" target="_blank" rel="external"><strong>redux-timeout</strong> - Trigger actions based on timeouts</a></li>
<li><a href="https://github.com/d6u/redux-observable-middleware" target="_blank" rel="external"><strong>redux-observable-middleware</strong> - Redux middleware for subscribing to observables</a></li>
<li><a href="https://github.com/redux-observable/redux-observable" target="_blank" rel="external"><strong>redux-observable</strong> - RxJS 5-based middleware for Redux. Compose and cancel actions as epics.</a></li>
<li><a href="https://github.com/wyvernnot/redux-deferred" target="_blank" rel="external"><strong>redux-deferred</strong> - Redux middleware for jQuery Deferred Object</a></li>
<li><a href="https://github.com/sskyy/redux-task" target="_blank" rel="external"><strong>redux-task</strong> - A simple Side Effects manager for redux</a></li>
<li><a href="https://github.com/weo-edu/redux-gen" target="_blank" rel="external"><strong>redux-gen</strong> - Generator based middleware for redux</a></li>
<li><a href="https://github.com/Jackong/redux-authentication" target="_blank" rel="external"><strong>redux-authentication</strong> - Authentication component for Redux</a></li>
<li><a href="https://github.com/sergiodxa/socket.io-redux" target="_blank" rel="external"><strong>socket.io-redux</strong> - Redux middleware to emit action via socket.io</a></li>
<li><a href="https://github.com/sergiodxa/redux-catch" target="_blank" rel="external"><strong>redux-catch</strong> - Error catcher middleware for Redux reducers and middlewares</a></li>
<li><a href="https://github.com/stoeffel/redux-elm-middleware" target="_blank" rel="external"><strong>redux-elm-middleware</strong> - Elm middleware for redux</a></li>
<li><a href="https://github.com/agraboso/redux-api-middleware" target="_blank" rel="external"><strong>redux-api-middleware</strong> - Redux API middleware based on the real-world example</a></li>
<li><a href="https://github.com/Yaska/redux-mediaquery" target="_blank" rel="external"><strong>redux-mediaquery</strong> - Redux ActionCreator to put responsive-design breakpoints in your store</a></li>
<li><a href="https://github.com/lewis617/redux-amrc" target="_blank" rel="external"><strong>redux-amrc</strong> - Redux async middleware and reducer creator</a></li>
<li><a href="https://github.com/zslucky/redux-fetch-middleware" target="_blank" rel="external"><strong>redux-fetch-middleware</strong> - Redux middleware that help user to treat simple request via fetch api</a></li>
</ul>
</li>
</ul>
</li>
<li><p>Tools</p>
<ul>
<li><a href="https://github.com/skellock/reactotron" target="_blank" rel="external"><strong>reactotron</strong> - Control, monitor, and instrument your React Native apps from the comfort of your TTY</a></li>
<li><a href="https://github.com/conorhastings/redux-test-recorder" target="_blank" rel="external"><strong>redux-test-recorder</strong> - Redux test recorder is a redux middleware + included component for automagically generating tests for your reducers based on the actions in your app</a></li>
<li><a href="https://github.com/gaearon/redux-devtools" target="_blank" rel="external"><strong>redux-devtools</strong> - DevTools for Redux with hot reloading, action replay, and customizable UI</a></li>
<li><a href="https://github.com/rackt/react-router-redux" target="_blank" rel="external"><strong>react-router-redux</strong> - Ruthlessly simple bindings to keep react-router and redux in sync</a></li>
<li><a href="https://github.com/Agamennon/redux-tiny-router" target="_blank" rel="external"><strong>redux-tiny-router</strong> - A Router made for Redux, stop using the router as a controller it’s just state!</a></li>
<li><a href="https://github.com/lapanoid/redux-devtools-gentest-plugin" target="_blank" rel="external"><strong>redux-devtools-gentest-plugin</strong> - Generate mocha like tests from redux-devtools session</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external"><strong>generator-redux</strong> - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external"><strong>generator-reactapp</strong> - Yeoman generator for react app with redux</a></li>
<li><a href="https://github.com/chentsulin/generator-redux-app" target="_blank" rel="external"><strong>generator-redux-app</strong> - Scaffold out a redux app with counter example and react-router</a></li>
<li><a href="https://github.com/sporto/redux-loader" target="_blank" rel="external"><strong>redux-loader</strong> - A high order component for Redux. This components loads resources and passes them to the child components via props</a></li>
<li><a href="https://github.com/Kvoti/redux-rest" target="_blank" rel="external"><strong>redux-rest</strong> - Automatically create Flux action constants, action creators and Redux reducers for your REST API</a></li>
<li><a href="https://github.com/kennetpostigo/react-reach" target="_blank" rel="external"><strong>react-reach</strong> - A library to communicate with Graphql through Redux</a></li>
<li><a href="https://github.com/lexich/redux-api" target="_blank" rel="external"><strong>redux-api</strong> - Flux REST API for redux infrastructure</a></li>
<li><a href="https://github.com/alixander/redux-store-validator" target="_blank" rel="external"><strong>redux-store-validator</strong> - Add validation to your Redux reducers</a></li>
<li><a href="https://github.com/adjohnson916/firedux" target="_blank" rel="external"><strong>firedux</strong> - Firebase + Redux for ReactJS</a></li>
<li><a href="https://github.com/vslinko/vstack-router" target="_blank" rel="external"><strong>vstack-router</strong> - Universal router</a></li>
<li><a href="https://github.com/Tom-Alexander/redux-ecommerce" target="_blank" rel="external"><strong>redux-ecommerce</strong> - E-commerce flux with redux</a></li>
<li><a href="https://github.com/erikras/redux-form" target="_blank" rel="external"><strong>redux-form</strong> - An ES7 decorator for forms using Redux and React</a></li>
<li><a href="https://github.com/posabsolute/redux-form-validator" target="_blank" rel="external"><strong>redux-form-validation</strong> - Form validation for controlled &amp; uncontrolled inputs</a></li>
<li><a href="https://github.com/mihirsoni/simple-redux-form" target="_blank" rel="external"><strong>simple-redux-form</strong> - A tiny redux-form alternative Higher Order Component for forms</a>.</li>
<li><a href="https://github.com/calesce/redux-slider-monitor" target="_blank" rel="external"><strong>redux-slider-monitor</strong> - A custom monitor for Redux DevTools to replay recorded Redux actions</a></li>
<li><a href="https://github.com/substantial/updeep" target="_blank" rel="external"><strong>updeep</strong> - Easily update nested frozen objects and arrays in a declarative and immutable manner</a></li>
<li><a href="https://github.com/gajus/redux-immutable" target="_blank" rel="external"><strong>redux-immutable</strong> - Streamlines use of Immutable.js with Redux reducers.</a></li>
<li><a href="https://github.com/lapanoid/redux-import-export-monitor" target="_blank" rel="external"><strong>redux-import-export-monitor</strong> - A monitor for copying your serialized action log to the clipboard, as well as pasting it in from somewhere else</a></li>
<li><a href="https://github.com/winkler1/icedam" target="_blank" rel="external"><strong>icedam</strong> - Just-in-time immutability: freezes data sent to views.</a></li>
<li><a href="https://github.com/broucz/react-inline-grid" target="_blank" rel="external"><strong>react-inline-grid</strong> - Predictable flexbox based grid for React using Redux and Immutable-js.</a></li>
<li><a href="https://github.com/grigory-leonenko/redux-easy-actions" target="_blank" rel="external"><strong>redux-easy-actions</strong> - Sugar library for creating Redux or Flux actions</a></li>
<li><a href="https://github.com/popc0rn/redux-mount" target="_blank" rel="external"><strong>redux-mount</strong> - Mount state data and change its state values on the fly</a></li>
<li><a href="https://github.com/ashaffer/redux-multi" target="_blank" rel="external"><strong>redux-multi</strong> - Dispatch multiple actions from one action creator</a></li>
<li><a href="https://github.com/scottcorgan/immu" target="_blank" rel="external"><strong>immu</strong> - A tiny, fail-fast, lazy, immutable Javascript objects library</a></li>
<li><a href="https://github.com/Versent/redux-crud" target="_blank" rel="external"><strong>Generate standard action creators and reducers for CRUD applications</strong></a></li>
<li><a href="https://github.com/indexiatech/redux-immutablejs" target="_blank" rel="external"><strong>Redux &amp; ImmutableJs</strong> - Integration of Redux &amp; ImmutableJs that 100% conforms Redux standards</a></li>
<li><a href="https://github.com/gcanti/redux-tcomb" target="_blank" rel="external"><strong>redux-tcomb</strong> - Immutable and type-checked state and actions for Redux</a></li>
<li><a href="https://github.com/johanneslumpe/redux-react-router-transitions" target="_blank" rel="external"><strong>redux-react-router-transitions</strong> - Attach react-router transitions to arbitrary actions</a></li>
<li><a href="https://github.com/ForbesLindesay/redux-optimist" target="_blank" rel="external"><strong>redux-optimist</strong> - Optimistically apply actions that can be later commited or reverted.</a></li>
<li><a href="https://github.com/whetstone/redux-devtools-diff-monitor" target="_blank" rel="external"><strong>redux-devtools-diff-monitor</strong> - Redux DevTools – Diff Monitor</a></li>
<li><a href="https://github.com/romseguy/redux-store-visualizer" target="_blank" rel="external"><strong>redux-store-visualizer</strong> - Visualize Redux store in real time</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external"><strong>generator-redux</strong> - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external"><strong>generator-reactapp</strong> - Yeoman generator for react app with redux</a></li>
<li><a href="https://github.com/tdzl2003/redux-viewmodel" target="_blank" rel="external"><strong>redux-viewmodel</strong> - ViewModel wrapping for Redux &amp; React</a></li>
<li><a href="https://github.com/newtack/redux-utils" target="_blank" rel="external"><strong>redux-utils</strong> - Utility functions for Redux</a></li>
<li><a href="https://github.com/erikras/multireducer" target="_blank" rel="external"><strong>multireducer</strong> - A utility to wrap many copies of a single Redux reducer into a single key-based reducer</a></li>
<li><a href="https://github.com/philholden/subdivide" target="_blank" rel="external"><strong>subdivide</strong> - User defined UI layout: Every pane can be subdivided and any widget assigned to any pane</a></li>
<li><a href="https://github.com/gregthebusker/replux" target="_blank" rel="external"><strong>replux</strong> - Self contained components and enhancements for Redux</a></li>
<li><a href="https://github.com/aparticka/redux-immutable-utils" target="_blank" rel="external"><strong>redux-immutable-utils</strong> - Utilities for using Immutable with Redux</a></li>
<li><a href="https://github.com/acdlite/recompose" target="_blank" rel="external"><strong>recompose</strong> - A microcomponentization toolkit for React</a></li>
<li><a href="https://github.com/izaakschroeder/redux-lift" target="_blank" rel="external"><strong>redux-lift</strong> - Lifting for Redux</a></li>
<li><a href="https://github.com/router5/redux-router5" target="_blank" rel="external"><strong>redux-router5</strong> - router5 integration with Redux</a></li>
<li><a href="https://github.com/zalmoxisus/redux-devtools-extension" target="_blank" rel="external"><strong>redux-devtools-extension</strong> - Redux DevTools Extension</a></li>
<li><a href="https://github.com/colinmeinke/universal-redux-router" target="_blank" rel="external"><strong>universal-redux-router</strong> - A very simple router for Redux and React that works on both server and client</a></li>
<li><a href="https://github.com/jprichardson/redux-watch" target="_blank" rel="external"><strong>redux-watch</strong> - Watch/monitor for state changes on an object path</a></li>
<li><a href="https://github.com/bvaughn/redux-devtools-filterable-log-monitor" target="_blank" rel="external"><strong>redux-devtools-filterable-log-monitor</strong> - Filterable tree view monitor for Redux DevTools</a></li>
<li><a href="https://github.com/posabsolute/redux-flash-notification" target="_blank" rel="external"><strong>redux-flash-notification</strong> -  A flash notification component for Redux</a></li>
<li><a href="https://github.com/yelouafi/redux-saga" target="_blank" rel="external"><strong>redux-saga</strong> - An alternative side effect model for Redux apps</a></li>
<li><a href="https://github.com/zalmoxisus/remote-redux-devtools" target="_blank" rel="external"><strong>remote-redux-devtools</strong> - Use Redux DevTools remotely for React Native, hybrid, desktop and server side Redux apps</a></li>
<li><a href="https://github.com/YoruNoHikage/redux-devtools-dispatch" target="_blank" rel="external"><strong>redux-devtools-dispatch</strong> - Dispatch your actions manually to test if your app reacts well</a></li>
<li><a href="https://github.com/raisemarketplace/redux-loop" target="_blank" rel="external"><strong>redux-loop</strong> - Sequence your effects naturally and purely by returning them from your reducers</a></li>
<li><a href="https://github.com/tommikaikkonen/redux-orm" target="_blank" rel="external"><strong>redux-orm</strong> - A small, simple and immutable ORM to manage data in your Redux store</a></li>
<li><a href="https://github.com/aparticka/redux-bacon" target="_blank" rel="external"><strong>redux-bacon</strong> - Utilities for attaching Bacon.js to Redux</a></li>
<li><a href="https://github.com/slorber/rereduce" target="_blank" rel="external"><strong>rereduce</strong> - Reducer library for Redux</a></li>
<li><a href="https://github.com/KarlPurk/redux-decorators" target="_blank" rel="external"><strong>redux-decorators</strong> - A ridiculously good syntax for working with Redux and TypeScript. Currently limited to Angular 2 but could potentially be used elsewhere</a></li>
<li><a href="https://github.com/amsardesai/redux-test-reducer" target="_blank" rel="external"><strong>redux-test-reducer</strong> - Simple and clean testing mechanism for Redux reducers</a></li>
<li><a href="https://github.com/alexkuz/redux-devtools-inspector" target="_blank" rel="external"><strong>redux-devtools-inspector</strong> - Another Redux DevTools Monitor</a></li>
<li><a href="https://github.com/sotojuan/redux-ava" target="_blank" rel="external"><strong>redux-ava</strong> - Helpers for writing Redux tests in AVA</a></li>
<li><a href="https://github.com/SpencerCDixon/redux-cli" target="_blank" rel="external"><strong>redux-cli</strong> - An opinionated CLI for building redux/react apps quicker</a></li>
<li><a href="https://github.com/salsita/redux-saga-rxjs" target="_blank" rel="external"><strong>redux-saga-rxjs</strong> - RxJS implementation of Saga pattern for redux</a></li>
<li><a href="https://github.com/dmitry-zaets/redux-actions-assertions" target="_blank" rel="external"><strong>redux-actions-assertions</strong> - Assertions for redux actions testing</a></li>
<li><a href="https://github.com/sergiodxa/redux-duck" target="_blank" rel="external"><strong>redux-duck</strong> - Helper function to create Redux modules using the ducks-modular-redux proposal</a></li>
<li><a href="https://github.com/jhen0409/redux-dispatch-cli" target="_blank" rel="external"><strong>redux-dispatch-cli</strong> - A CLI tool for Redux remote dispatch. Used in remote-redux-devtools</a></li>
<li><a href="https://github.com/zackargyle/redux-immutable-reducer" target="_blank" rel="external"><strong>redux-immutable-reducer</strong> - Immutable reducer states with Redux</a></li>
<li><a href="https://github.com/redux-bootstrap/redux-bootstrap" target="_blank" rel="external"><strong>redux-bootstrap</strong> - configure React + React-Router + Redux + Immutable.js with one function!</a></li>
<li><a href="https://github.com/mandeepbrar/redux-director" target="_blank" rel="external"><strong>redux-director</strong> - Redux bindings to director router</a></li>
<li><a href="https://github.com/ConciergeAuctions/redux-q" target="_blank" rel="external"><strong>redux-q</strong> - Provides a way to queue callbacks until an action is dispatched</a></li>
<li><a href="https://github.com/exeto/redux-apist" target="_blank" rel="external"><strong>redux-apist</strong> - Creator API actions for redux-thunk</a></li>
<li><a href="https://github.com/chiefGui/reswitch" target="_blank" rel="external"><strong>reswitch</strong> — Write reducers with less boilerplate</a></li>
<li><a href="https://github.com/redux-autoform/redux-autoform" target="_blank" rel="external"><strong>redux-autoform</strong> - Create Redux-Forms dynamically out of metadata</a></li>
<li><a href="https://github.com/clarus/redux-ship" target="_blank" rel="external"><strong>redux-ship</strong> - Composable, testable and typable side effects</a></li>
</ul>
</li>
<li><p>Frameworks</p>
<ul>
<li><a href="https://github.com/jumpsuit/jumpsuit" target="_blank" rel="external"><strong>Jumpsuit</strong> - A powerful &amp; efficient React framework. Jump in. Zip up. Build great apps.</a></li>
<li><a href="https://github.com/jumpsuit/jumpstate" target="_blank" rel="external"><strong>Jumpstate</strong> - Simple and powerful state management for Redux</a></li>
<li><a href="https://github.com/sorrycc/dva" target="_blank" rel="external"><strong>dva</strong> - Front-end framework based on react, redux, react-redux, react-router and redux-saga.</a></li>
<li><a href="https://github.com/ashaffer/vdux" target="_blank" rel="external"><strong>Vdux</strong> - World’s smallest framework.  Stateless Virtual DOM &lt;-&gt; Redux</a></li>
<li><a href="https://github.com/esex/esex" target="_blank" rel="external"><strong>Esex</strong> - Full-stack Universal JavaScript Framework (Redux+RxJs)</a></li>
<li><a href="https://github.com/vslinko/ripster" target="_blank" rel="external"><strong>Ripster</strong></a></li>
<li><a href="https://github.com/este/este" target="_blank" rel="external"><strong>Este</strong> - The most complete minimal dev stack / boilerplate for React &amp; Redux universal web apps</a></li>
<li><a href="https://github.com/littlstar/stardux" target="_blank" rel="external"><strong>stardux</strong> - Functional DOM containers based on starplate, IncrementalDOM, and redux</a></li>
<li><a href="https://github.com/marknutter/nux" target="_blank" rel="external"><strong>nux</strong> - A Push-Based Functional Reactive Web Application Framework</a></li>
<li><a href="https://github.com/Wildhoney/Keo" target="_blank" rel="external"><strong>Keo</strong> - Plain functions for a more functional Deku approach to creating React components, with functional goodies such as compose, memoize, etc… for free</a></li>
<li><a href="https://github.com/wildlyinaccurate/plait" target="_blank" rel="external"><strong>plait</strong> - A minimal JavaScript framework for building reactive web components</a></li>
<li><a href="https://github.com/reactuate/reactuate" target="_blank" rel="external"><strong>reactuate</strong> — A React/Redux stack (not a boilerplate!) with a focus on Domain-Driven Design</a></li>
<li><a href="https://github.com/mattkrick/meatier" target="_blank" rel="external"><strong>meatier</strong> - Like meteor, but meatier</a></li>
<li><a href="https://github.com/relax/relax" target="_blank" rel="external"><strong>relax</strong> - New generation CMS on top of React, Redux and GraphQL</a></li>
<li><a href="https://github.com/flipace/lovli.js" target="_blank" rel="external"><strong>lovli.js</strong> - A boilerplate for developing react+redux applications with rethinkdb/horizon as realtime database and express for the server</a></li>
<li><a href="https://github.com/mariusandra/kea-logic" target="_blank" rel="external"><strong>kea</strong> - Well-readable, self-documenting and easily refactorable framework that brings your data to life! Comes with scaffolding tools</a> :bird:</li>
<li><a href="https://github.com/tianche/feeble" target="_blank" rel="external"><strong>Feeble</strong> - A framework built on top of React/Redux/redux-saga which aims to make building React/Redux applications easier and better.</a></li>
<li><a href="https://github.com/mjaneczek/conventional-redux" target="_blank" rel="external"><strong>Conventional-Redux</strong> - A wrapper for react-redux which provides API based on convention over configuration pattern.</a></li>
<li><a href="https://github.com/derzunov/redux-react-i18n" target="_blank" rel="external"><strong>redux-react-i18n</strong> - An i18n solution for redux/react✌🏿✊🏽🤘🏻</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a><a href="examples/README.md">Examples</a></h3><hr>
<h3 id="Similar-libraries"><a href="#Similar-libraries" class="headerlink" title="Similar libraries"></a>Similar libraries</h3><ul>
<li><a href="https://github.com/BobBuehler/flux-ts" target="_blank" rel="external"><strong>flux-ts</strong> - A small flux implementation heavily inspired by redux</a></li>
<li><a href="https://github.com/acstll/chopped-redux" target="_blank" rel="external"><strong>chopped-redux</strong> - A very small Flux implementation based on Redux</a></li>
<li><a href="https://github.com/edge/fluxette" target="_blank" rel="external"><strong>fluxette</strong> - Minimalist, functional, and concise Flux</a></li>
<li><a href="https://github.com/jas-chen/rx-redux" target="_blank" rel="external"><strong>rx-redux</strong> - A reimplementation of redux using RxJS</a></li>
<li><a href="https://github.com/johnhenry/understate" target="_blank" rel="external"><strong>understate</strong> - A simple state manager</a></li>
<li><a href="https://github.com/Lucifier129/refer" target="_blank" rel="external"><strong>refer</strong> - Redux-like library for handling global state on functional style</a></li>
<li><a href="https://github.com/karelsteinmetz/bobflux" target="_blank" rel="external"><strong>bobflux</strong> - Bobflux is pure functional implementation of FLUX pattern and is fitted to Bobril</a></li>
<li><a href="https://github.com/mobxjs/mobx" target="_blank" rel="external"><strong>mobx</strong> - Simple, scalable state management</a></li>
</ul>
<hr>
<h3 id="Deku-Functional-view-library-for-building-UI-components-as-an-alternative-to-React"><a href="#Deku-Functional-view-library-for-building-UI-components-as-an-alternative-to-React" class="headerlink" title="Deku - Functional view library for building UI components as an alternative to React"></a><a href="https://github.com/dekujs/deku" target="_blank" rel="external">Deku - Functional view library for building UI components as an alternative to React</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/nivanson/deku-redux-universal-hot-example" target="_blank" rel="external">Deku + Express + Redux + Crossroads Router</a></li>
<li><a href="https://github.com/troch/deku-redux" target="_blank" rel="external">deku-redux - Bindings for redux in deku (Standalone plugin)</a><br>)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Incremental-DOM-Incremental-DOM-is-a-library-for-building-up-DOM-trees-and-updating-them-in-place-when-data-changes"><a href="#Incremental-DOM-Incremental-DOM-is-a-library-for-building-up-DOM-trees-and-updating-them-in-place-when-data-changes" class="headerlink" title="Incremental DOM - Incremental DOM is a library for building up DOM trees and updating them in-place when data changes"></a><a href="http://google.github.io/incremental-dom" target="_blank" rel="external">Incremental DOM - Incremental DOM is a library for building up DOM trees and updating them in-place when data changes</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/joshthecoder/idom-redux-todomvc-app" target="_blank" rel="external">Incremental DOM + Redux Flux = Todo App</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="WinJS-Windows-Library-for-JavaScript"><a href="#WinJS-Windows-Library-for-JavaScript" class="headerlink" title="WinJS - Windows Library for JavaScript"></a><a href="http://try.buildwinjs.com" target="_blank" rel="external">WinJS - Windows Library for JavaScript</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/unindented/react-redux-winjs-example" target="_blank" rel="external">react-redux-winjs-example</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Angular-HTML-enhanced-for-web-apps"><a href="#Angular-HTML-enhanced-for-web-apps" class="headerlink" title="Angular - HTML enhanced for web apps"></a><a href="https://angularjs.org" target="_blank" rel="external">Angular - HTML enhanced for web apps</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/wbuchwalter/tsRedux" target="_blank" rel="external">Angular + Typescript + Redux</a></li>
<li><a href="https://github.com/wbuchwalter/ng-redux" target="_blank" rel="external">ng-redux - Standalone plugin</a></li>
<li><a href="https://github.com/neilff/redux-ui-router" target="_blank" rel="external">redux-ui-router - ngRedux middleware for Angular UI Router</a></li>
<li><a href="https://github.com/r-park/todo-angular-redux" target="_blank" rel="external">Todo app with ng-redux • ES6 • Webpack</a></li>
<li><a href="https://github.com/InfomediaLtd/angular2-redux-example" target="_blank" rel="external">https://github.com/InfomediaLtd/angular2-redux-example</a></li>
<li><a href="https://github.com/tomusdrw/angular2-redux-example" target="_blank" rel="external">https://github.com/tomusdrw/angular2-redux-example</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Angular-2-One-framework-Mobile-and-desktop"><a href="#Angular-2-One-framework-Mobile-and-desktop" class="headerlink" title="Angular 2 - One framework. Mobile and desktop"></a><a href="https://angular.io/" target="_blank" rel="external">Angular 2 - One framework. Mobile and desktop</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/InfomediaLtd/angular2-redux-example" target="_blank" rel="external">angular2-redux-example - Example project for using pure Redux with Angular 2 and TypeScript</a></li>
<li><a href="https://github.com/angular-redux/store" target="_blank" rel="external">@angular-redux/store - Angular 2 bindings for Redux</a></li>
<li><a href="https://github.com/InfomediaLtd/angular2-redux" target="_blank" rel="external">angular2-redux - Wrapper components for using Redux in an Angular2 application</a></li>
<li><a href="https://github.com/forforeach/ng2redux" target="_blank" rel="external">ng2redux - Angular 2 bindings for Redux implemented with TypeScript and decorators</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Vue-A-library-for-building-modern-web-interfaces"><a href="#Vue-A-library-for-building-modern-web-interfaces" class="headerlink" title="Vue - A library for building modern web interfaces"></a><a href="http://vuejs.org" target="_blank" rel="external">Vue - A library for building modern web interfaces</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/revue/revue" target="_blank" rel="external">Revue - Redux binding for Vue</a></li>
<li><a href="https://github.com/yang-wei/vue-flux" target="_blank" rel="external">Vue + Redux</a></li>
<li><a href="https://github.com/zhongqf/meteor-vue-redux-example" target="_blank" rel="external">Meteor + Vue + Redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Polymer-Build-modern-apps-using-web-components"><a href="#Polymer-Build-modern-apps-using-web-components" class="headerlink" title="Polymer - Build modern apps using web components"></a><a href="https://www.polymer-project.org" target="_blank" rel="external">Polymer - Build modern apps using web components</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/tur-nr/polymer-redux" target="_blank" rel="external">polymer-redux</a></li>
<li><a href="https://github.com/lastmjs/redux-store-element" target="_blank" rel="external">redux-store-element</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Ember-A-framework-for-creating-ambitious-web-applications"><a href="#Ember-A-framework-for-creating-ambitious-web-applications" class="headerlink" title="Ember - A framework for creating ambitious web applications"></a><a href="http://emberjs.com" target="_blank" rel="external">Ember - A framework for creating ambitious web applications</a></h3><ul>
<li>Examples</li>
</ul>
<hr>
<h3 id="Meteor-Build-apps-that-are-a-delight-to-use-faster-than-you-ever-thought-possible"><a href="#Meteor-Build-apps-that-are-a-delight-to-use-faster-than-you-ever-thought-possible" class="headerlink" title="Meteor - Build apps that are a delight to use, faster than you ever thought possible"></a><a href="https://www.meteor.com" target="_blank" rel="external">Meteor - Build apps that are a delight to use, faster than you ever thought possible</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/zhongqf/meteor-react-redux-example" target="_blank" rel="external">meteor-react-redux-example</a></li>
<li><a href="https://github.com/AdamBrodzinski/meteor-flux-leaderboard/tree/redux" target="_blank" rel="external">meteor-flux-leaderboard</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Mithril-A-Javascript-Framework-for-Building-Brilliant-Applications"><a href="#Mithril-A-Javascript-Framework-for-Building-Brilliant-Applications" class="headerlink" title="Mithril - A Javascript Framework for Building Brilliant Applications"></a><a href="http://mithril.js.org/" target="_blank" rel="external">Mithril - A Javascript Framework for Building Brilliant Applications</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/mijime/mithril-redux-starter-hmr" target="_blank" rel="external">mithril-redux-starter-hmr</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Backbone-Give-your-JS-App-some-Backbone-with-Models-Views-Collections-and-Events"><a href="#Backbone-Give-your-JS-App-some-Backbone-with-Models-Views-Collections-and-Events" class="headerlink" title="Backbone - Give your JS App some Backbone with Models, Views, Collections, and Events"></a><a href="http://backbonejs.org/" target="_blank" rel="external">Backbone - Give your JS App some Backbone with Models, Views, Collections, and Events</a></h3><ul>
<li>Tools<ul>
<li><a href="https://github.com/redbooth/backbone-redux" target="_blank" rel="external">backbone-redux — The easy way to keep your backbone collections and redux store in sync</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Aurelia-is-a-next-gen-JavaScript-client-framework-for-mobile-desktop-and-web-that-leverages-simple-conventions-to-empower-your-creativity"><a href="#Aurelia-is-a-next-gen-JavaScript-client-framework-for-mobile-desktop-and-web-that-leverages-simple-conventions-to-empower-your-creativity" class="headerlink" title="Aurelia - is a next gen JavaScript client framework for mobile, desktop and web that leverages simple conventions to empower your creativity"></a><a href="http://aurelia.io" target="_blank" rel="external">Aurelia - is a next gen JavaScript client framework for mobile, desktop and web that leverages simple conventions to empower your creativity</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/voidberg/aurelia-redux-todo" target="_blank" rel="external">aurelia-redux-todo - An implementation of the Redux todo demo app using Aurelia</a></li>
<li><a href="https://www.sitepoint.com/managing-state-aurelia-with-redux/" target="_blank" rel="external">Managing State in Aurelia: How to Use Aurelia with Redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Riot-A-React-like-user-interface-micro-library"><a href="#Riot-A-React-like-user-interface-micro-library" class="headerlink" title="Riot - A React-like user interface micro-library"></a><a href="http://riotjs.com" target="_blank" rel="external">Riot - A React-like user interface micro-library</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/remyhonig/riotredux-budget" target="_blank" rel="external">riotredux-budget</a></li>
<li><a href="https://github.com/zesty-io/app-skeleton" target="_blank" rel="external">app-skeleton</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Electron-Build-cross-platform-desktop-apps-with-web-technologies"><a href="#Electron-Build-cross-platform-desktop-apps-with-web-technologies" class="headerlink" title="Electron - Build cross platform desktop apps with web technologies"></a><a href="http://electron.atom.io/" target="_blank" rel="external">Electron - Build cross platform desktop apps with web technologies</a></h3><ul>
<li><a href="https://github.com/chentsulin/electron-react-boilerplate" target="_blank" rel="external">electron-react-boilerplate (Electron + Redux + Hot Reload)</a></li>
</ul>
<hr>
<h3 id="A-Frame-A-web-framework-for-building-VR-experiences"><a href="#A-Frame-A-web-framework-for-building-VR-experiences" class="headerlink" title="A-Frame - A web framework for building VR experiences"></a><a href="https://aframe.io" target="_blank" rel="external">A-Frame - A web framework for building VR experiences</a></h3><ul>
<li><a href="https://github.com/ngokevin/kframe/tree/master/components/redux" target="_blank" rel="external">aframe-redux-component</a></li>
</ul>
<hr>
<h3 id="Chrome-Extensions"><a href="#Chrome-Extensions" class="headerlink" title="Chrome Extensions"></a>Chrome Extensions</h3><ul>
<li><a href="https://github.com/Dharmoslap/redux-chrome-extension" target="_blank" rel="external">Redux Chrome Extension</a></li>
<li><p><a href="https://github.com/jhen0409/react-chrome-extension-boilerplate" target="_blank" rel="external">React Chrome Extension Boilerplate (Webpack + Redux + Babel and etc</a></p>
</li>
<li><p>Examples</p>
<ul>
<li><a href="https://github.com/Pumgrana/plugin" target="_blank" rel="external">Pumgrana Plugin</a></li>
</ul>
</li>
</ul>
<h2 id="Ruby-on-Rails-Resources"><a href="#Ruby-on-Rails-Resources" class="headerlink" title="Ruby on Rails Resources"></a>Ruby on Rails Resources</h2><ul>
<li><a href="https://github.com/shakacode/react-webpack-rails-tutorial" target="_blank" rel="external">React Webpack Rails Tutorial Using Redux</a></li>
<li><a href="https://github.com/shakacode/react_on_rails" target="_blank" rel="external">react_on_rails gem</a></li>
</ul>
<h2 id="Other-languages"><a href="#Other-languages" class="headerlink" title="Other languages"></a>Other languages</h2><ul>
<li><p>.NET</p>
<ul>
<li><a href="https://github.com/GuillaumeSalles/redux.NET" target="_blank" rel="external">https://github.com/GuillaumeSalles/redux.NET</a></li>
<li><a href="https://github.com/pshomov/reducto" target="_blank" rel="external">https://github.com/pshomov/reducto</a></li>
</ul>
</li>
<li><p>Java</p>
<ul>
<li><a href="https://github.com/glung/redux-java" target="_blank" rel="external">https://github.com/glung/redux-java</a></li>
<li><a href="https://github.com/trikita/jedux" target="_blank" rel="external">https://github.com/trikita/jedux</a></li>
<li><a href="https://github.com/izumin5210/Droidux" target="_blank" rel="external">https://github.com/izumin5210/Droidux</a></li>
</ul>
</li>
<li><p>Swift</p>
<ul>
<li><a href="https://github.com/ReSwift/reduxSwift" target="_blank" rel="external">https://github.com/ReSwift/reduxSwift</a></li>
<li><a href="https://github.com/Swift-Flow/Swift-Flow" target="_blank" rel="external">https://github.com/Swift-Flow/Swift-Flow</a></li>
<li><a href="https://github.com/ReSwift/ReSwift" target="_blank" rel="external">https://github.com/ReSwift/ReSwift</a> and <a href="http://reswift.github.io/ReSwift/master" target="_blank" rel="external">docs</a></li>
</ul>
</li>
<li><p>Purescript</p>
<ul>
<li><a href="https://github.com/brakmic/purescript-redux" target="_blank" rel="external">https://github.com/brakmic/purescript-redux</a></li>
<li><a href="https://github.com/faber/purescript-purdux" target="_blank" rel="external">https://github.com/faber/purescript-purdux</a></li>
</ul>
</li>
</ul>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Redux/' title=''>Redux</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-Reselect" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/Reselect/">Redux-reselect</a>
  

      </h3>
      <div class="repo-list-description">
        
          <p><a href="https://travis-ci.org/reactjs/reselect" target="_blank" rel="external"><img src="https://img.shields.io/travis/reactjs/reselect/master.svg?style=flat-square" alt="Travis"></a><br><a href="https://www.npmjs.org/package/reselect" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/reselect.svg?style=flat-square" alt="npm package"></a><br><a href="https://coveralls.io/github/reactjs/reselect" target="_blank" rel="external"><img src="https://img.shields.io/coveralls/reactjs/reselect/master.svg?style=flat-square" alt="Coveralls"></a></p>
<p>Simple “selector” library for Redux inspired by getters in <a href="https://github.com/optimizely/nuclear-js.git" target="_blank" rel="external">NuclearJS</a>, <a href="https://github.com/Day8/re-frame#just-a-read-only-cursor" target="_blank" rel="external">subscriptions</a> in <a href="https://github.com/Day8/re-frame" target="_blank" rel="external">re-frame</a> and this <a href="https://github.com/gaearon/redux/pull/169" target="_blank" rel="external">proposal</a> from <a href="https://github.com/speedskater" target="_blank" rel="external">speedskater</a>.</p>
<ul>
<li>Selectors can compute derived data, allowing Redux to store the minimal possible state.</li>
<li>Selectors are efficient. A selector is not recomputed unless one of its arguments change.</li>
<li>Selectors are composable. They can be used as input to other selectors.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</div><div class="line"><span class="keyword">const</span> taxPercentSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.taxPercent</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  shopItemsSelector,</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> taxSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxPercentSelector,</div><div class="line">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class="number">100</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxSelector,</div><div class="line">  (subtotal, tax) =&gt; (&#123; <span class="attr">total</span>: subtotal + tax &#125;)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">let</span> exampleState = &#123;</div><div class="line">  <span class="attr">shop</span>: &#123;</div><div class="line">    <span class="attr">taxPercent</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">items</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">value</span>: <span class="number">1.20</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">value</span>: <span class="number">0.95</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(subtotalSelector(exampleState)) <span class="comment">// 2.15</span></div><div class="line"><span class="built_in">console</span>.log(taxSelector(exampleState))      <span class="comment">// 0.172</span></div><div class="line"><span class="built_in">console</span>.log(totalSelector(exampleState))    <span class="comment">// &#123; total: 2.322 &#125;</span></div></pre></td></tr></table></figure>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#example">Example</a><ul>
<li><a href="#motivation-for-memoized-selectors">Motivation for Memoized Selectors</a></li>
<li><a href="#creating-a-memoized-selector">Creating a Memoized Selector</a></li>
<li><a href="#composing-selectors">Composing Selectors</a></li>
<li><a href="#connecting-a-selector-to-the-redux-store">Connecting a Selector to the Redux Store</a></li>
<li><a href="#accessing-react-props-in-selectors">Accessing React Props in Selectors</a></li>
<li><a href="#sharing-selectors-with-props-across-multiple-components">Sharing Selectors with Props Across Multiple Components</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#createselectorinputselectors--inputselectors-resultfunc"><code>createSelector</code></a></li>
<li><a href="#defaultmemoizefunc-equalitycheck--defaultequalitycheck"><code>defaultMemoize</code></a></li>
<li><a href="#createselectorcreatormemoize-memoizeoptions"><code>createSelectorCreator</code></a></li>
<li><a href="#createstructuredselectorinputselectors-selectorcreator--createselector"><code>createStructuredSelector</code></a></li>
</ul>
</li>
<li><p><a href="#faq">FAQ</a></p>
<ul>
<li><a href="#q-why-isnt-my-selector-recomputing-when-the-input-state-changes">Why isn’t my selector recomputing when the input state changes?</a></li>
<li><a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">Why is my selector recomputing when the input state stays the same?</a></li>
<li><a href="#q-can-i-use-reselect-without-redux">Can I use Reselect without Redux?</a></li>
<li><a href="#q-the-default-memoization-function-is-no-good-can-i-use-a-different-one">The default memoization function is no good, can I use a different one?</a></li>
<li><a href="#q-how-do-i-test-a-selector">How do I test a selector?</a></li>
<li><a href="#q-how-do-i-create-a-selector-that-takes-an-argument">How do I create a selector that takes an argument? </a></li>
<li><a href="#q-how-do-i-use-reselect-with-immutablejs">How do I use Reselect with Immutable.js?</a></li>
<li><a href="#q-can-i-share-a-selector-across-multiple-components">Can I share a selector across multiple components?</a></li>
<li><a href="#q-are-there-typescript-typings">Are there TypeScript typings?</a></li>
<li><a href="#q-how-can-i-make-a-curried-selector">How can I make a curried selector?</a></li>
</ul>
</li>
<li><p><a href="#related-projects">Related Projects</a></p>
</li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code>npm install reselect
</code></pre><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Motivation-for-Memoized-Selectors"><a href="#Motivation-for-Memoized-Selectors" class="headerlink" title="Motivation for Memoized Selectors"></a>Motivation for Memoized Selectors</h3><blockquote>
<p>The examples in this section are based on the <a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux Todos List example</a>.</p>
</blockquote>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (filter) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">      <span class="keyword">return</span> todos</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state.todos, state.visibilityFilter)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<p>In the above example, <code>mapStateToProps</code> calls <code>getVisibleTodos</code> to calculate <code>todos</code>. This works great, but there is a drawback: <code>todos</code> is calculated every time the component is updated. If the state tree is large, or the calculation expensive, repeating the calculation on every update may cause performance problems. Reselect can help to avoid these unnecessary recalculations.</p>
<h3 id="Creating-a-Memoized-Selector"><a href="#Creating-a-Memoized-Selector" class="headerlink" title="Creating a Memoized Selector"></a>Creating a Memoized Selector</h3><p>We would like to replace <code>getVisibleTodos</code> with a memoized selector that recalculates <code>todos</code> when the value of <code>state.todos</code> or <code>state.visibilityFilter</code> changes, but not when changes occur in other (unrelated) parts of the state tree.</p>
<p>Reselect provides a function <code>createSelector</code> for creating memoized selectors. <code>createSelector</code> takes an array of input-selectors and a transform function as its arguments. If the Redux state tree is mutated in a way that causes the value of an input-selector to change, the selector will call its transform function with the values of the input-selectors as arguments and return the result. If the values of the input-selectors are the same as the previous call to the selector, it will return the previously computed value instead of calling the transform function.</p>
<p>Let’s define a memoized selector named <code>getVisibleTodos</code> to replace the non-memoized version above:</p>
<h4 id="selectors-index-js"><a href="#selectors-index-js" class="headerlink" title="selectors/index.js"></a><code>selectors/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state</span>) =&gt;</span> state.visibilityFilter</div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state</span>) =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>In the example above, <code>getVisibilityFilter</code> and <code>getTodos</code> are input-selectors. They are created as ordinary non-memoized selector functions because they do not transform the data they select. <code>getVisibleTodos</code> on the other hand is a memoized selector. It takes <code>getVisibilityFilter</code> and <code>getTodos</code> as input-selectors, and a transform function that calculates the filtered todos list.</p>
<h3 id="Composing-Selectors"><a href="#Composing-Selectors" class="headerlink" title="Composing Selectors"></a>Composing Selectors</h3><p>A memoized selector can itself be an input-selector to another memoized selector. Here is <code>getVisibleTodos</code> being used as an input-selector to a selector that further filters the todos by keyword:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getKeyword = <span class="function">(<span class="params">state</span>) =&gt;</span> state.keyword</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodosFilteredByKeyword = createSelector(</div><div class="line">  [ getVisibleTodos, getKeyword ],</div><div class="line">  (visibleTodos, keyword) =&gt; visibleTodos.filter(</div><div class="line">    <span class="function"><span class="params">todo</span> =&gt;</span> todo.text.indexOf(keyword) &gt; <span class="number">-1</span></div><div class="line">  )</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="Connecting-a-Selector-to-the-Redux-Store"><a href="#Connecting-a-Selector-to-the-Redux-Store" class="headerlink" title="Connecting a Selector to the Redux Store"></a>Connecting a Selector to the Redux Store</h3><p>If you are using <a href="https://github.com/reactjs/react-redux" target="_blank" rel="external">React Redux</a>, you can call selectors as regular functions inside <code>mapStateToProps()</code>:</p>
<h4 id="containers-VisibleTodoList-js-1"><a href="#containers-VisibleTodoList-js-1" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<h3 id="Accessing-React-Props-in-Selectors"><a href="#Accessing-React-Props-in-Selectors" class="headerlink" title="Accessing React Props in Selectors"></a>Accessing React Props in Selectors</h3><blockquote>
<p>This section introduces a hypothetical extension to our app that allows it to support multiple Todo Lists. Please note that a full implementation of this extension requires changes to the reducers, components, actions etc. that aren’t directly relevant to the topics discussed and have been omitted for brevity.</p>
</blockquote>
<p>So far we have only seen selectors receive the Redux store state as an argument, but a selector can receive props too.</p>
<p>Here is an <code>App</code> component that renders three <code>VisibleTodoList</code> components, each of which has a <code>listId</code> prop:</p>
<h4 id="components-App-js"><a href="#components-App-js" class="headerlink" title="components/App.js"></a><code>components/App.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></div><div class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../containers/AddTodo'</span></div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../containers/VisibleTodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;VisibleTodoList listId="1" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="2" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="3" /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Each <code>VisibleTodoList</code> container should select a different slice of the state depending on the value of the <code>listId</code> prop, so let’s modify <code>getVisibilityFilter</code> and <code>getTodos</code> to accept a props argument:</p>
<h4 id="selectors-todoSelectors-js"><a href="#selectors-todoSelectors-js" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">      <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos</div></pre></td></tr></table></figure>
<p><code>props</code> can be passed to <code>getVisibleTodos</code> from <code>mapStateToProps</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>So now <code>getVisibleTodos</code> has access to <code>props</code>, and everything seems to be working fine.</p>
<p><strong>But there is a problem!</strong></p>
<p>Using the <code>getVisibleTodos</code> selector with multiple instances of the <code>VisibleTodoList</code> container will not correctly memoize:</p>
<h4 id="containers-VisibleTodoList-js-2"><a href="#containers-VisibleTodoList-js-2" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// WARNING: THE FOLLOWING SELECTOR DOES NOT CORRECTLY MEMOIZE</span></div><div class="line">    todos: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<p>A selector created with <code>createSelector</code> only returns the cached value when its set of arguments is the same as its previous set of arguments. If we alternate between rendering <code>&lt;VisibleTodoList listId=&quot;1&quot; /&gt;</code> and <code>&lt;VisibleTodoList listId=&quot;2&quot; /&gt;</code>, the shared selector will alternate between receiving <code>{listId: 1}</code> and <code>{listId: 2}</code> as its <code>props</code> argument. This will cause the arguments to be different on each call, so the selector will always recompute instead of returning the cached value. We’ll see how to overcome this limitation in the next section.</p>
<h3 id="Sharing-Selectors-with-Props-Across-Multiple-Components"><a href="#Sharing-Selectors-with-Props-Across-Multiple-Components" class="headerlink" title="Sharing Selectors with Props Across Multiple Components"></a>Sharing Selectors with Props Across Multiple Components</h3><blockquote>
<p>The examples in this section require React Redux v4.3.0 or greater</p>
</blockquote>
<p>To share a selector across multiple <code>VisibleTodoList</code> components while passing in <code>props</code> <strong>and</strong> retaining memoization, each instance of the component needs its own private copy of the selector.</p>
<p>Let’s create a function named <code>makeGetVisibleTodos</code> that returns a new copy of the <code>getVisibleTodos</code> selector each time it is called:</p>
<h4 id="selectors-todoSelectors-js-1"><a href="#selectors-todoSelectors-js-1" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> makeGetVisibleTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    [ getVisibilityFilter, getTodos ],</div><div class="line">    (visibilityFilter, todos) =&gt; &#123;</div><div class="line">      <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">          <span class="keyword">return</span> todos</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeGetVisibleTodos</div></pre></td></tr></table></figure>
<p>We also need a way to give each instance of a container access to its own private selector. The <code>mapStateToProps</code> argument of <code>connect</code> can help with this.</p>
<p><strong>If the <code>mapStateToProps</code> argument supplied to <code>connect</code> returns a function instead of an object, it will be used to create an individual <code>mapStateToProps</code> function for each instance of the container.</strong></p>
<p>In the example below <code>makeMapStateToProps</code> creates a new <code>getVisibleTodos</code> selector, and returns a <code>mapStateToProps</code> function that has exclusive access to the new selector:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If we pass <code>makeMapStateToProps</code> to <code>connect</code>, each instance of the <code>VisibleTodosList</code> container will get its own <code>mapStateToProps</code> function with a private <code>getVisibleTodos</code> selector. Memoization will now work correctly regardless of the render order of the <code>VisibleTodoList</code> containers.</p>
<h4 id="containers-VisibleTodoList-js-3"><a href="#containers-VisibleTodoList-js-3" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; makeGetVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  makeMapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="createSelector-…inputSelectors-inputSelectors-resultFunc"><a href="#createSelector-…inputSelectors-inputSelectors-resultFunc" class="headerlink" title="createSelector(…inputSelectors | [inputSelectors], resultFunc)"></a>createSelector(…inputSelectors | [inputSelectors], resultFunc)</h3><p>Takes one or more selectors, or an array of selectors, computes their values and passes them as arguments to <code>resultFunc</code>.</p>
<p><code>createSelector</code> determines if the value returned by an input-selector has changed between calls using reference equality (<code>===</code>). Inputs to selectors created with <code>createSelector</code> should be immutable.</p>
<p>Selectors created with <code>createSelector</code> have a cache size of 1. This means they always recalculate when the value of an input-selector changes, as a selector only stores the preceding value of each input-selector.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">  state =&gt; state.values.value2,</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// You can also pass an array of selectors</span></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  [</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">    state =&gt; state.values.value2</div><div class="line">  ],</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div></pre></td></tr></table></figure>
<p>It can be useful to access the props of a component from within a selector. When a selector is connected to a component with <code>connect</code>, the component props are passed as the second argument to the selector:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> abSelector = <span class="function">(<span class="params">state, props</span>) =&gt;</span> state.a * props.b</div><div class="line"></div><div class="line"><span class="comment">// props only (ignoring state argument)</span></div><div class="line"><span class="keyword">const</span> cSelector =  <span class="function">(<span class="params">_, props</span>) =&gt;</span> props.c</div><div class="line"></div><div class="line"><span class="comment">// state only (props argument omitted as not required)</span></div><div class="line"><span class="keyword">const</span> dSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  abSelector,</div><div class="line">  cSelector,</div><div class="line">  dSelector,</div><div class="line">  (ab, c, d) =&gt; (&#123;</div><div class="line">    <span class="attr">total</span>: ab + c + d</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="defaultMemoize-func-equalityCheck-defaultEqualityCheck"><a href="#defaultMemoize-func-equalityCheck-defaultEqualityCheck" class="headerlink" title="defaultMemoize(func, equalityCheck = defaultEqualityCheck)"></a>defaultMemoize(func, equalityCheck = defaultEqualityCheck)</h3><p><code>defaultMemoize</code> memoizes the function passed in the func parameter. It is the memoize function used by <code>createSelector</code>.</p>
<p><code>defaultMemoize</code> has a cache size of 1. This means it always recalculates when the value of an argument changes.</p>
<p><code>defaultMemoize</code> determines if an argument has changed by calling the <code>equalityCheck</code> function. As <code>defaultMemoize</code> is designed to be used with immutable data, the default <code>equalityCheck</code> function checks for changes using reference equality:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultEqualityCheck</span>(<span class="params">currentVal, previousVal</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> currentVal === previousVal</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>defaultMemoize</code> can be used with <code>createSelectorCreator</code> to <a href="#customize-equalitycheck-for-defaultmemoize">customize the <code>equalityCheck</code> function</a>.</p>
<h3 id="createSelectorCreator-memoize-…memoizeOptions"><a href="#createSelectorCreator-memoize-…memoizeOptions" class="headerlink" title="createSelectorCreator(memoize, …memoizeOptions)"></a>createSelectorCreator(memoize, …memoizeOptions)</h3><p><code>createSelectorCreator</code> can be used to make a customized version of <code>createSelector</code>.</p>
<p>The <code>memoize</code> argument is a memoization function to replace <code>defaultMemoize</code>.</p>
<p>The <code>...memoizeOptions</code> rest parameters are zero or more configuration options to be passed to <code>memoizeFunc</code>. The selectors <code>resultFunc</code> is passed as the first argument to <code>memoize</code> and the <code>memoizeOptions</code> are passed as the second argument onwards:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(</div><div class="line">  customMemoize, <span class="comment">// function to be used to memoize resultFunc</span></div><div class="line">  option1, <span class="comment">// option1 will be passed as second argument to customMemoize</span></div><div class="line">  option2, <span class="comment">// option2 will be passed as third argument to customMemoize</span></div><div class="line">  option3 <span class="comment">// option3 will be passed as fourth argument to customMemoize</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> customSelector = customSelectorCreator(</div><div class="line">  input1,</div><div class="line">  input2,</div><div class="line">  resultFunc <span class="comment">// resultFunc will be passed as first argument to customMemoize</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>Internally <code>customSelector</code> calls the memoize function as follows:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">customMemoize(resultFunc, option1, option2, option3)</div></pre></td></tr></table></figure>
<p>Here are some examples of how you might use <code>createSelectorCreator</code>:</p>
<h4 id="Customize-equalityCheck-for-defaultMemoize"><a href="#Customize-equalityCheck-for-defaultMemoize" class="headerlink" title="Customize equalityCheck for defaultMemoize"></a>Customize <code>equalityCheck</code> for <code>defaultMemoize</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.filter(<span class="function"><span class="params">val</span> =&gt;</span> val &lt; <span class="number">5</span>),</div><div class="line">  values =&gt; values.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="Use-memoize-function-from-lodash-for-an-unbounded-cache"><a href="#Use-memoize-function-from-lodash-for-an-unbounded-cache" class="headerlink" title="Use memoize function from lodash for an unbounded cache"></a>Use memoize function from lodash for an unbounded cache</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> called = <span class="number">0</span></div><div class="line"><span class="keyword">const</span> hashFn = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(</div><div class="line">  <span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + <span class="string">'-'</span> + <span class="built_in">JSON</span>.stringify(val),</div><div class="line">  <span class="string">''</span></div><div class="line">)</div><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(memoize, hashFn)</div><div class="line"><span class="keyword">const</span> selector = customSelectorCreator(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; &#123;</div><div class="line">    called++</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="createStructuredSelector-inputSelectors-selectorCreator-createSelector"><a href="#createStructuredSelector-inputSelectors-selectorCreator-createSelector" class="headerlink" title="createStructuredSelector({inputSelectors}, selectorCreator = createSelector)"></a>createStructuredSelector({inputSelectors}, selectorCreator = createSelector)</h3><p><code>createStructuredSelector</code> is a convenience function for a common pattern that arises when using Reselect. The selector passed to a <code>connect</code> decorator often just takes the values of its input-selectors and maps them to keys in an object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="comment">// The result function in the following selector</span></div><div class="line"><span class="comment">// is simply building an object from the input selectors</span></div><div class="line"><span class="keyword">const</span> structuredSelector = createSelector(</div><div class="line">   mySelectorA,</div><div class="line">   mySelectorB,</div><div class="line">   mySelectorC,</div><div class="line">   (a, b, c) =&gt; (&#123;</div><div class="line">     a,</div><div class="line">     b,</div><div class="line">     c</div><div class="line">   &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<p><code>createStructuredSelector</code> takes an object whose properties are input-selectors and returns a structured selector. The structured selector returns an object with the same keys as the <code>inputSelectors</code> argument, but with the selectors replaced with their values.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="keyword">const</span> structuredSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">x</span>: mySelectorA,</div><div class="line">  <span class="attr">y</span>: mySelectorB</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = structuredSelector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;) <span class="comment">// will produce &#123; x: 1, y: 2 &#125;</span></div></pre></td></tr></table></figure>
<p>Structured selectors can be nested:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nestedSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">subA</span>: createStructuredSelector(&#123;</div><div class="line">    selectorA,</div><div class="line">    selectorB</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">subB</span>: createStructuredSelector(&#123;</div><div class="line">    selectorC,</div><div class="line">    selectorD</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="Q-Why-isn’t-my-selector-recomputing-when-the-input-state-changes"><a href="#Q-Why-isn’t-my-selector-recomputing-when-the-input-state-changes" class="headerlink" title="Q: Why isn’t my selector recomputing when the input state changes?"></a>Q: Why isn’t my selector recomputing when the input state changes?</h3><p>A: Check that your memoization function is compatible with your state update function (i.e. the reducer if you are using Redux). For example, a selector created with <code>createSelector</code> will not work with a state update function that mutates an existing object instead of creating a new one each time. <code>createSelector</code> uses an identity check (<code>===</code>) to detect that an input has changed, so mutating an existing object will not trigger the selector to recompute because mutating an object does not change its identity. Note that if you are using Redux, mutating the state object is <a href="http://redux.js.org/docs/Troubleshooting.html" target="_blank" rel="external">almost certainly a mistake</a>.</p>
<p>The following example defines a simple selector that determines if the first todo item in an array of todos has been completed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isFirstTodoCompleteSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.todos[<span class="number">0</span>],</div><div class="line">  todo =&gt; todo &amp;&amp; todo.completed</div><div class="line">)</div></pre></td></tr></table></figure>
<p>The following state update function <strong>will not</strong> work with <code>isFirstTodoCompleteSelector</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// BAD: mutating an existing object</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      todo.completed = !areAllMarked</div><div class="line">      <span class="keyword">return</span> todo</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The following state update function <strong>will</strong> work with <code>isFirstTodoCompleteSelector</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// GOOD: returning a new object each time with Object.assign</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, todo, &#123;</div><div class="line">      <span class="attr">completed</span>: !areAllMarked</div><div class="line">    &#125;))</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you are not using Redux and have a requirement to work with mutable data, you can use <code>createSelectorCreator</code> to replace the default memoization function and/or use a different equality check function. See <a href="#use-memoize-function-from-lodash-for-an-unbounded-cache">here</a> and <a href="#customize-equalitycheck-for-defaultmemoize">here</a> for examples.</p>
<h3 id="Q-Why-is-my-selector-recomputing-when-the-input-state-stays-the-same"><a href="#Q-Why-is-my-selector-recomputing-when-the-input-state-stays-the-same" class="headerlink" title="Q: Why is my selector recomputing when the input state stays the same?"></a>Q: Why is my selector recomputing when the input state stays the same?</h3><p>A: Check that your memoization function is compatible with your state update function (i.e. the reducer if you are using Redux). For example, a selector created with <code>createSelector</code> that recomputes unexpectedly may be receiving a new object on each update whether the values it contains have changed or not. <code>createSelector</code> uses an identity check (<code>===</code>) to detect that an input has changed, so returning a new object on each update means that the selector will recompute on each update.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">return</span> state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The following selector is going to recompute every time REMOVE_OLD is invoked because Array.filter always returns a new object. However, in the majority of cases the REMOVE_OLD action will not change the list of todos so the recomputation is unnecessary.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> visibleTodosSelector = createSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>You can eliminate unnecessary recomputations by returning a new object from the state update function only when a deep equality check has found that the list of todos has actually changed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">const</span> updatedState =  state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> isEqual(updatedState, state) ? state : updatedState</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Alternatively, the default <code>equalityCheck</code> function in the selector can be replaced by a deep equality check:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Always check that the cost of an alternative <code>equalityCheck</code> function or deep equality check in the state update function is not greater than the cost of recomputing every time. If recomputing every time does work out to be the cheaper option, it may be that for this case Reselect is not giving you any benefit over passing a plain <code>mapStateToProps</code> function to <code>connect</code>.</p>
<h3 id="Q-Can-I-use-Reselect-without-Redux"><a href="#Q-Can-I-use-Reselect-without-Redux" class="headerlink" title="Q: Can I use Reselect without Redux?"></a>Q: Can I use Reselect without Redux?</h3><p>A: Yes. Reselect has no dependencies on any other package, so although it was designed to be used with Redux it can be used independently. It is currently being used successfully in traditional Flux apps.</p>
<blockquote>
<p>If you create selectors using <code>createSelector</code> make sure its arguments are immutable.<br>See <a href="#createselectorinputselectors--inputselectors-resultfunc">here</a></p>
</blockquote>
<h3 id="Q-How-do-I-create-a-selector-that-takes-an-argument"><a href="#Q-How-do-I-create-a-selector-that-takes-an-argument" class="headerlink" title="Q: How do I create a selector that takes an argument?"></a>Q: How do I create a selector that takes an argument?</h3><p>A: Reselect doesn’t have built-in support for creating selectors that accepts arguments, but here are some suggestions for implementing similar functionality…</p>
<p>If the argument is not dynamic you can use a factory function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> expensiveItemSelectorFactory = <span class="function"><span class="params">minValue</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    shopItemsSelector,</div><div class="line">    items =&gt; items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  expensiveItemSelectorFactory(<span class="number">200</span>),</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<p>The general consensus <a href="https://github.com/reactjs/reselect/issues/38" target="_blank" rel="external">here</a> and <a href="https://github.com/optimizely/nuclear-js/issues/14" target="_blank" rel="external">over at nuclear-js</a> is that if a selector needs a dynamic argument, then that argument should probably be state in the store. If you decide that you do require a selector with a dynamic argument, then a selector that returns a memoized function may be suitable:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.items,</div><div class="line">  items =&gt; memoize(</div><div class="line">    <span class="function"><span class="params">minValue</span> =&gt;</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveFilter = expensiveSelector(state)</div><div class="line"></div><div class="line"><span class="keyword">const</span> slightlyExpensive = expensiveFilter(<span class="number">100</span>)</div><div class="line"><span class="keyword">const</span> veryExpensive = expensiveFilter(<span class="number">1000000</span>)</div></pre></td></tr></table></figure>
<h3 id="Q-The-default-memoization-function-is-no-good-can-I-use-a-different-one"><a href="#Q-The-default-memoization-function-is-no-good-can-I-use-a-different-one" class="headerlink" title="Q: The default memoization function is no good, can I use a different one?"></a>Q: The default memoization function is no good, can I use a different one?</h3><p>A: We think it works great for a lot of use cases, but sure. See <a href="#customize-equalitycheck-for-defaultmemoize">these examples</a>.</p>
<h3 id="Q-How-do-I-test-a-selector"><a href="#Q-How-do-I-test-a-selector" class="headerlink" title="Q: How do I test a selector?"></a>Q: How do I test a selector?</h3><p>A: For a given input, a selector should always produce the same output. For this reason they are simple to unit test.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> selector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; (&#123;</div><div class="line">    <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">    <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">  &#125;)</div><div class="line">)</div><div class="line"></div><div class="line">test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">2</span>, <span class="attr">d</span>: <span class="number">6</span> &#125;)</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>It may also be useful to check that the memoization function for a selector works correctly with the state update function (i.e. the reducer if you are using Redux). Each selector has a <code>recomputations</code> method that will return the number of times it has been recomputed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">suite(<span class="string">'selector'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">let</span> state = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">a</span>: action(state.a),</div><div class="line">      <span class="attr">b</span>: action(state.b)</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> selector = createSelector(</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">    state =&gt; state.b,</div><div class="line">    (a, b) =&gt; (&#123;</div><div class="line">      <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">      <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> plusOne = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line">  <span class="keyword">const</span> id = <span class="function"><span class="params">x</span> =&gt;</span> x</div><div class="line"></div><div class="line">  test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    state = reducer(state, id)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">1</span>)</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">6</span>, <span class="attr">d</span>: <span class="number">12</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">2</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Additionally, selectors keep a reference to the last result function as <code>.resultFunc</code>. If you have selectors composed of many other selectors this can help you test each selector without coupling all of your tests to the shape of your state.</p>
<p>For example if you have a set of selectors like this:</p>
<p><strong>selectors.js</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> firstSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> thirdSelector = createSelector( ... )</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> myComposedSelector = createSelector(</div><div class="line">  firstSelector,</div><div class="line">  secondSelector,</div><div class="line">  thirdSelector,</div><div class="line">  (first, second, third) =&gt; first * second &lt; third</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>And then a set of unit tests like this:</p>
<p><strong>test/selectors.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// tests for the first three selectors...</span></div><div class="line">test(<span class="string">"firstSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"secondSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"thirdSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line"></div><div class="line"><span class="comment">// We have already tested the previous</span></div><div class="line"><span class="comment">// three selector outputs so we can just call `.resultFunc`</span></div><div class="line"><span class="comment">// with the values we want to test directly:</span></div><div class="line">test(<span class="string">"myComposedSelector unit test"</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// here instead of calling selector()</span></div><div class="line">  <span class="comment">// we just call selector.resultFunc()</span></div><div class="line">  assert(selector.resultFunc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="literal">true</span>)</div><div class="line">  assert(selector.resultFunc(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Finally, each selector has a <code>resetRecomputations</code> method that sets<br>recomputations back to 0.  The intended use is for a complex selector that may<br>have many independent tests and you don’t want to manually manage the<br>computation count or create a “dummy” selector for each test.</p>
<h3 id="Q-How-do-I-use-Reselect-with-Immutable-js"><a href="#Q-How-do-I-use-Reselect-with-Immutable-js" class="headerlink" title="Q: How do I use Reselect with Immutable.js?"></a>Q: How do I use Reselect with Immutable.js?</h3><p>A: Selectors created with <code>createSelector</code> should work just fine with Immutable.js data structures.</p>
<p>If your selector is recomputing and you don’t think the state has changed, make sure you are aware of which Immutable.js update methods <strong>always</strong> return a new object and which update methods only return a new object <strong>when the collection actually changes</strong>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'immutable'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myMap = Immutable.Map(&#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"> <span class="comment">// set, merge and others only return a new obj when update changes collection</span></div><div class="line"><span class="keyword">let</span> newMap = myMap.set(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line">newMap = myMap.merge(&#123; <span class="string">'a'</span>, <span class="number">1</span> &#125;)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line"><span class="comment">// map, reduce, filter and others always return a new obj</span></div><div class="line">newMap = myMap.map(<span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">1</span>)</div><div class="line">assert.notEqual(myMap, newMap)</div></pre></td></tr></table></figure>
<p>If a selector’s input is updated by an operation that always returns a new object, it may be performing unnecessary recomputations. See <a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">here</a> for a discussion on the pros and cons of using a deep equality check like <code>Immutable.is</code> to eliminate unnecessary recomputations.</p>
<h3 id="Q-Can-I-share-a-selector-across-multiple-components"><a href="#Q-Can-I-share-a-selector-across-multiple-components" class="headerlink" title="Q: Can I share a selector across multiple components?"></a>Q: Can I share a selector across multiple components?</h3><p>A: Selectors created using <code>createSelector</code> only have a cache size of one. This can make them unsuitable for sharing across multiple components if the arguments to the selector are different for each instance of the component. There are a couple of ways to get around this:</p>
<ul>
<li><p>Create a factory function which returns a new selector for each instance of the component. There is built-in support for factory functions in React Redux v4.3 or higher. See <a href="#sharing-selectors-with-props-across-multiple-components">here</a> for an example.</p>
</li>
<li><p>Create a custom selector with a cache size greater than one.</p>
</li>
</ul>
<h3 id="Q-Are-there-TypeScript-Typings"><a href="#Q-Are-there-TypeScript-Typings" class="headerlink" title="Q: Are there TypeScript Typings?"></a>Q: Are there TypeScript Typings?</h3><p>A: Yes! They are included and referenced in <code>package.json</code>. They should Just Work™.</p>
<h3 id="Q-How-can-I-make-a-curried-selector"><a href="#Q-How-can-I-make-a-curried-selector" class="headerlink" title="Q: How can I make a curried selector?"></a>Q: How can I make a <a href="https://github.com/hemanth/functional-programming-jargon#currying" target="_blank" rel="external">curried</a> selector?</h3><p>A: Try these <a href="https://github.com/reactjs/reselect/issues/159#issuecomment-238724788" target="_blank" rel="external">helper functions</a> courtesy of <a href="https://github.com/MattSPalmer" target="_blank" rel="external">MattSPalmer</a></p>
<h2 id="Related-Projects"><a href="#Related-Projects" class="headerlink" title="Related Projects"></a>Related Projects</h2><p>###<a href="https://github.com/HeyImAlex/reselect-map" target="_blank" rel="external">reselect-map</a></p>
<p>Can be useful when doing <strong>very expensive</strong> computations on elements of a collection because Reselect might not give you the granularity of caching that you need. Check out the reselect-maps README for examples.</p>
<p><strong>The optimizations in reselect-map only apply in a small number of cases. If you are unsure whether you need it, you don’t!</strong></p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Redux/' title=''>Redux</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-Redux-Reselect" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/Redux-Reselect/">翻译|Reselect-Redux的中间件</a>
  

      </h3>
      <div class="repo-list-description">
        
          <blockquote>
<p>“selector”是一个简单的Redux库,灵感来源于<code>NuclearJS</code>.</p>
<ul>
<li>Selector可以计算衍生的数据,可以让Redux做到存储尽可能少的state。</li>
<li>Selector比较高效,只有在某个参数发生变化的时候才发生计算过程.</li>
<li>Selector是可以组合的,他们可以作为输入,传递到其他的selector.</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这个例子不必太在意,后面会有详细的介绍</span></div><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</div><div class="line"><span class="keyword">const</span> taxPercentSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.taxPercent</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  shopItemsSelector,</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> taxSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxPercentSelector,</div><div class="line">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class="number">100</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxSelector,</div><div class="line">  (subtotal, tax) =&gt; (&#123; <span class="attr">total</span>: subtotal + tax &#125;)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">let</span> exampleState = &#123;</div><div class="line">  <span class="attr">shop</span>: &#123;</div><div class="line">    <span class="attr">taxPercent</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">items</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">value</span>: <span class="number">1.20</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">value</span>: <span class="number">0.95</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(subtotalSelector(exampleState)) <span class="comment">// 2.15</span></div><div class="line"><span class="built_in">console</span>.log(taxSelector(exampleState))      <span class="comment">// 0.172</span></div><div class="line"><span class="built_in">console</span>.log(totalSelector(exampleState))    <span class="comment">// &#123; total: 2.322 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#安装">Installation</a></li>
<li><a href="#实例">实例</a><ul>
<li><a href="#motivation-for-memoized-selectors">Motivation for Memoized Selectors</a></li>
<li><a href="#creating-a-memoized-selector">Creating a Memoized Selector</a></li>
<li><a href="#composing-selectors">Composing Selectors</a></li>
<li><a href="#connecting-a-selector-to-the-redux-store">Connecting a Selector to the Redux Store</a></li>
<li><a href="#accessing-react-props-in-selectors">Accessing React Props in Selectors</a></li>
<li><a href="#sharing-selectors-with-props-across-multiple-components">Sharing Selectors with Props Across Multiple Components</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#createselectorinputselectors--inputselectors-resultfunc"><code>createSelector</code></a></li>
<li><a href="#defaultmemoizefunc-equalitycheck--defaultequalitycheck"><code>defaultMemoize</code></a></li>
<li><a href="#createselectorcreatormemoize-memoizeoptions"><code>createSelectorCreator</code></a></li>
<li><a href="#createstructuredselectorinputselectors-selectorcreator--createselector"><code>createStructuredSelector</code></a></li>
</ul>
</li>
<li><p><a href="#faq">FAQ</a></p>
<ul>
<li><a href="#q-why-isnt-my-selector-recomputing-when-the-input-state-changes">Why isn’t my selector recomputing when the input state changes?</a></li>
<li><a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">Why is my selector recomputing when the input state stays the same?</a></li>
<li><a href="#q-can-i-use-reselect-without-redux">Can I use Reselect without Redux?</a></li>
<li><a href="#q-the-default-memoization-function-is-no-good-can-i-use-a-different-one">The default memoization function is no good, can I use a different one?</a></li>
<li><a href="#q-how-do-i-test-a-selector">How do I test a selector?</a></li>
<li><a href="#q-how-do-i-create-a-selector-that-takes-an-argument">How do I create a selector that takes an argument? </a></li>
<li><a href="#q-how-do-i-use-reselect-with-immutablejs">How do I use Reselect with Immutable.js?</a></li>
<li><a href="#q-can-i-share-a-selector-across-multiple-components">Can I share a selector across multiple components?</a></li>
<li><a href="#q-are-there-typescript-typings">Are there TypeScript typings?</a></li>
<li><a href="#q-how-can-i-make-a-curried-selector">How can I make a curried selector?</a></li>
</ul>
</li>
<li><p><a href="#related-projects">Related Projects</a></p>
</li>
<li><a href="#license">License</a><br>##安装<br><code>npm install reselect</code></li>
</ul>
<p>##实例</p>
<p>###缓存Selcectos的动机</p>
<blockquote>
<p>实例是基于 <a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux Todos List example</a>.</p>
</blockquote>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"></div><div class="line"><span class="comment">//下面这段代码是根据过滤器的state来改变日程state的函数</span></div><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (filter) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">      <span class="keyword">return</span> todos</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">//todos是根据过滤函数返回的state，传入两个实参</span></div><div class="line">    todos: getVisibleTodos(state.todos, state.visibilityFilter)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//mapDispatchToProps来传递dispatch的方法</span></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//使用Redux的connect函数注入state,到TodoList组件</span></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>在上面的例子中,<code>mapStateToProps</code>调用<code>getVisibleTodos</code>去计算<code>todos</code>.这个函数设计的是相当好的,但是有个缺点：<code>todos</code>在每一次组件更新的时候都会重新计算.如果state树的结构比较大,或者计算比较昂贵,每一次组件更新的时候都进行计算的话,将会导致性能问题.<code>Reselect</code>能够帮助redux来避免不必要的重新计算过程.</p>
<p>###创建一个缓存Selector<br>我们可以使用记忆缓存selector代替<code>getVisibleTodos</code>,如果<code>state.todos</code>和<code>state.visibilityFilter</code>发生变化,他会重新计算<code>state</code>,但是发生在其他部分的state变化,就不会重新计算.</p>
<p>Reslect提供一个函数<code>createSelector</code>来创建一个记忆selectors.<code>createSelector</code>接受一个<code>input-selectors</code>和一个变换函数作为参数.如果Redux的state发生改变造成<code>input-selector</code>的值发生改变,selector会调用变换函数,依据<code>input-selector</code>做参数,返回一个结果.如果<code>input-selector</code>返回的结果和前面的一样,那么就会直接返回有关state,会省略变换函数的调用.</p>
<p>下面我们定义一个记忆selector<code>getVisibleTodos</code>替代非记忆的版本</p>
<h4 id="selectors-index-js"><a href="#selectors-index-js" class="headerlink" title="selectors/index.js"></a><code>selectors/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state</span>) =&gt;</span> state.visibilityFilter</div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state</span>) =&gt;</span> state.todos</div><div class="line"><span class="comment">//下面的函数是经过包装的</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>上面的的实例中,<code>getVisibilityfilter</code>和<code>getTodos</code>是input-selectors.这两个函数是普通的非记忆selector函数,因为他们没有变换他们select的数据.<code>getVisibleTodos</code>另一方面是一个记忆selector.他接收<code>getVisibilityfilter</code>和<code>getTodos</code>作为input-selectors,并且作为一个变换函数计算筛选的todo list.</p>
<p>###聚合selectors</p>
<p>一个记忆性selector本身也可以作为另一个记忆性selector的input-selector.这里<code>getVisibleTodos</code>可以作为input-selector作为关键字筛选的input-selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getKeyword = <span class="function">(<span class="params">state</span>) =&gt;</span> state.keyword</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodosFilteredByKeyword = createSelector(</div><div class="line">  [ getVisibleTodos, getKeyword ],</div><div class="line">  (visibleTodos, keyword) =&gt; visibleTodos.filter(</div><div class="line">    <span class="function"><span class="params">todo</span> =&gt;</span> todo.text.indexOf(keyword) &gt; <span class="number">-1</span></div><div class="line">  )</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###连接一个Selector到Redux Store<br>如果你正在使用 <a href="https://github.com/reactjs/react-redux" target="_blank" rel="external">React Redux</a>, 你可以直接传递selector到 <code>mapStateToProps()</code>:</p>
<h4 id="containers-VisibleTodoList-js-1"><a href="#containers-VisibleTodoList-js-1" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>###在React Props中接入Selectors</p>
<blockquote>
<p>这一部分我们假设程序将会有一个扩展,我们允许selector支持多todo List.请注意如果要完全实施这个扩展,reducers,components,actions等等都需要作出改变.这些内容和主题不是太相关,所以这里就省略掉了.</p>
</blockquote>
<p>目前为止,我们仅仅看到selectors接收store的state作为一个参数,其实一个selector叶可以接受props.</p>
<p>这里是一个<code>App</code>组件,渲染出三个<code>VisibleTodoList</code>组件,每一个组件有<code>ListId</code>属性.</p>
<h4 id="components-App-js"><a href="#components-App-js" class="headerlink" title="components/App.js"></a><code>components/App.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></div><div class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../containers/AddTodo'</span></div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../containers/VisibleTodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;VisibleTodoList listId="1" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="2" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="3" /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>每一个<code>VisibleTodoList</code>container应该根据各自的<code>listId</code>属性获取state的不同部分.所以我们修改一下<code>getVisibilityFilter</code>和<code>getTodos</code>,便于接受一个属性参数</p>
<h4 id="selectors-todoSelectors-js"><a href="#selectors-todoSelectors-js" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos <span class="comment">//这里是为二维数组了</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">      <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p><code>props</code>可以从<code>mapStateToProps</code>传递到<code>getVisibleTodos</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>现在<code>getVisibleTodos</code>可以获取<code>props</code>,每一部分似乎都工作的不错.</p>
<p><em>**但是还有个问题</em><br>当<code>getVisibleTodos</code>selector和<code>VisibleTodoList</code>container的多个实例一起工作的时候,记忆功能就不能正常的运行:</p>
<h4 id="containers-VisibleTodoList-js-2"><a href="#containers-VisibleTodoList-js-2" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// WARNING: THE FOLLOWING SELECTOR DOES NOT CORRECTLY MEMOIZE</span></div><div class="line">    <span class="comment">//⚠️下面的selector不能正确的记忆</span></div><div class="line">    todos: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>使用<code>createSelector</code>创建的selector时候,如果他的参数集合和上一次的参数机会是一样的,仅仅返回缓存的值.如果我们交替渲染<code>&lt;VisibleTodoList listId=&quot;1&quot; /&gt;</code> 和<code>&lt;VisibleTodoList listId=&quot;2&quot; /&gt;</code>时,共享的selector将会交替接受<code>{listId：1}</code>和<code>{listId:2}</code>作为他的props的参数.这将会导致每一次调用的时候的参数都不同,因此selector每次都会重新来计算而不是返回缓存的值.下一部分我们将会介绍怎么解决这个问题.</p>
<p>###跨越多个组件使用selectors共性props</p>
<blockquote>
<p>这一部分的实例需要React Redux v4.3.0或者更高版本的支持.</p>
</blockquote>
<p>在多个<code>VisibleTodoList</code>组件中共享selector,同时还要<strong>保持</strong>记忆性,每一个组件的实例需要他们自己的selector备份.</p>
<p>现在让我们创建一个函数<code>makeGetVisibleTodos</code>,这个函数每次调用的时候返回一个新的<code>getVisibleTodos</code>的拷贝:</p>
<h4 id="selectors-todoSelectors-js-1"><a href="#selectors-todoSelectors-js-1" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> makeGetVisibleTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    [ getVisibilityFilter, getTodos ],</div><div class="line">    (visibilityFilter, todos) =&gt; &#123;</div><div class="line">      <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">          <span class="keyword">return</span> todos</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeGetVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p>我们也需要设置给每一个组件的实例他们各自获取私有的selector方法.<code>mapStateToProps</code>的<code>connect</code>函数可以帮助完成这个功能.</p>
<p><em>**如果<code>mapStateToProps</code>提供给<code>connect</code>不返回一个对象而是一个函数,他就可以被用来为每个组件container创建一个私有的<code>mapStateProps</code>函数.</em></p>
<p>在下面的实例中,<code>mapStateProps</code>创建一个新的<code>getVisibleTodos</code>selector,他返回一个<code>mapStateToProps</code>函数,这个函数能够接入新的selector.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>如果我们把<code>makeMapStateToprops</code>传递到<code>connect</code>,每一个<code>visibleTodoList</code>container将会获得各自的含有私有<code>getVisibleTodos</code>selector的<code>mapStateToProps</code>的函数.这样一来记忆就正常了,不管<code>VisibleTodoList</code>containers的渲染顺序怎么样.</p>
<h4 id="containers-VisibleTodoList-js-3"><a href="#containers-VisibleTodoList-js-3" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; makeGetVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  makeMapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>##API</p>
<p>###createSelector(…inputSelectors|[inputSelectors],resultFunc)</p>
<p>接受一个或者多个selectors,或者一个selectors数组,计算他们的值并且作为参数传递给<code>resultFunc</code>.</p>
<p><code>createSelector</code>通过判断input-selector之前调用和之后调用的返回值的全等于(===,这个地方英文文献叫reference equality,引用等于,这个单词是本质,中文没有翻译出来).经过<code>createSelector</code>创建的selector应该是immutable(不变的).</p>
<p>经过<code>createSelector</code>创建的Selectors有一个缓存,大小是1.这意味着当一个input-selector变化的时候,他们总是会重新计算state,因为Selector仅仅存储每一个input-selector前一个值.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">  state =&gt; state.values.value2,</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// You can also pass an array of selectors</span></div><div class="line"><span class="comment">//可以出传递一个selector数组</span></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  [</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">    state =&gt; state.values.value2</div><div class="line">  ],</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>在selector内部获取一个组件的props非常有用.当一个selector通过<code>connect</code>函数连接到一个组件上,组件的属性作为第二个参数传递给selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> abSelector = <span class="function">(<span class="params">state, props</span>) =&gt;</span> state.a * props.b</div><div class="line"></div><div class="line"><span class="comment">// props only (ignoring state argument)</span></div><div class="line"><span class="keyword">const</span> cSelector =  <span class="function">(<span class="params">_, props</span>) =&gt;</span> props.c</div><div class="line"></div><div class="line"><span class="comment">// state only (props argument omitted as not required)</span></div><div class="line"><span class="keyword">const</span> dSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  abSelector,</div><div class="line">  cSelector,</div><div class="line">  dSelector,</div><div class="line">  (ab, c, d) =&gt; (&#123;</div><div class="line">    <span class="attr">total</span>: ab + c + d</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###defaultMemoize(func, equalityCheck = defaultEqualityCheck)</p>
<p><code>defaultMemoize</code>能记住通过func传递的参数.这是<code>createSelector</code>使用的记忆函数.</p>
<p><code>defaultMemoize</code> 通过调用<code>equalityCheck</code>函数来决定一个参数是否已经发生改变.因为<code>defaultMemoize</code>设计出来就是和immutable数据一起使用,默认的<code>equalityCheck</code>使用引用全等于来判断变化:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultEqualityCheck</span>(<span class="params">currentVal, previousVal</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> currentVal === previousVal</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>defaultMemoize</code>和<code>createSelectorCreator</code>去<a href="#配置-equalitycheck-for-defaultmemoize">配置<code>equalityCheck</code>函数</a>.</p>
<p>###createSelectorCreator(memoize,…memoizeOptions)</p>
<p><code>createSelectorCreator</code>用来配置定制版本的<code>createSelector</code>.</p>
<p><code>memoize</code>参数是一个有记忆功能的函数,来代替<code>defaultMemoize</code>.<br><code>…memoizeOption</code>展开的参数是0或者更多的配置选项,这些参数传递给<code>memoizeFunc</code>.selectors<code>resultFunc</code>作为第一个参数传递给<code>memoize</code>,<code>memoizeOptions</code>作为第二个参数:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(</div><div class="line">  customMemoize, <span class="comment">// function to be used to memoize resultFunc,记忆resultFunc</span></div><div class="line">  option1, <span class="comment">// option1 will be passed as second argument to customMemoize 第二个惨呼</span></div><div class="line">  option2, <span class="comment">// option2 will be passed as third argument to customMemoize 第三个参数</span></div><div class="line">  option3 <span class="comment">// option3 will be passed as fourth argument to customMemoize   第四个参数</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> customSelector = customSelectorCreator(</div><div class="line">  input1,</div><div class="line">  input2,</div><div class="line">  resultFunc <span class="comment">// resultFunc will be passed as first argument to customMemoize  作为第一个参数传递给customMomize</span></div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>在<code>customSelecotr</code>内部滴啊用memoize的函数的代码如下:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">customMemoize(resultFunc, option1, option2, option3)</div></pre></td></tr></table></figure></p>
<hr>
<p>下面是几个可能会用到的<code>createSelectorCreator</code>的实例:</p>
<p>####为<code>defaultMemoize</code>配置<code>equalityCheck</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.filter(<span class="function"><span class="params">val</span> =&gt;</span> val &lt; <span class="number">5</span>),</div><div class="line">  values =&gt; values.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>####使用loadsh的memoize函数来缓存未绑定的缓存.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> called = <span class="number">0</span></div><div class="line"><span class="keyword">const</span> hashFn = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(</div><div class="line">  <span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + <span class="string">'-'</span> + <span class="built_in">JSON</span>.stringify(val),</div><div class="line">  <span class="string">''</span></div><div class="line">)</div><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(memoize, hashFn)</div><div class="line"><span class="keyword">const</span> selector = customSelectorCreator(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; &#123;</div><div class="line">    called++</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<h3 id="createStructuredSelector-inputSelectors-selectorCreator-createSelector"><a href="#createStructuredSelector-inputSelectors-selectorCreator-createSelector" class="headerlink" title="createStructuredSelector({inputSelectors}, selectorCreator = createSelector)"></a>createStructuredSelector({inputSelectors}, selectorCreator = createSelector)</h3><p>如果在普通的模式下使用<code>createStructuredSelector</code>函数可以提升便利性.传递到<code>connect</code>的selector装饰者(这是js设计模式的概念,可以参考相关的书籍)接受他的input-selectors,并且在一个对象内映射到一个键上.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="comment">// The result function in the following selector</span></div><div class="line"><span class="comment">// is simply building an object from the input selectors 由selectors构建的一个对象</span></div><div class="line"><span class="keyword">const</span> structuredSelector = createSelector(</div><div class="line">   mySelectorA,</div><div class="line">   mySelectorB,</div><div class="line">   mySelectorC,</div><div class="line">   (a, b, c) =&gt; (&#123;</div><div class="line">     a,</div><div class="line">     b,</div><div class="line">     c</div><div class="line">   &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p><code>createStructuredSelector</code>接受一个对象,这个对象的属性是input-selectors,函数返回一个结构性的selector.这个结构性的selector返回一个对象,对象的键和<code>inputSelectors</code>的参数是相同的,但是使用selectors代替了其中的值.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="keyword">const</span> structuredSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">x</span>: mySelectorA,</div><div class="line">  <span class="attr">y</span>: mySelectorB</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = structuredSelector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;) <span class="comment">// will produce &#123; x: 1, y: 2 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<p>结构性的selectors可以是嵌套式的:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nestedSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">subA</span>: createStructuredSelector(&#123;</div><div class="line">    selectorA,</div><div class="line">    selectorB</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">subB</span>: createStructuredSelector(&#123;</div><div class="line">    selectorC,</div><div class="line">    selectorD</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>##FAQ</p>
<h3 id="Q-为什么当输入的state发生改变的时候-selector不重新计算？"><a href="#Q-为什么当输入的state发生改变的时候-selector不重新计算？" class="headerlink" title="Q:为什么当输入的state发生改变的时候,selector不重新计算？"></a>Q:为什么当输入的state发生改变的时候,selector不重新计算？</h3><p>A:检查一下你的记忆韩式是不是和你的state更新函数相兼容(例如:如果你正在使用Redux).例如:使用<code>createSelector</code>创建的selector总是创建一个新的对象,原来期待的是更新一个已经存在的对象.<code>createSelector</code>使用(===)检测输入是否改变,因此如果改变一个已经存在的对象没有触发selector重新计算的原因是改变一个对象的时候没有触发相关的检测.提示：如果你正在使用Redux,改变一个state对象的<a href="http://redux.js.org/docs/Troubleshooting.html" target="_blank" rel="external">错误可能有</a>.</p>
<p>下面的实例定义了一个selector可以决定数组的第一个todo项目是不是已经被完成:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isFirstTodoCompleteSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.todos[<span class="number">0</span>],</div><div class="line">  todo =&gt; todo &amp;&amp; todo.completed</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>下面的state更新函数和<code>isFirstTodoCompleteSelector</code><strong>将不会</strong>正常工作工作:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// BAD: mutating an existing object</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      todo.completed = !areAllMarked</div><div class="line">      <span class="keyword">return</span> todo</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>下面的state更新函数和<code>isFirstTodoComplete</code>一起<strong>可以</strong>正常工作.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// GOOD: returning a new object each time with Object.assign</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, todo, &#123;</div><div class="line">      <span class="attr">completed</span>: !areAllMarked</div><div class="line">    &#125;))</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>如果你没有使用Redux,但是有使用mutable数据的需求,你可以使用<code>createSelectorCreator</code>代替默认的记忆函数,并且使用不同的等值检测函数.请参看<a href="#use-memoize-function-from-lodash-for-an-unbounded-cache">这里</a> 和 <a href="#customize-equalitycheck-for-defaultmemoize">这里</a>作为参考.</p>
<p>###Q:为什么input state没有改变的时候,selector还是会重新计算?</p>
<p>A: 检查一下你的记忆函数和你你的state更新函数是不是兼容(如果是使用Redux的时候,看看reducer).例如:使用每一次更新的时候,不管值是不是发生改变,<code>createSelector</code>创建的selector总是会收到一个新的对象.<code>createSelector</code>函数使用(<code>===</code>)检测input的变化,由此可知如果每次都返回一个新对象,表示selector总是在每次更新的时候重新计算.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">return</span> state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>下面的selector在每一次REMOVE_OLD调用的时候,都会重新计算,因为Array.filter总是返回一个新对象.但是在大多数情况下,REMOVE_OLD action都不会改变todo列表,所以重新计算是不必要的.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> visibleTodosSelector = createSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>你可以通过state更新函数返回一个新对象来减少不必要的重计算操作,这个对象执行深度等值检测,只有深度不相同的时候才返回新对象.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">const</span> updatedState =  state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> isEqual(updatedState, state) ? state : updatedState</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>替代的方法是,在selector中使用深度检测方法替代默认的<code>equalityCheck</code>函数:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>检查<code>equalityCheck</code>函数的更替或者在state更新函数中做深度检测并不总是比重计算的花销小.如果每次重计算的花销总是比较小,可能的原因是Reselect没有通过<code>connect</code>函数传递<code>mapStateProps</code>单纯对象的原因.</p>
<h3 id="Q-没有Redux的情况下可以使用Reselect吗？"><a href="#Q-没有Redux的情况下可以使用Reselect吗？" class="headerlink" title="Q:没有Redux的情况下可以使用Reselect吗？"></a>Q:没有Redux的情况下可以使用Reselect吗？</h3><p>A:可以.Reselect没有其他任何的依赖包,因此尽管他设计的和Redux比较搭配,但是独立使用也是可以的.目前的版本在传统的Flux APP下使用是比较成功的.</p>
<blockquote>
<p>如果你使用<code>createSelector</code>创建的selectors,需要确保他的参数是immutable的.</p>
<p>看<a href="#createselectorinputselectors--inputselectors-resultfunc">这里</a></p>
</blockquote>
<h3 id="Q-怎么才能创建一个接收参数的selector"><a href="#Q-怎么才能创建一个接收参数的selector" class="headerlink" title="Q:怎么才能创建一个接收参数的selector."></a>Q:怎么才能创建一个接收参数的selector.</h3><p>A:Reselect没有支持创建接收参数的selectors,但是这里有一些实现类似函数功能的建议.</p>
<p>如果参数不是动态的,你可以使用工厂函数:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> expensiveItemSelectorFactory = <span class="function"><span class="params">minValue</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    shopItemsSelector,</div><div class="line">    items =&gt; items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  expensiveItemSelectorFactory(<span class="number">200</span>),</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>总的达成共识<a href="https://github.com/reactjs/reselect/issues/38" target="_blank" rel="external">看这里</a>和<a href="https://github.com/optimizely/nuclear-js/issues/14" target="_blank" rel="external">超越 neclear-js</a>是:如果一个selector需要动态的参数,那么参数应该是store中的state.如果你决定好了在应用中使用动态参数,像下面这样返回一个记忆函数是比较合适的:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.items,</div><div class="line">  items =&gt; memoize(</div><div class="line">    <span class="function"><span class="params">minValue</span> =&gt;</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveFilter = expensiveSelector(state)</div><div class="line"></div><div class="line"><span class="keyword">const</span> slightlyExpensive = expensiveFilter(<span class="number">100</span>)</div><div class="line"><span class="keyword">const</span> veryExpensive = expensiveFilter(<span class="number">1000000</span>)</div></pre></td></tr></table></figure>
<hr>
<h3 id="Q：默认的记忆函数不太好-我能用个其他的吗？"><a href="#Q：默认的记忆函数不太好-我能用个其他的吗？" class="headerlink" title="Q：默认的记忆函数不太好,我能用个其他的吗？"></a>Q：默认的记忆函数不太好,我能用个其他的吗？</h3><p>A: 我认为这个记忆韩式工作的还可以,但是如果你需要一个其他的韩式也是可以的.<br>可以看看这个<a href="#customize-equalitycheck-for-defaultmemoize">例子</a></p>
<h3 id="Q-怎么才能测试一个selector"><a href="#Q-怎么才能测试一个selector" class="headerlink" title="Q:怎么才能测试一个selector?"></a>Q:怎么才能测试一个selector?</h3><p>A:对于一个给定的input,一个selector总是产出相同的结果.基于这个原因,做单元测试是非常简单的.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> selector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; (&#123;</div><div class="line">    <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">    <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">  &#125;)</div><div class="line">)</div><div class="line"></div><div class="line">test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">2</span>, <span class="attr">d</span>: <span class="number">6</span> &#125;)</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>在state更新函数调用的时候同时检测selector的记忆函数的功能也是非常有用的(例如 使用Redux的时候检查reducer).每一个selector都有一个<code>recomputations</code>方法返回重新计算的次数:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">suite(<span class="string">'selector'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">let</span> state = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">a</span>: action(state.a),</div><div class="line">      <span class="attr">b</span>: action(state.b)</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> selector = createSelector(</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">    state =&gt; state.b,</div><div class="line">    (a, b) =&gt; (&#123;</div><div class="line">      <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">      <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> plusOne = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line">  <span class="keyword">const</span> id = <span class="function"><span class="params">x</span> =&gt;</span> x</div><div class="line"></div><div class="line">  test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    state = reducer(state, id)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">1</span>)</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">6</span>, <span class="attr">d</span>: <span class="number">12</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">2</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<hr>
<p>另外,selectors保留了最后一个函数调用结果的引用,这个引用作为<code>.resultFunc</code>.如果你已经聚合了其他的selectors,这个函数引用可以帮助你测试每一个selector,不需要从state中解耦测试.</p>
<p>例如如果你的selectors集合像下面这样:<br><strong>selectors.js</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> firstSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> thirdSelector = createSelector( ... )</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> myComposedSelector = createSelector(</div><div class="line">  firstSelector,</div><div class="line">  secondSelector,</div><div class="line">  thirdSelector,</div><div class="line">  (first, second, third) =&gt; first * second &lt; third</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>单元测试就像下面这样:<br><strong>test/selectors.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// tests for the first three selectors...</span></div><div class="line">test(<span class="string">"firstSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"secondSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"thirdSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line"></div><div class="line"><span class="comment">// We have already tested the previous</span></div><div class="line"><span class="comment">// three selector outputs so we can just call `.resultFunc`</span></div><div class="line"><span class="comment">// with the values we want to test directly:</span></div><div class="line">test(<span class="string">"myComposedSelector unit test"</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// here instead of calling selector()</span></div><div class="line">  <span class="comment">// we just call selector.resultFunc()</span></div><div class="line">  assert(selector.resultFunc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="literal">true</span>)</div><div class="line">  assert(selector.resultFunc(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>最后,每一个selector有一个<code>resetRecomputations</code>方法,重置recomputations方法为0,这个参数的意图是在面对复杂的selector的时候,需要很多独立的测试,你不需要管理复杂的手工计算,或者为每一个测试创建”傻瓜”selector.</p>
<h3 id="Q-Reselect怎么和Immutble-js一起使用"><a href="#Q-Reselect怎么和Immutble-js一起使用" class="headerlink" title="Q:Reselect怎么和Immutble.js一起使用?"></a>Q:Reselect怎么和Immutble.js一起使用?</h3><p>A:<code>creatSelector</code>创建的Selectors应该可以和Immutable.js数据结构一起完美的工作.<br>如果你的selector正在重计算,并且你认为state没有发生变化,一定要确保知道哪一个Immutable.js更新方法,这个方法只要一更新<strong>总是</strong>返回新对象.哪一个方法只有<strong>集合实际发生变化的时候</strong>才返回新对象.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'immutable'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myMap = Immutable.Map(&#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"> <span class="comment">// set, merge and others only return a new obj when update changes collection</span></div><div class="line"><span class="keyword">let</span> newMap = myMap.set(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line">newMap = myMap.merge(&#123; <span class="string">'a'</span>, <span class="number">1</span> &#125;)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line"><span class="comment">// map, reduce, filter and others always return a new obj</span></div><div class="line">newMap = myMap.map(<span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">1</span>)</div><div class="line">assert.notEqual(myMap, newMap)</div></pre></td></tr></table></figure>
<hr>
<p>如果一个操作导致的selector更新总是返回一个新对象,可能会发生不必要的重计算.<a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">看这里</a>.这是一个关于pros的讨论,使用深全等于来检测例如<code>immutable.js</code>来减少不必要的重计算过程.</p>
<h3 id="Q-可以在多个组件之间共享selector吗？"><a href="#Q-可以在多个组件之间共享selector吗？" class="headerlink" title="Q:可以在多个组件之间共享selector吗？"></a>Q:可以在多个组件之间共享selector吗？</h3><p>A: 使用<code>createSelector</code>创建的Selector的缓存的大小只有1.这个设定使得多个组件的实例之间的参数不同,跨组件共享selector变得不合适.这里也有几种办法来解决这个问题:</p>
<ul>
<li>使用工程函数方法,为每一个组件实例创建一个新的selector.这里有一个内建的工厂方法,React Redux v4.3或者更高版本可以使用. <a href="#sharing-selectors-with-props-across-multiple-components">看这里</a></li>
<li>创建一个缓存尺寸大于1的定制selector.</li>
</ul>
<h3 id="Q-有TypeScript的类型吗？"><a href="#Q-有TypeScript的类型吗？" class="headerlink" title="Q:有TypeScript的类型吗？"></a>Q:有TypeScript的类型吗？</h3><p>A: 是的！他们包含在<code>package.json</code>里.可以很好的工作.</p>
<h3 id="Q：怎么构建一个柯里化selector"><a href="#Q：怎么构建一个柯里化selector" class="headerlink" title="Q：怎么构建一个柯里化selector?"></a>Q：怎么构建一个<a href="https://github.com/hemanth/functional-programming-jargon#currying" target="_blank" rel="external">柯里化</a>selector?</h3><p>A：尝试一些这里<a href="https://github.com/reactjs/reselect/issues/159#issuecomment-238724788" target="_blank" rel="external">助手函数</a>,由<a href="https://github.com/MattSPalmer" target="_blank" rel="external">MattSPalmer</a>提供</p>
<h2 id="有关的项目"><a href="#有关的项目" class="headerlink" title="有关的项目"></a>有关的项目</h2><h3 id="reselect-map"><a href="#reselect-map" class="headerlink" title="reselect-map"></a><a href="https://github.com/HeyImAlex/reselect-map" target="_blank" rel="external">reselect-map</a></h3><p>因为Reselect不可能保证缓存你所有的需求,在做<strong>非常昂贵的计算</strong>的时候,这个方法比较有用.查看一下reselect-maps readme</p>
<p><strong>reselect-map的优化措施仅仅使用在一些小的案例中,如果你不确定是不是需要他,就不要使用它</strong>.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/翻译/' title=''>翻译</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redux/">Redux</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-javascript-This全面解析" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2017/03/08/javascript-This全面解析/">javascript-This全面解析</a>
  

      </h3>
      <div class="repo-list-description">
        
          <p><img src="http://upload-images.jianshu.io/upload_images/2044710-9f870a42dbc62877.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="cover.jpg"><br>《你不知道的javascript》这本书读了有好几遍了，似乎每一次读都有新发现，有些内容并不是一下子可以弄懂的，每次读似乎都能明白一些概念。<br>再重读一下<code>this</code>关键字。这个概念非常灵活，也非常难掌握，所以我觉得经常读读没有坏处。期待javascript一桶江湖，这样学习的成本就低啦！<br>参考本书的第二部分的第一章，第二章。</p>
<blockquote>
<p>this关键字是js中最最复杂的机制之一。他被自动定义到所有函数的作用域中。</p>
</blockquote>
<p>在学习这个关键字的过程中似乎也走了很长时间的弯路。你要问我为什么走了很长时间的弯路，关键的地方还是没有对核心的概念彻底学习和领会，这一点和小学生学习新知识没有任何区别。要想掌握this这个关键字，需要紧扣关键概念，不要凭空想象这到底是怎么一回事。</p>
<p><strong>关键概念：js中的函数在调用的时候，一定，一定，一定会绑定在一个对象上，在分析this关键字的时候，一定要知道函数在调用的时候这个对象到底是谁？</strong>。<br><strong>切记：js中函数的调用和定义是没有任何关系的，函数所绑定的对象直到他被调用的时候才能知道。</strong></p>
<p>this关键字的不确定定是把双刃剑，一是函数调用时的对象不确定性，是js中函数的使用具有很大灵活性，每个对象都可以借用其他函数来完成功能。二是这也造成了this学习的一些困扰。所以在学习的时候先要理解this关键字的优点，然后再去学习造成困扰的地方</p>
<p>首先看看第一段代码<br>page 75<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//注意只是定义了一个函数，并未调用，这时候函数是没有绑定任何对象</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">identify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.name.toUpperCase();</div><div class="line">&#125;</div><div class="line"><span class="comment">//同上面的函数,但是这个函数内部有点复杂，如果下面的代码看不懂</span></div><div class="line"><span class="comment">//可以只看上面的函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> greeting = <span class="string">"Hello, I'm "</span> + identify.call( <span class="keyword">this</span> );</div><div class="line">	<span class="built_in">console</span>.log( greeting );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> me = &#123; <span class="comment">//定义了一个字面量对象</span></div><div class="line">	name: <span class="string">"Kyle"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> you = &#123;<span class="comment">//定义了一个字面量对象</span></div><div class="line">	name: <span class="string">"Reader"</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//通过call方式把函数identify分别绑定到两个对象上</span></div><div class="line"><span class="comment">//这时的this是指向me对象，和you对象</span></div><div class="line">identify.call( me ); <span class="comment">// KYLE  </span></div><div class="line">identify.call( you ); <span class="comment">// READER</span></div><div class="line"></div><div class="line"><span class="comment">//通过call方式把函数call分别绑定到两个对象上</span></div><div class="line"><span class="comment">//这时的this是指向me对象，和you对象</span></div><div class="line">speak.call( me ); <span class="comment">// Hello, I'm KYLE</span></div><div class="line">speak.call( you ); <span class="comment">// Hello, I'm READER</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>在javascript中定义函数的时候，函数是不属于任何对象的。这一点非常的关键，非常的关键，非常的关键。这是理解this关键字的第一个障碍。</p>
</blockquote>
<p>this关键字在js函数定义的时候的不确定性使得js函数使用有极大的灵活性，任何对象都可以使用他。</p>
<p>###this到底是什么？</p>
<p>this的绑定和函数定义的位置没有任何关系，只<code>取决于函数调用的方式</code>.<br>javascript中当一个函数被调用的时候，会创建一个活动记录(有时也称上下文)。这个记录包括函数在哪里被调用，函数的调用方法，传入的参数。this就是记录中的一个属性。</p>
<p>这样在学习javascript关键字的<code>首要问题是要解决怎么知道到函数的调用位置</code>.</p>
<p>###js对象绑定规则</p>
<p>每个js函数在调用的时候一定要找到一个对象，<code>绑定</code>以后才能使用。 这里是理解了js函数的定义和调用的区别以后需要掌握的一个规模最庞大的概念，在js中一共有四种绑定方式.就我个人来看，绑定规则并不难，<code>难点还是在js的函数作用域的理解</code>. 尤其是<code>默认绑定</code>.这个绑定方式有极大的迷惑性。</p>
<p>####默认绑定<br>这个是函数的独立调用，也就是在一个函数直接调用的时候，似乎是没有绑定到对象上的，但是根据前面的介绍，js中函数调用时必须要绑定到一个对象上。<br>看下面代码 page 83<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//这是函数的定义位置</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;<span class="comment">//这个变量定义的含义是什么呢？仅仅是赋值给a吗？</span></div><div class="line"></div><div class="line">  foo(); <span class="comment">// 2  //这是函数的调用位置。为什么会打印出2呢？</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>很多函数都是这么调用的，照猫画虎也可以写出来，但是理解了具体的含义就不一样了。<br>foo这个函数定义在全局作用域中(window作用域中)，巧合的是他的调用也是在全局作用域中，注意这仅仅是巧合，巧合。 那么foo()调用的时候为什么会打印出变量 a的值呢？尽管使用了var这个关键字，但是分析作用域可以知道，a这个变量实际是全局变量，说的再明白一点，a实际是window这个全局对象的一个属性，2是这个属性的属性值。<br>foo()调用的时候是一丝不挂的全裸状态，仅仅是函数本身，没有任何修饰符，这个时候他也没有任何函数包裹，处在全局作用域下面，所以foo()里面的this是指向全局对象的，当要打印this.a的时候，寻找foo()调用位置会找到全局作用域，找全局作用域的属性this.a的时候会打印出2这个属性值。</p>
</blockquote>
<p>我们在使用setTimeout,setInterval函数的时候，实际这两个函数就是一丝不挂的，同样绑定在window对象上。</p>
<p>####隐式绑定</p>
<p>函数在调用的时候被添加了修饰符。看下面这个代码<br>page 85<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//定义在全局作用下的函数，仅仅是定义，不是调用位置</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//定义一个对象</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.foo(); <span class="comment">// 2  给foo()函数找了一个对象，this就指向这个对象了</span></div></pre></td></tr></table></figure></p>
<p>这是最常见的方式了，如果不写前面的obj是不是就是上面的默认绑定了？</p>
<p><code>隐式丢失</code><br>经常在js代码的嵌套回调函数中看到在外层函数开始的一句 </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  that=<span class="keyword">this</span>; <span class="comment">//这是什么含义</span></div></pre></td></tr></table></figure>
<p>或许你已经会用了，但是理解了其中意义用起来会更加得心应手啊</p>
<p>看下面段代码.这段代码其实以前我也不太理解，问题还是没有彻底领悟js函数定义和调用之间是没有关系的这一点。<br>page 86</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//定义了一个函数</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//定义了一个对象字面量</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo  <span class="comment">//函数作为对对象的属性</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = obj.foo; <span class="comment">//把obj对象的函数foo属性赋值给bar变量</span></div><div class="line"><span class="comment">//这里就是理解这个问题的关键，如果你现在认为调用bar()的时候绑定的对象</span></div><div class="line"><span class="comment">//是obj那就完全搞错了。这个时候仅仅是把函数foo赋值给了var变量，</span></div><div class="line"><span class="comment">//并没有把对象也给bar变量，因为这里还不是foo()函数的调用位置，现在</span></div><div class="line"><span class="comment">//foo函数还没有绑定对象，那么调用bar()的时候对象到底是谁？不知道。</span></div><div class="line"><span class="comment">//调用的时候才知道。</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"oops, global"</span>; <span class="comment">// 任然是全局对象的属性</span></div><div class="line">bar(); <span class="comment">// "oops, global" 这里执行的是默认绑定，this就是去全局对象啦</span></div></pre></td></tr></table></figure>
<p>下面这段代码就是使用var that=this的场景<br>在使用回调函数的时候要留心。js中函数是一等对象，可以作为另一个函数的参数传入函数。 问题就出在这里了，函数一旦作为实参代替形参的时候，实际也执行了和上面代码一样的赋值过程，实际只是传递了函数本身，原先的对象就没有了。</p>
<p>page 86</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//定义一个函数</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doFoo</span>(<span class="params">fn</span>) </span>&#123; <span class="comment">//fn是形参</span></div><div class="line">	<span class="comment">// 如果函数作为实参传入相当于代码 var fn=obj.foo</span></div><div class="line">	<span class="comment">//和上面一段代码是完全一样的，只是函数本身，并没有绑定任何对象</span></div><div class="line"></div><div class="line">	fn(); <span class="comment">// 在这里调用的时候，由于fn只代表foo()函数，被绑定到全局对象上了</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">	<span class="attr">a</span>: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"oops, global"</span>; <span class="comment">// `a` also property on global object</span></div><div class="line"></div><div class="line">doFoo( obj.foo ); <span class="comment">// "oops, global"不要被obj.foo迷惑了</span></div><div class="line"><span class="comment">//没有实际执行函数的调用，此时obj.foo仅仅代表没有绑定任何对象的函数</span></div><div class="line"></div><div class="line"><span class="comment">//这个代码块看着眼熟么？这就是javascript中回调函数的样子，当</span></div><div class="line"><span class="comment">//一个函数作为参数传递进另一个函数的时候,这个参数函数就找不到自己绑定的对象是谁了，</span></div><div class="line"><span class="comment">//所以就默认绑定到全局对象上了。但是我们既然在一个函数里调用另一个函数，肯定是要用这个函数操作当前的对象，那么既然找不到了，我们就手动给他指定一个对象吧。这就是为什么要使用</span></div><div class="line"><span class="comment">//var  that=this的原因。我觉得理解这个概念，js的功力至少会增加5%😁。至于具体使用，我想写出来其实没有什么必要了。这样的代</span></div><div class="line"><span class="comment">//码随处可见.</span></div></pre></td></tr></table></figure>
<p>最后我们会返回来看看怎么解决这个问题。</p>
<p>####显示绑定</p>
<p>直接使用apply()和call()方法来给函数指定一个对象<br>page 88<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//定义函数</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;  <span class="comment">//对象字面量定义</span></div><div class="line">	a: <span class="number">2</span> </div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo.call( obj ); <span class="comment">// 2  强制绑定到obj对象上</span></div></pre></td></tr></table></figure></p>
<p>使用显示绑定还不能解决this的丢失问题，所以可以创建一个包裹函数</p>
<p>page 89</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123; <span class="comment">//定义函数</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something );</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.a + something;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//对象字面量</span></div><div class="line">	a: <span class="number">2</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; 包裹函数，显示绑定</div><div class="line">	<span class="keyword">return</span> foo.apply( obj, <span class="built_in">arguments</span> );</div><div class="line"> <span class="comment">//返回绑定了对象和传入参数的函数调用</span></div><div class="line"> <span class="comment">//这个语句在js的代码中非常的常见</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2, 3  </span></div><div class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//可以把绑定函数独立出来</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> fn.apply( obj, <span class="built_in">arguments</span> );</div><div class="line">	&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####new 绑定</p>
<blockquote>
<p>js中的new关键字和java中完全不同，js中没有类，只有对象，在js中使用new 关键字的时候只是被调用的普通函数</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;  <span class="comment">//定义函数</span></div><div class="line">	<span class="keyword">this</span>.a = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo( <span class="number">2</span> ); <span class="comment">//仅仅是调用了一个函数</span></div><div class="line"><span class="built_in">console</span>.log( bar.a ); <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>好了以上就是js this绑定的四种方式。  解决的关键问题是js中在函数调用的时候到底是属于哪个对象的问题。 </p>
<p>后面还有一点内容，但是上面的内容是最重要的。  2017年1月17日<br><code>的确包裹函数那里好像是没有讲清楚，我也忘了当初是怎么理解的，等我再看看，然后更新。有些地方已经做了更新!</code></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2017-03-08T00:04:10.000Z" itemprop="datePublished">2017-03-08</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/javascript/' title=''>javascript</a>
          </span>
        
      
        <!--
          
            <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
          
        -->

      </p>
    </div>
  </article>
            
        </div>
        <div class="column one-third">
          <h3>Search</h3>

<div id="site_search">

	<!-- Google -->
	
		<form action="http://www.google.com/search?" data-site="http://yoursite.com">
	    	<input type="text" id="search_box" name="q" placeholder="Search" style="width: 253px;">
	    	<button type="button" class="btn btn-default" id="site_search_do"><span class="octicon octicon-search"></span></button>
	    </form>
	

	<!-- 本地搜索 -->
	

</div>
<h3>Popular Repositories</h3>

    
    <div class="popular-container"></div>
    
    <script type="text/template" id="popular-list-template">
        <a href="{%=clone_url%}" class="card text-center" target="_blank">
            <div class="thumbnail">
                <div class="card-image geopattern" data-pattern-id="{%=name%}">
                    <div class="card-image-cell">
                        <h3 class="card-title">
                            {%=name%}
                        </h3>
                    </div>
                </div>
                <div class="caption">
                    <div class="card-description">
                        <p class="card-text">
                            {%=description%}
                        </p>
                    </div>
                    <div class="card-text">
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=stargazers_count%} stars">
                            <span class="octicon octicon-star"></span> {%=stargazers_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=forks_count%} forks">
                            <span class="octicon octicon-git-branch"></span> {%=forks_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="最后更新时间：{%=updated_at%}">
                            <span class="octicon octicon-clock"></span>
                            <time datetime="{%=updated_at%}">{%=updated_at%}</time>
                        </span>
                    </div>
                </div>
            </div>
        </a>
    </script>

    <script src="/js/baiduTemplate.js"></script>
    <script type="text/javascript">
        var popular_repos = function(){

            var baiduTpl = new Object();

            var handleTpl = function(){
                baiduTpl.popular_list = baidu.template("popular-list-template");
            };

            var handleGithub = function(){
                var popularContainer = $(".popular-container");

                var repos = "Redux-counter-with-note,myreading,React-native-dummy-redux-app".split(",");
                for(var i in repos){
                    var name = repos[i];
                    $.get("https://api.github.com/repos/phpsmarter/"+name,handle);
                }

                function handle(result){
                    result.updated_at = result.updated_at.split("T")[0];
                    if(result){
                        var html = baiduTpl.popular_list(result);
                        popularContainer.append(html);
                        $(".geopattern").each(function(){           
                            $(this).geopattern($(this).data('pattern-id'));
                        });
                    }
                }
            };

            return {
                init:function(){
                    handleTpl();
                    handleGithub();
                }
            }
        }; 
        $(popular_repos().init);
    </script>

        </div>
    </div>

    
      <div class="pagination text-align">
          <div class="btn-group">
              <a class="extend prev" rel="prev" href="/archives/2017/page/3/">&laquo;</a><a class="page-number" href="/archives/2017/">1</a><a class="page-number" href="/archives/2017/page/2/">2</a><a class="page-number" href="/archives/2017/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/archives/2017/page/5/">5</a><a class="page-number" href="/archives/2017/page/6/">6</a><a class="extend next" rel="next" href="/archives/2017/page/5/">&raquo;</a>
          </div>
      </div>
    
</section>

<footer class="container">
    <div class="site-footer" role="contentinfo">
        <div class="copyright left mobile-block">
                © 2017
                <span title="phpsmarter">phpsmarter</span>
                <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
        </div>

        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)" >TOP</a>
            </li>
        </ul>

        <a href="https://phpsmarter.github.io" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>

        <ul class="site-footer-links mobile-hidden">
            
                  
                  <li>
                    <a href="/"  title="首页">首页</a>
                  </li>
            
                  
                  <li>
                    <a href="/categories/"  title="分类">分类</a>
                  </li>
            
                  
                  <li>
                    <a href="/open-source/"  title="开源项目">开源项目</a>
                  </li>
            
                  
                  <li>
                    <a href="/message/"  title="留言板">留言板</a>
                  </li>
            
                  
                  <li>
                    <a href="/javascript/"  title="javascript">javascript</a>
                  </li>
            
            <li>
                <a href="/atom.xml">
                    <span class="octicon octicon-rss" style="color:blue;"></span>
                </a>
            </li>
        </ul>
    </div>
</footer>

		<script src="/js/geopattern.js"></script>
		<script src="/js/highlight.pack.js"></script>
		<script src="/lib/fancybox/jquery.fancybox-1.3.4.pack.js"></script>

		

		

		<script src="/js/index.js"></script>

		 <script src="/js/popular_repo.js"></script> 

	</body>
</html>