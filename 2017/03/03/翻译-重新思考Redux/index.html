<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="icon" href="/favicon.ico">
  
  <title>phpsmarter | 翻译-重新思考Redux</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox-1.3.4.css">
  <!--在这里倒入jquery 方便处理部分页面的jquery-->
  <script src="https://cdn.staticfile.org/jquery/1.7/jquery.min.js" type="text/javascript" ></script>
</head>

<body>
	<header class="site-header navfixed-false">
  <div class="container">
      <h1><a href="/" title="phpsmarter"><span class="octicon octicon-mark-github"></span> phpsmarter</a></h1>
      <nav class="site-header-nav" role="navigation">
        
              
              <a href="/"  class=" site-header-nav-item hvr-underline-from-center" title="首页">首页</a>
        
              
              <a href="/categories/"  class=" site-header-nav-item hvr-underline-from-center" title="分类">分类</a>
        
              
              <a href="/open-source/"  class=" site-header-nav-item hvr-underline-from-center" title="开源项目">开源项目</a>
        
              
              <a href="/message/"  class=" site-header-nav-item hvr-underline-from-center" title="留言板">留言板</a>
        
              
              <a href="/javascript/"  class=" site-header-nav-item hvr-underline-from-center" title="javascript">javascript</a>
        
      </nav>
  </div>
</header>

	
<section class="collection-head geopattern" data-pattern-id="翻译-重新思考Redux" >
    <div class="container">
        <div class="collection-title">
            <h1 class="collection-header">
                翻译-重新思考Redux
            </h1>
            
                <div class="collection-info">
                    <span class="meta-info">
                        <span class="octicon octicon-calendar"></span>
                        <time datetime="2017-03-03T00:04:10.000Z" itemprop="datePublished">2017-03-03</time>
                    </span>
                    
                        <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href='/categories/翻译/' title=''>翻译</a>
                        </span>
                    
                </div>
            
        </div>
    </div>
</section>
	<section class="container">
    <div class="columns">
        <div class="column three-fourths" >
            <article class="article-content markdown-body">
                <blockquote>
<p><em>Arunoda Susiripala  <a href="https://voice.kadira.io/rethinking-redux-f1e96daba60c#.svx11tv8l" target="_blank" rel="external">参看原文</a>,这篇文章发布有些时间了,但仍然是很好的学习资料,而且在随着学习和了解的深入,许多有意思的想法得到证实,那感觉真是很好.比如我前面诞生了一个想法,redux就是一个数据层啊!可以借助数据库的思想来学习,包括其中诞生的一些中间思想.在这篇文章有有了新的发现,在Meteor的state管理方法直接使用了<code>minimongo cache</code>的名字,名字里的含义不言自明了.就是这些小点慢慢使我的学习过程更加深入.当然也有一些新的想法,有兴趣的往下看看.<br>   Dec 22, 2015</em></p>
<hr>
<p>   #重新思考Redux<br>   Redux是非常好的框架.这篇文章既不是Redux的扩充也不是要创建一个新的Flux库,这里是对Redux模式的重新思考.</p>
</blockquote>
<h3 id="什么是Redux"><a href="#什么是Redux" class="headerlink" title="什么是Redux?"></a>什么是Redux?</h3><p>   在我们讨论新内容之前,让我们先看看Redux是什么.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-078a8427c21f15a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="Redux flow pic"></p>
<ul>
<li>本质上,Redux是我们的app里存储客户端state的地方.</li>
<li>一些actions可以改变state.</li>
<li><p>我们使用纯函数来监听所有的actions并且使用当前的state作为上下文去创建新的state.这个函数叫reducer.<br>(之所以叫纯函数,是因为它不会突变state,而且它也没有任何异步操作.)</p>
</li>
<li><p>有很多订阅者监听着他们需要修改的state.</p>
</li>
</ul>
<p>如果你是Redux新手,看看这些由<a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">Redux创建者发布的视频</a></p>
<p>我以前和你一样,但是我现在喜欢Redux.</p>
<h2 id="为什么是Redux"><a href="#为什么是Redux" class="headerlink" title="为什么是Redux?"></a>为什么是Redux?</h2><p>现在有足够的理由使用React构建app.我们可以使用父子数据流,Meteor的Tracker based system,Relay或者Mobservable.</p>
<p>这些方法对于简单app(或者中型app应用)来说还是挺好的.但是一旦app规模变大,极有可能会丧失app的控制权.</p>
<blockquote>
<p>我之所以这么说是从我两次重构kandira UI的经验来的,那个过程太痛苦了.</p>
</blockquote>
<p>能和Redux很高工作的构架就是Redux.</p>
<p>Redux是一个简单概念,它采用了一些函数式编程的概念(实际上来自Elm)和Flux的构架.</p>
<p>有了Redux,</p>
<ul>
<li>我们的state是可以预期的,在app中也是这样</li>
<li>app的大部分是纯函数,UI也是纯函数.所以很容易测试.</li>
<li>Redux是一个简单的库,所以没有任何魔法.</li>
<li>Redux里的模式被很多开发者使用.所有你可以依据很好的生态系统.</li>
</ul>
<p>上面这些观点就是我认为Redux非常重要的原因.</p>
<p>##重新思考<br>我们正在考虑使用客户端state和Metero后台交互来重写app.我们认为Redux的模型更合适.但是我们还有许多问题要考虑,在那些地方书写逻辑代码,怎么减少模板代码量.<br> 我们也不怎么确信Redux的state管理怎么和其他的state管理系统整合,比如Meteor的minimongo cache(译者:单词的含义意味着可以看做简单的mongo 数据库,看到这里你有什么想法呢？).这就是为什么我们想要寻求一些改变.</p>
<p> 现在让我们讨论一下我们建议的一些修改.</p>
<h3 id="使用Redux管理UI的state"><a href="#使用Redux管理UI的state" class="headerlink" title="使用Redux管理UI的state"></a>使用Redux管理UI的state</h3><p> 在我们的app中,我们要保留一些states,Redux就是用于UI state管理的组件.在Redux之外可能会有其他部分来管理state,例如像是REST API的缓存或者GraphQL.在Meteor中,可能是Minimongo cache.</p>
<p> ###Redux中的导航<br> update:<br>  在评论和其他地方,我准备试试simple-redux-router.看起来可以在Redux中进行导航.他允许React路由器管理布局和dispatch actions到store.<br>  我把simple-redux-router和我的sample app进行整合,整合过程还好除了即时加载过程.<br>  现在,我们准备把React Router和Redux合并.但是我们仔细考虑一下就可以发现,routing(路由)其实是另一种用户的action,类似按钮的点击action.所以router不应该成为app的管理或者app state的管理工具.<br>  理想Redux中的router应该应route的改变而发起actions.这就是我们需要做的工作.然后我们使用reducer来改变需要的app state.</p>
<h3 id="使用模块的目录结构"><a href="#使用模块的目录结构" class="headerlink" title="使用模块的目录结构"></a>使用模块的目录结构</h3><p>  推荐的是默认的布局目录结构.但是我们需要添加新的特性时,我们需要在多个目录中添加代码.<br>  有一个模式叫做<code>鸭子</code>模型,建议我们按组把相关的actions creators和reducer放到一个文件中.我们准备使用这个方法.我们也准备把相互关联的组件和redux container放到一个单一目录中.</p>
<p>  ###用于数据加载的一些助手函数.</p>
<p>  我们需要数据来渲染组件,通常我们通过action creator来做这件事.但是为了把数据加载和组件渲染很好的整合在一起,我们需要写一些模板式的代码.我们可以使用一些助手方法来消除这些模板代码.</p>
<p>  ###整合在一起<br>  为了充分理解这些理念,我们必需读一些代码.这也是我们构建实例代码app的原因.<br>  这里是repo:<a href="https://github.com/kadira-samples/rethinking-redux-demo" target="_blank" rel="external">rethinking-redux-demo</a>.</p>

            </article>
            
                <div class="share">
                    <!--开启分享-->
<div class="share-component" data-disabled="google,twitter,facebook" data-description=""></div>

<script src="/js/share.min.js"></script>

                </div>    
            

            
            
                
                    
<div class="comments">
	<div class="ds-thread" data-thread-key="翻译-重新思考Redux" data-title="翻译-重新思考Redux" data-url="http://yoursite.com/2017/03/03/翻译-重新思考Redux/"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"smartphp"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0]
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
	</script>
</div>

                
            

        </div>
        <div class="column one-fourth">
            
                
                


<h3>Post Directory</h3>

<div id="post-directory-module">
	<section class="post-directory">
		<p><strong class="toc-title">文章目录</strong></p>
		<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是Redux"><span class="toc-text">什么是Redux?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么是Redux"><span class="toc-text">为什么是Redux?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Redux管理UI的state"><span class="toc-text">使用Redux管理UI的state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用模块的目录结构"><span class="toc-text">使用模块的目录结构</span></a></li></ol>
	</section>
</div>
            
        </div>
    </div>
</section>

<footer class="container">
    <div class="site-footer" role="contentinfo">
        <div class="copyright left mobile-block">
                © 2017
                <span title="phpsmarter">phpsmarter</span>
                <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
        </div>

        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)" >TOP</a>
            </li>
        </ul>

        <a href="https://phpsmarter.github.io" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>

        <ul class="site-footer-links mobile-hidden">
            
                  
                  <li>
                    <a href="/"  title="首页">首页</a>
                  </li>
            
                  
                  <li>
                    <a href="/categories/"  title="分类">分类</a>
                  </li>
            
                  
                  <li>
                    <a href="/open-source/"  title="开源项目">开源项目</a>
                  </li>
            
                  
                  <li>
                    <a href="/message/"  title="留言板">留言板</a>
                  </li>
            
                  
                  <li>
                    <a href="/javascript/"  title="javascript">javascript</a>
                  </li>
            
            <li>
                <a href="/atom.xml">
                    <span class="octicon octicon-rss" style="color:blue;"></span>
                </a>
            </li>
        </ul>
    </div>
</footer>

		<script src="/js/geopattern.js"></script>
		<script src="/js/highlight.pack.js"></script>
		<script src="/lib/fancybox/jquery.fancybox-1.3.4.pack.js"></script>

		
			<script src="/js/toc.js"></script>
		

		

		<script src="/js/index.js"></script>

		 <script src="/js/popular_repo.js"></script> 

	</body>
</html>