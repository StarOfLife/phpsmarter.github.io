<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼,è¿”ç’å½’çœŸF8(2)]]></title>
      <url>http://yoursite.com/2017/04/06/%E4%B9%B1%E8%8A%B1%E6%B8%90%E6%AC%B2%E8%BF%B7%E4%BA%BA%E7%9C%BC-%E8%BF%94%E7%92%9E%E5%BD%92%E7%9C%9FF8-2/</url>
      <content type="html"><![CDATA[<h1 id="å…¥å£å’Œé…ç½®æ–‡ä»¶"><a href="#å…¥å£å’Œé…ç½®æ–‡ä»¶" class="headerlink" title="å…¥å£å’Œé…ç½®æ–‡ä»¶"></a>å…¥å£å’Œé…ç½®æ–‡ä»¶</h1><h2 id="F8APP-js-setup-jsæ–‡ä»¶"><a href="#F8APP-js-setup-jsæ–‡ä»¶" class="headerlink" title="./F8APP/js/setup.jsæ–‡ä»¶"></a>./F8APP/js/setup.jsæ–‡ä»¶</h2><blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬ä»index.ios.jsæ–‡ä»¶é¡ºè—¤æ‘¸ç“œæ‰¾åˆ°äº†<code>setup.js</code>æ–‡ä»¶<br><code>./F8APP/js/setup.js</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="meta"> 'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> F8App = <span class="built_in">require</span>(<span class="string">'F8App'</span>);<span class="comment">//ä¸»ç¨‹åºæ–‡ä»¶çš„å…¥å£</span></div><div class="line"><span class="keyword">var</span> FacebookSDK = <span class="built_in">require</span>(<span class="string">'FacebookSDK'</span>);<span class="comment">//å¤„ç†facebookç™»å½•å’Œå¥½å‹çš„API</span></div><div class="line"><span class="keyword">var</span> Parse = <span class="built_in">require</span>(<span class="string">'parse/react-native'</span>);<span class="comment">//parseçš„å®¢æˆ·ç«¯</span></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'React'</span>);</div><div class="line"><span class="keyword">var</span> Relay = <span class="built_in">require</span>(<span class="string">'react-relay'</span>);<span class="comment">//reactç¨‹åºçš„ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨Relayçš„æ•°æ®å±‚,è¿™ä¸ªåœ¨infoè¿™ä¸ªç»„ä»¶ä¸­ä½¿ç”¨</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123; Provider &#125; = <span class="built_in">require</span>(<span class="string">'react-redux'</span>);<span class="comment">//Reduxçš„åŒ…è£…å™¨</span></div><div class="line"><span class="keyword">var</span> configureStore = <span class="built_in">require</span>(<span class="string">'./store/configureStore'</span>);<span class="comment">//store</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123;serverURL&#125; = <span class="built_in">require</span>(<span class="string">'./env'</span>);<span class="comment">//ç¯å¢ƒé…ç½®ï¼Œæ˜¯parseseverçš„é…ç½®åœ°å€</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setup</span>(<span class="params"></span>): <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="built_in">console</span>.disableYellowBox = <span class="literal">true</span>;</div><div class="line">  <span class="comment">//parseServeråé¢ä¼šç»“åˆleancloudæ¥çœ‹çœ‹ä»£ç ,ä¸¤è€…çš„APIæ˜¯ä¸€æ ·çš„</span></div><div class="line">  Parse.initialize(<span class="string">'oss-f8-app-2016'</span>);<span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªparse</span></div><div class="line">  Parse.serverURL = <span class="string">`<span class="subst">$&#123;serverURL&#125;</span>/parse`</span>;<span class="comment">//parseçš„urlåœ°å€</span></div><div class="line"></div><div class="line">  FacebookSDK.init();<span class="comment">//åˆå§‹åŒ–Facebookçš„é…ç½®</span></div><div class="line">  Parse.FacebookUtils.init();</div><div class="line">  Relay.injectNetworkLayer(<span class="comment">//Realyæ•°æ®å±‚çš„é…ç½®</span></div><div class="line">    <span class="keyword">new</span> Relay.DefaultNetworkLayer(<span class="string">`<span class="subst">$&#123;serverURL&#125;</span>/graphql`</span>, &#123;</div><div class="line">      <span class="attr">fetchTimeout</span>: <span class="number">30000</span>,</div><div class="line">      <span class="attr">retryDelays</span>: [<span class="number">5000</span>, <span class="number">10000</span>],</div><div class="line">    &#125;)</div><div class="line">  );</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Root</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">      <span class="keyword">super</span>();</div><div class="line">      <span class="keyword">this</span>.state = &#123;<span class="comment">//åˆå§‹åŒ–state</span></div><div class="line">        isLoading: <span class="literal">true</span>,</div><div class="line">        <span class="attr">store</span>: configureStore(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123;<span class="attr">isLoading</span>: <span class="literal">false</span>&#125;)),</div><div class="line">      &#125;;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.state.isLoading) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> (<span class="comment">//æ³¨å…¥storeç»™uiç»„ä»¶ä½¿ç”¨</span></div><div class="line">        &lt;Provider store=&#123;<span class="keyword">this</span>.state.store&#125;&gt;</div><div class="line">          <span class="xml"><span class="tag">&lt;<span class="name">F8App</span> /&gt;</span></span></div><div class="line">        <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> Root;</div><div class="line">&#125;</div><div class="line"></div><div class="line">global.LOG = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'/------------------------------\\'</span>);</div><div class="line">  <span class="built_in">console</span>.log(...args);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'\\------------------------------/'</span>);</div><div class="line">  <span class="keyword">return</span> args[args.length - <span class="number">1</span>];</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = setup;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–‡ä»¶åœ¨å»å¹´é˜…è¯»çš„æ—¶å€™ç›´æ¥å¿½ç•¥äº†.æœ€è¿‘ç ”ç©¶äº†parseServerçš„æœ¬åœ°éƒ¨ç½²å’Œç›¸å…³çš„graphqlçš„ä½¿ç”¨ä»¥åŠleancloudçš„ä½¿ç”¨,æ‰å‘ç°è¿™ä¸ªéƒ¨åˆ†çœŸçš„æ˜¯éå¸¸ä¾¿åˆ©.åªè¦æ˜¯æœ‰äº†æ•°æ®å¯¹è±¡æœ€å¥½è¿˜èƒ½æœ‰schema,model.åå°åŸºæœ¬éƒ½ä¸éœ€è¦äº†.å½“ç„¶ä¸å¯èƒ½æ˜¯å®Œå…¨æ›¿ä»£æœåŠ¡å™¨çš„æ‰€æœ‰åŠŸèƒ½.è¿™ä¸ªåˆ°äº†ç›¸åº”çš„åœ°æ–¹å†è¯´.</p>
<p>æ¥ä¸‹æ¥æ˜¯F8APPçš„å…¥å£æ–‡ä»¶</p>
<h2 id="F8APP-js-F8App-js"><a href="#F8APP-js-F8App-js" class="headerlink" title="./F8APP/js/F8App.js"></a>./F8APP/js/F8App.js</h2><p><code>./F8APP/js/F8App.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="meta"> </span></div><div class="line">'use strict';</div><div class="line"></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'React'</span>);</div><div class="line"><span class="keyword">var</span> AppState = <span class="built_in">require</span>(<span class="string">'AppState'</span>);</div><div class="line"><span class="keyword">var</span> LoginScreen = <span class="built_in">require</span>(<span class="string">'./login/LoginScreen'</span>);<span class="comment">//ç™»å½•ç»„ä»¶</span></div><div class="line"><span class="keyword">var</span> PushNotificationsController = <span class="built_in">require</span>(<span class="string">'./PushNotificationsController'</span>);<span class="comment">//æ¨é€ç»„ä»¶</span></div><div class="line"><span class="keyword">var</span> StyleSheet = <span class="built_in">require</span>(<span class="string">'StyleSheet'</span>);</div><div class="line"><span class="keyword">var</span> F8Navigator = <span class="built_in">require</span>(<span class="string">'F8Navigator'</span>);<span class="comment">//å¯¼èˆªç»„ä»¶</span></div><div class="line"><span class="keyword">var</span> CodePush = <span class="built_in">require</span>(<span class="string">'react-native-code-push'</span>);<span class="comment">//çƒ­æ›´æ–°ç»„ä»¶</span></div><div class="line"><span class="keyword">var</span> View = <span class="built_in">require</span>(<span class="string">'View'</span>);</div><div class="line"><span class="keyword">var</span> StatusBar = <span class="built_in">require</span>(<span class="string">'StatusBar'</span>);<span class="comment">//çŠ¶æ€æ ç»„ä»¶</span></div><div class="line"><span class="keyword">var</span> &#123;<span class="comment">//è¿™é‡Œçš„æ¯ä¸€actionæœ€ç»ˆéƒ½ä¼šå½¢æˆstateè¿™æ£µæ ‘ä¸‹çš„æ¬¡çº§åˆ†æ</span></div><div class="line">  <span class="comment">//åå­—éƒ½éå¸¸çš„é†’ç›®å’Œç›´æ¥,æˆ‘ä»¬å¯ä»¥ç›´æ¥å…ˆçœ‹actionå’Œreduceréƒ½å¹²äº†äº›ä»€ä¹ˆå·¥ä½œ</span></div><div class="line">  loadConfig,</div><div class="line">  loadMaps,</div><div class="line">  loadNotifications,</div><div class="line">  loadSessions,</div><div class="line">  loadFriendsSchedules,</div><div class="line">  loadSurveys,</div><div class="line">&#125; = <span class="built_in">require</span>(<span class="string">'./actions'</span>);<span class="comment">//åŠ è½½åˆå§‹åŒ–é…ç½®çš„action</span></div><div class="line"><span class="comment">//è¿™ä¸ªåœ°æ–¹çš„åˆå§‹åŒ–çš„ä¸€äº›stateæ˜¯åœ¨è¿™é‡ŒåŠ è½½çš„,å¯¹æ¯”ireadingè½¯ä»¶çš„//å†…å®¹åŠ è½½æ˜¯åœ¨ç»„ä»¶ä¸­çš„componentdidMountåŠ è½½çš„,æ”¾åœ¨è¿™é‡Œæ€§èƒ½æ˜¯ä¸//æ˜¯æœ‰äº›ä¼˜åŒ–,</span></div><div class="line"><span class="keyword">var</span> &#123; updateInstallation &#125; = <span class="built_in">require</span>(<span class="string">'./actions/installation'</span>);</div><div class="line"><span class="keyword">var</span> &#123; connect &#125; = <span class="built_in">require</span>(<span class="string">'react-redux'</span>);<span class="comment">//connectå‡½æ•°</span></div><div class="line"><span class="comment">//æ²¡æƒ³åˆ°åœ¨è¿™é‡Œä¹Ÿæ˜¯å¯ä»¥ç”¨çš„,åœ¨f8appä¸­é‚£ä¸ªç»„ä»¶è¦ä½¿ç”¨stateå’Œdispatchå°±åœ¨å“ªé‡Œå¯¼å…¥connectå‡½æ•°.</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">'./env.js'</span>);<span class="comment">//è·å–å½“å‰ç‰ˆæœ¬å·ç </span></div><div class="line"></div><div class="line"><span class="keyword">var</span> F8App = React.createClass(&#123;</div><div class="line">  <span class="attr">componentDidMount</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//ç›‘å¬changeäº‹ä»¶</span></div><div class="line">    AppState.addEventListener(<span class="string">'change'</span>, <span class="keyword">this</span>.handleAppStateChange);</div><div class="line"></div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> Make this list smaller, we basically download the whole internet</span></div><div class="line">    <span class="comment">//è¿™ä¸ªåœ°æ–¹åœ¨å…ˆäºUIç»„ä»¶ä¹‹å‰åŠ è½½äº†æ‰€æœ‰çš„stateï¼Œ</span></div><div class="line">    <span class="comment">//æ ¹æ®UIå¯¼èˆªçš„é»˜è®¤é¡¹æ˜¯sessionï¼Œæˆ‘è§‰å¾—è¿™é‡Œå¯ä»¥å…ˆåŠ è½½//sessionè¿™ä¸ªstateï¼Œåœ¨é¦–é¡µåŠ è½½çš„æ—¶å€™é€Ÿåº¦å°±å¿«äº†,å…¶ä»–çš„//stateåœ¨åˆ‡æ¢åˆ°éœ€è¦æŸéƒ¨åˆ†çš„stateçš„æ—¶å€™åœ¨åŠ è½½</span></div><div class="line">    <span class="comment">//æ˜¯ä¸æ˜¯æƒ°æ€§åŠ è½½çš„æ„æ€ï¼Ÿ</span></div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadNotifications());</div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadMaps());</div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadConfig());</div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadSessions());</div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadFriendsSchedules());</div><div class="line">    <span class="keyword">this</span>.props.dispatch(loadSurveys());</div><div class="line"></div><div class="line">    updateInstallation(&#123;version&#125;);<span class="comment">//çƒ­æ›´æ–°ç‰ˆæœ¬.</span></div><div class="line">    CodePush.sync(&#123;<span class="attr">installMode</span>: CodePush.InstallMode.ON_NEXT_RESUME&#125;);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">componentWillUnmount</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//ç§»é™¤changeäº‹ä»¶</span></div><div class="line">    AppState.removeEventListener(<span class="string">'change'</span>, <span class="keyword">this</span>.handleAppStateChange);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">handleAppStateChange</span>: <span class="function"><span class="keyword">function</span>(<span class="params">appState</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (appState === <span class="string">'active'</span>) &#123;<span class="comment">//åœ¨çº¿å°±åˆ†å‘åŠ¨ä½œ</span></div><div class="line">      <span class="keyword">this</span>.props.dispatch(loadSessions());</div><div class="line">      <span class="keyword">this</span>.props.dispatch(loadNotifications());</div><div class="line">      <span class="keyword">this</span>.props.dispatch(loadSurveys());</div><div class="line">      CodePush.sync(&#123;<span class="attr">installMode</span>: CodePush.InstallMode.ON_NEXT_RESUME&#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//ä¸‹é¢è¿™ä¸ªåœ°æ–¹å¯¹äºåˆå­¦reduxçš„å°±æœ‰ç‚¹ç»•äº†</span></div><div class="line">    <span class="comment">//åœ¨reducer/user.jsä¸­å®šä¹‰äº†åˆå§‹åŒ–çš„state,isLoggedIn</span></div><div class="line">    <span class="comment">//å°±æ˜¯falseï¼Œæ‰€ä»¥åˆæ¬¡åŠ è½½çš„æ—¶å€™å°±ä¼šæ˜¾ç¤ºç™»å½•æŒ‰é’®äº†</span></div><div class="line">    <span class="comment">//å¦‚æœç™»å½•äº†ä»¥åæ ¹æ®ç™»å½•å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ¥ä¿®æ”¹isLoggedInçš„stateä¸º//trueï¼ŒåŒæ—¶ç”±äºè¿˜ä½¿ç”¨äº†redux-presistçš„ç»„ä»¶æŒä¹…åŒ–stateï¼Œåœ¨ä¸‹ä¸€//æ¬¡æ‰“å¼€çš„æ—¶å€™å°±ä¸ä¼šæ˜¾ç¤ºç™»å½•æŒ‰é’®äº†</span></div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.props.isLoggedIn) &#123;</div><div class="line">      <span class="keyword">return</span> &lt;LoginScreen /&gt;;</div><div class="line">    &#125;</div><div class="line">    return (//å¦‚æœå·²ç»ç™»å½•è¿‡å°±ç›´æ¥æ˜¾ç¤ºå¯¼èˆªç•Œé¢äº†.</div><div class="line">      &lt;View style=&#123;styles.container&#125;&gt;</div><div class="line">        &lt;StatusBar</div><div class="line">          translucent=&#123;true&#125;</div><div class="line">          backgroundColor="rgba(0, 0, 0, 0.2)"</div><div class="line">          barStyle="light-content"</div><div class="line">         /&gt;</div><div class="line">        &lt;F8Navigator /&gt;</div><div class="line">        &lt;PushNotificationsController /&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    );</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">&#125;);</div><div class="line"></div><div class="line">var styles = StyleSheet.create(&#123;</div><div class="line">  container: &#123;</div><div class="line">    flex: 1,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">function select(store) &#123;//è¿™é‡Œåªéœ€è¦è·å–æ˜¯å¦ç™»å½•çš„stateå°±å¯ä»¥äº†</div><div class="line">  //selectå‡½æ•°æˆªå–å’Œæ˜ å°„ç»„ä»¶éœ€è¦çš„é‚£éƒ¨åˆ†stateï¼Œè¿™å’Œæ•°æ®åº“æ˜¯ä¸€æ ·çš„</div><div class="line">  //select * from è·å–æ‰€æœ‰çš„æ•°æ®, åŠ äº†whereæ¡ä»¶å°±ä¼šè¿”å›ä¸€éƒ¨åˆ†æ•°æ®</div><div class="line">  return &#123;</div><div class="line">    isLoggedIn: store.user.isLoggedIn || store.user.hasSkippedLogin,</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = connect(select)(F8App);</div></pre></td></tr></table></figure>
<h2 id="connectæ–‡ä»¶çš„æºç çš„ä¸€ç‚¹ç ”ç©¶-å‡½æ•°å¼ç¼–ç¨‹çš„å¯è’™"><a href="#connectæ–‡ä»¶çš„æºç çš„ä¸€ç‚¹ç ”ç©¶-å‡½æ•°å¼ç¼–ç¨‹çš„å¯è’™" class="headerlink" title="connectæ–‡ä»¶çš„æºç çš„ä¸€ç‚¹ç ”ç©¶-å‡½æ•°å¼ç¼–ç¨‹çš„å¯è’™"></a>connectæ–‡ä»¶çš„æºç çš„ä¸€ç‚¹ç ”ç©¶-å‡½æ•°å¼ç¼–ç¨‹çš„å¯è’™</h2><p>å¦‚æœä½ å¯¹äºreact-reduxæœ‰äº†ä¸€å®šäº†è§£,ä¼šåœ¨connect()ä¸­æ‰¾dispatchåœ¨å“ªé‡Œï¼Ÿå®é™…ä¸Šå¦‚æœæ²¡æœ‰<code>mapDiaptchToProps</code>ä¹Ÿæ˜¯å¯ä»¥å·¥ä½œçš„,åœ¨<code>node_modules/react-redux/commponents/connect.js</code><br><code>connect.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//éƒ¨åˆ†ä»£ç </span></div><div class="line"> <span class="keyword">const</span> defaultMapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123; dispatch &#125;)<span class="comment">//ä¸ä¼ é€’ä¹Ÿæ˜¯å¯ä»¥çš„</span></div><div class="line"> </div><div class="line"> <span class="keyword">let</span> mapDispatch</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> mapDispatchToProps === <span class="string">'function'</span>) &#123;</div><div class="line">    mapDispatch = mapDispatchToProps</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!mapDispatchToProps) &#123;<span class="comment">//å¦‚æœæ²¡ä¼ dispatchå‡½æ•°</span></div><div class="line">  <span class="comment">//å°±æ˜¯é»˜è®¤çš„å‚æ•°,è¿˜æ˜¯dispatch</span></div><div class="line">    mapDispatch = defaultMapDispatchToProps</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    mapDispatch = wrapActionCreators(mapDispatchToProps)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å…¥å£æ–‡ä»¶å’Œåˆå§‹åŒ–é…ç½®å’ŒåŠ è½½é¡¹å°±çœ‹è¿™ä¹ˆå¤š,ä¸‹é¢æˆ‘ä»¬ç›´æ¥å…ˆè·³åˆ°reducerç›®å½•<br>çœ‹çœ‹æ•°æ®stateæ˜¯æ€ä¹ˆç»„ç»‡çš„.</p>
<h1 id="Reduceræ–‡ä»¶å¤¹çš„å†…å®¹"><a href="#Reduceræ–‡ä»¶å¤¹çš„å†…å®¹" class="headerlink" title="Reduceræ–‡ä»¶å¤¹çš„å†…å®¹"></a>Reduceræ–‡ä»¶å¤¹çš„å†…å®¹</h1><p>å›¾ç‰‡2 reducerçš„ç»“æ„ç›®å½•<br>é™¤äº†æµ‹è¯•æ–‡ä»¶å¤¹å’Œå‡æ•°æ®æ–‡ä»¶å¤¹å’ŒcreateParseReducer.jsæ–‡ä»¶,å…¶ä»–çš„æ–‡ä»¶éƒ½å¯¼å…¥åˆ°index.jsæ–‡ä»¶</p>
<h2 id="F8App-reducers-index-js"><a href="#F8App-reducers-index-js" class="headerlink" title="./F8App/reducers/index.js"></a><code>./F8App/reducers/index.js</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta"> 'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123; combineReducers &#125; = <span class="built_in">require</span>(<span class="string">'redux'</span>);</div><div class="line"><span class="comment">//æ¯ä¸ªå¯¼å…¥çš„æ–‡ä»¶éƒ½æ˜¯å¯¹è±¡,combinReducerså‡½æ•°è´Ÿè´£æŠŠå°å¯¹è±¡åˆæˆä¸€ä¸ªå¤§çš„å•ä¸€å¯¹è±¡.</span></div><div class="line"><span class="comment">//å¦‚æœæ˜¯å¤šäººå¼€å‘æˆ‘è§‰å¾—å¯ä»¥æ¯ä¸ªå¼€å‘è€…ï¼šä¸€ä¸ªç»„ä»¶-ä¸€ç»„ç›¸å…³çš„actions-</span></div><div class="line"><span class="comment">//-ä¸€ä¸ªå•ä¸€çš„reducer,å¦‚æœæ¯”å–»çš„è¯åƒæ˜¯ä¸€æ ¹ç²—ç»³å­,å®é™…æ˜¯æœ‰å°è‚¡çš„ç»³å­æ‹§åœ¨//ä¸€èµ·å½¢æˆçš„,å„è‡ªåœ¨å‡ºåŠ›,æ—è¾¹çš„å°è‚¡å¦‚æœå‡ºé—®é¢˜äº†ä¸å½±å“å…¶ä»–éƒ¨åˆ†.</span></div><div class="line"><span class="built_in">module</span>.exports = combineReducers(&#123;</div><div class="line">  <span class="attr">config</span>: <span class="built_in">require</span>(<span class="string">'./config'</span>),</div><div class="line">  <span class="attr">notifications</span>: <span class="built_in">require</span>(<span class="string">'./notifications'</span>),</div><div class="line">  <span class="attr">maps</span>: <span class="built_in">require</span>(<span class="string">'./maps'</span>),</div><div class="line">  <span class="attr">sessions</span>: <span class="built_in">require</span>(<span class="string">'./sessions'</span>),</div><div class="line">  <span class="attr">user</span>: <span class="built_in">require</span>(<span class="string">'./user'</span>),</div><div class="line">  <span class="attr">schedule</span>: <span class="built_in">require</span>(<span class="string">'./schedule'</span>),</div><div class="line">  <span class="attr">topics</span>: <span class="built_in">require</span>(<span class="string">'./topics'</span>),</div><div class="line">  <span class="attr">filter</span>: <span class="built_in">require</span>(<span class="string">'./filter'</span>),</div><div class="line">  <span class="attr">navigation</span>: <span class="built_in">require</span>(<span class="string">'./navigation'</span>),</div><div class="line">  <span class="attr">friendsSchedules</span>: <span class="built_in">require</span>(<span class="string">'./friendsSchedules'</span>),</div><div class="line">  <span class="attr">surveys</span>: <span class="built_in">require</span>(<span class="string">'./surveys'</span>),</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//ç°åœ¨åœ¨æˆ‘çœ¼é‡Œï¼Œindex.jså°±æ˜¯ä¸€ä¸ªæ•°æ®åº“,å…¶ä¸­çš„æ¯ä¸€ä¸ªreducerå°±æ˜¯ä¸€å¼ ã€æ•°</span></div><div class="line"><span class="comment">//æ®è¡¨,è¿™ä¹ˆæ¯”å–»æˆ‘è§‰å¾—è¿˜æ˜¯å¯ä»¥æ¥å—çš„,æœ‰åŠ©äºæ¦‚å¿µçš„ç†è§£</span></div></pre></td></tr></table></figure>
<ul>
<li>åœ¨æ•°æ®åº“ä¸­æ•°æ®åº“çš„åå­—åªæ˜¯ä¸€ä¸ªæ ‡ç¤º,çœŸæ­£å®ç°å…·ä½“å†…å®¹çš„æ˜¯æ¯å¼ è¡¨çš„å†…å®¹,æ‰€ä»¥è¦å…·ä½“çœ‹çœ‹æ¯ä¸ª<code>è¡¨(state)</code>éƒ½æ˜¯æœ‰å“ªäº›å†…å®¹.çŸ¥é“äº†è¡¨é‡Œçš„å†…å®¹,å°±å¯ä»¥ç›¸åº”çš„ç†è§£å¯¹äºè¡¨çš„æ“ä½œæ–¹æ³•(action).</li>
<li><p>combinReducersçš„æºç å®é™…å°±æ˜¯åˆå¹¶å¯¹è±¡çš„,å¦‚æœæ˜¯ç®€å•çš„å¯¹è±¡è¿˜å¥½å¤„ç†ï¼Œå¤æ‚åœ¨ä¸Šé¢çš„<code>æ¯ä¸€ä¸ªreducer</code>å®é™…è¿˜å¯ä»¥åˆå¹¶<code>æ›´å°çš„reducer</code>,è¿™å¯¹äºå¤§å‹é¡¹ç›®çš„stateç»“æ„æœ‰å¥½å¤„,ä½†æ˜¯æºç ä¸å¤ªå¥½ç†è§£,æˆ‘æ²¡ææ‡‚,è€Œä¸”æ›´å¤§å‹çš„stateçš„ç»„ç»‡å½¢å¼è¿˜æ²¡æœ‰çœ‹åˆ°é‚£ä¸ªæºç ä½¿ç”¨,åŠè·¯å‡ºå®¶çš„åŸºç¡€è–„å¼±,è¿™ä¸ªåœ°æ–¹æœ‰ç‚¹å…ä¸ºå…¶éš¾äº†,ä¸è¿‡æ€ä¹ˆåšåº”è¯¥æ˜¯å¾ˆå¥½æ“ä½œçš„.ä»¥ååŠªåŠ›ç†Ÿæ‚‰è¿™ä¸ªæ–¹é¢çš„å†…å®¹.è¿™ä¸ªæ˜¯stateçš„ç»„ç»‡å½¢å¼.åœ¨reduxå’Œreact-reduxä¸­åˆ°å¤„å¼¥æ¼«ç€å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³,å¯æƒœé“è¡Œä¸æ·±,æ— æ³•å®Œå…¨ç†è§£.ç•™å¾…æ—¥åå†è¯´O(âˆ©_âˆ©)O~.</p>
</li>
<li><p>å•ç‹¬çœ‹æ¯ä¸ªå¯¼å…¥çš„reducerå°±æ¶‰åŠåˆ°äº†å…·ä½“çš„é€»è¾‘äº†.è¿™éƒ¨åˆ†çš„reducerçš„æ–‡ä»¶åå’Œactionä¸­çš„æ–‡ä»¶åæ˜¯å¯¹åº”çš„.æ‰€ä»¥åœ¨çœ‹è¿™éƒ¨åˆ†çš„æ—¶å€™è¦ä¸¤ä¸ªæ–‡ä»¶ä¸€èµ·æ‰“å¼€çœ‹.æˆ‘åœ¨macä¸Šä½¿ç”¨äº†sizeUPè½¯ä»¶,ç‚¹å‡»ä¸¤ä¸ªæ–‡ä»¶ä»¥å,é€‰leftæˆ–è€…rightå°±å¯ä»¥æŠŠä¸¤ä¸ªæ–‡ä»¶è§†å›¾å¹³åˆ†åˆ°å±å¹•ä¸Š,ä¸ç”¨æ‰‹åŠ¨å»æ‹‰è§†çª—å¤§å°,éå¸¸æ–¹ä¾¿.</p>
</li>
</ul>
<h1 id="actionå’Œreduceré…å¯¹å‡ºç°"><a href="#actionå’Œreduceré…å¯¹å‡ºç°" class="headerlink" title="actionå’Œreduceré…å¯¹å‡ºç°"></a>actionå’Œreduceré…å¯¹å‡ºç°</h1><h2 id="login-js-actionå’Œuser-js-reducer"><a href="#login-js-actionå’Œuser-js-reducer" class="headerlink" title="login.js actionå’Œuser.js reducer"></a>login.js actionå’Œuser.js reducer</h2><p><code>user.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta"> 'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> type &#123;Action&#125; <span class="keyword">from</span> <span class="string">'../actions/types'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> type State = &#123;<span class="comment">//ç±»å‹çº¦æŸ</span></div><div class="line">  isLoggedIn: boolean;</div><div class="line">  hasSkippedLogin: boolean;</div><div class="line">  sharedSchedule: ?boolean;</div><div class="line">  id: ?string;</div><div class="line">  name: ?string;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = &#123;<span class="comment">//åˆå§‹åŒ–çš„state</span></div><div class="line">  isLoggedIn: <span class="literal">false</span>,</div><div class="line">  <span class="attr">hasSkippedLogin</span>: <span class="literal">false</span>,</div><div class="line">  <span class="attr">sharedSchedule</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">id</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">name</span>: <span class="literal">null</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params">state: State = initialState, action: Action</span>): <span class="title">State</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span> (action.type === <span class="string">'LOGGED_IN'</span>) &#123;å¤„ç†ç™»å½•çš„action</div><div class="line">    <span class="comment">//è·å–actionçš„è´Ÿè½½å†…å®¹</span></div><div class="line">    <span class="keyword">let</span> &#123;id, name, sharedSchedule&#125; = action.data;</div><div class="line">    <span class="keyword">if</span> (sharedSchedule === <span class="literal">undefined</span>) &#123;</div><div class="line">      sharedSchedule = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">isLoggedIn</span>: <span class="literal">true</span>, <span class="comment">//æ ¹æ®è¿™ä¸ªå±æ€§å°±å¯ä»¥åœ¨UIä¸­åšå‡ºç›¸åº”çš„æ”¹å˜äº†</span></div><div class="line">      hasSkippedLogin: <span class="literal">false</span>,</div><div class="line">      sharedSchedule,</div><div class="line">      id,<span class="comment">//ä¸‹é¢è¿™ä¸¤ä¸ªå‚æ•°è¦åœ¨åˆ°è¾¾reducerä¹‹å‰è·å¾—,æ‰€ä»¥åœ¨actionä¸­</span></div><div class="line">      <span class="comment">//æ‰§è¡Œè¿œç¨‹æ•°æ®çš„è·å–</span></div><div class="line">      name,</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (action.type === <span class="string">'SKIPPED_LOGIN'</span>) &#123;<span class="comment">//è·³è¿‡ç™»å½•çš„action</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">isLoggedIn</span>: <span class="literal">false</span>,</div><div class="line">      <span class="attr">hasSkippedLogin</span>: <span class="literal">true</span>,<span class="comment">//æ”¹å˜è¿™ä¸ªå±æ€§</span></div><div class="line">      sharedSchedule: <span class="literal">null</span>,</div><div class="line">      <span class="attr">id</span>: <span class="literal">null</span>,</div><div class="line">      <span class="attr">name</span>: <span class="literal">null</span>,</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (action.type === <span class="string">'LOGGED_OUT'</span>) &#123;<span class="comment">//å¤„ç†ç™»å‡ºçš„action</span></div><div class="line">    <span class="keyword">return</span> initialState;<span class="comment">//è¿”å›åˆå§‹å€¼å°±å¯ä»¥äº†</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (action.type === <span class="string">'SET_SHARING'</span>) &#123;<span class="comment">//è®¾ç½®åˆ†äº«çš„action</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      ...state,</div><div class="line">      <span class="attr">sharedSchedule</span>: action.enabled,<span class="comment">//ç»„ä»¶æ ¹æ®è¿™ä¸ªstateå°±//å¯ä»¥å†³å®šæ˜¯å¯ä»¥åˆ†äº«è¿˜æ˜¯ä¸å¯ä»¥åˆ†äº«</span></div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (action.type === <span class="string">'RESET_NUXES'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> &#123;...state, <span class="attr">sharedSchedule</span>: <span class="literal">null</span>&#125;;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = user;</div></pre></td></tr></table></figure></p>
<p>userçš„reducerè¿˜æ¯”è¾ƒç®€å•,æœ€åä¸€å¥<code>module.expors=user;</code>ä½¿ç”¨äº†javascriptä¸­å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡çš„å®šä¹‰,useræ˜¯è¿™ä¸ª<code>å‡½æ•°å¯¹è±¡çš„å¼•ç”¨</code><br>é‚£ä¹ˆuserå¯¹è±¡ä¸­æ˜¯ä»€ä¹ˆå‘¢ï¼ŸğŸ˜,é‡Œé¢æ˜¯<code>é—­åŒ…</code>å•Š! è¦ä¸ç„¶combineReducersé‡Œé¢è°ƒç”¨userå‡½æ•°çš„æ—¶å€™stateèƒ½è®°ä½æ”¹å˜çš„å†…å®¹å‘¢ï¼Ÿè¦ç†è§£è¿™äº›æ¦‚å¿µ,å¯¹javascriptçš„é—­åŒ…çš„ç†è§£æ˜¯ä¸å¯å°‘çš„. </p>
<p><code>login.js</code><br><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">use</span> <span class="title">strict</span>';</div><div class="line"></div><div class="line"><span class="keyword">const</span> Parse = <span class="keyword">require</span>(<span class="string">'parse/react-native'</span>);<span class="comment">//è¿æ¥parseçš„å®¢æˆ·ç«¯åŒ…</span></div><div class="line"><span class="keyword">const</span> FacebookSDK = <span class="keyword">require</span>(<span class="string">'FacebookSDK'</span>);</div><div class="line"><span class="keyword">const</span> ActionSheetIOS = <span class="keyword">require</span>(<span class="string">'ActionSheetIOS'</span>);<span class="comment">//ä¸Šæ‹‰ç»„ä»¶</span></div><div class="line"><span class="keyword">const</span> &#123;Platform&#125; = <span class="keyword">require</span>(<span class="string">'react-native'</span>);<span class="comment">//</span></div><div class="line"><span class="keyword">const</span> Alert = <span class="keyword">require</span>(<span class="string">'Alert'</span>);</div><div class="line"><span class="keyword">const</span> &#123;restoreSchedule, loadFriendsSchedules&#125; = <span class="keyword">require</span>(<span class="string">'./schedule'</span>);</div><div class="line"><span class="keyword">const</span> &#123;updateInstallation&#125; = <span class="keyword">require</span>(<span class="string">'./installation'</span>);</div><div class="line"><span class="keyword">const</span> &#123;loadSurveys&#125; = <span class="keyword">require</span>(<span class="string">'./surveys'</span>);</div><div class="line"></div><div class="line">import type &#123; Action, ThunkAction &#125; from <span class="string">'./types'</span>;</div><div class="line"><span class="comment">//ä¸‹é¢ä¸¤ä¸ªå‡½æ•°æ˜¯ä½¿ç”¨ParseFacebookç™»å½•çš„å¼‚æ­¥æ“ä½œ</span></div><div class="line">async <span class="function"><span class="keyword">function</span> <span class="title">ParseFacebookLogin</span><span class="params">(scope)</span>: <span class="title">Promise</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Promise((resolve, reject) =&gt; &#123;</div><div class="line">    Parse.FacebookUtils.logIn(scope, &#123;</div><div class="line">      success: resolve,</div><div class="line">      error: (user, error) =&gt; reject(error &amp;&amp; error.error || error),</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">async <span class="function"><span class="keyword">function</span> <span class="title">queryFacebookAPI</span><span class="params">(path, ...args)</span>: <span class="title">Promise</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Promise((resolve, reject) =&gt; &#123;</div><div class="line">    FacebookSDK.api(path, ...args, (response) =&gt; &#123;</div><div class="line">      <span class="keyword">if</span> (response &amp;&amp; !response.error) &#123;</div><div class="line">        resolve(response);</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        reject(response &amp;&amp; response.error);</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">async <span class="function"><span class="keyword">function</span> <span class="title">_logInWithFacebook</span><span class="params">(source: ?string)</span>: <span class="title">Promise</span>&lt;<span class="title">Array</span>&lt;<span class="title">Action</span>&gt;&gt; </span>&#123;</div><div class="line">  await ParseFacebookLogin(<span class="string">'public_profile,email,user_friends'</span>);<span class="comment">//es7çš„å¼‚æ­¥æ“ä½œ</span></div><div class="line">  <span class="keyword">const</span> profile = await queryFacebookAPI(<span class="string">'/me'</span>, &#123;fields: <span class="string">'name,email'</span>&#125;);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> user = await Parse.User.currentAsync();</div><div class="line">  user.set(<span class="string">'facebook_id'</span>, profile.id);</div><div class="line">  user.set(<span class="string">'name'</span>, profile.name);</div><div class="line">  user.set(<span class="string">'email'</span>, profile.email);</div><div class="line">  await user.save();</div><div class="line">  await updateInstallation(&#123;user&#125;);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> action = &#123;<span class="comment">//é…ç½®actionå¯¹è±¡</span></div><div class="line">    type: <span class="string">'LOGGED_IN'</span>, <span class="comment">//ä¼ åˆ°reducerçš„actioType</span></div><div class="line">    source,</div><div class="line">    data: &#123;</div><div class="line">      id: profile.id,</div><div class="line">      name: profile.name,</div><div class="line">      sharedSchedule: user.get(<span class="string">'sharedSchedule'</span>),</div><div class="line">    &#125;,</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> Promise.all([</div><div class="line">    Promise.resolve(action),</div><div class="line">    restoreSchedule(),</div><div class="line">  ]);</div><div class="line">&#125;</div><div class="line"><span class="comment">//è¿™ä¸€æ­¥å°±æœ‰ç‚¹ç»•äº†,ç”±äºæ˜¯è¿œç¨‹æ“ä½œ,éœ€è¦å¼‚æ­¥å¤„ç†,ç­‰å¾…ç»“æœä»¥åæ‰èƒ½dispatch</span></div><div class="line"><span class="comment">//è·å–çš„ç»“æœ,</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">logInWithFacebook</span><span class="params">(source: ?string)</span>: <span class="title">ThunkAction</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> (dispatch) =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> login = _logInWithFacebook(source);<span class="comment">//è¿”å›çš„å°±æ˜¯ä¸Šé¢çš„const action</span></div><div class="line">    </div><div class="line">    <span class="comment">// Loading friends schedules shouldn't block the login process</span></div><div class="line">    login.then(</div><div class="line">      (result) =&gt; &#123;</div><div class="line">        dispatch(result);</div><div class="line">        dispatch(loadFriendsSchedules());</div><div class="line">        dispatch(loadSurveys());</div><div class="line">      &#125;</div><div class="line">    );</div><div class="line">    <span class="keyword">return</span> login;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">skipLogin</span><span class="params">()</span>: <span class="title">Action</span> </span>&#123;<span class="comment">//è·³è¿‡ç™»å½•çš„action</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    type: <span class="string">'SKIPPED_LOGIN'</span>,</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">logOut</span><span class="params">()</span>: <span class="title">ThunkAction</span> </span>&#123;<span class="comment">//ç™»å‡ºä¹Ÿæ˜¯å¼‚æ­¥æ“ä½œ,ç­‰å¾…ä¸¤ä¸ªè¿œç¨‹æ•°æ®çš„ç›¸åº”ç»“æœ</span></div><div class="line">  <span class="keyword">return</span> (dispatch) =&gt; &#123;</div><div class="line">    Parse.User.logOut();</div><div class="line">    FacebookSDK.logout();</div><div class="line">    updateInstallation(&#123;user: <span class="keyword">null</span>, channels: []&#125;);</div><div class="line"></div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> Make sure reducers clear their state</span></div><div class="line">    <span class="keyword">return</span> dispatch(&#123;</div><div class="line">      type: <span class="string">'LOGGED_OUT'</span>,</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">logOutWithPrompt</span><span class="params">()</span>: <span class="title">ThunkAction</span> </span>&#123;<span class="comment">//å¯¹è¯æ¡†é€€å‡º,ä¹Ÿæ˜¯å¼‚æ­¥æ“ä½œ</span></div><div class="line">  <span class="comment">//ç¡®è®¤ä»¥åå†dispatchä¸€ä¸ªaction</span></div><div class="line">  <span class="keyword">return</span> (dispatch, getState) =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> name = getState().user.name || <span class="string">'there'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (Platform.OS === <span class="string">'ios'</span>) &#123;</div><div class="line">      ActionSheetIOS.showActionSheetWithOptions(</div><div class="line">        &#123;</div><div class="line">          title: `Hi, $&#123;name&#125;`,</div><div class="line">          options: [<span class="string">'Log out'</span>, <span class="string">'Cancel'</span>],</div><div class="line">          destructiveButtonIndex: <span class="number">0</span>,</div><div class="line">          cancelButtonIndex: <span class="number">1</span>,</div><div class="line">        &#125;,</div><div class="line">        (buttonIndex) =&gt; &#123;</div><div class="line">          <span class="keyword">if</span> (buttonIndex === <span class="number">0</span>) &#123;<span class="comment">//æ ¹æ®é€»è¾‘åˆ¤dispatché€€å‡ºæ“ä½œ</span></div><div class="line">            dispatch(logOut());</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      );</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      Alert.alert(<span class="comment">//andoidå¼¹å‡ºå¯¹è¯æ¡†</span></div><div class="line">        `Hi, $&#123;name&#125;`,</div><div class="line">        <span class="string">'Log out from F8?'</span>,</div><div class="line">        [</div><div class="line">          &#123; text: <span class="string">'Cancel'</span> &#125;,</div><div class="line">          &#123; text: <span class="string">'Log out'</span>, onPress: () =&gt; dispatch(logOut()) &#125;,</div><div class="line">        ]</div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"><span class="comment">//åˆçœ‹ä»£ç logInWithFacebookè¿™ä¸ªactionæ˜¯æ²¡æœ‰åœ¨ationTypeä¸­çš„,ä½†æ˜¯å…¶å®</span></div><div class="line"><span class="comment">//è¿™ä¸ªå‡½æ•°æœ‰è¿”å›äº†LoginedInå¯¹è±¡,è¿™ä¸€ç‚¹æœ‰ä»”ç»†çœ‹çœ‹</span></div><div class="line">module.exports = &#123;logInWithFacebook, skipLogin, logOut, logOutWithPrompt&#125;;</div></pre></td></tr></table></figure></p>
<p>ç™»å½•çš„å…·ä½“é€»è¾‘å’Œå®ç°å°±æ˜¯è¿™äº›.UIç»„ä»¶è¦æ€ä¹ˆåšå‘¢ï¼Ÿå¥½äº†æˆ‘è¿™é‡Œåœ¨ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜.è¿™ä¸ªæ€æƒ³ä»æˆ‘çš„ç”µç¯æ¨¡å‹å¼€å§‹æ¼”åŒ–æˆä¸ºäº†è‡ªåŠ¨è´©å–æœºæ¨¡å‹æˆ–è€…ATMæœºæ¨¡å‹äº†. æˆ‘ä»¬å§‘ä¸”ç§°ä¸ºATMæœºæ¨¡å‹å¥½äº†.å›æƒ³ä½ å»ATMå–é’±,è¾“å…¥å¯†ç ,è¾“å…¥é’±çš„æ•°ç›®.ä½ æ˜¯å¤§æ¬¾ä¸€æ¬¡æƒ³å–åä¸‡å—,ç‚¹å‡»æŒ‰é”®æˆ–è€…è§¦æ‘¸å±è¾“å…¥åä¸‡å—,å¯æƒœATMçš„é’±ç®±æ²¡æœ‰è£…é‚£ä¹ˆå¤š,å‘Šè¯‰ä½ ATMæœºæ²¡æœ‰è¿™ä¹ˆå¤šé’±ï¼Œè¿™ä¸ªæ¶ˆæ¯ååº”çš„ATMé’±ç®±çš„<code>state</code>æ˜¯æ²¡æœ‰åä¸‡.äºæ˜¯ä½ æŒ‰é”®æˆ–è€…è§¦æ‘¸æ“ä½œè¾“å…¥1000å—,äºæ˜¯ä¹ATMæœºå™¨ç»™ä½ åå‡ºäº†1000å—.ä½ çš„è´¦æˆ·çš„ä½™é¢<code>state</code>å‡æ‰äº†1000å—.è¿™ä¸ªè¿‡ç¨‹å±…ç„¶å’Œcounterçš„è¿‡ç¨‹æ˜¯ä¸€æ ·çš„.é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä»‹ç»è¿™ä¸ªæ¨¡å‹å‘¢ï¼Ÿæˆ‘ä»¬æŒ‰é”®æˆ–è€…è§¦æ‘¸æ“ä½œ,å¹¶æ²¡æœ‰åœ¨å±å¹•ä¸Šå®ç°å…·ä½“çš„æ“ä½œ,é’ç¥¨çš„åˆ¶ä½œ,é’±ç®±çš„æ‰“å¼€,é’ç¥¨çš„æ•°é‡è®¡ç®—éƒ½æ˜¯æœ‰æœºå™¨æ¥å®Œæˆçš„.æˆ‘ä»¬ç‚¹å‡»çš„å±å¹•å’ŒæŒ‰é”®å…¶å®å°±æ˜¯UIç”¨æˆ·ç•Œé¢,ç•Œé¢ä¸Šçš„æŒ‰é”®å…¶å®åªæ˜¯å®é™…æ“ä½œçš„ä»£ç†.javacriptçš„å‡½æ•°å¯ä»¥<code>ä¼ å¼•ç”¨èµ‹å€¼</code>,æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‡½æ•°åå­—æ¥è°ƒç”¨å®é™…çš„å‡½æ•°å…·ä½“æ“ä½œ.å°½ç®¡å±å¹•ä¸Šæ²¡æœ‰é’±ç®±,ä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥å–åˆ°é’±.ä»è¿™ä¸ªä¾‹å­çœ‹,reduxæ˜¯å¤šä¹ˆçš„ç®€å•.ä½†æ˜¯ç¢ç£¨å‡ºè¿™ä¸ªåŸç†ä¹Ÿæ˜¯èŠ±äº†å¾ˆé•¿æ—¶é—´çš„.è¿™å®é™…å°±æ˜¯ä¸­ä»‹è€…æ¨¡å¼.<br>å“ˆå“ˆé‚£ä¸ªé’±ç®±å°±æ˜¯ä¸€ä¸ª<code>é—­åŒ…</code>,ä½ çœ‹çœ‹æ˜¯ä¸æ˜¯ï¼Ÿ</p>
<h2 id="Actionsæ–‡ä»¶å¤¹ä¸­çš„å·¥å…·æ–‡ä»¶parse-js"><a href="#Actionsæ–‡ä»¶å¤¹ä¸­çš„å·¥å…·æ–‡ä»¶parse-js" class="headerlink" title="Actionsæ–‡ä»¶å¤¹ä¸­çš„å·¥å…·æ–‡ä»¶parse.js"></a>Actionsæ–‡ä»¶å¤¹ä¸­çš„å·¥å…·æ–‡ä»¶parse.js</h2><p><code>parse.js</code></p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line"></div><div class="line"><span class="javascript"><span class="meta">'use strict'</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Parse = <span class="built_in">require</span>(<span class="string">'parse/react-native'</span>);<span class="comment">//parseServerçš„å®¢æˆ·ç«¯</span></div><div class="line"><span class="keyword">const</span> logError = <span class="built_in">require</span>(<span class="string">'logError'</span>);</div><div class="line"><span class="keyword">const</span> InteractionManager = <span class="built_in">require</span>(<span class="string">'InteractionManager'</span>);</div><div class="line"></div><div class="line"><span class="keyword">import</span> type &#123; ThunkAction &#125; <span class="keyword">from</span> <span class="string">'./types'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Maps = Parse.Object.extend(<span class="string">'Maps'</span>);<span class="comment">//ParseServerçš„å¯¹è±¡</span></div><div class="line"><span class="comment">//å¯ä»¥å‚çœ‹ireading app feedbackæ¨¡å—é‡Œçš„åé¦ˆæ„è§çš„è¿œç¨‹å­˜å‚¨,ä½¿ç”¨çš„æ˜¯leancloud</span></div><div class="line"><span class="comment">//ä½†æ˜¯APIæ˜¯å®Œå…¨ä¸€æ ·çš„.</span></div><div class="line"><span class="keyword">const</span> Notification = Parse.Object.extend(<span class="string">'Notification'</span>);</div><div class="line"><span class="comment">//æ€»çš„ParseQueryæŸ¥è¯¢å‡½æ•°,æ ¹æ®typeå’ŒæŸ¥è¯¢ç­›é€‰ç»“æœåŠ¨æ€dispatch action</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadParseQuery</span>(<span class="params">type: string, query: Parse.Query</span>): <span class="title">ThunkAction</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> query.find(&#123;</div><div class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// We don't want data loading to interfere with smooth animations</span></div><div class="line">        InteractionManager.runAfterInteractions(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">          <span class="comment">// Flow can't guarantee &#123;type, list&#125; is a valid action</span></div><div class="line">          dispatch((&#123;type, list&#125;: any));</div><div class="line">        &#125;);</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">error</span>: logError,</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"><span class="comment">//loadå°±æ˜¯tabbaré»˜è®¤tabåŠ è½½çš„ä¼šè®®æ—¥ç¨‹state</span></div><div class="line">  loadSessions: (): <span class="function"><span class="params">ThunkAction</span> =&gt;</span><span class="comment">//åŠ è½½ä¼šè®®æ—¥ç¨‹,è¿™é‡Œä¸æ˜¯æµè§ˆå™¨çš„sessionï¼Œæ˜ å°„</span></div><div class="line">    loadParseQuery(</div><div class="line">      <span class="string">'LOADED_SESSIONS'</span>,</div><div class="line">      <span class="keyword">new</span> Parse.Query(<span class="string">'Agenda'</span>)</div><div class="line">        .include(<span class="string">'speakers'</span>)</div><div class="line">        .ascending(<span class="string">'startTime'</span>)</div><div class="line">    ),</div><div class="line"></div><div class="line">  <span class="attr">loadMaps</span>: (): <span class="function"><span class="params">ThunkAction</span> =&gt;</span><span class="comment">//æ˜ å°„</span></div><div class="line">    loadParseQuery(<span class="string">'LOADED_MAPS'</span>, <span class="keyword">new</span> Parse.Query(Maps)),</div><div class="line"></div><div class="line">  <span class="attr">loadNotifications</span>: (): <span class="function"><span class="params">ThunkAction</span> =&gt;</span><span class="comment">//æ˜ å°„å¯¹è±¡</span></div><div class="line">    loadParseQuery(<span class="string">'LOADED_NOTIFICATIONS'</span>, <span class="keyword">new</span> Parse.Query(Notification)),</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="actions-config-js"><a href="#actions-config-js" class="headerlink" title="actions/config.js"></a>actions/config.js</h2><p><code>config.js</code><br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">strict</span>';</div><div class="line"></div><div class="line"><span class="keyword">const</span> Parse = <span class="keyword">require</span>(<span class="string">'parse/react-native'</span>);</div><div class="line"><span class="keyword">const</span> InteractionManager = <span class="keyword">require</span>(<span class="string">'InteractionManager'</span>);</div><div class="line"></div><div class="line">import type &#123; Action &#125; from <span class="string">'./types'</span>; <span class="comment">//è·å¾—æ‰€æœ‰çš„type</span></div><div class="line"></div><div class="line"><span class="comment">//è·å–é…ç½®æ–‡ä»¶çš„å¼‚æ­¥æ“ä½œ</span></div><div class="line">async <span class="function"><span class="keyword">function</span> <span class="title">loadConfig</span><span class="params">()</span>: <span class="title">Promise</span>&lt;<span class="title">Action</span>&gt; </span>&#123;</div><div class="line">  <span class="keyword">const</span> config = await Parse.Config.get();<span class="comment">//Â ä»parseæœåŠ¡å™¨è·å–é…ç½®æ•°æ®</span></div><div class="line">  await InteractionManager.runAfterInteractions();</div><div class="line">  <span class="keyword">return</span> &#123;<span class="comment">//æ“ä½œé€»è¾‘åœ¨è¿™é‡Œè¿”å›configæ•°æ®ç„¶åæ‹·è´åˆ°state</span></div><div class="line">    type: <span class="string">'LOADED_CONFIG'</span>,</div><div class="line">    config,<span class="comment">//é…ç½®è´Ÿè½½æˆ–è€…è½½è·</span></div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = &#123;loadConfig&#125;;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼,è¿”ç’å½’çœŸF8(1)]]></title>
      <url>http://yoursite.com/2017/04/05/%E4%B9%B1%E8%8A%B1%E6%B8%90%E6%AC%B2%E8%BF%B7%E4%BA%BA%E7%9C%BC-%E8%BF%94%E7%92%9E%E5%BD%92%E7%9C%9F-1/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å»å¹´å†™äº†å‡ ç¯‡f8appçš„ä»£ç é˜…è¯»,åŸºæœ¬æ˜¯ç«™åœ¨UIç»„ä»¶çš„è§’åº¦æ¥çš„,éšç€å­¦ä¹ çš„æ·±å…¥,å¯¹å…¶ä¸­çš„ä»£ç æœ‰äº†æ›´æ·±çš„ä½“ä¼š,ç°åœ¨æœ‰å¾ˆå¤šå¼€æºçš„RNé¡¹ç›®å¯ä»¥ä¾›å‚è€ƒ,ä½†æ˜¯æœ‰ä¸€äº›éƒ½å­˜åœ¨æŸäº›é—®é¢˜.ç»†èŠ‚è€ƒè™‘çš„ä¸å‘¨åˆ°,å­¦ä¹ çš„æ„ä¹‰æ‰“äº†æŠ˜æ‰£.F8APPæ˜¯facebookçš„äº²å„¿å­ï¼Œæ‰€ä»¥å¼€å‘è€…çš„æ°´å¹³æ˜¯å¾ˆé«˜çš„,å‰é¢é˜…è¯»çš„æ—¶å€™è§‰å¾—æ€ä¹ˆå†™çš„å¾ˆéš¾æ‡‚,ç”šè‡³è¿˜æœ‰äº›åœ°æ–¹å¯¹Reduxçš„å®ç°éƒ½æ„Ÿè§‰ä¸å¤ªæ ‡å‡†,è¿™ä¸¤å¤©åœ¨å›å¤´çœ‹çš„æ—¶å€™,ä¸å¾—ä¸ä½©æœäººå®¶çš„å¼€å‘æ°´å¹³.ä»£ç é‡Œå¯¹äºç»„ä»¶çš„å®ç°,Reduxçš„æ¸—é€,å¤šæ•°æ®æºçš„æ¥å…¥,ä»£ç ç»„ç»‡æ–¹é¢éƒ½æ˜¯ç‹¬å±…åŒ å¿ƒçš„.æˆ‘è‡ªä»é‡æ–°é˜…è¯»äº†ä»¥å,æ„Ÿè§‰å†™ä»£ç å½“å¦‚æ­¤å•Š. </p>
</blockquote>
<p>ä½†æ˜¯åˆ°äº†ç°åœ¨çš„è¿™ä¸ªè§‰æ‚Ÿå¹¶ä¸æ˜¯ä¸€è¹´è€Œå°±çš„.ç»è¿‡ä¸€æ®µæ—¶é—´çš„å­¦ä¹ ,å­¦ä¹ å·¥å…·ç®±é‡Œå°±æœ‰ä¸€äº›å·¥å…·äº†.</p>
<ul>
<li>å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³,javascripté‡Œçš„å‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡,å…¶å®æ„æ€æ˜¯å‡½æ•°å’Œå¯¹è±¡åœ¨javascriptä¸­éƒ½æ˜¯<code>å¼•ç”¨èµ‹å€¼çš„</code>,<strong>è¿™ä¸€ç‚¹éå¸¸çš„éå¸¸çš„å…³é”®</strong>.è¿™å¹¶éå±è¨€è€¸å¬,ä¸€æ—¦ä½ åœ¨è¯»ä»£ç ä¸­æœ‰äº†è¿™ä¸ªè§‰æ‚Ÿçš„è¯,javascriptçš„åŠŸåŠ›ä¼šå¤§å¢çš„.æˆ‘ä»¬éšæ—¶å¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªå˜é‡ä¸Š,è¿™å°±æ˜¯å¼•ç”¨èµ‹å€¼,ä¸€æ—¦è¿™æ ·åšä»¥å,å‡½æ•°å¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜é‡åœ¨ä»£ç ä¸­ä¼ æ¥ä¼ å»,çµæ´»æ€§å¤§å¢.æœ‰æ²¡æœ‰æ€è€ƒè¿‡React/Reduxä¸­ç»„ä»¶dispatchä¸€ä¸ªactionåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ?bindActionCreatoræ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿè¿™è¿˜æ²¡å®Œ,ç»§ç»­æŒ–æ˜å‡½æ•°ç¼–ç¨‹æ˜¯æ€ä¹ˆåœ¨f8é‡Œå®ç°çš„</li>
<li>æ¨¡å¼è®¾è®¡çš„æ€æƒ³ï¼šä¸­ä»‹è€…æ¨¡å¼,å‘å¸ƒè®¢é˜…è€…æ¨¡å¼,ç­‰ç­‰æ¨¡å¼,åœ¨è¿™é¢ä¹Ÿå¾ˆå¥½çš„å®ç°äº†ã€‚è¦æœ‰ä¸€ç‚¹æ¨¡å¼è®¾è®¡çš„çŸ¥è¯†</li>
<li>React-nativeè·¨å¹³å°å¼€å‘çš„ä»£ç å¤ç”¨é—®é¢˜,åŠŸèƒ½,é€»è¾‘å’Œè¡¨ç°å½¢å¼çš„ç»“åˆæ€è€ƒã€‚å…ˆé€»è¾‘åè¡¨ç°ã€‚</li>
<li>ä¸´æœºåº”å˜,åˆšå¼€å§‹çœ‹f8appçš„ä»£ç çš„æ—¶å€™çœ‹ä¸ä¸‹å»,å°¤å…¶æ˜¯åœ¨å¯¹reduxæœ‰äº†åˆæ­¥çš„äº†è§£,äº§ç”Ÿç›²ç›®å´‡æ‹œä»¥å,åœ¨Reactä¸­å¿…é¡»è¦æ‰¾åˆ°å‡ ä¸ªæ–‡ä»¶å¤¹åœ¨æ‰èƒ½æ˜¯æ ¹æ­£è‹—çº¢çš„Reduxåº”ç”¨.äºæ˜¯åœ¨é‡Œé¢æ‰¾,è¿™é‡Œé¢æ›´æœ¬å°±æ²¡æœ‰containeræ–‡ä»¶å¤¹ä¹ˆï¼Ÿæ€ä¹ˆåŠï¼Ÿå…¶å®åœ¨containeræ–‡ä»¶ä¸­ä¹Ÿåªæ˜¯ç”¨connectå¯¹è±¡æ³¨å…¥äº†ç»„ä»¶æ˜¯ç»„ä»¶è®¢é˜…äº†éœ€è¦çš„propsï¼Œå…·æœ‰äº†dispatchæ–¹æ³•.ä»…æ­¤è€Œå·².æ‰€ä»¥åœ¨f8appä¸­ç›´æ¥åœ¨UIç»„ä»¶ä¸­ä½¿ç”¨äº†connectå¯¹è±¡.è¿™æ ·å¯¹äºç¼–ç å®é™…æ›´å¥½æ“ä½œï¼Œæ›´ç›´è§‚.å¦å¤–å¸¦æ¥çš„å¥½å¤„æ˜¯,ç»„ä»·å…¶å®ä¸ä¸€å®šéè¦ç”¨reduxæ¥å¤„ç†,å¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ¡†æ¶æ¥å¤„ç†.infoè¿™ä¸ªæ¨¡å—å°±æ²¡æœ‰é‡‡ç”¨reduxçš„æ¡†æ¶.è¦ä»åŠŸèƒ½ä¸Šçµæ´»å¤„ç†ã€‚èƒ½è¾¾åˆ°éšæœºåº”å˜è¦å¯¹åŠŸèƒ½çš„å®ç°æœ‰æ·±åˆ»çš„è®¤è¯†ã€‚</li>
<li>å¯¹äºstateçš„æ€è€ƒ,åé¢å¦‚æœè¦ç»§ç»­æé«˜RNçš„ç¼–ç¨‹èƒ½åŠ›,è¦ä¸æ–­çš„æ€è€ƒstateçš„é—®é¢˜.ç›®å‰çœ‹åˆ°çš„ä¸¤ä¸ªå¤§å‹ç¨‹åºçš„stateï¼Œä¸€ä¸ªæ˜¯f8çš„ï¼Œä¸€ä¸ªæ˜¯cnodeçš„state.<br>æˆ‘å‰é¢å†™è¿‡æ–‡ç« æŠŠstateçœ‹æˆæ˜¯å†…å­˜çš„æ•°æ®åº“,å›´ç»•ç€stateåšå¢åˆ æ”¹æŸ¥å·¥ä½œï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªæ„æ€å‘¢ï¼Ÿf8ä¸­çš„stateå®ç°æ˜¯ä¸€é¢—å€’ç«‹çš„æ ‘,ä¸ºä»€ä¹ˆæ˜¯æ ‘å‘¢ï¼Ÿè¿™æ˜¯ç›¸å¯¹äºç½‘çŠ¶ç»“æ„æ¥çš„,stateä¸­æ˜¯æ²¡æœ‰ä¹‹é—´çš„è¿æ¥å…³ç³»çš„.æ•°æ®ä»¥èŠ‚ç‚¹æ¥ç»„ç»‡.çœ‹åˆ°f8appä¸­combineReducerä¸­çš„æ˜ å°„çš„æ—¶å€™ï¼Œé‚£æ„Ÿè§‰çœŸçˆ½å•Šã€‚ç¼–ç¨‹çœŸæœ‰æ„æ€.å›å¤´çœ‹ä»£ç åœ¨è§£é‡Š.</li>
<li>parse-serverå’Œgraghqlçš„é—®é¢˜,</li>
<li><p>è§‚å¯Ÿçš„è§†ç‚¹é€‰æ‹©é—®é¢˜,å¦‚æœä¼šä½ çœ‹è¿‡<a href="https://medium.com/@rajaraodv/step-by-step-guide-to-building-react-redux-apps-using-mocks-48ca0f47f9a" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>,<a href="https://wenku.baidu.com/view/881a48f8aaea998fcd220ea5.html?from=search" target="_blank" rel="external">ä¸­æ–‡ç¿»è¯‘ç‰ˆ</a>çš„è¯,è¿™ç¯‡æ–‡ç« å®é™…æ˜¯ä»UIç»„ä»¶çš„è§’åº¦æ¥æ‰¾è§†ç‚¹çš„,å¯¹äºåˆå­¦è€…ä¿©è¯´,è¿™ç¯‡æ–‡ç« çš„ç¡®æ˜¯å¾ˆå¥½çš„,ä½†æ˜¯å¯¹äºF8appè¿™æ ·çš„å¤§å‹app,ä»è§†å›¾å°±æœ‰ç‚¹å–§å®¾å¤ºä¸»äº†.åœ¨f8appä¸­stateå’ŒActionsçš„å¤æ‚ç¨‹åº¦æ›´é«˜,ä»ç»„ä»¶ä¸Šé¢å»å­¦ä¹ å°±æœ‰ç‚¹éº»çƒ¦,å°¤å…¶æ˜¯è¿™é‡Œé¢æœ‰å‡ ä¸ªåœ°æ–¹çš„ç»„ä»¶ç»„åˆçœŸçš„æ˜¯å¤ªå‰å®³äº†ï¼Œçœ‹å®Œç»„ä»¶çš„ç»„åˆå…³ç³»å°±å·²ç»æ²¡è€å¿ƒäº†.ä»actionå’Œstateå¼€å§‹è¯»ä¼¼ä¹æ˜¯å¯è¡Œçš„.å½“ç„¶å› äººè€Œå¼‚.æˆ‘æå‡ºè¿™ä¸ªè§‚ç‚¹è‡³å°‘æ˜¯è¯´æ˜æˆ‘æ€è€ƒè¿‡è¿™ä¸ªé—®é¢˜.</p>
</li>
<li><p>è´ªå¿ƒåŸç† f8APPä¸­å·²ç»åŒ…å«å’Œäº†å¾ˆå¤šç»„ä»¶å’Œä¸­é—´ä»¶äº†,å¤šå­¦å‡ éå°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ç”¨äº†.å¤ªå¥½äº†.</p>
</li>
</ul>
<blockquote>
<p>æ—¶é—´å¤ªæ™šäº†ï¼Œæœ‰äº›åœ°æ–¹ç™½å¤©æƒ³æ˜ç™½äº†,ç°åœ¨åˆå¿˜äº†.å…ˆå†™è¿™ä¹ˆå¤š.</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|redux undo/redo reducerå¢å¼ºç»„ä»¶]]></title>
      <url>http://yoursite.com/2017/04/04/%E7%BF%BB%E8%AF%91-redux-undo-redo-reucer%E5%A2%9E%E5%BC%BA%E7%BB%84%E4%BB%B6/</url>
      <content type="html"><![CDATA[<blockquote>
<p>Reduxçš„æ–‡æ¡£ä¸­æä¾›ä¸€ä¸ªå¯ä»¥åšundo/redoçš„è§£å†³åŠæ³•,å®é™…æ˜¯æœ‰previous,current,prewçš„å¯¹è±¡,å›´ç»•è¿™æ•°æ®çš„å‹å…¥å’Œå¼¹å‡ºæ¥å®ç°æ“ä½œæ­¥éª¤çš„è®°å¿†,ç»“åˆpersistå°±å¯ä»¥å®ç°æ›´å¼ºå¤§çš„è®°å¿†åŠŸèƒ½.ä»Šå¤©çš„è¿™ä¸ªå¢å¼ºç»„ä»¶å®é™…æŠŠè¿™ä¸ªåŠŸèƒ½ç»™åŒ…è£…äº†ä¸€ä¸‹,å†…éƒ¨å®ç°ç»†èŠ‚ä»ç„¶æ²¡æœ‰å˜.åªéœ€è¦æŠŠreducerç”¨è¿™ä¸ªå¢å¼ºç»„ä»¶åŒ…è£…ä¸€ä¸‹å°±å¯ä»¥ç”¨äº†.</p>
<hr>
</blockquote>
<h1 id="redux-undo-redo"><a href="#redux-undo-redo" class="headerlink" title="redux undo/redo"></a>redux undo/redo</h1><p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1feb2dpdu5xg30eo01k0t1.gif" alt=""></p>
<p>æç¤º:ä½ å¯ä»¥ä½¿ç”¨<a href="https://github.com/omnidan/redux-undo-boilerplate" target="_blank" rel="external">redux-undo-boilerplate</a>æ¥å¼€å§‹é¡¹ç›®.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p><code>npm install --save redux-undo</code></p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> undoable <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div><div class="line">undoable(reducer)</div><div class="line">undoable(reducer, config)</div></pre></td></tr></table></figure>
<h2 id="è®©ä½ çš„reducerså˜å¾—å¯ä»¥é‡åš"><a href="#è®©ä½ çš„reducerså˜å¾—å¯ä»¥é‡åš" class="headerlink" title="è®©ä½ çš„reducerså˜å¾—å¯ä»¥é‡åš"></a>è®©ä½ çš„reducerså˜å¾—å¯ä»¥é‡åš</h2><p><code>redux-undo</code>æ˜¯ä¸€ä¸ªreducerå¢å¼ºç»„ä»¶,å®ƒæä¾›äº†<code>undoable</code>å‡½æ•°,è¿™ä¸ªå‡½æ•°æ¥æ”¶å·²ç»å­˜åœ¨çš„reducerå’Œé…ç½®å¯¹è±¡,ä½¿ç”¨undoå‡½æ•°å¢å¼ºå·²ç»å­˜åœ¨çš„reducer.</p>
<p><strong>æ³¨æ„ï¼š</strong>å¦‚æœåœ¨<code>state.counter</code>ä¹‹å‰æ¥å…¥,ä½ å¿…é¡»è¦åœ¨åŒ…è£…<code>reducer</code>ä¹‹åæ¥å…¥<code>state.coutner.present</code>.</p>
<p>é¦–å…ˆå¯¼å…¥<code>redux-undo</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// Redux utility functions </span></div><div class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="comment">// redux-undo higher-order reducer </span></div><div class="line"><span class="keyword">import</span> undoable <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure></p>
<p>æ¥ç€,æ·»åŠ <code>undoable</code>åˆ°ä½ çš„reducer<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">combineReducers</span>(&#123;</div><div class="line">  <span class="attribute">counter</span>: <span class="built_in">undoable</span>(counter)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p><code>é…ç½®é¡¹</code>æƒ³è¿™æ ·ä¼ é€’<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">combineReducers</span>(&#123;</div><div class="line">  <span class="attribute">counter</span>: <span class="built_in">undoable</span>(counter, &#123;</div><div class="line">    limit: 10 // set a limit for the history </div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="å†å²API"><a href="#å†å²API" class="headerlink" title="å†å²API"></a>å†å²API</h2><p>ä½¿ç”¨reduceråŒ…è£…ä½ çš„reduceræƒ³è¿™æ ·<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> &#123;</div><div class="line">  past: [...pastStatesHere...],</div><div class="line">  present: <span class="meta">&#123;...currentStateHere...&#125;</span>,</div><div class="line">  future: [...futureStatesHere...]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨<code>state.present</code>è·å–å½“å‰çš„state<br>è·å–æ‰€æœ‰è¿‡å»çš„stateä½¿ç”¨<code>state.past</code>.</p>
<h2 id="Undo-Redo-Actions"><a href="#Undo-Redo-Actions" class="headerlink" title="Undo/Redo Actions"></a>Undo/Redo Actions</h2><p>é¦–å…ˆå¯¼å…¥undo/redo action creators<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; ActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure></p>
<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨<code>store.dispatch()</code>å’Œundo/redo action creatorsæ¥æ‰§è¡Œundo/redoæ“ä½œ.<br><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">store.dispatch<span class="comment">(ActionCreators.undo()</span>) <span class="comment">// undo the last action </span></div><div class="line">store.dispatch<span class="comment">(ActionCreators.redo()</span>) <span class="comment">// redo the last action </span></div><div class="line"> </div><div class="line">store.dispatch<span class="comment">(ActionCreators.jumpToPast(index)</span>) <span class="comment">// jump to requested index in the past[] array </span></div><div class="line">store.dispatch<span class="comment">(ActionCreators.jumpToFuture(index)</span>) <span class="comment">// jump to requested index in the future[] array</span></div></pre></td></tr></table></figure></p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>é…ç½®å¯¹è±¡ä¼ é€’ç»™<code>undoable()</code>(å€¼æ˜¯é»˜è®¤å€¼)</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">undoable(reducer, &#123;</div><div class="line">  limi<span class="variable">t:</span> false, // <span class="keyword">set</span> <span class="keyword">to</span> <span class="keyword">a</span> <span class="keyword">number</span> <span class="keyword">to</span> turn <span class="keyword">on</span> <span class="keyword">a</span> limit <span class="keyword">for</span> the <span class="keyword">history</span> </div><div class="line"> </div><div class="line">  <span class="built_in">filter</span>: () =&gt; true, // see `Filtering Actions` section </div><div class="line"> </div><div class="line">  undoType: ActionTypes.UNDO, // define <span class="keyword">a</span> custom action <span class="built_in">type</span> <span class="keyword">for</span> this <span class="keyword">undo</span> action </div><div class="line">  redoType: ActionTypes.REDO, // define <span class="keyword">a</span> custom action <span class="built_in">type</span> <span class="keyword">for</span> this <span class="keyword">redo</span> action </div><div class="line"> </div><div class="line">  jumpToPastType: ActionTypes.JUMP_TO_PAST, // define custom action <span class="built_in">type</span> <span class="keyword">for</span> this jumpToPast action </div><div class="line">  jumpToFutureType: ActionTypes.JUMP_TO_FUTURE, // define custom action <span class="built_in">type</span> <span class="keyword">for</span> this jumpToFuture action </div><div class="line"> </div><div class="line">  initialState: undefined, // initial state (<span class="keyword">e</span>.g. <span class="keyword">for</span> loading) </div><div class="line">  initType<span class="variable">s:</span> [<span class="string">'@@redux/INIT'</span>, <span class="string">'@@INIT'</span>] // <span class="keyword">history</span> will <span class="keyword">be</span> (re)<span class="keyword">set</span> upon init action <span class="built_in">type</span> </div><div class="line">  initialHistory: &#123; // initial <span class="keyword">history</span> (<span class="keyword">e</span>.g. <span class="keyword">for</span> loading) </div><div class="line">    pas<span class="variable">t:</span> [],</div><div class="line">    presen<span class="variable">t:</span> config.initialState,</div><div class="line">    future: []</div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  debu<span class="variable">g:</span> false, // <span class="keyword">set</span> <span class="keyword">to</span> `true` <span class="keyword">to</span> turn <span class="keyword">on</span> debugging </div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="è¿‡æ»¤Actions"><a href="#è¿‡æ»¤Actions" class="headerlink" title="è¿‡æ»¤Actions"></a>è¿‡æ»¤Actions</h2><p>å¦‚æœä½ ä¸æƒ³åŒ…å«æ¯ä¸€æ­¥çš„action,å¯ä»¥ä¼ é€’ä¸€ä¸ªå‡½æ•°åˆ°<code>undoable</code><br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">undoable(reducer, <span class="keyword">function</span> <span class="title">filterActions</span>(action, currentState, previousState) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="type">action.type</span> === SOME_ACTION; // only add to history <span class="keyword">if</span> action <span class="keyword">is</span> SOME_ACTIONåªæœ‰some_actionçš„actionæ‰èƒ½è®°å½• </div><div class="line">&#125;)</div><div class="line"> </div><div class="line">// <span class="keyword">or</span> you could <span class="keyword">do</span>... </div><div class="line"> </div><div class="line">undoable(reducer, <span class="keyword">function</span> <span class="title">filterState</span>(action, currentState, previousState) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="type">currentState</span> !== previousState; // only add to history <span class="keyword">if</span> state changedåªæœ‰stateå˜åŒ–çš„æ‰èƒ½è®°å½•é‡åš </div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨<code>distinctState</code>,<code>includeAction</code>,<code>excludeAction</code>åŠ©æ‰‹å‡½æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> undoable, &#123; distinctState, includeAction, excludeAction &#125; <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨åŠ©æ‰‹å‡½æ•°äº†,ç›¸å½“ç®€å•<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">undoable</span><span class="params">(reducer, &#123; filter: includeAction(SOME_ACTION)</span></span> &#125;)</div><div class="line"><span class="function"><span class="title">undoable</span><span class="params">(reducer, &#123; filter: excludeAction(SOME_ACTION)</span></span> &#125;)</div><div class="line"> </div><div class="line"><span class="comment">// or you could do... </span></div><div class="line"> </div><div class="line"><span class="function"><span class="title">undoable</span><span class="params">(reducer, &#123; filter: distinctState()</span></span> &#125;)</div></pre></td></tr></table></figure></p>
<p>ç”šè‡³è¿˜æ”¯æŒæ•°ç»„<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">undoable</span>(<span class="selector-tag">reducer</span>, &#123; <span class="attribute">filter</span>: <span class="built_in">includeAction</span>([SOME_ACTION, SOME_OTHER_ACTION]) &#125;)</div><div class="line"><span class="selector-tag">undoable</span>(<span class="selector-tag">reducer</span>, &#123; <span class="attribute">filter</span>: <span class="built_in">excludeAction</span>([SOME_ACTION, SOME_OTHER_ACTION]) &#125;)</div></pre></td></tr></table></figure></p>
<h2 id="æœ‰ä»€ä¹ˆé­”æ³•ï¼Ÿæ€ä¹ˆå·¥ä½œçš„"><a href="#æœ‰ä»€ä¹ˆé­”æ³•ï¼Ÿæ€ä¹ˆå·¥ä½œçš„" class="headerlink" title="æœ‰ä»€ä¹ˆé­”æ³•ï¼Ÿæ€ä¹ˆå·¥ä½œçš„"></a>æœ‰ä»€ä¹ˆé­”æ³•ï¼Ÿæ€ä¹ˆå·¥ä½œçš„</h2><p>Reduxæ–‡æ¡£ä¸­çš„<a href="https://rackt.github.io/redux/docs/recipes/ImplementingUndoHistory.html" target="_blank" rel="external"><code>å®ç°Undoå†å²çš„æ–¹æ¡ˆ</code></a>è§£é‡Šäº†redux-undoå·¥ä½œçš„å…·ä½“ç»†èŠ‚.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|Immutable Data Structures and JavaScript]]></title>
      <url>http://yoursite.com/2017/04/04/%E7%BF%BB%E8%AF%91-Immutable-Data-Structures-and-JavaScript/</url>
      <content type="html"><![CDATA[<p>ä¸ä¹…ä»¥å‰æˆ‘ç®€å•çš„è°ˆäº†è°ˆæˆ‘çš„æƒ³æ³•,æŠŠæœ€æ–°çš„blogé‡å†™ä¸€ä¸‹,å‘èª“è¦æ¶‰åŠä¸€äº›å­¦åˆ°çš„æœ‰æ·±åº¦çš„ä¸œè¥¿.ç°åœ¨æˆ‘è¦è°ˆè°ˆjavascriptä¸­çš„immutableæ•°æ®ç»“æ„,å°¤å…¶æ˜¯ä¸¤ä¸ªåº“<a href="https://github.com/facebook/immutable-js" target="_blank" rel="external">immutable.js</a>å’Œ<a href="https://github.com/rtfeldman/seamless-immutable" target="_blank" rel="external">seamliess-immutable</a>.è¿˜æœ‰å…¶ä»–çš„åº“,ä½†æ˜¯é€‰æ‹©æ ‡æ ‡å‡†æ˜¯çœŸæ­£çš„æŒä¹…æ•°æ®ç»“æ„æˆ–è€…æ‹·è´javascriptå¯¹è±¡çš„æ¦‚å¿µåŒºåˆ«.æ¯”è¾ƒè¿™ä¸¤ä¸ªé‡ç‚¹,ä¸è¦ç®¡åˆ°åº•æ˜¯é€‰æ‹©ä»€ä¹ˆåº“.æˆ‘è¿˜è¦è°ˆä¸€ç‚¹<a href="https://github.com/cognitect/transit-js" target="_blank" rel="external">transit-js</a>ï¼Œå®ƒåœ¨åšæ•°æ®çš„åºåˆ—åŒ–æ–¹é¢å¾ˆå¥½.</p>
<p>æœ‰å…³Reduxçš„åº”ç”¨è°ˆçš„å°‘ä¸€ç‚¹.å¤§ä½“æ˜¯è°ˆè°ˆimmutableæ•°æ®ç»“æ„çš„ä½¿ç”¨,ä½†æ˜¯ä¹Ÿæä¾›ä¸€äº›åœ¨Reduxä¸­ä½¿ç”¨çš„ç‰¹æ®Šç‚¹.åœ¨Reduxä¸­,ä½ æœ‰å•ä¸ªçš„stateå¯¹è±¡,å¹¶ä¸”ä¸å¤åˆ¶ä»–,æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„,æ¯ä¸€ä¸ªéƒ½æœ‰æ‰€æƒè¡¡.æˆ‘ä¼šåœ¨åœ¨ä¸‹é¢æ¢ç´¢ä¸€ä¸‹.</p>
<p>åœ¨Reduxä¸­æœ‰ä¸€ä»¶äº‹æ˜¯è¦è€ƒè™‘æ€ä¹ˆèšåˆreducersæ¥å½¢æˆå•ä¸ªçš„app stateåŸå­.Reduxé»˜è®¤æä¾›çš„æ–¹å¼(combineReducers)å‡å®šä½ æŠŠå¤šä¸ªå€¼åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„javascriptå¯¹è±¡.å¦‚æœä½ æƒ³æŠŠä»–ä»¬åˆå¹¶æˆä¸€ä¸ªImmutable.jså¯¹è±¡,ä¾‹å¦‚ä½ å¯èƒ½éœ€è¦ç¼–å†™ä½ è‡ªå·±çš„<em>combinReducers</em>æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„.è¿™ä¸€ç‚¹å¯èƒ½ä¼šéå¸¸æœ‰å¿…è¦å¦‚æœä½ éœ€è¦åºåˆ—åŒ–ä½ çš„app state,å¹¶ä¸”ä½ è®¾å®šstateæ•´ä¸ªéƒ½æ˜¯ç”±Immutable.jså¯¹è±¡ç»„æˆçš„.</p>
<p>å¤§å¤šæ•°è¿™ç§åº”ç”¨ä¸€èˆ¬éƒ½ä½¿ç”¨immutableå¯¹è±¡.æœ‰æ—¶å€™æœ‰ç‚¹å°´å°¬,å› ä¸ºä½ è¦å’Œé»˜è®¤çš„è¯­æ³•æ–—äº‰,è¿™æ„Ÿè§‰å°±åƒä½ åœ¨ç”¨typesç©æ‚è€.ç„¶è€Œ,æ ¹æ®ä½ çš„appå’Œä½ çš„é…ç½®,ä½ å¯ä»¥ä»ä¸­è·³å‡ºæ¥.</p>
<p>ç›®å‰,æœ‰ä¸€ä¸ªä¸ºåŸç”ŸJavascriptåº”ç”¨æ·»åŠ immutableæ•°æ®ç»“æ„çš„<a href="https://github.com/sebmarkbage/ecmascript-immutable-data-structures" target="_blank" rel="external">å»ºè®®</a></p>
<h2 id="Immutable-js"><a href="#Immutable-js" class="headerlink" title="Immutable.js"></a>Immutable.js</h2><p>Immutable.jsæ¥è‡ªFacebook,å®ƒæ˜¯å®ç°immutableæ•°æ®ç»“æ„æœ€æµè¡Œçš„æ–¹æ³•.è§„æ¨¡å¾ˆåºå¤§,ä½¿ç”¨ç±»ä¼¼<code>tries</code>çš„é«˜çº§æ–¹æ³•å®ç°ç»“æ„åŒ–å…±äº«,å®ç°æ•´ä¸ªæ•°æ®çš„æŒä¹…åŒ–.æ‰€æœ‰çš„æ›´æ–°éƒ½è¿”å›æ–°å€¼,ä½†æ˜¯å†…éƒ¨ç»“æ„æ˜¯å…±äº«çš„,è¿™ä¸€ç‚¹å¤§å¤§çš„é™ä½äº†å†…å­˜çš„ä½¿ç”¨(GC thrashing).è¿™å°±æ„å‘³ç€å¦‚æœä½ åº”ç”¨ä¸€ä¸ªæœ‰1000ä¸ªå…ƒç´ çš„çŸ¢é‡,ä»–ä¸ä¼šå®é™…åˆ›å»ºä¸€ä¸ªæœ‰1001ä¸ªå…ƒç´ çš„æ–°çŸ¢é‡.å¤§å¤šæ•°æƒ…å†µä¸‹,å†…éƒ¨ä»…ä»…æœ‰ä¸€äº›å°çš„å¯¹è±¡è¢«åˆ†é….</p>
<p>æ•°æ®ç»“æ„å…±äº«çš„å…ˆè¿›æ€§,å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯ç”±Okasakiçš„å¼€åˆ›æ€§å·¥ä½œå¯å‘çš„,</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Redux undo/redo]]></title>
      <url>http://yoursite.com/2017/04/04/Redux-undo-redo/</url>
      <content type="html"><![CDATA[<h1 id="redux-undo-redo"><a href="#redux-undo-redo" class="headerlink" title="redux undo/redo"></a>redux undo/redo</h1><blockquote>
<p>è¿™æ˜¯æŠŠredux undoçš„å †æ ˆæ“ä½œæœ‰åŒ…è£…äº†ä¸€ä¸‹</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/redux-undo" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/redux-undo.svg?style=flat-square" alt="NPM version (&gt;=0.4)"></a> <a href="https://www.npmjs.com/package/redux-undo" target="_blank" rel="external"><img src="https://img.shields.io/npm/dm/redux-undo.svg?style=flat-square" alt="NPM Downloads"></a> <a href="https://coveralls.io/r/omnidan/redux-undo" target="_blank" rel="external"><img src="https://img.shields.io/coveralls/omnidan/redux-undo.svg?style=flat-square" alt="Coverage Status"></a> <a href="https://david-dm.org/omnidan/redux-undo" target="_blank" rel="external"><img src="https://img.shields.io/david/omnidan/redux-undo.svg?style=flat-square" alt="Dependencies"></a> <a href="http://standardjs.com/" target="_blank" rel="external"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square" alt="js-standard-style"></a> <a href="https://raw.githubusercontent.com/omnidan/redux-undo/master/LICENSE.md" target="_blank" rel="external"><img src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square" alt="GitHub license"></a></p>
<p><em>simple undo/redo functionality for redux state containers</em></p>
<p><a href="https://github.com/omnidan/redux-undo-boilerplate" target="_blank" rel="external"><img src="https://i.imgur.com/M2KR4uo.gif" alt="https://i.imgur.com/M2KR4uo.gif"></a></p>
<p><strong>Protip:</strong> Check out the <a href="https://github.com/omnidan/redux-undo/tree/master/examples/todos-with-undo" target="_blank" rel="external">todos-with-undo example</a> or the <a href="https://github.com/omnidan/redux-undo-boilerplate" target="_blank" rel="external">redux-undo-boilerplate</a> to quickly get started with <code>redux-undo</code>.</p>
<p><strong>Switching from 0.x to 1.0 (beta):</strong> Make sure to update your programs to the <a href="#history-api">latest History API</a>.</p>
<hr>
<p><strong>This README is about the new 1.0-beta branch of redux-undo, if you are using<br>or plan on using 0.6, check out <a href="https://github.com/omnidan/redux-undo/tree/0.6" target="_blank" rel="external">the <code>0.6</code> branch</a></strong></p>
<hr>
<h2 id="Note-on-1-0-0-beta7"><a href="#Note-on-1-0-0-beta7" class="headerlink" title="Note on 1.0.0-beta7"></a>Note on 1.0.0-beta7</h2><p>If you use Redux Undo in CommonJS environment, <strong>donâ€™t forget to add <code>.default</code> to your import</strong>.</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">- var ReduxUndo = require('redux-undo')</span></div><div class="line"><span class="addition">+ var ReduxUndo = require('redux-undo').default</span></div></pre></td></tr></table></figure>
<p>If your environment support es modules just go by:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> ReduxUndo <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure>
<p>We are also supporting UMD build:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ReduxUndo = <span class="built_in">window</span>.ReduxUndo.default;</div></pre></td></tr></table></figure>
<p><strong>once again <code>.default</code> is required.</strong></p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">npm</span> install --save redux-undo@beta</div></pre></td></tr></table></figure>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> undoable <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div><div class="line">undoable(reducer)</div><div class="line">undoable(reducer, config)</div></pre></td></tr></table></figure>
<h2 id="Making-your-reducers-undoable"><a href="#Making-your-reducers-undoable" class="headerlink" title="Making your reducers undoable"></a>Making your reducers undoable</h2><p><code>redux-undo</code> is a reducer enhancer (higher-order reducer), it provides the <code>undoable</code> function, which<br>takes an existing reducer and a configuration object and enhances your existing<br>reducer with undo functionality.</p>
<p><strong>Note:</strong> If you were accessing <code>state.counter</code> before, you have to access<br><code>state.counter.present</code> after wrapping your reducer with <code>undoable</code>.</p>
<p>To install, firstly import <code>redux-undo</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Redux utility functions</span></div><div class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="comment">// redux-undo higher-order reducer</span></div><div class="line"><span class="keyword">import</span> undoable <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure>
<p>Then, add <code>undoable</code> to your reducer(s) like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">combineReducers(&#123;</div><div class="line">  <span class="attr">counter</span>: undoable(counter)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>A <a href="#configuration">configuration</a> can be passed like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">combineReducers(&#123;</div><div class="line">  <span class="attr">counter</span>: undoable(counter, &#123;</div><div class="line">    <span class="attr">limit</span>: <span class="number">10</span> <span class="comment">// set a limit for the history</span></div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="History-API"><a href="#History-API" class="headerlink" title="History API"></a>History API</h2><p>Wrapping your reducer with <code>undoable</code> makes the state look like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">past</span>: [...pastStatesHere...],</div><div class="line">  <span class="attr">present</span>: &#123;...currentStateHere...&#125;,</div><div class="line">  <span class="attr">future</span>: [...futureStatesHere...]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Now you can get your current state like this: <code>state.present</code></p>
<p>And you can access all past states (e.g. to show a history) like this: <code>state.past</code></p>
<h2 id="Undo-Redo-Actions"><a href="#Undo-Redo-Actions" class="headerlink" title="Undo/Redo Actions"></a>Undo/Redo Actions</h2><p>Firstly, import the undo/redo action creators:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; ActionCreators &#125; <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure>
<p>Then, you can use <code>store.dispatch()</code> and the undo/redo action creators to<br>perform undo/redo operations on your state:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">store.dispatch(ActionCreators.undo()) <span class="comment">// undo the last action</span></div><div class="line">store.dispatch(ActionCreators.redo()) <span class="comment">// redo the last action</span></div><div class="line"></div><div class="line">store.dispatch(ActionCreators.jump(<span class="number">-2</span>)) <span class="comment">// undo 2 steps</span></div><div class="line">store.dispatch(ActionCreators.jump(<span class="number">5</span>)) <span class="comment">// redo 5 steps</span></div><div class="line"></div><div class="line">store.dispatch(ActionCreators.jumpToPast(index)) <span class="comment">// jump to requested index in the past[] array</span></div><div class="line">store.dispatch(ActionCreators.jumpToFuture(index)) <span class="comment">// jump to requested index in the future[] array</span></div><div class="line"></div><div class="line">store.dispatch(ActionCreators.clearHistory()) <span class="comment">// [beta only] Remove all items from past[] and future[] arrays</span></div></pre></td></tr></table></figure>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>A configuration object can be passed to <code>undoable()</code> like this (values shown<br>are default values):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">undoable(reducer, &#123;</div><div class="line">  <span class="attr">limit</span>: <span class="literal">false</span>, <span class="comment">// set to a number to turn on a limit for the history</span></div><div class="line"></div><div class="line">  filter: <span class="function"><span class="params">()</span> =&gt;</span> <span class="literal">true</span>, <span class="comment">// see `Filtering Actions` section</span></div><div class="line"></div><div class="line">  undoType: ActionTypes.UNDO, <span class="comment">// define a custom action type for this undo action</span></div><div class="line">  redoType: ActionTypes.REDO, <span class="comment">// define a custom action type for this redo action</span></div><div class="line"></div><div class="line">  jumpType: ActionTypes.JUMP, <span class="comment">// define custom action type for this jump action</span></div><div class="line"></div><div class="line">  jumpToPastType: ActionTypes.JUMP_TO_PAST, <span class="comment">// define custom action type for this jumpToPast action</span></div><div class="line">  jumpToFutureType: ActionTypes.JUMP_TO_FUTURE, <span class="comment">// define custom action type for this jumpToFuture action</span></div><div class="line"></div><div class="line">  clearHistoryType: ActionTypes.CLEAR_HISTORY, <span class="comment">// [beta only] define custom action type for this clearHistory action</span></div><div class="line">  <span class="comment">// you can also pass an array of strings to define several action types that would clear the history</span></div><div class="line">  <span class="comment">// beware: those actions will not be passed down to the wrapped reducers</span></div><div class="line"></div><div class="line">  initTypes: [<span class="string">'@@redux-undo/INIT'</span>] <span class="comment">// history will be (re)set upon init action type</span></div><div class="line">  <span class="comment">// beware: those actions will not be passed down to the wrapped reducers</span></div><div class="line"></div><div class="line">  debug: <span class="literal">false</span>, <span class="comment">// set to `true` to turn on debugging</span></div><div class="line"></div><div class="line">  neverSkipReducer: <span class="literal">false</span>, <span class="comment">// prevent undoable from skipping the reducer on undo/redo and clearHistoryType actions</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><strong>Note:</strong> If you want to use just the <code>initTypes</code> functionality, but not import<br>the whole redux-undo library, use <a href="https://github.com/omnidan/redux-recycle" target="_blank" rel="external">redux-recycle</a>!</p>
<h4 id="Initial-State-and-History"><a href="#Initial-State-and-History" class="headerlink" title="Initial State and History"></a>Initial State and History</h4><p>You can use your redux store to set an initial history for your undoable reducers:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> initialHistory = &#123;</div><div class="line">  <span class="attr">past</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  <span class="attr">present</span>: <span class="number">4</span>,</div><div class="line">  <span class="attr">future</span>: [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(undoable(counter), initialHistory);</div></pre></td></tr></table></figure>
<p>Or just set the current state like youâ€™re used to with Redux. Redux-undo will create the history for you:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(undoable(counter), &#123;<span class="attr">foo</span>: <span class="string">'bar'</span>&#125;);</div><div class="line"></div><div class="line"><span class="comment">// will make the state look like this:</span></div><div class="line">&#123;</div><div class="line">  <span class="attr">past</span>: [],</div><div class="line">  <span class="attr">present</span>: &#123;<span class="attr">foo</span>: <span class="string">'bar'</span>&#125;,</div><div class="line">  <span class="attr">future</span>: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Filtering-Actions"><a href="#Filtering-Actions" class="headerlink" title="Filtering Actions"></a>Filtering Actions</h3><p>If you donâ€™t want to include every action in the undo/redo history, you can<br>add a <code>filter</code> function to <code>undoable</code>. <code>redux-undo</code> provides you with the<br><code>includeAction</code> and <code>excludeAction</code> helpers for basic filtering.</p>
<p>They should be imported like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> undoable, &#123; includeAction, excludeAction &#125; <span class="keyword">from</span> <span class="string">'redux-undo'</span>;</div></pre></td></tr></table></figure>
<p>Now you can use the helper functions:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">undoable(reducer, &#123; <span class="attr">filter</span>: includeAction(SOME_ACTION) &#125;)</div><div class="line">undoable(reducer, &#123; <span class="attr">filter</span>: excludeAction(SOME_ACTION) &#125;)</div><div class="line"></div><div class="line"><span class="comment">// they even support Arrays:</span></div><div class="line"></div><div class="line">undoable(reducer, &#123; <span class="attr">filter</span>: includeAction([SOME_ACTION, SOME_OTHER_ACTION]) &#125;)</div><div class="line">undoable(reducer, &#123; <span class="attr">filter</span>: excludeAction([SOME_ACTION, SOME_OTHER_ACTION]) &#125;)</div></pre></td></tr></table></figure>
<p><strong>Note:</strong> Since <a href="https://github.com/omnidan/redux-undo/releases/tag/beta4" target="_blank" rel="external"><code>beta4</code></a>,<br>          only actions resulting in a new state are recorded. This means the<br>          (now deprecated) <code>distinctState()</code> filter is auto-applied.</p>
<h4 id="Custom-filters"><a href="#Custom-filters" class="headerlink" title="Custom filters"></a>Custom filters</h4><p>If you want to create your own filter, pass in a function with the signature<br><code>(action, currentState, previousHistory)</code>. For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">undoable(reducer, &#123;</div><div class="line">  <span class="attr">filter</span>: <span class="function"><span class="keyword">function</span> <span class="title">filterActions</span>(<span class="params">action, currentState, previousHistory</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> action.type === SOME_ACTION; <span class="comment">// only add to history if action is SOME_ACTION</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// The entire `history` state is available to your filter, so you can make</span></div><div class="line"><span class="comment">// decisions based on past or future states:</span></div><div class="line"></div><div class="line">undoable(reducer, &#123;</div><div class="line">  <span class="attr">filter</span>: <span class="function"><span class="keyword">function</span> <span class="title">filterState</span>(<span class="params">action, currentState, previousHistory</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> &#123; past, present, future &#125; = previousHistory;</div><div class="line">    <span class="keyword">return</span> future.length === <span class="number">0</span>; <span class="comment">// only add to history if future is empty</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Combining-Filters"><a href="#Combining-Filters" class="headerlink" title="Combining Filters"></a>Combining Filters</h3><p>You can also use our helper to combine filters.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> undoable, &#123;combineFilters&#125; <span class="keyword">from</span> <span class="string">'redux-undo'</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isActionSelfExcluded</span>(<span class="params">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> action.wouldLikeToBeInHistory</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">areWeRecording</span>(<span class="params">action, state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.recording</div><div class="line">&#125;</div><div class="line"></div><div class="line">undoable(reducer, &#123;</div><div class="line">  <span class="attr">filter</span>: combineFilters(isActionSelfExcluded, areWeRecording)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Ignoring-Actions"><a href="#Ignoring-Actions" class="headerlink" title="Ignoring Actions"></a>Ignoring Actions</h3><p>When implementing a filter function, it only prevents the old state from being<br>stored in the history. <strong><code>filter</code> does not prevent the present state from being<br>updated.</strong></p>
<p>If you want to ignore an action completely, as in, not even update the present<br>state, you can make use of <a href="https://github.com/omnidan/redux-ignore" target="_blank" rel="external">redux-ignore</a>.</p>
<p>It can be used like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; ignoreActions &#125; <span class="keyword">from</span> <span class="string">'redux-ignore'</span></div><div class="line"></div><div class="line">ignoreActions(</div><div class="line">  undoable(reducer),</div><div class="line">  [IGNORED_ACTION, ANOTHER_IGNORED_ACTION]</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// or define your own function:</span></div><div class="line"></div><div class="line">ignoreActions(</div><div class="line">  undoable(reducer),</div><div class="line">  (action) =&gt; action.type === SOME_ACTION <span class="comment">// only add to history if action is SOME_ACTION</span></div><div class="line">)</div></pre></td></tr></table></figure>
<h2 id="What-is-this-magic-How-does-it-work"><a href="#What-is-this-magic-How-does-it-work" class="headerlink" title="What is this magic? How does it work?"></a>What is this magic? How does it work?</h2><p>Have a read of the <a href="http://redux.js.org/docs/recipes/ImplementingUndoHistory.html" target="_blank" rel="external">Implementing Undo History recipe</a> in the Redux documents, which explains in detail how redux-undo works.</p>
<h2 id="Gitter-Chat-Support"><a href="#Gitter-Chat-Support" class="headerlink" title="Gitter Chat / Support"></a>Gitter Chat / Support</h2><p>If you have a question or just want to discuss something with other redux-undo users/maintainers, <a href="https://gitter.im/omnidan/redux-undo" target="_blank" rel="external">chat with the community on gitter.im/omnidan/redux-undo</a></p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT, see <code>LICENSE.md</code> for more information.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|Simple React Native forms with redux-form, immutable.js and styled-components - Esben Petersen]]></title>
      <url>http://yoursite.com/2017/04/04/%E7%BF%BB%E8%AF%91-Simple-React-Native-forms-with-redux-form-immutable-js-and-styled-components-Esben-Petersen/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨Reactä¸­å¤„ç†è¡¨å•è¿˜ä¸æ€ä¹ˆå¥½å¼„,çœ‹çœ‹è¿™ç¯‡æ–‡ç« è®²çš„æŒºå¥½çš„çœ‹çœ‹,è¯•ç€ç¿»è¯‘ä¸€ä¸‹<br>  <a href="http://esbenp.github.io/2017/01/06/react-native-redux-form-immutable-styled-components/" target="_blank" rel="external">åŸæ–‡å‚çœ‹</a></p>
</blockquote>
<h1 id="start"><a href="#start" class="headerlink" title="start"></a>start</h1><p>å¦‚æœä½ æƒ³çœ‹çœ‹æ€ä¹ˆåœ¨react-native æƒ³ä½¿ç”¨redux-formå’Œimmutable.js.ä½ çœ‹å¯ä»¥çœ‹çœ‹<a href="https://github.com/esbenp/react-native-redux-form-example" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« çš„ä»£ç </a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>åœ¨<code>Traede</code>,æˆ‘ä½¿ç”¨reduxæ•´åˆredux-formæ¥åˆ›å»ºè¡¨å•.redux-formæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„åº“,ä½†æ˜¯æ²¡æœ‰ä»€ä¹ˆå¥½çš„ç¤ºä¾‹ä»£ç ä»‹ç»æ€ä¹ˆå’ŒReact-nativeé…åˆä½¿ç”¨.æ‰€ä»¥å½“æˆ‘å¼€å§‹åœ¨React-Natvieä¸­ä½¿ç”¨redux-formçš„æ—¶å€™,å‘ç°è¿˜æ˜¯æœ‰ä¸€ç‚¹éš¾åº¦çš„.å¤§å¤šæ•°çš„æƒ…å†µéƒ½å› ä¸ºæˆ‘å‘ç°åœ¨React-Nativeä¸­ä½¿ç”¨Immutable.jsçš„æ—¶å€™ä¼šä¸­æ–­redux-formè¿è¡Œçš„bug.Redux-formä¸»ç‰ˆæœ¬å·å·²ç»åˆ°äº†6.4.2äº†.æ‰€ä»¥æˆ‘è€ƒè™‘å¯ä»¥æ ¹æ®æˆ‘çš„å­¦ä¹ è¿‡ç¨‹æ¥å†™ä¸€ç‚¹æ€ä¹ˆåœ¨åº”ç”¨ä¸­åŒæ—¶ä½¿ç”¨redux-formå’ŒImmutable.jsçš„æ–‡æ¡£.</p>
<h2 id="Agenda"><a href="#Agenda" class="headerlink" title="Agenda"></a>Agenda</h2><p>å¤§ä½“çš„æ­¥éª¤æ˜¯:</p>
<ol>
<li>çœ‹çœ‹redux-formåœ¨nativeå’Œwebä¹‹é—´çš„å·®å¼‚ç‚¹</li>
<li>çœ‹çœ‹æ€ä¹ˆä½¿redux-formå’ŒImmutable.jsä¸€èµ·ä½¿ç”¨</li>
<li>ä½¿ç”¨react-native-clean-formçš„å®Œæ•´å®ä¾‹</li>
</ol>
<p>é¸¡å†»ä¸ï¼Ÿå¥½äº†,å¼€å§‹äº†</p>
<h2 id="åœ¨React-nativeä¸­ä½¿ç”¨redux-form"><a href="#åœ¨React-nativeä¸­ä½¿ç”¨redux-form" class="headerlink" title="åœ¨React-nativeä¸­ä½¿ç”¨redux-form"></a>åœ¨React-nativeä¸­ä½¿ç”¨redux-form</h2><p>å¦‚æœä½ ä¸å¤ªç†Ÿæ‚‰redux-form,æˆ‘å»ºè®®ä½ çœ‹çœ‹<a href="http://redux-form.com/6.4.3/docs/GettingStarted.md/" target="_blank" rel="external">redux-formç®€å•æ–‡æ¡£</a><br>.<em>æ³¨æ„ï¼šè¿™ä¸ªæŒ‡å—å‡å®šä½ ä½¿ç”¨çš„redux-formçš„ç‰ˆæœ¬å¤§äº6.4.2</em>.å¦‚æœä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬,å¹¶ä¸”è¿˜åœ¨ä½¿ç”¨Immutable.js,é‚£ä¹ˆè¦çœ‹çœ‹è¿™ä¸ª<a href="https://github.com/erikras/redux-form/pull/2336" target="_blank" rel="external">issue</a>.åˆ›å»ºä¸€ä¸ªè¡¨å•åŸºç¡€çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯:</p>
<ol>
<li>åœ¨ä½ çš„redux storeä¸­åŠ å…¥redux-form reducer</li>
<li>ä½¿ç”¨<code>reduxForm</code>åŒ…è£…å™¨æŠŠä½ çš„è¡¨å•è¿æ¥åˆ°store</li>
<li>ä½¿ç”¨<code>Field</code>åŒ…è£…å™¨æŠŠç‰¹å®šçš„è¡¨å•å­—æ®µè¿æ¥åˆ°Store</li>
</ol>
<h3 id="0-åˆ›å»ºReact-Native-é¡¹ç›®"><a href="#0-åˆ›å»ºReact-Native-é¡¹ç›®" class="headerlink" title="0. åˆ›å»ºReact Native é¡¹ç›®"></a>0. åˆ›å»ºReact Native é¡¹ç›®</h3><p>å‡è®¾ä½ å·²ç»æœ‰äº†å¯ä»¥è¿è¡Œçš„React Nativeé¡¹ç›®.å¦‚æœæ²¡æœ‰,ä½¿ç”¨<code>react-native init MyReduxFormProjct</code>ç»ˆç«¯å‘½ä»¤è¡Œå‘½ä»¤ä¹Ÿå¾ˆå®¹æ˜“åˆ›å»ºé¡¹ç›®.</p>
<h3 id="1-æŠŠredux-form-reduceræ·»åŠ åˆ°ä½ çš„redux-store"><a href="#1-æŠŠredux-form-reduceræ·»åŠ åˆ°ä½ çš„redux-store" class="headerlink" title="1.æŠŠredux-form reduceræ·»åŠ åˆ°ä½ çš„redux store"></a>1.æŠŠredux-form reduceræ·»åŠ åˆ°ä½ çš„redux store</h3><p>åšè¿™ä¸€æ­¥,è¯·å‚è€ƒ<a href="http://redux-form.com/6.4.3/docs/GettingStarted.md/" target="_blank" rel="external">redux-formæ–‡æ¡£</a></p>
<h3 id="2-ä½¿ç”¨redux-formåŒ…è£…å™¨æŠŠä½ çš„formè¿æ¥åˆ°store"><a href="#2-ä½¿ç”¨redux-formåŒ…è£…å™¨æŠŠä½ çš„formè¿æ¥åˆ°store" class="headerlink" title="2.ä½¿ç”¨redux-formåŒ…è£…å™¨æŠŠä½ çš„formè¿æ¥åˆ°store"></a>2.ä½¿ç”¨redux-formåŒ…è£…å™¨æŠŠä½ çš„formè¿æ¥åˆ°store</h3><p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¡¨å•æ¥å¼€å§‹å·¥ä½œ.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  TextInput,</div><div class="line">  TouchableOpacity,</div><div class="line">  View</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Form = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">TextInput</span> <span class="attr">style</span>=<span class="string">&#123;styles.input&#125;</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.button&#125;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default Form</div><div class="line"></div><div class="line">const styles = StyleSheet.create(&#123;</div><div class="line">  button: &#123;</div><div class="line">    backgroundColor: 'blue',</div><div class="line">    color: 'white',</div><div class="line">    height: 30,</div><div class="line">    lineHeight: 30,</div><div class="line">    marginTop: 10,</div><div class="line">    textAlign: 'center',</div><div class="line">    width: 250</div><div class="line">  &#125;,</div><div class="line">  container: &#123;</div><div class="line"></div><div class="line">  &#125;,</div><div class="line">  input: &#123;</div><div class="line">    borderColor: 'black',</div><div class="line">    borderWidth: 1,</div><div class="line">    height: 37,</div><div class="line">    width: 250</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p><img src="https://ww3.sinaimg.cn/large/006tKfTcly1fe9qllp362j30680b4743.jpg" alt=""></p>
<p>å¥½äº†,æˆ‘ä»¬å·²ç»æœ‰äº†è¡¨å•,çœ‹èµ·æ¥å’Œåäº¿ç¾å…ƒçº§åˆ«çš„appå·®ä¸å¤š.ä¸‹é¢æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>reduxForm</code>åŒ…è£…å™¨æŠŠè¡¨å•è¿æ¥åˆ°redux formä¸Š.è¿™æ˜¯å› ä¸ºåœ¨è¡¨å•ä¸­çš„æ¯ä¸€ä¸ªæŒ‰é”®æ“ä½œéƒ½ä¼šå‘é€è¾“å…¥å­—æ®µçš„å€¼åˆ°store.å½“æˆ‘ä»¬æŒ‰ä¸‹æäº¤æŒ‰é’®,redux-formå°†ä¼šä»storeä¸­è·å–ä¿å­˜çš„å€¼å‘é€åˆ°ä¸€ä¸ªæˆ‘ä»¬å®šåˆ¶çš„å›è°ƒå‡½æ•°.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; reduxForm &#125; <span class="keyword">from</span> <span class="string">'redux-form'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> submit = <span class="function"><span class="params">values</span> =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'submitting form'</span>, values)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Form = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; handleSubmit &#125; = props</div><div class="line"></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">TextInput</span> <span class="attr">style</span>=<span class="string">&#123;styles.input&#125;</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">TouchableOpacity</span> <span class="attr">onPress</span>=<span class="string">&#123;handleSubmit(submit)&#125;</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;styles.button&#125;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default reduxForm(&#123;</div><div class="line">  form: 'test'</div><div class="line">&#125;)(Form)</div></pre></td></tr></table></figure>
<p><em>æ³¨é‡Šï¼šä¸ºäº†ç®€å•,çœç•¥äº†æ ·å¼å’Œå¯¹è±¡çš„å¯¼å…¥ä»£ç </em></p>
<p>å¥½äº†,é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨<code>reduxForm</code>åŒ…è£…formå¹¶è¿æ¥åˆ°store.è¿™æ˜¯<code>react-redux</code>çš„åŸºç¡€ç‰ˆæœ¬ä¹‹ä¸Šçš„ä¸€ç‚¹ä¿®æ”¹,å¯èƒ½ä½ æ¯”è¾ƒç†Ÿæ‚‰äº†.</p>
<p>æ¥ç€,æˆ‘ä»¬ä½¿ç”¨äº†redux-formçš„<code>handleSubmit</code>(è¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡<code>redux-Formæ³¨å…¥åˆ°ç»„ä»¶ä¸­çš„</code>).submitå‡½æ•°é™„åŠ åˆ°æˆ‘ä»¬çš„submitæŒ‰é’®ä¸Š,æ‰€ä»¥ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™,è¡¨å•ä¼šè¢«æäº¤.è¿™ä¸€ç‚¹å’Œwebå¼€å‘çš„submitå‡½æ•°æ˜¯ä¸åŒçš„,webå¼€å‘ä¸­è¿™ä¸ªå‡½æ•°é™„åŠ åˆ°formå…ƒç´ ä¸Š.åœ¨ç§»åŠ¨å¹³å°ä¸Šæ²¡æœ‰formå…ƒç´ ,æ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠå®ƒæ·»åŠ åˆ°buttonä¸Š,æˆ–è€…<code>TouchableOpaticy</code>.å°±æ˜¯è¿™ä¹ˆå›äº‹.</p>
<p>åˆ°äº†è¿™ä¸€æ­¥,å¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå™¨è¿è¡Œä»£ç è¯•è¯•.æˆ‘é«˜åº¦æ¨è<code>react-native-debugger</code>ä½œä¸ºDebugger.ä½ å¯ä»¥çœ‹çœ‹<a href="https://facebook.github.io/react-native/docs/debugging.html" target="_blank" rel="external">React Native æœ‰å…³deguggingæ–‡æ¡£</a>çš„å»ºè®®.</p>
<p>å½“ä½ åœ¨æ¨¡æ‹Ÿå™¨ä¸­è¯•ç€ç‚¹å‡»æäº¤è¡¨å•æ—¶,ä½ å¯ä»¥çœ‹åˆ°å›è°ƒå‡½æ•°è¿”å›äº†ç©ºå€¼.</p>
<p><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fe9qmb54t8j31aq0e0dh3.jpg" alt=""></p>
<p>å€¼åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<h3 id="3-ä½¿ç”¨FieldåŒ…è£…å™¨æŠŠfieldsè¿æ¥åˆ°store"><a href="#3-ä½¿ç”¨FieldåŒ…è£…å™¨æŠŠfieldsè¿æ¥åˆ°store" class="headerlink" title="3.ä½¿ç”¨FieldåŒ…è£…å™¨æŠŠfieldsè¿æ¥åˆ°store"></a>3.ä½¿ç”¨FieldåŒ…è£…å™¨æŠŠfieldsè¿æ¥åˆ°store</h3><p>æ‰€ä»¥è¯´,redux-formè¦å·¥ä½œ,ä½ å¿…é¡»è¦ä½¿ç”¨<code>Field</code>åŒ…è£…å™¨æŠŠæ¯ä¸€ä¸ªfieldè¿æ¥åˆ°store.</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="xml"> import </span><span class="template-variable">&#123; Field, reduxForm &#125;</span><span class="xml"> from 'redux-form'</span></div><div class="line"></div><div class="line">const submit = values =&gt; <span class="template-variable">&#123;</span></div><div class="line">  console.log('submitting form', values)</div><div class="line">&#125;<span class="xml"></span></div><div class="line"></div><div class="line">const renderInput = (<span class="template-variable">&#123; input: &#123; onChange, ...restInput &#125;</span><span class="xml">&#125;) =&gt; </span><span class="template-variable">&#123;</span></div><div class="line">  return &lt;TextInput style=&#123;styles.input&#125;<span class="xml"> onChangeText=</span><span class="template-variable">&#123;onChange&#125;</span><span class="xml"> </span><span class="template-variable">&#123;...restInput&#125;</span><span class="xml"> /&gt;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">const Form = props =&gt; <span class="template-variable">&#123;</span></div><div class="line">  const &#123; handleSubmit &#125;<span class="xml"> = props</span></div><div class="line"></div><div class="line">  return (</div><div class="line">    <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=</span><span class="template-variable">&#123;styles.container&#125;</span><span class="xml"><span class="tag">&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Field</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">component</span>=</span><span class="template-variable">&#123;renderInput&#125;</span><span class="xml"><span class="tag"> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">TouchableOpacity</span> <span class="attr">onPress</span>=</span><span class="template-variable">&#123;handleSubmit(submit)&#125;</span><span class="xml"><span class="tag">&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=</span><span class="template-variable">&#123;styles.button&#125;</span><span class="xml"><span class="tag">&gt;</span>Submit<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default reduxForm(<span class="template-variable">&#123;</span></div><div class="line">  form: 'test'</div><div class="line">&#125;<span class="xml">)(Form)</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„,æˆ‘ä»¬æ·»åŠ äº†<code>Field</code>ç»„ä»¶,ç»™å®šäº†nameå±æ€§,å’Œwebå¼€å‘ä¸­çš„<code>input</code>fieldå·¥ä½œæ˜¯ç±»ä¼¼çš„.æˆ‘ä»¬ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªæ¸²æŸ“å‡½æ•°å‘Šè¯‰reduxForm,è¿™ä¸ªå­—æ®µåº”è¯¥æ€ä¹ˆæ¸²æŸ“.(åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ª<code>TextInput</code>ç»„ä»¶).</p>
<p><em>ç°åœ¨</em>è¿™é‡Œæœ‰äº›å°æŠ€å·§,å¾ˆå¤šäººå¯èƒ½ä¼šå‡ºé”™.<strong>æ‰€ä»¥ç•™å¿ƒä¸€ä¸‹</strong>.åœ¨web Reacä¸­<code>input</code>ç»„ä»¶ä¸­,å½“fieldçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶,è§¦å‘ä¸€ä¸ª<code>onChange</code>å›è°ƒå‡½æ•°.åœ¨React Nativeä¸­<code>TextInput</code>ç»„ä»¶è§¦å‘çš„æ˜¯<code>onChangeText</code>å›è°ƒå‡½æ•°.ä¸ºäº†åº”å¯¹è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ å˜åŒ–çš„å¥æŸ„<code>onChangeText={onChange}</code>.</p>
<p><img src="https://ww1.sinaimg.cn/large/006tKfTcly1fe9qmuwabmj31ao0cmdh6.jpg" alt=""><br>ç°åœ¨å½“æˆ‘ä»¬æäº¤çš„æ—¶å€™,è¡¨å•å·¥ä½œäº†.</p>
<h2 id="ä½¿ç”¨Immutable-jsæ—¶å€™ä¹Ÿå¯ä»¥å·¥ä½œ"><a href="#ä½¿ç”¨Immutable-jsæ—¶å€™ä¹Ÿå¯ä»¥å·¥ä½œ" class="headerlink" title="ä½¿ç”¨Immutable.jsæ—¶å€™ä¹Ÿå¯ä»¥å·¥ä½œ"></a>ä½¿ç”¨Immutable.jsæ—¶å€™ä¹Ÿå¯ä»¥å·¥ä½œ</h2><p>å¦‚æœä½ æƒ³åœ¨stateçš„ç®¡ç†ä¸­ä½¿ç”¨immutable.js,é‚£ä¹ˆéœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤äº†é…åˆredux-formå·¥ä½œ.æˆ‘å»ºè®®ä½ è¯»è¯»<a href="http://redux-form.com/6.4.3/examples/immutable/" target="_blank" rel="external">ä½¿ç”¨immutable.jså’Œredux-formçš„å®˜æ–¹æ–‡æ¡£</a>.ä½†æ˜¯æˆ‘ä»¬é€šè¿‡ä¸€äº›æ­¥éª¤é©¬ä¸Šå¼€å§‹.</p>
<h3 id="1-ä½¿ç”¨redux-immutablejs-combineReducerså’Œredux-form-reducerçš„immutableç‰ˆæœ¬"><a href="#1-ä½¿ç”¨redux-immutablejs-combineReducerså’Œredux-form-reducerçš„immutableç‰ˆæœ¬" class="headerlink" title="1.ä½¿ç”¨redux-immutablejs combineReducerså’Œredux-form reducerçš„immutableç‰ˆæœ¬"></a>1.ä½¿ç”¨redux-immutablejs combineReducerså’Œredux-form reducerçš„immutableç‰ˆæœ¬</h3><p>æ‰¾åˆ°ä½ ç©¿ä»¶redux storeçš„ä»£ç å¤„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux-immutablejs'</span></div><div class="line"><span class="keyword">import</span> &#123; reducer <span class="keyword">as</span> form &#125; <span class="keyword">from</span> <span class="string">'redux-form/immutable'</span> <span class="comment">// &lt;--- immutable import</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> reducer = combineReducers(&#123; form &#125;)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> reducer</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸¤ä»¶äº‹:(1)ä½ å¿…é¡»ä½¿ç”¨ä»redux-immutableæˆ–è€…redux-immutablejsæ³¨å…¥<code>combineReducers</code>æ–¹æ³•.é‡è¦çš„æ˜¯è¾“å…¥çš„reduceræ˜¯ä»<code>redux-form/immutable</code>.<strong>å¹¶ä¸æ˜¯redux-form</strong>.</p>
<h3 id="2-ä½¿ç”¨reduxFormåŒ…è£…å™¨å’ŒFieldçš„immutableç‰ˆæœ¬"><a href="#2-ä½¿ç”¨reduxFormåŒ…è£…å™¨å’ŒFieldçš„immutableç‰ˆæœ¬" class="headerlink" title="2.ä½¿ç”¨reduxFormåŒ…è£…å™¨å’ŒFieldçš„immutableç‰ˆæœ¬"></a>2.ä½¿ç”¨reduxFormåŒ…è£…å™¨å’ŒFieldçš„immutableç‰ˆæœ¬</h3><p>è¿™ä¸€æ­¥å’Œç¬¬ä¸€æ­¥å®é™…æœ‰ç‚¹ç±»ä¼¼.å½“ä½ åœ¨<code>reduxForm</code>ä¸­åŒ…è£…ä¸€ä¸ªè¡¨å•è¿æ¥åˆ°redux storeçš„æ—¶å€™,ç¡®ä¿æ˜¯ä»<code>redux-form/immutable</code>å¯¼å…¥çš„.ç±»ä¼¼<br><code>Field</code>ä¹Ÿæ˜¯ä»è¿™é‡Œå¯¼å…¥çš„.<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="xml">import </span><span class="template-variable">&#123; Field, reduxForm &#125;</span><span class="xml"> from 'redux-form/immutable' // <span class="tag">&lt;<span class="name">----</span> <span class="attr">LOOK</span> <span class="attr">HERE</span></span></span></div><div class="line"></div><div class="line"><span class="attr">const</span> <span class="attr">submit</span> = <span class="string">values</span> =&gt; <span class="template-variable">&#123;</span></div><div class="line">  console.log('submitting form', values.toJS()) &lt;--- use toJS() to cast to plain object</div><div class="line">&#125;<span class="xml"></span></div><div class="line"></div><div class="line">const renderInput = (<span class="template-variable">&#123; input: &#123; onChange, ...restInput &#125;</span><span class="xml">&#125;) =&gt; </span><span class="template-variable">&#123;</span></div><div class="line">  return &lt;TextInput style=&#123;styles.input&#125;<span class="xml"> onChangeText=</span><span class="template-variable">&#123;onChange&#125;</span><span class="xml"> </span><span class="template-variable">&#123;...restInput&#125;</span><span class="xml"> /&gt;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">const Form = props =&gt; <span class="template-variable">&#123;</span></div><div class="line">  const &#123; handleSubmit &#125;<span class="xml"> = props</span></div><div class="line"></div><div class="line">  return (</div><div class="line">    <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=</span><span class="template-variable">&#123;styles.container&#125;</span><span class="xml"><span class="tag">&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">Text</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Field</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">component</span>=</span><span class="template-variable">&#123;renderInput&#125;</span><span class="xml"><span class="tag"> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">TouchableOpacity</span> <span class="attr">onPress</span>=</span><span class="template-variable">&#123;handleSubmit(submit)&#125;</span><span class="xml"><span class="tag">&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=</span><span class="template-variable">&#123;styles.button&#125;</span><span class="xml"><span class="tag">&gt;</span>Submit<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default reduxForm(<span class="template-variable">&#123;</span></div><div class="line">  form: 'test'</div><div class="line">&#125;<span class="xml">)(Form)</span></div></pre></td></tr></table></figure></p>
<h3 id="3-å®Œæˆäº†"><a href="#3-å®Œæˆäº†" class="headerlink" title="3.å®Œæˆäº†"></a>3.å®Œæˆäº†</h3><p>å°±è¿™äº›å†…å®¹,æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p>
<h2 id="åŠ ç‚¹æ ·å¼ç»„ä»¶è®©æˆ‘ä»¬çš„appçœ‹èµ·æ¥åƒåäº¿ç¾å…ƒçº§åˆ«çš„app"><a href="#åŠ ç‚¹æ ·å¼ç»„ä»¶è®©æˆ‘ä»¬çš„appçœ‹èµ·æ¥åƒåäº¿ç¾å…ƒçº§åˆ«çš„app" class="headerlink" title="åŠ ç‚¹æ ·å¼ç»„ä»¶è®©æˆ‘ä»¬çš„appçœ‹èµ·æ¥åƒåäº¿ç¾å…ƒçº§åˆ«çš„app"></a>åŠ ç‚¹æ ·å¼ç»„ä»¶è®©æˆ‘ä»¬çš„appçœ‹èµ·æ¥åƒåäº¿ç¾å…ƒçº§åˆ«çš„app</h2><p>ä½¿ç”¨ç»å¯¹é…·ç‚«çš„Reactæ ·å¼åº“<a href="https://github.com/styled-components/styled-components" target="_blank" rel="external">styled-components</a> .<br>çœ‹çœ‹æºä»£ç <a href="https://github.com/esbenp/react-native-clean-form" target="_blank" rel="external">esbenp/react-native-clean-form</a></p>
<h3 id="ç¬¬ä¸€æ­¥-å®‰è£…react-native-clean-form"><a href="#ç¬¬ä¸€æ­¥-å®‰è£…react-native-clean-form" class="headerlink" title="ç¬¬ä¸€æ­¥:å®‰è£…react-native-clean-form"></a>ç¬¬ä¸€æ­¥:å®‰è£…react-native-clean-form</h3><p>ä½¿ç”¨<code>npm install â€”save react-native-clean-form</code>å®‰è£…formå…ƒç´ .<br>ä¹Ÿéœ€è¦vector icon fonts.<a href="https://github.com/esbenp/react-native-clean-form#installation" target="_blank" rel="external">Readme</a></p>
<h3 id="ç¬¬äºŒæ­¥-è®¾è®¡é…·ç‚«çš„è¡¨å•"><a href="#ç¬¬äºŒæ­¥-è®¾è®¡é…·ç‚«çš„è¡¨å•" class="headerlink" title="ç¬¬äºŒæ­¥:è®¾è®¡é…·ç‚«çš„è¡¨å•"></a>ç¬¬äºŒæ­¥:è®¾è®¡é…·ç‚«çš„è¡¨å•</h3><p><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fe9qnc5uf1j30ku0cdaag.jpg" alt=""></p>
<p>çœ‹çœ‹ä»£ç </p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="xml"> import React, </span><span class="template-variable">&#123; Component &#125;</span><span class="xml"> from 'react'</span></div><div class="line">import <span class="template-variable">&#123;</span></div><div class="line">  ActionsContainer,</div><div class="line">  Button,</div><div class="line">  FieldsContainer,</div><div class="line">  Fieldset,</div><div class="line">  Form,</div><div class="line">  FormGroup,</div><div class="line">  Label,</div><div class="line">  Input,</div><div class="line">  <span class="keyword">Select</span>,</div><div class="line">  Switch</div><div class="line">&#125;<span class="xml"> from 'react-native-clean-form'</span></div><div class="line"></div><div class="line">const countryOptions = [</div><div class="line">  <span class="template-variable">&#123;label: 'Denmark', value: 'DK'&#125;</span><span class="xml">,</span></div><div class="line">  <span class="template-variable">&#123;label: 'Germany', value: 'DE'&#125;</span><span class="xml">,</span></div><div class="line">  <span class="template-variable">&#123;label: 'United State', value: 'US'&#125;</span><span class="xml"></span></div><div class="line">]</div><div class="line"></div><div class="line">const FormView = props =&gt; (</div><div class="line">  <span class="tag">&lt;<span class="name">Form</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">FieldsContainer</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Fieldset</span> <span class="attr">label</span>=<span class="string">"Contact details"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>First name<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"John"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>Last name<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"Doe"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>Phone<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"+45 88 88 88 88"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>First name<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"John"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">Fieldset</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Fieldset</span> <span class="attr">label</span>=<span class="string">"Shipping details"</span> <span class="attr">last</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>Address<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"Hejrevej 33"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>City<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"Copenhagen"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>ZIP Code<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Input</span> <span class="attr">placeholder</span>=<span class="string">"2400"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>Country<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Select</span></span></div><div class="line">              <span class="attr">name</span>=<span class="string">"country"</span></div><div class="line">              <span class="attr">label</span>=<span class="string">"Country"</span></div><div class="line">              <span class="attr">options</span>=<span class="template-variable">&#123;countryOptions&#125;</span><span class="xml"><span class="tag"></span></span></div><div class="line">              <span class="attr">placeholder</span>=<span class="string">"Denmark"</span></div><div class="line">          /&gt;</div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">FormGroup</span> <span class="attr">border</span>=</span><span class="template-variable">&#123;false&#125;</span><span class="xml"><span class="tag">&gt;</span></span></div><div class="line">          <span class="tag">&lt;<span class="name">Label</span>&gt;</span>Save my details<span class="tag">&lt;/<span class="name">Label</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Switch</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">FormGroup</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">Fieldset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">FieldsContainer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ActionsContainer</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">icon</span>=<span class="string">"md-checkmark"</span> <span class="attr">iconPlacement</span>=<span class="string">"right"</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ActionsContainer</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line">export default FormView</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ¯”è¾ƒç†Ÿæ‚‰Twitter Bootstrapä½ å¯ä»¥ä»react-native-clean-formä¸­çœ‹åˆ°ç±»ä¼¼çš„å¥æ³•.å¥½äº†è¾“å…¥<code>Input</code>,<code>Select</code>å’Œ<code>Switch</code>.è¿™é‡Œçš„å…ƒç´ å·²ç»è¢«åŒ…è£…åœ¨<code>FromGroup</code>å’Œ<code>Label</code>.æ­¤å¤–æˆ‘ä»¬ä¹Ÿæ”¯æŒéªŒè¯</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; reduxForm &#125; <span class="keyword">from</span> <span class="string">'redux-form/immutable'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  ActionsContainer,</div><div class="line">  Button,</div><div class="line">  FieldsContainer,</div><div class="line">  Fieldset,</div><div class="line">  Form</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native-clean-form'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  Input,</div><div class="line">  Select,</div><div class="line">  Switch</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-native-clean-form/redux-form-immutable'</span></div><div class="line"><span class="keyword">import</span> &#123; View,Text &#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line"></div><div class="line">const onSubmit = <span class="function"><span class="params">(values, dispatch)</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="function"><span class="params">(resolve)</span> =&gt;</span> &#123;</div><div class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="built_in">console</span>.log(values.toJS())</div><div class="line">      resolve()</div><div class="line">    &#125;, <span class="number">1500</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">const countryOptions = [</div><div class="line">  &#123;label: <span class="string">'Denmark'</span>, value: <span class="string">'DK'</span>&#125;,</div><div class="line">  &#123;label: <span class="string">'Germany'</span>, value: <span class="string">'DE'</span>&#125;,</div><div class="line">  &#123;label: <span class="string">'United State'</span>, value: <span class="string">'US'</span>&#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormView</span> <span class="keyword">extends</span> <span class="title">Component</span> &#123;</span></div><div class="line">  render() &#123;</div><div class="line">    const &#123; handleSubmit, submitting &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Form&gt;</div><div class="line">        &lt;FieldsContainer&gt;</div><div class="line">          &lt;Fieldset label=<span class="string">"Contact details"</span>&gt;</div><div class="line">            &lt;Input name=<span class="string">"first_name"</span> label=<span class="string">"First name"</span> placeholder=<span class="string">"John"</span> /&gt;</div><div class="line">            &lt;Input name=<span class="string">"last_name"</span> label=<span class="string">"Last name"</span> placeholder=<span class="string">"Doe"</span> /&gt;</div><div class="line">            &lt;Input name=<span class="string">"email"</span> label=<span class="string">"Email"</span> placeholder=<span class="string">"something@domain.com"</span> /&gt;</div><div class="line">            &lt;Input name=<span class="string">"telephone"</span> label=<span class="string">"Phone"</span> placeholder=<span class="string">"+45 88 88 88 88"</span> /&gt;</div><div class="line">          &lt;/Fieldset&gt;</div><div class="line">          &lt;Fieldset label=<span class="string">"Shipping details"</span> last&gt;</div><div class="line">            &lt;Input name=<span class="string">"address"</span> label=<span class="string">"Address"</span> placeholder=<span class="string">"Hejrevej 33"</span> /&gt;</div><div class="line">            &lt;Input name=<span class="string">"city"</span> label=<span class="string">"City"</span> placeholder=<span class="string">"Copenhagen"</span> /&gt;</div><div class="line">            &lt;Input name=<span class="string">"zip"</span> label=<span class="string">"ZIP Code"</span> placeholder=<span class="string">"2400"</span> /&gt;</div><div class="line">            &lt;Select</div><div class="line">              name=<span class="string">"country"</span></div><div class="line">              label=<span class="string">"Country"</span></div><div class="line">              options=&#123;countryOptions&#125;</div><div class="line">              placeholder=<span class="string">"Denmark"</span></div><div class="line">            /&gt;</div><div class="line">            &lt;Switch label=<span class="string">"Save my details"</span> border=&#123;<span class="literal">false</span>&#125; name=<span class="string">"save_details"</span> /&gt;</div><div class="line">          &lt;/Fieldset&gt;</div><div class="line">        &lt;/FieldsContainer&gt;</div><div class="line">        &lt;ActionsContainer&gt;</div><div class="line">          &lt;Button icon=<span class="string">"md-checkmark"</span> iconPlacement=<span class="string">"right"</span> onPress=&#123;handleSubmit(onSubmit)&#125; submitting=&#123;submitting&#125;&gt;Save&lt;/Button&gt;</div><div class="line">        &lt;/ActionsContainer&gt;</div><div class="line">      &lt;/Form&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> reduxForm(&#123;</div><div class="line">  form: <span class="string">'Form'</span>,</div><div class="line">  validate: values =&gt; &#123;</div><div class="line">    const errors = &#123;&#125;</div><div class="line"></div><div class="line">    values = values.toJS()</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!values.first_name) &#123;</div><div class="line">      errors.first_name = <span class="string">'First name is required.'</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!values.last_name) &#123;</div><div class="line">      errors.last_name = <span class="string">'Last name is required.'</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!values.email) &#123;</div><div class="line">      errors.email = <span class="string">'Email is required.'</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> errors</div><div class="line">  &#125;</div><div class="line">&#125;)(FormView)</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•ï¼Œæ˜¯å—ï¼Ÿç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè¿æ¥åˆ°storeçš„å¥½çœ‹çš„è¡¨å•,è¿˜èƒ½æ”¯æŒæ•°æ®éªŒè¯,å¼‚æ­¥çš„æŒ‰é’®åé¦ˆ.ä½ å¯ä»¥åœ¨<a href="https://github.com/esbenp/react-native-clean-form" target="_blank" rel="external">repositoryæŸ¥çœ‹æ›´å¤šç‰¹æ€§</a>.</p>
<h2 id="The-End"><a href="#The-End" class="headerlink" title="The End"></a>The End</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(8)-Views]]></title>
      <url>http://yoursite.com/2017/03/30/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-8-Views/</url>
      <content type="html"><![CDATA[<h1 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h1><p>Navigation è§†å›¾æ˜¯æ¥å—<code>router</code>å’Œ<code>navigaion</code> çš„propçš„è¡¨å¾ç»„ä»¶,é€šè¿‡<code>navigation.state</code>çš„è®¾å®š,å¯ä»¥æ˜¾ç¤ºå‡ ä¸ªscreens.<br>Navigation viewæ˜¯è¢«æ§åˆ¶çš„Reactç»„ä»¶,è¡¨å¾å½“å‰çš„navigation state.ä»–ä»¬ç®¡ç†screenä¹‹é—´çš„åˆ‡æ¢,åŠ¨ç”»å’Œæ‰‹åŠ¿.ä»–ä»¬ä¹ŸæŒä¹…åŒ–navigation viewä¾‹å¦‚tab barså’Œheaders</p>
<h2 id="å†…å»ºçš„Views"><a href="#å†…å»ºçš„Views" class="headerlink" title="å†…å»ºçš„Views"></a>å†…å»ºçš„Views</h2><ul>
<li><p>CardStack-ä»£è¡¨stackåœ¨ä»»ä½•å¹³å°ä¸Šéƒ½åŒ¹é…</p>
<ul>
<li>ä»£è¡¨ä¸€ä¸ªä»Card stackæ¥çš„card.</li>
<li>Header-card stackçš„header view</li>
</ul>
</li>
<li><p>Tabs-tabåˆ‡æ¢å™¨/é¡µé¢çš„é…ç½®</p>
</li>
<li>Drawer-ä»å·¦ä¾§æ»‘å‡ºçš„Drawerçš„view</li>
</ul>
<h1 id="Transitioner"><a href="#Transitioner" class="headerlink" title="Transitioner"></a>Transitioner</h1><p><code>transitioner</code>æ˜¯ä¸€ä¸ªReact ç»„ä»¶å¸®åŠ©ç®¡ç†å¤æ‚åŠ¨ç”»ç»„ä»¶ä¹‹é—´æ¼”å˜çš„å·¥å…·.å®ƒç®¡ç†åŠ¨ç”»çš„æ—¶é—´è°ƒåº¦,ä¿ç•™å„ç§screençš„è¿›å…¥ç¦»å¼€çš„è®°å½•,ä½†æ˜¯å®ƒä¸çŸ¥é“å…·ä½“çš„äº‹ä»¶æ˜¯ä»€ä¹ˆ,åº”ä¸ºå…·ä½“çš„æ¸²æŸ“è¿‡ç¨‹å§”æ‰˜ç»™äº†å¼€å‘è€….<br>åœ¨å†…éƒ¨,<code>Transitioner</code>è¢«ç”¨æ¥å®æ–½<code>CardStack</code>,å› æ­¤æ˜¯<code>StackNavigator</code>.<br><code>Transiioner</code>æœ€æœ‰ç”¨çš„ç”¨é€”æ˜¯æ¥å—å½“å‰navigationçš„state.å½“routesä»navigation stateç§»é™¤çš„æ—¶å€™,<code>Transitioner</code></p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyNavView</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  ...</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Transitioner</span></div><div class="line">        configureTransition=&#123;<span class="keyword">this</span>._configureTransition&#125;</div><div class="line">        navigation=&#123;<span class="keyword">this</span>.props.navigation&#125;</div><div class="line">        render=&#123;<span class="keyword">this</span>._render&#125;</div><div class="line">        onTransitionStart=&#123;<span class="keyword">this</span>.onTransitionStart&#125;</div><div class="line">        onTransitionEnd=&#123;<span class="keyword">this</span>.onTransitionEnd&#125;</div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><h3 id="configureTransitionfunction"><a href="#configureTransitionfunction" class="headerlink" title="configureTransitionfunction"></a><code>configureTransition</code>function</h3><p>è¢«<code>Transitioner.componentWillReceiveProps</code>,è¿™ä¸ªå‡½æ•°å…è®¸å®šåˆ¶åŠ¨ç”»çš„å‚æ•°,ä¾‹å¦‚<code>å»¶ç»­æ—¶é—´</code>.è¿™ä¸ªå‡½æ•°è¿”å›çš„å€¼å°†ä¼šä¼ é€’è¿›å…¥æ—¶é—´åºåˆ—å‡½æ•°,é»˜è®¤æ˜¯<code>Animated.timing()</code>.</p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="title">_configureTransition</span>(transitionProps, prevTransitionProps) &#123;</div><div class="line">  return &#123;</div><div class="line">    // duration <span class="keyword">in</span> milliseconds, <span class="keyword">default</span>: 250</div><div class="line">    duration: <span class="number">500</span>,</div><div class="line">    // <span class="type">An</span> easing function from `<span class="type">Easing</span>`, <span class="keyword">default</span>: <span class="type">Easing</span>.inOut(<span class="type">Easing</span>.<span class="title">ease</span>)</div><div class="line">    easing: <span class="type">Easing</span>.bounce,</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ³¨æ„:<code>duration</code>å’Œ<code>easing</code>åªç”¨å½“æ—¶é—´åºåˆ—å‡½æ•°æ˜¯<code>Animated.timing</code>çš„æ—¶å€™æ‰å¯ä»¥åº”ç”¨.æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„configå‚æ•°æ¥ä½¿ç”¨ä¸åŒçš„æ—¶é—´å‡½æ•°.<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> _configureTransition(transitionProps, prevTransitionProps) &#123;</div><div class="line">  <span class="class">return </span>&#123;</div><div class="line">    <span class="comment">// A timing function, default: Animated.timing.</span></div><div class="line"><span class="symbol">    timing:</span> Animated.spring,</div><div class="line">    <span class="comment">// Some parameters relevant to Animated.spring</span></div><div class="line"><span class="symbol">    friction:</span> <span class="number">1</span>,</div><div class="line"><span class="symbol">    tension:</span> <span class="number">0.5</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Flow-definition"><a href="#Flow-definition" class="headerlink" title="Flow definition"></a>Flow definition</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">configureTransition:</span> (</div><div class="line"><span class="symbol">    transitionProps:</span> NavigationTransitionProps,</div><div class="line"><span class="symbol">    prevTransitionProps:</span> ?NavigationTransitionProps,</div><div class="line">  ) =&gt; NavigationTransitionSpec,</div></pre></td></tr></table></figure>
<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><ul>
<li><code>transitionProps</code>:æœ‰å½“å‰çš„navigation stateå’Œpropsåˆ›å»ºçš„å½“å‰<code>NavigationTransitionProps</code></li>
<li><code>prevTransitionProps</code>:ä»å‰ä¸€ä¸ªnavigation staeå’Œpropsåˆ›å»ºçš„å‰ä¸€ä¸ªNavigationTransitionProps</li>
</ul>
<h3 id="Returns"><a href="#Returns" class="headerlink" title="Returns"></a>Returns</h3><ul>
<li>NavigationTransitionSpecç±»å‹çš„å¯¹è±¡,ä½œä¸ºå‚æ•°ä¼ é€’è¿›åŠ¨ç”»æ—¶é—´åºåˆ—å‡½æ•°</li>
</ul>
<p><code>navigationState</code>å¯¹è±¡<br>ä»£è¡¨navigation stateçš„ç®€å•å¯¹è±¡</p>
<h3 id="å®ä¾‹å€¼"><a href="#å®ä¾‹å€¼" class="headerlink" title="å®ä¾‹å€¼"></a>å®ä¾‹å€¼</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   <span class="comment">// Index refers to the active child route in the routes array.</span></div><div class="line">  <span class="attribute">index</span>: <span class="number">1</span>,</div><div class="line">  <span class="attribute">routes</span>: [</div><div class="line">    &#123; <span class="attribute">key</span>: <span class="string">'DF2FGWGAS-12'</span>, <span class="attribute">routeName</span>: <span class="string">'ContactHome'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">key</span>: <span class="string">'DF2FGWGAS-13'</span>, <span class="attribute">routeName</span>: <span class="string">'ContactDetail'</span>, <span class="attribute">params</span>: &#123; <span class="attribute">personId</span>: <span class="number">123</span> &#125; &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Flow-definition-1"><a href="#Flow-definition-1" class="headerlink" title="Flow definition"></a>Flow definition</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">export</span> <span class="class"><span class="keyword">type</span> <span class="type">NavigationState</span> = &#123;</span></div><div class="line">  <span class="title">index</span>: <span class="title">number</span>,</div><div class="line">  <span class="title">routes</span>: <span class="type">Array</span>&lt;<span class="type">NavigationRoute</span>&gt;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>äº†è§£æ›´å¤šçš„<code>NavigationRoute</code>çš„ç±»å‹,æŸ¥çœ‹<a href="https://github.com/react-community/react-navigation/blob/master/src/TypeDefinition.js#L32" target="_blank" rel="external">flow definition</a></p>
<h2 id="renderå‡½æ•°"><a href="#renderå‡½æ•°" class="headerlink" title="renderå‡½æ•°"></a><code>render</code>å‡½æ•°</h2><p>ç”±<code>Transition.render()</code>è°ƒç”¨.è¿™ä¸ªå‡½æ•°ä»£ç†äº†<code>Transitioner</code>çš„å®é™…æ¸²æŸ“åŠŸèƒ½.åœ¨è¿™ä¸ªå‡½æ•°ä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ…å«åœ¨<code>transitionProps</code>å’Œ<code>prevTransitionProps</code>ä¸­çš„å‚æ•°æ¥æ¸²æŸ“scene,åˆ›å»ºåŠ¨ç”»å’Œå¤„ç†æ‰‹åŠ¿æ“ä½œ.</p>
<p><code>transitionProps</code>å’Œ<code>prevTransitionProps</code>æœ‰ä¸€äº›é‡è¦çš„å±æ€§å¯¹äºä¸Šé¢æåˆ°çš„ä¸€äº›ä»»åŠ¡æ˜¯ååˆ†æœ‰ç”¨çš„.</p>
<ul>
<li><code>scenes:Array&lt;NavigationScene&gt;</code>-å¯ä»¥ä½¿ç”¨çš„scenesçš„åˆ—è¡¨</li>
<li><code>position:NavigationAnimation</code>- transitionerçš„navigation  stateçš„è¿›åº¦ç´¢å¼•</li>
<li><code>progress:NavigationAnimationedValue</code>-å½“navigation stateä»ä¸€ä¸ªè½¬å˜åˆ°å¦ä¸€çš„æ—¶å€™,è¿™ä¸ªå€¼ä»£è¡¨äº†æ¼”å˜çš„è¿›åº¦.ä»0-1çš„æ•°å€¼</li>
</ul>
<p>æŸ¥çœ‹å®Œæ•´çš„<code>NavigationTransitionProps</code>çš„å±æ€§åˆ—è¡¨.æŸ¥çœ‹çœ‹<a href="https://github.com/react-community/react-navigation/blob/master/src/TypeDefinition.js#L273" target="_blank" rel="external">flow definition</a></p>
<h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p><code>transitionProps.scenes</code>æ˜¯å¯ä»¥ä½¿ç”¨çš„scenesçš„åˆ—è¡¨.è¿™ä¸ªåˆ—è¡¨ä¾èµ–äºå®æ–½è€…å‡†å¤‡æ€ä¹ˆæ¥åˆ—å‡ºscreen.ä¾‹å¦‚,å¯ä»¥åƒä¸‹é¢çš„ä»£ç æ¥æ¸²æŸ“cardsçš„å †æ ˆ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> _render(transitionProps, prevTransitionProps) &#123;</div><div class="line">  <span class="keyword">const</span> scenes = transitionProps.scenes.map(<span class="function"><span class="params">scene</span> =&gt;</span> <span class="keyword">this</span>._renderScene(transitionProps, scene));</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.stack&#125;</span>&gt;</span></span></div><div class="line">      &#123;scenes&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Animated.View</code>å»æ‰§è¡Œæ¼”å˜åŠ¨ç”».ä¸ºäº†åˆ›å»ºå¿…è¦çš„åŠ¨ç”»æ ·å¼å±æ€§,ä¾‹å¦‚<code>é€æ˜åº¦</code>,æˆ‘ä»¬å¯ä»¥åœ¨<code>position</code>å’Œ<code>progress</code>ä¸­åˆ©ç”¨<code>transitionProps</code>æ¥æ’å€¼.</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> _renderScene(transitionProps, <span class="built_in">scene</span>) &#123;</div><div class="line">  const &#123; <span class="built_in">position</span> &#125; = transitionProps;</div><div class="line">  const &#123; index &#125; = <span class="built_in">scene</span>;</div><div class="line">  const <span class="built_in">opacity</span> = <span class="built_in">position</span>.interpolate(&#123;</div><div class="line">    inputRange: [index-<span class="number">1</span>, index, index+<span class="number">1</span>],</div><div class="line">    outputRange: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">  &#125;);</div><div class="line">  // The prop `router` <span class="built_in">is</span> populated when we call `createNavigator`.</div><div class="line">  const Scene = this.<span class="built_in">props</span>.router.getComponent(<span class="built_in">scene</span>.route.routeName);</div><div class="line">  <span class="built_in">return</span> (</div><div class="line">    &lt;Animated.View <span class="built_in">style</span>=&#123;&#123; <span class="built_in">opacity</span> &#125;&#125;&gt;</div><div class="line">      &#123; Scene &#125;</div><div class="line">    &lt;/Animated.View&gt;</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº¤å‰æ¸éšçš„åŠ¨ç”».<br>æ·±å…¥ç†è§£å¦‚ä½•åˆ›å»ºå®šåˆ¶çš„transitions,çœ‹çœ‹è¿™ä¸ª<a href="http://www.reactnativediary.com/2016/12/20/navigation-experimental-custom-transition-1.html" target="_blank" rel="external">åšå®¢å¸–å­</a></p>
<h3 id="Flow-definition-2"><a href="#Flow-definition-2" class="headerlink" title="Flow definition"></a>Flow definition</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">render: <span class="function"><span class="params">(transitionProps: NavigationTransitionProps, prevTransitionProps: ?NavigationTransitionProps)</span> =&gt;</span> React.Element&lt;*&gt;,</div></pre></td></tr></table></figure>
<h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul>
<li><code>transitionProps</code>:ä»å½“å‰stateå’Œpropsåˆ›å»ºçš„NavigationTransitionProps.</li>
<li><code>prevTransitionProps</code>:ä»ä¹‹å‰çš„stateå’Œpropsåˆ›å»ºçš„å…ˆå‰<code>NavigationTransitionProps</code></li>
</ul>
<h3 id="Returns-1"><a href="#Returns-1" class="headerlink" title="Returns"></a>Returns</h3><ul>
<li>Reactå…ƒç´ ,ç”¨æ¥æ¸²æŸ“Transitioner ç»„ä»¶</li>
</ul>
<h2 id="onTransitionEndå‡½æ•°"><a href="#onTransitionEndå‡½æ•°" class="headerlink" title="onTransitionEndå‡½æ•°"></a><code>onTransitionEnd</code>å‡½æ•°</h2><p>åŠ¨ç”»æ¼”å˜å®Œæˆåè°ƒç”¨ä¸€æ¬¡.</p>
<h3 id="Flow-definition-3"><a href="#Flow-definition-3" class="headerlink" title="Flow definition"></a>Flow definition</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">onTransitionEnd: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">void</span></div></pre></td></tr></table></figure>
<h3 id="å‚æ•°-1"><a href="#å‚æ•°-1" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul>
<li>none<h3 id="Returns-2"><a href="#Returns-2" class="headerlink" title="Returns"></a>Returns</h3></li>
<li>none</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(7)-Router]]></title>
      <url>http://yoursite.com/2017/03/30/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-7-Router/</url>
      <content type="html"><![CDATA[<h1 id="Routers"><a href="#Routers" class="headerlink" title="Routers"></a>Routers</h1><blockquote>
<p>Routerå®šä¹‰ä¸€ä¸ªç»„ä»¶çš„navigation state,å…è®¸å¼€å‘è€…å®šä¹‰è·¯å¾„å’Œå¯ä»¥æ“ä½œçš„actions.</p>
<h2 id="å†…å»ºçš„Routers"><a href="#å†…å»ºçš„Routers" class="headerlink" title="å†…å»ºçš„Routers"></a>å†…å»ºçš„Routers</h2><ul>
<li>StackRouter</li>
<li>TabRouter</li>
</ul>
</blockquote>
<h2 id="ä½¿ç”¨Routers"><a href="#ä½¿ç”¨Routers" class="headerlink" title="ä½¿ç”¨Routers"></a>ä½¿ç”¨Routers</h2><p>ä¸ºäº†æ‰‹åŠ¨å®šåˆ¶ä¸€ä¸ªnavigator,åœ¨ç»„ä»¶é‡Œå¯ä»¥æ”¾ä¸€ä¸ªé™æ€çš„<code>router</code>.(ä½¿ç”¨å†…å»ºçš„ç»„ä»¶å¿«é€Ÿçš„å®šåˆ¶ä¸€ä¸ªnavigator,ä½¿ç”¨<a href="https://reactnavigation.org/docs/navigators" target="_blank" rel="external">Navigator Factory</a>æ›´å®¹æ˜“å®ç°).</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyNavigator</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    static router = <span class="type">StackRouter</span>(routes, config);</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ å¯ä»¥æŠŠè¿™ä¸ªç»„ä»¶ä½œä¸ºå¦ä¸€ä¸ªnavigatorçš„<code>screen</code>å¯¹å¾…,<code>MyNavigator</code>çš„å¯¼èˆªé€»è¾‘åœ¨<code>StackRouter</code>ä¸­å®šä¹‰.</p>
<h2 id="å®šåˆ¶åŒ–Router"><a href="#å®šåˆ¶åŒ–Router" class="headerlink" title="å®šåˆ¶åŒ–Router"></a>å®šåˆ¶åŒ–Router</h2><p>çœ‹çœ‹<code>[å®šåˆ¶Router API éƒ¨åˆ†](https://reactnavigation.org/docs/routers/api)</code>å­¦ä¹ <code>StackRouter</code>å’Œ<code>TabRouter</code>çš„API.<br>åªè¦ä½ æ„¿æ„ä¹Ÿå¯ä»¥é‡å†™routerçš„å‡½æ•°.</p>
<h2 id="å®šåˆ¶Navigationçš„Actions"><a href="#å®šåˆ¶Navigationçš„Actions" class="headerlink" title="å®šåˆ¶Navigationçš„Actions"></a>å®šåˆ¶Navigationçš„Actions</h2><p>ä¸ºäº†é‡å†™navigationçš„è¡Œä¸º,ä½ å¯ä»¥åœ¨<code>getStateForAction</code>ä¸­é‡å†™navigation stateçš„é€»è¾‘,ä»è€Œæ‰‹åŠ¨å¤„ç†<code>routes</code>å’Œ<code>index</code>.</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> const MyApp = StackNavigator(&#123;</div><div class="line">  Home: &#123; screen: HomeScreen &#125;,</div><div class="line">  Profile: &#123; screen: ProfileScreen &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  initialRouteName: 'Home',</div><div class="line">&#125;)</div><div class="line">MyApp.router = &#123;</div><div class="line">  ...MyApp.router,</div><div class="line">  getStateForAction(action, <span class="keyword">state</span>) &#123;</div><div class="line">    if (<span class="keyword">state</span> &amp;&amp; action.type === 'PushTwoProfiles') &#123;</div><div class="line">      const routes = [</div><div class="line">        ...<span class="keyword">state</span>.routes,</div><div class="line">        &#123;key: 'A', routeName: 'Profile', params: &#123; name: action.name1 &#125;&#125;,</div><div class="line">        &#123;key: 'B', routeName: 'Profile', params: &#123; name: action.name2 &#125;&#125;,</div><div class="line">      ];</div><div class="line">      return &#123;</div><div class="line">        ...<span class="keyword">state</span>,</div><div class="line">        routes,</div><div class="line">        index: routes.length - <span class="number">1</span>,</div><div class="line">      &#125;;</div><div class="line">    &#125;</div><div class="line">    return MyApp.router.getStateForAction(action, <span class="keyword">state</span>);</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="é˜»æ­¢æŸäº›Navigationçš„Actions"><a href="#é˜»æ­¢æŸäº›Navigationçš„Actions" class="headerlink" title="é˜»æ­¢æŸäº›Navigationçš„Actions"></a>é˜»æ­¢æŸäº›Navigationçš„Actions</h2><p>æœ‰æ—¶å€™æ ¹æ®ä½ çš„route,éœ€è¦é˜»æ­¢æŸäº›navigationçš„æ´»åŠ¨</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> const MyStackRouter = StackRouter(&#123;</div><div class="line">  Home: &#123; screen: HomeScreen &#125;,</div><div class="line">  Profile: &#123; screen: ProfileScreen &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  initialRouteName: 'Home',</div><div class="line">&#125;)</div><div class="line">const MyAppRouter = &#123;</div><div class="line">  ...MyStackRouter,</div><div class="line">  getStateForAction(action, <span class="keyword">state</span>) &#123;</div><div class="line">    if (</div><div class="line">      <span class="keyword">state</span> &amp;&amp;</div><div class="line">      action.type === NavigationActions.BACK &amp;&amp;</div><div class="line">      <span class="keyword">state</span>.routes[<span class="keyword">state</span>.index].params.isEditing</div><div class="line">    ) &#123;</div><div class="line">      // Returning null <span class="keyword">from</span> getStateForAction means that the action</div><div class="line">      // has been handled/blocked, but there is not a new <span class="keyword">state</span></div><div class="line">      return null;</div><div class="line">    &#125;</div><div class="line">    return MyStackRouter.getStateForAction(action, <span class="keyword">state</span>);</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="æ“ä½œå®šåˆ¶URIs"><a href="#æ“ä½œå®šåˆ¶URIs" class="headerlink" title="æ“ä½œå®šåˆ¶URIs"></a>æ“ä½œå®šåˆ¶URIs</h2><p>æˆ–è®¸ä½ çš„appæœ‰ä¸€ä¸ªç‹¬ç‰¹çš„URI,å†…å»ºçš„routerså¤„ç†ä¸äº†.ä½ å¯ä»¥é€šè¿‡<code>getActionForPathAndParams</code>æ¥æ‰©å±•router.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"> import &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> MyApp = StackNavigator(&#123;</div><div class="line">  Home: &#123; screen: HomeScreen &#125;,</div><div class="line">  Profile: &#123; screen: ProfileScreen &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  initialRouteName: <span class="string">'Home'</span>,</div><div class="line">&#125;)</div><div class="line"><span class="keyword">const</span> previousGetActionForPathAndParams = MyApp.router.getActionForPathAndParams</div><div class="line">Object.assign(MyApp.router, &#123;</div><div class="line">  getActionForPathAndParams(path, <span class="keyword">params</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (</div><div class="line">      path === <span class="string">'my/custom/path'</span> &amp;&amp;</div><div class="line">      <span class="keyword">params</span>.magic === <span class="string">'yes'</span></div><div class="line">    ) &#123;</div><div class="line">      <span class="comment">// returns a profile navigate action for /my/custom/path?magic=yes</span></div><div class="line">      <span class="keyword">return</span> NavigationActions.navigate(&#123;</div><div class="line">        routeName: <span class="string">'Profile'</span>,</div><div class="line">        action: NavigationActions.navigate(&#123;</div><div class="line">          <span class="comment">// This child action will get passed to the child router</span></div><div class="line">          <span class="comment">// ProfileScreen.router.getStateForAction to get the child</span></div><div class="line">          <span class="comment">// navigation state.</span></div><div class="line">          routeName: <span class="string">'Friends'</span>,</div><div class="line">        &#125;),</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> previousGetActionForPathAndParams(path, <span class="keyword">params</span>);</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="å®šåˆ¶Router-API"><a href="#å®šåˆ¶Router-API" class="headerlink" title="å®šåˆ¶Router API"></a>å®šåˆ¶Router API</h2><p>ä½ å¯ä»¥ç«¥å·¥ä¸‹é¢çš„å‡½æ•°æ¥æ„å»ºè‡ªå·±çš„routerå¯¹è±¡,</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> const MyRouter = &#123;</div><div class="line">  getStateForAction: <span class="function"><span class="params">(action, state)</span> =&gt;</span> (&#123;&#125;),</div><div class="line">  getActionForPathAndParams: <span class="function"><span class="params">(path, params)</span> =&gt;</span> <span class="literal">null</span>,</div><div class="line">  getPathAndParamsForState: <span class="function"><span class="params">(state)</span> =&gt;</span> <span class="literal">null</span>,</div><div class="line">  getComponentForState: <span class="function"><span class="params">(state)</span> =&gt;</span> MyScreen,</div><div class="line">  getComponentForRouteName: <span class="function"><span class="params">(routeName)</span> =&gt;</span> MyScreen,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="regexp">//</span> Now, you can make a navigator <span class="keyword">by</span> putting the router <span class="literal">on</span> it:</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNavigator</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> &#123;</span></div><div class="line">  static router = MyRouter;</div><div class="line">  render() &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fe4np8ce9xj313l0v9jss.jpg" alt=""></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getStateForAction(action,<span class="keyword">state</span>)</div></pre></td></tr></table></figure>
<p> æ ¹æ®ç»™å®šçš„actionæ¥å®šä¹‰è¿”å›çš„navigation sate.å½“ä¸€ä¸ªactioné€šè¿‡<code>props.navigation.dispatch()</code>ä¼ é€’,æˆ–è€…ä»»ä½•å…¶ä»–çš„åŠ©æ‰‹å‡½æ•°è¢«è°ƒç”¨,ä¾‹å¦‚<code>navigation.navitate()</code>çš„æ—¶å€™,è¿™ä¸ªå‡½æ•°å°†ä¼šè¿è¡Œ.</p>
<p> é€šå¸¸è¿™ä¸ªå‡½æ•°å°†ä¼šä»¥ä¸‹é¢çš„å½¢å¼è¿”å›navitaion state.</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> &#123;</div><div class="line">  <span class="attribute">index</span>: <span class="number">1</span>, <span class="comment">// identifies which route in the routes array is active</span></div><div class="line">  <span class="attribute">routes</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Each route needs a name to identify the type.</span></div><div class="line">      <span class="attribute">routeName</span>: <span class="string">'MyRouteName'</span>,</div><div class="line"></div><div class="line">      <span class="comment">// A unique identifier for this route in the routes array:</span></div><div class="line">      <span class="attribute">key</span>: <span class="string">'myroute-123'</span>,</div><div class="line">      <span class="comment">// (used to specify the re-ordering of routes)</span></div><div class="line"></div><div class="line">      <span class="comment">// Routes can have any data, as long as key and routeName are correct</span></div><div class="line">      ...randomRouteData,</div><div class="line">    &#125;,</div><div class="line">    ..<span class="selector-class">.moreRoutes</span>,</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœrouterå·²ç»åœ¨å¤–éƒ¨å¤„ç†äº†acion,æˆ–è€…æƒ³ä¸æ”¹å˜ä»»ä½•çš„navigation stateå°±æ¶ˆåŒ–å®ƒ,è¿™ä¸ªå‡½æ•°å°±è¿”å›<code>null</code>.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">getComponentForRouterName</span><span class="params">(routeName)</span></span></div></pre></td></tr></table></figure>
<p>ä¸ºç»™å®šçš„route nameè¿”å›å­ç»„ä»¶æˆ–è€…navigator.<br>åƒè¿™æ ·å£°æ˜ä¸€ä¸ªrouter<code>getStateForAction</code>è¾“å‡ºçš„state.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> &#123;</div><div class="line">  <span class="attribute">index</span>: <span class="number">1</span>,</div><div class="line">  routes: [</div><div class="line">    &#123; key: <span class="string">'A'</span>, routeName: <span class="string">'Foo'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">key</span>: <span class="string">'B'</span>, routeName: <span class="string">'Bar'</span> &#125;,</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸºäºstateä¸­çš„é¢routeName,routerå°†ä¼šè°ƒç”¨<code>router.getComponentForRouteName(&#39;Foo&#39;)</code>æˆ–<code>router.getComponentForRouteName(&#39;Bar&#39;)</code>æ¥è¿”å›å¯¹åº”çš„æœ‰æ•ˆç»„ä»¶.</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getComponentForState(<span class="keyword">state</span>)</div></pre></td></tr></table></figure>
<p>ä»æ·±åº¦åµŒå¥—navigation stateè¿”å›æ¿€æ´»çš„ç»„ä»¶</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">getActionForPathAndParams</span></div></pre></td></tr></table></figure>
<p>è¿”å›ä¸€ä¸ªå¯é€‰é…ç½®çš„navigation action,åœ¨ç”¨æˆ·å¯¼èˆªåˆ°è¿™ä¸ªè·¯å¾„å¹¶ä¸”æœ‰å¯é€‰çš„æŸ¥è¯¢å‚æ•°çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªaction.</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">getPathAndParamsForState</span></div></pre></td></tr></table></figure>
<p>ç”¨æˆ·åœ¨appä¸­è¿”å›åŒä¸€ä¸ªURLé“¾æ¥çš„ç‚¹æ—¶,è¿™ä¸ªå‡½æ•°è¿”å›è·¯å¾„å’Œå‚æ•°.<br>ä»è¿™ä¸ªå‡½æ•°è¿”å›çš„è·¯å¾„å’Œå‚æ•°åº”è¯¥æ˜¯ä»ä¸€ä¸ªactionè·å¾—çš„,è¿™ä¸ªactionæ˜¯é‡ä¼ è¿›å…¥routerçš„<code>getActionForPathAndParams</code>çš„.è¿™ä¸ªactionä¸€æ—¦é€šè¿‡<code>getStateForAction</code>ä¼ é€’,ä¼šç»™ä½ è¿”å›å½¢ä¼¼çš„state.</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">getScreenConfig</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°ä»ä¸€ä¸ªrouteè·å–navigationçš„å¯é€‰é¡¹.å¿…é¡»è¦æä¾›screençš„å½“å‰navigation propå’Œè¢«è¿”å›çš„é€‰é¡¹çš„åå­—.</p>
<ul>
<li><code>navigation</code>-è¿™æ˜¯screenå°†ä¼šä½¿ç”¨çš„navigation prop,å¯¹åº”åœ¨screençš„routeå’Œstate.Dispatchå°†ä¼šæ ¹æ®screençš„ä¸Šä¸‹æ–‡æ¥è§¦å‘actions.</li>
<li><code>optionName</code>-è¢«è·å–çš„é€‰é¡¹çš„åå­—,ä¾‹å¦‚â€™titleâ€™</li>
</ul>
<p>åœ¨å®ä¾‹çš„è§†å›¾å†…,æˆ–è®¸ä½ éœ€è¦è¿œç¨‹è·å–é…ç½®çš„æ ‡é¢˜</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> // First, prepare a navigation prop <span class="keyword">for</span> your child, or re-use one if already available.</div><div class="line">const childNavigation = addNavigationHelpers(&#123;</div><div class="line">  // In this case we use navigation.<span class="keyword">state</span>.index because we want the title <span class="keyword">for</span> the active route.</div><div class="line">  <span class="keyword">state</span>: navigation.<span class="keyword">state</span>.routes[navigation.<span class="keyword">state</span>.index],</div><div class="line">  dispatch: navigation.dispatch,</div><div class="line">&#125;)</div><div class="line">const screenTitle = this.props.router.getScreenConfig(childNavigation, 'title');</div></pre></td></tr></table></figure>
<h1 id="StackRouter"><a href="#StackRouter" class="headerlink" title="StackRouter"></a>StackRouter</h1><p>ç®¡ç†navigationå †æ ˆçš„é€»è¾‘,åŒ…æ‹¬å…¥æ ˆ,å‡ºæ ˆ,æ“ä½œè·¯å¾„è§£æåˆ›å»ºæ·±å±‚æ¬¡çš„å †æ ˆ.</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ç®€å•çš„stack router<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> const MyApp = StackRouter(&#123;</div><div class="line">  Home: &#123; screen: HomeScreen &#125;,</div><div class="line">  Profile: &#123; screen: ProfileScreen &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  initialRouteName: <span class="string">'Home'</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="RouteConfig"><a href="#RouteConfig" class="headerlink" title="RouteConfig"></a>RouteConfig</h2><p>æœ€ç®€å•çš„stack routeræœŸå¾…çš„å‚æ•°æ˜¯ä¸€ä¸ªconfigå¯¹è±¡,è¿™é‡Œæ˜¯ç¤ºä¾‹é…ç½®<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> MyApp = StackRouter(&#123; <span class="comment">// This is the RouteConfig:</span></div><div class="line">  Home: &#123;</div><div class="line">    <span class="attr">screen</span>: HomeScreen,</div><div class="line">    <span class="attr">path</span>: <span class="string">''</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">Profile</span>: &#123;</div><div class="line">    <span class="attr">screen</span>: ProfileScreen,</div><div class="line">    <span class="attr">path</span>: <span class="string">'profile/:name'</span>,</div><div class="line">  &#125;,</div><div class="line">  Settings &#123;</div><div class="line">    <span class="comment">// This can be handy to lazily require a screen:</span></div><div class="line">    getScreen: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">require</span>(<span class="string">'Settings'</span>).default,</div><div class="line">    <span class="comment">// Note: Child navigators cannot be configured using getScreen because</span></div><div class="line">    <span class="comment">// the router will not be accessible. Navigators must be configured</span></div><div class="line">    <span class="comment">// using `screen: MyNavigator`</span></div><div class="line">    path: <span class="string">'settings'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æ¯ä¸€ä¸ªåœ¨configä¸­çš„æ¡ç›®æœ‰å¦‚ä¸‹å†…å®¹</p>
<ul>
<li><code>path</code>-è®¾å®šæ¡ç›®çš„è·¯å¾„å’Œå‚æ•°å¯ä»¥åœ¨stackä¸­è¢«è§£æ</li>
<li><code>screen</code>-è®¾å®šscreenç»„ä»¶æˆ–è€…å­navigator</li>
<li><code>getScreen</code>-ä¸ºscreenç»„ä»¶è®¾å®šæƒ°æ€§åŠ è½½çš„è®¾å®š</li>
</ul>
<h2 id="StackConfig"><a href="#StackConfig" class="headerlink" title="StackConfig"></a>StackConfig</h2><p>é…ç½®çš„é€‰é¡¹ä¹Ÿè¢«ä¼ é€’è¿›å…¥stack router.</p>
<ul>
<li><code>initalRouteName</code>-stacké¦–æ¬¡åŠ è½½çš„é»˜è®¤è·¯ç”±çš„routeName</li>
<li><code>initialRouteParams</code>-åˆå§‹åŒ–routeçš„é»˜è®¤å‚æ•°</li>
<li><code>paths</code>-æä¾›routeNameåˆ°pathé…ç½®çš„æ˜ å°„,å°†ä¼šé‡å†™routeConfigsé‡Œçš„pathè®¾ç½®</li>
</ul>
<h2 id="Supported-Actions"><a href="#Supported-Actions" class="headerlink" title="Supported Actions"></a>Supported Actions</h2><p>stack routerå¯ä»¥å¯¹ä¸‹é¢çš„å¯¼èˆªactionsä½œä¸ºå“åº”.å¦‚æœæœ‰å¯èƒ½,routerå°†ä¼šä»£ç†åˆ°å­ä»£routerçš„actionæ“ä½œ.</p>
<ul>
<li>Navigate-å¦‚æœrouteNameå’Œrouterçš„routerConfigså…¶ä¸­ä¹‹ä¸€åŒ¹é…,å°†ä¼špushä¸€ä¸ªæ–°çš„routeåˆ°å †æ ˆ.</li>
<li>Back-è¿”å›(props)</li>
<li>Reset-æ¸…é™¤å †æ ˆ,æä¾›ä¸€ä¸ªæ–°çš„actionsåˆ›å»ºæ–°çš„navigation state</li>
<li>SetParams-screen dispatchä¸€ä¸ªactionå»æ”¹å˜å½“å‰routeçš„å‚æ•°</li>
</ul>
<h1 id="TabRouter"><a href="#TabRouter" class="headerlink" title="TabRouter"></a>TabRouter</h1><p>ç®¡ç†åº”ç”¨ä¸­çš„ä¸€å¥—tabs,å¤„ç†tabsä¹‹é—´çš„è·³è½¬,å¤„ç†backé”®çš„æ“ä½œè¿”å›åˆ°åˆå§‹åŒ–çš„tab.<br>çœ‹çœ‹ç®€å•çš„tabs router<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> const MyApp = TabRouter(&#123;</div><div class="line">  Home: &#123; screen: HomeScreen &#125;,</div><div class="line">  Settings: &#123; screen: SettingsScreen &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  initialRouteName: <span class="string">'Home'</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="RouteConfig-1"><a href="#RouteConfig-1" class="headerlink" title="RouteConfig"></a>RouteConfig</h2><p>tabs routeræœ‰ä¸ºæ¯ä¸€ä¸ªtabçš„routeConfig<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> MyApp = TabRouter(&#123; <span class="comment">// This is the RouteConfig:</span></div><div class="line">  Home: &#123;</div><div class="line">    <span class="attr">screen</span>: HomeScreen,</div><div class="line">    <span class="attr">path</span>: <span class="string">'main'</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">Settings</span>: &#123;</div><div class="line">    <span class="comment">// This can be handy to lazily require a tab:</span></div><div class="line">    getScreen: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">require</span>(<span class="string">'./SettingsScreen'</span>).default,</div><div class="line">    <span class="comment">// Note: Child navigators cannot be configured using getScreen because</span></div><div class="line">    <span class="comment">// the router will not be accessible. Navigators must be configured</span></div><div class="line">    <span class="comment">// using `screen: MyNavigator`</span></div><div class="line">    path: <span class="string">'settings'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>configä¸­çš„æ¯ä¸€ä¸ªconfigå¯èƒ½æœ‰</p>
<ul>
<li><code>config</code>-æ¯ä¸€ä¸ªtabçš„path</li>
<li><code>screen</code>-å®šåˆ¶screenç»„ä»¶æˆ–è€…å­ä»£navigator</li>
<li><code>getScreen</code>-ä¸ºä¸€ä¸ªscreenç»„ä»¶è®¾å®šæƒ°æ€§åŠ è½½çš„è®¾ç½®(navigatoræ²¡æœ‰è¿™æ ·çš„é…ç½®)</li>
</ul>
<h2 id="Tab-Router-Config"><a href="#Tab-Router-Config" class="headerlink" title="Tab Router Config"></a>Tab Router Config</h2><p>è¢«ä¼ é€’åˆ°routerçš„å¯é…ç½®é€‰é¡¹</p>
<ul>
<li><code>initialRouteName</code>-é¦–æ¬¡åŠ è½½çš„tabçš„routeName</li>
<li><code>order</code>-tabsçš„é¡ºåº</li>
<li><code>path</code>-æä¾›routeNameåˆ°path configçš„æ˜ å°„,æ˜ å°„é‡å†™routeConfigä¸­çš„pathè®¾å®š</li>
<li><code>backBehavior</code>-ç‚¹å‡»backæŒ‰é’®åº”è¯¥è¿”å›åˆ°åˆå§‹åŒ–çš„tabå—ï¼Ÿå¦‚æœæ˜¯çš„è¯,è®¾ç½®<code>initialRoute</code>,å¦åˆ™å°±æ˜¯<code>none</code>,é»˜è®¤åˆ°<code>initialRoute</code>çš„è¡Œä¸º.</li>
</ul>
<h2 id="Support-Actions"><a href="#Support-Actions" class="headerlink" title="Support Actions"></a>Support Actions</h2><p>tabs routerä¼šå¯¹ä¸‹é¢çš„navigation actionsåšå‡ºå“åº”.å¦‚æœæœ‰å¯èƒ½,routerå°†ä»£ç†åˆ°å­ä»£routerçš„action.</p>
<ul>
<li>Navigate-å¦‚æœå’Œtabçš„routeNameåŒ¹é…,å°±ä¼šè·³è½¬åˆ°å¯¹åº”çš„tab</li>
<li>Back-å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªé»˜è®¤çš„tab,å°±è·³è½¬åˆ°ç¬¬ä¸€ä¸ªtab</li>
<li>SetParams-screen dispatchä¸€ä¸ªActionæ¥æ”¹å˜å½“å‰routeçš„state</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(6)-Reduxçš„æ•´åˆå®ä¾‹]]></title>
      <url>http://yoursite.com/2017/03/30/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-6-Redux%E7%9A%84%E6%95%B4%E5%90%88%E5%AE%9E%E4%BE%8B/</url>
      <content type="html"><![CDATA[<h1 id="æ•´åˆå®ä¾‹ï¼Œå…¶å®è¿™å®Œå…¨æ˜¯Reduxçš„ä½¿ç”¨ï¼Œæ–‡æ¡£é‡Œçš„ä¾‹å­æ²¡æœ‰å†™å…¨æ‰€ä»¥ä¸å¤ªå¥½çœ‹-githubçš„ä¾‹å­-ä»£ç å°±æ¯”è¾ƒå…¨äº†"><a href="#æ•´åˆå®ä¾‹ï¼Œå…¶å®è¿™å®Œå…¨æ˜¯Reduxçš„ä½¿ç”¨ï¼Œæ–‡æ¡£é‡Œçš„ä¾‹å­æ²¡æœ‰å†™å…¨æ‰€ä»¥ä¸å¤ªå¥½çœ‹-githubçš„ä¾‹å­-ä»£ç å°±æ¯”è¾ƒå…¨äº†" class="headerlink" title="æ•´åˆå®ä¾‹ï¼Œå…¶å®è¿™å®Œå…¨æ˜¯Reduxçš„ä½¿ç”¨ï¼Œæ–‡æ¡£é‡Œçš„ä¾‹å­æ²¡æœ‰å†™å…¨æ‰€ä»¥ä¸å¤ªå¥½çœ‹,githubçš„ä¾‹å­,ä»£ç å°±æ¯”è¾ƒå…¨äº†."></a>æ•´åˆå®ä¾‹ï¼Œå…¶å®è¿™å®Œå…¨æ˜¯Reduxçš„ä½¿ç”¨ï¼Œæ–‡æ¡£é‡Œçš„ä¾‹å­æ²¡æœ‰å†™å…¨æ‰€ä»¥ä¸å¤ªå¥½çœ‹,<a href="https://github.com/react-community/react-navigation/blob/master/examples/ReduxExample/index.js" target="_blank" rel="external">githubçš„ä¾‹å­</a>,ä»£ç å°±æ¯”è¾ƒå…¨äº†.</h1><p>å¯¹Reduxçš„æ¦‚å¿µç†è§£äº†è¿™ä¸ªçœ‹èµ·æ¥å°±ç®€å•ä¸€ç‚¹.å¦‚æœå¯¹äºReduxçš„æ¦‚å¿µä¸ç†è§£,å¯ä»¥çœ‹æˆ‘çš„å‡ ç¯‡ç¿»è¯‘æ–‡ç« å’Œå‰é¢å†™çš„Reduxçš„ç†è§£æ–‡ç« .<br>ç®€ä¹¦æ²¡æœ‰ç›®å½•å¯¼èˆª,ä¸æ˜¯å¤ªå¥½çœ‹.å¯ä»¥çœ‹çœ‹æˆ‘çš„<a href="https://phpsmarter.github.io" target="_blank" rel="external">åšå®¢</a>ï¼Œé‡Œé¢æœ‰ç›®å½•ç»“æ„.<br>æˆ‘ç†è§£å…¶ä¸­çš„æµç¨‹å°±æ˜¯,</p>
<ol>
<li>Reactç»„ä»¶æ¥å—propsï¼Œè·å–stateå’Œdispatch.</li>
<li>ç»„ä»¶dispatch actionæ”¹å˜navigationçš„state.<br>3.æ ¹æ®stateçš„ç›¸åº”å˜åŒ–åŠ è½½å¯¹åº”çš„screen.<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * @flow</div><div class="line"> */</div><div class="line"></div><div class="line">import React <span class="keyword">from</span> 'react';</div><div class="line">import &#123;</div><div class="line">  AppRegistry,</div><div class="line">  AsyncStorage,</div><div class="line">  Button,</div><div class="line">  StyleSheet,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">&#125; <span class="keyword">from</span> 'react-native';</div><div class="line">import &#123;</div><div class="line">  NavigationActions,</div><div class="line">  addNavigationHelpers,</div><div class="line">  StackNavigator,</div><div class="line">&#125; <span class="keyword">from</span> 'react-navigation';</div><div class="line">import &#123;</div><div class="line">  Provider,</div><div class="line">  connect,//redux,connectå‡½æ•°,è´Ÿè´£å‘å±•ç¤ºç»„ä»¶æ³¨å…¥<span class="keyword">state</span>å’Œdispatch</div><div class="line">&#125; <span class="keyword">from</span> 'react-redux';</div><div class="line">import &#123;</div><div class="line">  createStore,</div><div class="line">  combineReducers,</div><div class="line">&#125; <span class="keyword">from</span> 'redux';</div><div class="line">import &#123;</div><div class="line">  persistStore,</div><div class="line">  autoRehydrate,</div><div class="line">&#125; <span class="keyword">from</span> 'redux-persist';//redux <span class="keyword">state</span>æŒä¹…åŒ–çš„ä¸­é—´ä»¶</div><div class="line"></div><div class="line">const ProfileScreen = (&#123; navigation &#125;) =&gt; (</div><div class="line">  <span class="variable">&lt;View style=&#123;styles.container&#125;&gt;</span></div><div class="line">    <span class="variable">&lt;Text style=&#123;styles.welcome&#125;&gt;</span></div><div class="line">      Profile Screen</div><div class="line">    &lt;/Text&gt;</div><div class="line">  &lt;/View&gt;</div><div class="line">);</div><div class="line">ProfileScreen.navigationOptions = &#123;</div><div class="line">  title: 'Profile',</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const LoginScreen = (&#123; navigation &#125;) =&gt; (</div><div class="line">  <span class="variable">&lt;View style=&#123;styles.container&#125;&gt;</span></div><div class="line">    <span class="variable">&lt;Text style=&#123;styles.welcome&#125;&gt;</span></div><div class="line">      Screen A</div><div class="line">    &lt;/Text&gt;</div><div class="line">    <span class="variable">&lt;Text style=&#123;styles.instructions&#125;&gt;</span></div><div class="line">      This is great</div><div class="line">    &lt;/Text&gt;</div><div class="line">    <span class="variable">&lt;Button</span></div><div class="line">      onPress=&#123;() =&gt; navigation.dispatch(&#123; type: 'Login' &#125;)&#125;</div><div class="line">      title=<span class="string">"Log in"</span></div><div class="line">    /&gt;</div><div class="line">  &lt;/View&gt;</div><div class="line">);</div><div class="line">LoginScreen.navigationOptions = &#123;</div><div class="line">  title: 'Log In',</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//connect æ³¨å…¥<span class="keyword">state</span>å’Œdispatch</div><div class="line">const LoginStatusMessage = connect(<span class="keyword">state</span> =&gt; (&#123;</div><div class="line">  isLoggedIn: <span class="keyword">state</span>.auth.isLoggedIn,</div><div class="line">&#125;))((&#123; isLoggedIn, dispatch &#125;) =&gt; &#123;</div><div class="line">  if (!isLoggedIn) &#123;</div><div class="line">    return <span class="variable">&lt;Text&gt;</span>Please <span class="keyword">log</span> in&lt;/Text&gt;;</div><div class="line">  &#125;</div><div class="line">  return (</div><div class="line">    <span class="variable">&lt;View&gt;</span></div><div class="line">      <span class="variable">&lt;Text style=&#123;styles.welcome&#125;&gt;</span></div><div class="line">        &#123;'You are <span class="string">"logged in"</span> right now'&#125;</div><div class="line">      &lt;/Text&gt;</div><div class="line">      <span class="variable">&lt;Button</span></div><div class="line">        onPress=&#123;() =&gt; dispatch(NavigationActions.navigate(&#123; routeName: 'Profile' &#125;))&#125;</div><div class="line">        title=<span class="string">"Profile"</span></div><div class="line">      /&gt;</div><div class="line">    &lt;/View&gt;</div><div class="line">  );</div><div class="line">&#125;);</div><div class="line"></div><div class="line">const AuthButton = connect(<span class="keyword">state</span> =&gt; (&#123;</div><div class="line">  isLoggedIn: <span class="keyword">state</span>.auth.isLoggedIn,</div><div class="line">&#125;), dispatch =&gt; (&#123;</div><div class="line">  logout: () =&gt; dispatch(&#123; type: 'Logout' &#125;),</div><div class="line">  login: () =&gt; dispatch(NavigationActions.navigate(&#123; routeName: 'Login' &#125;)),</div><div class="line">&#125;))((&#123; logout, login, isLoggedIn &#125;) =&gt; (</div><div class="line">  <span class="variable">&lt;Button</span></div><div class="line">    title=&#123;isLoggedIn ? 'Log Out' : 'Log In'&#125;</div><div class="line">    onPress=&#123;isLoggedIn ? logout : login&#125;</div><div class="line">  /&gt;</div><div class="line">));</div><div class="line"></div><div class="line">const MainScreen = () =&gt; (</div><div class="line">  <span class="variable">&lt;View style=&#123;styles.container&#125;&gt;</span></div><div class="line">    <span class="variable">&lt;LoginStatusMessage /&gt;</span></div><div class="line">    <span class="variable">&lt;AuthButton /&gt;</span></div><div class="line">  &lt;/View&gt;</div><div class="line">);</div><div class="line">MainScreen.navigationOptions = &#123;</div><div class="line">  title: 'Home Screen',</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const AppNavigator = StackNavigator(&#123;</div><div class="line">  Login: &#123; screen: LoginScreen &#125;,</div><div class="line">  Main: &#123; screen: MainScreen &#125;,</div><div class="line">  Profile: &#123; screen: ProfileScreen &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">const AppWithNavigationState = connect(<span class="keyword">state</span> =&gt; (&#123;</div><div class="line">  nav: <span class="keyword">state</span>.nav,</div><div class="line">&#125;))((&#123; dispatch, nav &#125;) =&gt; (</div><div class="line">  <span class="variable">&lt;AppNavigator navigation=&#123;addNavigationHelpers(&#123; dispatch, state: nav &#125;)&#125; /&gt;</span></div><div class="line">));</div><div class="line"></div><div class="line">const initialNavState = &#123;</div><div class="line">  index: <span class="number">1</span>,</div><div class="line">  routes: [</div><div class="line">    &#123; key: 'InitA', routeName: 'Main' &#125;,</div><div class="line">    &#123; key: 'InitB', routeName: 'Login' &#125;,</div><div class="line">  ],</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const initialAuthState = &#123; isLoggedIn: false &#125;;</div><div class="line"></div><div class="line">const AppReducer = combineReducers(&#123;</div><div class="line">  nav: (<span class="keyword">state</span> = initialNavState, action) =&gt; &#123;</div><div class="line">    if (action.type === 'Login') &#123;</div><div class="line">      return AppNavigator.router.getStateForAction(NavigationActions.back(), <span class="keyword">state</span>);</div><div class="line">    &#125;</div><div class="line">    if (action.type === 'Logout') &#123;</div><div class="line">      return AppNavigator.router.getStateForAction(NavigationActions.navigate(&#123; routeName: 'Login' &#125;), <span class="keyword">state</span>);</div><div class="line">    &#125;</div><div class="line">    return AppNavigator.router.getStateForAction(action, <span class="keyword">state</span>);</div><div class="line">  &#125;,</div><div class="line">  auth: (<span class="keyword">state</span> = initialAuthState, action) =&gt; &#123;</div><div class="line">    if (action.type === 'Login') &#123;</div><div class="line">      return &#123; ...<span class="keyword">state</span>, isLoggedIn: true &#125;;</div><div class="line">    &#125;</div><div class="line">    if (action.type === 'Logout') &#123;</div><div class="line">      return &#123; ...<span class="keyword">state</span>, isLoggedIn: false &#125;;</div><div class="line">    &#125;</div><div class="line">    return <span class="keyword">state</span>;</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">class ReduxExampleApp extends React.Component &#123;</div><div class="line">  store = createStore(AppReducer, undefined, autoRehydrate());</div><div class="line"></div><div class="line">  componentDidMount() &#123;</div><div class="line">    persistStore(this.store, &#123; storage: AsyncStorage &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      <span class="variable">&lt;Provider store=&#123;this.store&#125;&gt;</span></div><div class="line">        <span class="variable">&lt;AppWithNavigationState /&gt;</span></div><div class="line">      &lt;/Provider&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const styles = StyleSheet.create(&#123;</div><div class="line">  container: &#123;</div><div class="line">    flex: <span class="number">1</span>,</div><div class="line">    justifyContent: 'center',</div><div class="line">    alignItems: 'center',</div><div class="line">    backgroundColor: '<span class="comment">#F5FCFF',</span></div><div class="line">  &#125;,</div><div class="line">  welcome: &#123;</div><div class="line">    fontSize: <span class="number">20</span>,</div><div class="line">    textAlign: 'center',</div><div class="line">    margin: <span class="number">10</span>,</div><div class="line">  &#125;,</div><div class="line">  instructions: &#123;</div><div class="line">    textAlign: 'center',</div><div class="line">    color: '<span class="comment">#333333',</span></div><div class="line">    marginBottom: <span class="number">5</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">AppRegistry.registerComponent('ReduxExample', () =&gt; ReduxExampleApp);</div></pre></td></tr></table></figure></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(5)-é«˜çº§æŒ‡å—]]></title>
      <url>http://yoursite.com/2017/03/30/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-5-%E9%AB%98%E7%BA%A7%E6%8C%87%E5%8D%97/</url>
      <content type="html"><![CDATA[<h1 id="Redux-Intergration"><a href="#Redux-Intergration" class="headerlink" title="Redux Intergration"></a>Redux Intergration</h1><p>ä¸ºäº†åœ¨reduxä¸­å¤„ç†appçš„navigation state,ä½ å¯ä»¥ä¼ é€’ä½ è‡ªå·±çš„<code>navigation</code> propåˆ°ä¸€ä¸ªnavigator.ä½ çš„navigation propå¿…é¡»æä¾›å½“å‰çš„state,è¿˜æœ‰å°±æ˜¯å¤„ç†navigationé…ç½®é¡¹çš„dispatcher.</p>
<p>ä½¿ç”¨redux,ä½ çš„app stateç”±reduceræ¥å®šä¹‰.æ¯ä¸€ä¸ªnavigation routeréƒ½æœ‰ä¸€ä¸ªreducer,å«åš<code>getStateForAction</code>.ä¸‹é¢æ˜¯ä¸€åœ¨reduxåº”ç”¨ä¸­ä½¿ç”¨navigatorsçš„ç®€å•å®ä¾‹:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; addNavigationHelpers &#125; from <span class="symbol">'react</span>-navigation';</div><div class="line"></div><div class="line">const <span class="type">AppNavigator</span> = <span class="type">StackNavigator</span>(<span class="type">AppRouteConfigs</span>);</div><div class="line"></div><div class="line">const navReducer = (state, action) =&gt; &#123;</div><div class="line">  const newState = <span class="type">AppNavigator</span>.router.getStateForAction(action, state);</div><div class="line">  <span class="keyword">return</span> newState || state;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const appReducer = combineReducers(&#123;</div><div class="line">  nav: navReducer,</div><div class="line">  ...</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="meta">@connect</span>(state =&gt; (&#123;</div><div class="line">  nav: state.nav,</div><div class="line">&#125;))</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppWithNavigationState</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">AppNavigator</span> navigation=&#123;addNavigationHelpers(&#123;</div><div class="line">        dispatch: <span class="keyword">this</span>.props.dispatch,</div><div class="line">        state: <span class="keyword">this</span>.props.nav,</div><div class="line">      &#125;)&#125; /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const store = createStore(appReducer);</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Provider</span> store=&#123;store&#125;&gt;</div><div class="line">        &lt;<span class="type">AppWithNavigationState</span> /&gt;</div><div class="line">      &lt;/<span class="type">Provider</span>&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸€æ—¦æŒ‰ç…§å®ä¾‹æ“ä½œ,navigation stateå°±å­˜å‚¨åœ¨reduxçš„storeä¸­,è¿™æ ·å°±å¯ä»¥ä½¿ç”¨reduxçš„dispatchå‡½æ•°æ¥å‘èµ·navigationçš„actions.</p>
<p>ç‰¢è®°åœ¨å¿ƒ,å½“ä¸€ä¸ªnavigatorç»™å®šä¸€ä¸ª<code>navigation</code>prop,ä»–å°†å¤±å»å†…éƒ¨stateçš„æ§åˆ¶æƒ.è¿™æ„å‘³ç€ç°åœ¨ä½ æ¥è´Ÿè´£stateçš„æŒä¹…åŒ–,å¤„ç†ä»»ä½•çš„æ·±åº¦é“¾æ¥,æ•´åˆBackæŒ‰é’®ç­‰æ“ä½œ.</p>
<p>å½“ä½ çš„navigatoræ˜¯å·¢å¼çš„æ—¶å€™,Navigation stateè‡ªåŠ¨ä»ä¸€ä¸ªnavigatorä¼ é€’åˆ°å¦ä¸€ä¸ªnavigator.æ³¨æ„,ä¸ºäº†è®©å­ä»£navigatorå¯ä»¥ä»çˆ¶ä»£navigatoræ¥æ”¶state,å®ƒåº”è¯¥å®šä¹‰ä¸ºä¸€ä¸ª<code>screen</code>.</p>
<p>å¯¹åº”ä¸Šé¢çš„å®ä¾‹,ä½ å¯ä»¥å®šä¹‰<code>AppNavigator</code>åŒ…å«ä¸€ä¸ªå·¢å¼çš„<code>TabNavigator</code>:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute"> const AppNavigator</span> = StackNavigator(&#123;</div><div class="line">  Home: &#123; screen: MyTabNavigator &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªå®ä¾‹ä¸­,ä¸€æ—¦ä½ åœ¨<code>AppWithNavigationState</code>ä¸­<code>connect</code> <code>AppNavigator</code>åˆ°Redux,<code>MyTabNavigation</code>å°†ä¼šè‡ªåŠ¨æ¥å…¥åˆ°navigation state ä½œä¸º<code>navigtion</code>çš„prop.</p>
<h1 id="Web-Integration"><a href="#Web-Integration" class="headerlink" title="Web Integration"></a>Web Integration</h1><p>React Navigation routerså·¥ä½œåœ¨webç¯å¢ƒä¸‹å…è®¸ä½ å’ŒåŸç”Ÿappå…±äº«å¯¼èˆªçš„é€»è¾‘.ç»‘å®šåœ¨<code>react-navigation</code>çš„è§†å›¾ç›®å‰åªèƒ½å·¥ä½œåœ¨React Nativeä¸‹,ä½†æ˜¯åœ¨react-primitivesé¡¹ç›®ä¸­å¯èƒ½ä¼šæœ‰æ‰€æ”¹å˜.</p>
<h2 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h2><p><a href="https://reactnavigation.org/" target="_blank" rel="external">è¿™ä¸ªç½‘ç«™</a>ç”±React Navigationæ„å»º,ä½¿ç”¨äº†<code>createNavigation</code>å’Œ<code>TabRouter</code>.<br>çœ‹çœ‹ç½‘ç«™çš„æºä»£ç <a href="https://github.com/react-community/react-navigation/blob/master/website/src/App.js" target="_blank" rel="external">app.js</a></p>
<p>appå¦‚ä½•è·å¾—æ¸²æŸ“å‚çœ‹<a href="https://github.com/react-community/react-navigation/blob/master/website/src/Server.js" target="_blank" rel="external">server.js</a>.åœ¨æµè§ˆå™¨ä¸­,ä½¿ç”¨[BrowserAppContainer.js]æ¥å”¤é†’å’Œè·å¾—æ¸²æŸ“.</p>
<p>##æ›´å¤šå†…å®¹,å¾ˆå¿«å‘ˆç°<br>ä¸ä¹…ä¼šæœ‰è¯¦ç»†çš„æ•™ç¨‹.</p>
<h1 id="Deep-Linking"><a href="#Deep-Linking" class="headerlink" title="Deep Linking"></a>Deep Linking</h1><p>è¿™ä¸€éƒ¨åˆ†æŒ‡å—ä¸­,æˆ‘ä»¬å°†è®¾ç½®appæ¥å¤„ç†å¤–éƒ¨URIs.è®©æˆ‘ä»¬ä»SimpleAppå¼€å§‹<br><a href="https://reactnavigation.org/docs/intro" target="_blank" rel="external">getting startçš„æŒ‡å—</a></p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­,æˆ‘ä»¬æƒ³ä½¿ç”¨ç±»ä¼¼<code>mychat://chat/Taylor</code>çš„URIæ¥æ‰“å¼€æˆ‘ä»¬çš„app,ç›´æ¥è¿æ¥åˆ°Taylorçš„chat page.</p>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>åœ¨å‰é¢æˆ‘ä»¬å®šä¹‰äº†navigatoræƒ³ä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> const SimpleApp = StackNavigator(&#123;</div><div class="line"><span class="symbol">  Home:</span> &#123; <span class="keyword">screen: </span>HomeScreen &#125;,</div><div class="line"><span class="symbol">  Chat:</span> &#123; <span class="keyword">screen: </span>ChatScreen &#125;,</div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æƒ³è®©pathç±»ä¼¼<code>chat/Taylor</code>é“¾æ¥åˆ°â€œChatâ€screen,ä¼ é€’<code>user</code>ä½œä¸ºå‚æ•°.æˆ‘ä»¬é‡æ–°å®šä¹‰æˆ‘ä»¬çš„chat screenä½¿ç”¨ä¸€ä¸ª<code>path</code>æ¥å‘Šè¯‰routeréœ€è¦åŒ¹é…çš„pathå’Œéœ€è¦æå–çš„å‚æ•°.è¿™ä¸ªè·¯å¾„é…ç½®ä¸º<code>chat/:user</code>.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> const SimpleApp = StackNavigator(&#123;</div><div class="line"><span class="attr">  Home:</span> &#123; screen: HomeScreen &#125;,</div><div class="line"><span class="attr">  Chat:</span> &#123;</div><div class="line"><span class="attr">    screen:</span> ChatScreen,</div><div class="line"><span class="attr">    path:</span> <span class="string">'chat/:user'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="URIçš„å‰ç¼€"><a href="#URIçš„å‰ç¼€" class="headerlink" title="URIçš„å‰ç¼€"></a>URIçš„å‰ç¼€</h2><p>ä¸‹é¢é…ç½®navigation containeræ¥æå–appçš„path.å½“é…ç½®åœ¨é¡¶å±‚navigatorä¸Šçš„æ—¶å€™,æˆ‘ä»¬æä¾›<code>containerOperations</code>,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> SimpleApp = StackNavigator(&#123;</div><div class="line">  ...</div><div class="line">&#125;, &#123;</div><div class="line">  <span class="attr">containerOptions</span>: &#123;</div><div class="line">    <span class="comment">// on Android, the URI prefix typically contains a host in addition to scheme</span></div><div class="line">    URIPrefix: Platform.OS == <span class="string">'android'</span> ? <span class="string">'mychat://mychat/'</span> : <span class="string">'mychat://'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><p>åŸºäº<code>mychat://</code>URIå›¾å¼é…ç½®åŸç”Ÿçš„iOS app.<br>åœ¨<code>SimpleApp/ios/SimpleApp/AppleDelegate.m</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// Add the header at the top of the file:</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;React/RCTLinkingManager.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// Add this above the `@end`:</span></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application openURL:(<span class="built_in">NSURL</span> *)url</div><div class="line">  sourceApplication:(<span class="built_in">NSString</span> *)sourceApplication annotation:(<span class="keyword">id</span>)annotation</div><div class="line">&#123;</div><div class="line">  <span class="keyword">return</span> [RCTLinkingManager application:application openURL:url</div><div class="line">                      sourceApplication:sourceApplication annotation:annotation];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨Xcodeé‡Œ,æ‰“å¼€é¡¹ç›®çš„<code>simpleApp/ios/SimpleApp.xcodeproj</code>.åœ¨è¾¹æ ä¸­é€‰æ‹©é¡¹ç›®å¯¼èˆªåˆ°info tab.å‘ä¸‹æ»‘åŠ¨åˆ°â€œURL Typesâ€å¹¶ä¸”æ·»åŠ ä¸€ä¸ª.åœ¨æ–°çš„URL type,è®¾å®šåç§°å’Œurlå›¾å¼å¯¹åº”æƒ³å¯¼èˆªåˆ°çš„urlå›¾å¼.<br><img src="https://ww4.sinaimg.cn/large/006tNbRwly1fe3z3gaupxj30ui0fk74v.jpg" alt=""></p>
<p>ç°åœ¨å¯ä»¥åœ¨Xcodeä¸­ç‚¹å‡»play,æˆ–è€…åœ¨å‘½ä»¤è¡Œè¿è¡Œ<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">react-native <span class="keyword">run</span><span class="bash">-ios</span></div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†åœ¨iOSä¸­æµ‹è¯•URI,åœ¨safariä¸­æ‰“å¼€<code>mychat://chat/Taylor</code></p>
<h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><p>ä¸ºäº†åœ¨Andoridä¸­é“¾æ¥å¤–é“¾,å¯ä»¥åœ¨manifestä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„intent.<br>åœ¨<code>SimpleApp/android/app/src/main/AndroidManifest.xml</code>ä¸­<code>MainActivity</code>å†…æ·»åŠ æ–°çš„<code>VIEW</code>type<code>intent-filter</code>.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.BROWSABLE"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"mychat"</span></span></div><div class="line">          <span class="attr">android:host</span>=<span class="string">"mychat"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç°åœ¨,é‡æ–°è¿è¡Œ:<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">react-native <span class="keyword">run</span><span class="bash">-android</span></div></pre></td></tr></table></figure></p>
<p>åœ¨Androidä¸­æµ‹è¯•intentæ“ä½œ,è¿è¡Œ<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">adb shell am start -W -<span class="selector-tag">a</span> android<span class="selector-class">.intent</span><span class="selector-class">.action</span><span class="selector-class">.VIEW</span> -d <span class="string">"mychat://mychat/chat/Taylor"</span> com.simpleapp</div></pre></td></tr></table></figure></p>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fe3zdd1q9gg307i0dc17p.gif" alt=""></p>
<h1 id="Screen-tracking-and-analytics"><a href="#Screen-tracking-and-analytics" class="headerlink" title="Screen tracking and analytics"></a>Screen tracking and analytics</h1><p>è¿™ä¸ªå®ä¾‹ä¸­å±•ç¤ºæ€ä¹ˆåšå±å¹•è¿½è¸ªå¹¶ä¸”å‘åˆ°Google Analytics.è¿™ä¸ªæ–¹æ³•åº”ç”¨åœ¨å…¶ä»–çš„ç§»åŠ¨åˆ†æSDKä¹Ÿæ˜¯å¯ä»¥çš„.</p>
<h2 id="Screen-tracking"><a href="#Screen-tracking" class="headerlink" title="Screen tracking"></a>Screen tracking</h2><p>å½“æˆ‘ä»¬ä½¿ç”¨å†…å»ºçš„navigation container,æˆ‘ä»¬ä½¿ç”¨<code>onNavigationStateChange</code>æ¥è¿½è¸ªscreen.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"> import &#123; GoogleAnalyticsTracker &#125; from <span class="string">'react-native-google-analytics-bridge'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> tracker = <span class="keyword">new</span> GoogleAnalyticsTracker(GA_TRACKING_ID);</div><div class="line"></div><div class="line"><span class="comment">// gets the current screen from navigation state</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCurrentRouteName</span><span class="params">(navigationState)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!navigationState) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> route = navigationState.routes[navigationState.index];</div><div class="line">  <span class="comment">// dive into nested navigators</span></div><div class="line">  <span class="keyword">if</span> (route.routes) &#123;</div><div class="line">    <span class="keyword">return</span> getCurrentRouteName(route);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> route.routeName;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> AppNavigator = StackNavigator(AppRouteConfigs);</div><div class="line"></div><div class="line">export <span class="keyword">default</span> () =&gt; (</div><div class="line">  &lt;AppNavigator</div><div class="line">    onNavigationStateChange=&#123;(prevState, currentState) =&gt; &#123;</div><div class="line">      <span class="keyword">const</span> currentScreen = getCurrentRouteName(currentState);</div><div class="line">      <span class="keyword">const</span> prevScreen = getCurrentRouteName(prevState);</div><div class="line"></div><div class="line">      <span class="keyword">if</span> (prevScreen !== currentScreen) &#123;</div><div class="line">        <span class="comment">// the line below uses the Google Analytics tracker</span></div><div class="line">        <span class="comment">// change the tracker here to use other Mobile analytics SDK.</span></div><div class="line">        tracker.trackScreenView(currentScreen);</div><div class="line">      &#125;</div><div class="line">    &#125;&#125;</div><div class="line">  /&gt;</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨ReduxåšScreen-tracking"><a href="#ä½¿ç”¨ReduxåšScreen-tracking" class="headerlink" title="ä½¿ç”¨ReduxåšScreen tracking"></a>ä½¿ç”¨ReduxåšScreen tracking</h2><p>ä½¿ç”¨Reduxçš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥å†™Redux ä¸­é—´ä»¶æ¥track screen.ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„,æˆ‘ä»¬ä»å‰é¢çš„éƒ¨åˆ†é‡æ–°ä½¿ç”¨<code>getCurrenRouteName</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">'react-navigation'</span>;</div><div class="line"><span class="keyword">import</span> &#123; GoogleAnalyticsTracker &#125; <span class="keyword">from</span> <span class="string">'react-native-google-analytics-bridge'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> tracker = <span class="keyword">new</span> GoogleAnalyticsTracker(GA_TRACKING_ID);</div><div class="line"></div><div class="line"><span class="keyword">const</span> screenTracking = <span class="function">(<span class="params">&#123; getState &#125;</span>) =&gt;</span> next =&gt; <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (</div><div class="line">    action.type !== NavigationActions.NAVIGATE</div><div class="line">    &amp;&amp; action.type !== NavigationActions.BACK</div><div class="line">  ) &#123;</div><div class="line">    <span class="keyword">return</span> next(action);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> currentScreen = getCurrentRouteName(getState().navigation);</div><div class="line">  <span class="keyword">const</span> result = next(action);</div><div class="line">  <span class="keyword">const</span> nextScreen = getCurrentRouteName(getState().navigation);</div><div class="line">  <span class="keyword">if</span> (nextScreen !== currentScreen) &#123;</div><div class="line">    <span class="comment">// the line below uses the Google Analytics tracker</span></div><div class="line">    <span class="comment">// change the tracker here to use other Mobile analytics SDK.</span></div><div class="line">    tracker.trackScreenView(nextScreen);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> screenTracking;</div></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºRedux-storeå¹¶åº”ç”¨ä¸Šé¢çš„ä¸­é—´ä»¶"><a href="#åˆ›å»ºRedux-storeå¹¶åº”ç”¨ä¸Šé¢çš„ä¸­é—´ä»¶" class="headerlink" title="åˆ›å»ºRedux storeå¹¶åº”ç”¨ä¸Šé¢çš„ä¸­é—´ä»¶"></a>åˆ›å»ºRedux storeå¹¶åº”ç”¨ä¸Šé¢çš„ä¸­é—´ä»¶</h2><p>åœ¨åˆ›å»ºstoreçš„æ—¶å€™åº”ç”¨è¿™ä¸ª<code>screenTracking</code>çš„ä¸­é—´ä»¶.çœ‹çœ‹Redux Integrationäº†è§£ç»†èŠ‚.<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> const store = createStore(</div><div class="line">  <span class="name">combineReducers</span>(&#123;</div><div class="line">    navigation: navigationReducer,</div><div class="line">    ...</div><div class="line">  &#125;),</div><div class="line">  applyMiddleware(</div><div class="line">    <span class="name">screenTracking</span>,</div><div class="line">    ...</div><div class="line">    ),</div><div class="line">)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(4)]]></title>
      <url>http://yoursite.com/2017/03/29/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-4/</url>
      <content type="html"><![CDATA[<h1 id="Navigation-Actions"><a href="#Navigation-Actions" class="headerlink" title="Navigation Actions"></a>Navigation Actions</h1><p>æ‰€æœ‰çš„Navigation Actionséƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡å¯ä»¥ä½¿ç”¨<code>navigation.dispatch</code>æ–¹æ³•ä¼ é€’åˆ°router.<br><em>æ³¨æ„</em>ï¼šå¦‚æœä½ æƒ³dispatch react-navigation,ä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªåº“æä¾›çš„action creators.</p>
<p>ä¸‹é¢çš„actionsæ˜¯å¯ä»¥ä½¿ç”¨çš„:</p>
<ul>
<li><code>Navigate</code>-å¯¼èˆªåˆ°å…¶ä»–çš„route</li>
<li><code>Reset</code>-ä½¿ç”¨æ–°çš„stateä»£æ›¿ç›®å‰çš„state</li>
<li><code>Back</code>-è¿”å›ä¸Šä¸€ä¸ªstate</li>
<li><code>Set Params</code>-ç»™å®šçš„routeè®¾ç½®å‚æ•°</li>
<li><code>Init</code>-å¦‚æœstateæ²¡æœ‰å®šä¹‰,ç”¨æ¥åˆå§‹åŒ–ç¬¬ä¸€ä¸ªstate</li>
</ul>
<h2 id="Navigate"><a href="#Navigate" class="headerlink" title="Navigate"></a>Navigate</h2><p><code>Navigatie action</code>ä¼šä½¿ç”¨<code>Navigate action</code>çš„ç»“æœæ¥æ›´æ–°å½“å‰çš„state.</p>
<ul>
<li><code>routeName</code>-å­—ç¬¦ä¸²-å¿…é€‰é¡¹,åœ¨appçš„routeré‡Œæ³¨å†Œçš„å¯¼èˆªç›®çš„åœ°çš„routeName.</li>
<li><code>params</code>-å¯¹è±¡-å¯é€‰é¡¹-èåˆè¿›ç›®çš„åœ°routeçš„å‚æ•°</li>
<li><code>actions</code>-å¯¹è±¡-å¯é€‰é¡¹-(é«˜çº§)-å¦‚æœscreenä¹Ÿæ˜¯ä¸€ä¸ªnavigator,æ¬¡çº§actionå¯ä»¥åœ¨å­routerä¸­è¿è¡Œ.åœ¨æ–‡æ¡£ä¸­æè¿°çš„ä»»ä½•actionséƒ½å¯ä»¥ä½œä¸ºæ¬¡çº§action.</li>
</ul>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; NavigationActions &#125; from <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line">const navigateAction = NavigationActions.navigate(&#123;</div><div class="line"></div><div class="line">  routeName: <span class="string">'Profile'</span>,</div><div class="line"></div><div class="line">  params: &#123;&#125;,</div><div class="line"></div><div class="line">  action: NavigationActions.navigate(&#123; routeName: <span class="string">'SubProfileRoute'</span>&#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">this.props.navigation.dispatch(navigateAction)</div></pre></td></tr></table></figure>
<h2 id="Reset"><a href="#Reset" class="headerlink" title="Reset"></a>Reset</h2><p><code>Reset</code>actionåˆ æ‰æ‰€æœ‰çš„navigation stateå¹¶ä¸”ä½¿ç”¨å‡ ä¸ªactionsçš„ç»“æœæ¥ä»£æ›¿.</p>
<ul>
<li><code>index</code>â€”æ•°ç»„-å¿…é€‰-navigation <code>state</code>ä¸­<code>route</code>æ•°ç»„ä¸­æ¿€æ´»routeçš„index.</li>
<li><code>actions</code>-æ•°ç»„-å¿…é€‰é¡¹-Navigation Actionsæ•°ç»„,å°†ä¼šæ›¿ä»£navigation state</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> resetAction = NavigationActions.reset(&#123;</div><div class="line">  <span class="attr">index</span>: <span class="number">0</span>,</div><div class="line">  <span class="attr">actions</span>: [</div><div class="line">    NavigationActions.navigate(&#123; <span class="attr">routeName</span>: <span class="string">'Profile'</span>&#125;)</div><div class="line">  ]</div><div class="line">&#125;)</div><div class="line"><span class="keyword">this</span>.props.navigation.dispatch(resetAction)</div></pre></td></tr></table></figure>
<h2 id="æ€ä¹ˆä½¿ç”¨indexå‚æ•°"><a href="#æ€ä¹ˆä½¿ç”¨indexå‚æ•°" class="headerlink" title="æ€ä¹ˆä½¿ç”¨indexå‚æ•°"></a>æ€ä¹ˆä½¿ç”¨<code>index</code>å‚æ•°</h2><p><code>index</code>å‚æ•°è¢«ç”¨æ¥å®šåˆ¶åŒ–å½“å‰æ¿€æ´»çš„route<br>ä¾‹å¦‚ï¼šä½¿ç”¨ä¸¤ä¸ªroutes <code>Profile</code>å’Œ<code>Settings</code>ç»™ä¸€ä¸ªåŸºç¡€çš„stakc navigationè®¾ç½®.ä¸ºäº†é‡ç½®routeåˆ°ç»è¿‡<code>Settings</code>çš„æ¿€æ´»screené‚£ä¸€ç‚¹,ä½†æ˜¯åœ¨å †æ ˆä¸­ä»–åˆå­˜æ”¾åœ¨<code>Setting</code>screenä¹‹ä¸Š,ä½ å¯ä»¥è¿™ä¹ˆåš:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; NavigationActions &#125; from <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line">const resetAction = NavigationActions.reset(&#123;</div><div class="line">  index: <span class="number">1</span>,</div><div class="line">  actions: [</div><div class="line">    NavigationActions.navigate(&#123; routeName: <span class="string">'Profile'</span>&#125;),</div><div class="line">    NavigationActions.navigate(&#123; routeName: <span class="string">'Settings'</span>&#125;)</div><div class="line">  ]</div><div class="line">&#125;)</div><div class="line">this.props.navigation.dispatch(resetAction)</div></pre></td></tr></table></figure>
<h2 id="Back"><a href="#Back" class="headerlink" title="Back"></a>Back</h2><p>è¿”å›åˆ°å‰ä¸€ä¸ªscreenå¹¶ä¸”å…³é—­å½“å‰screen.<code>back</code>action creatoræ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°:</p>
<ul>
<li><code>key</code>-å­—ç¬¦ä¸²æˆ–è€…ç©º-å¯é€‰é¡¹-å¦‚æœè®¾å®šäº†,navigationå°†ä¼šä»è®¾å®šçš„keyè¿”å›.å¦‚æœæ˜¯null,navigationå°†è¿”å›åˆ°ä»»ä½•åœ°æ–¹.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> backAction = NavigationActions.back(&#123;</div><div class="line">  <span class="attr">key</span>: <span class="string">'Profile'</span></div><div class="line">&#125;)</div><div class="line"><span class="keyword">this</span>.props.navigation.dispatch(backAction)</div></pre></td></tr></table></figure>
<h2 id="SetParams"><a href="#SetParams" class="headerlink" title="SetParams"></a>SetParams</h2><p>å½“dispatching <code>setParamsçš„æ—¶å€™</code>,routerå°†ä¼šäº§å‡ºä¸€ä¸ªæ–°çš„state,è¿™ä¸ªstateæ˜¯å·²ç»æ”¹å˜äº†ç‰¹å®šrouteçš„å‚æ•°,ä»¥keyä½œä¸ºèº«ä»½éªŒè¯</p>
<ul>
<li><code>params</code>-å¯¹è±¡-å¿…é€‰å‚æ•°-èåˆè¿›å·²ç»å­˜åœ¨çš„routeå‚æ•°ä¸­çš„æ–°å‚æ•°</li>
<li><code>key</code>-å­—ç¬¦ä¸²-å¿…é€‰å‚æ•°-Routeçš„key,åº”è¯¥åˆ†é…ç»™æ–°çš„å‚æ•°</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; NavigationActions &#125; <span class="keyword">from</span> <span class="string">'react-navigation'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> setParamsAction = NavigationActions.setParams(&#123;</div><div class="line">  <span class="attr">params</span>: &#123; <span class="attr">title</span>: <span class="string">'Hello'</span> &#125;,</div><div class="line">  <span class="attr">key</span>: <span class="string">'screen-123'</span>,</div><div class="line">&#125;)</div><div class="line"><span class="keyword">this</span>.props.navigation.dispatch(setParamsAction)</div></pre></td></tr></table></figure>
<h1 id="Screen-Navigation-Options"><a href="#Screen-Navigation-Options" class="headerlink" title="Screen Navigation Options"></a>Screen Navigation Options</h1><p>æ¯ä¸ªscreenéƒ½å¯ä»¥é…ç½®å‡ ä¸ªæ–¹é¢çš„å†…å®¹,è¿™äº›å†…å®¹å½±å“åˆ°åœ¨çˆ¶navigatorsä¸­æ€ä¹ˆå¾—åˆ°å±•ç¤º.</p>
<h2 id="å®šåˆ¶æ¯ä¸€ä¸ªå¯é€‰é¡¹çš„ä¸¤ç§æ–¹æ³•"><a href="#å®šåˆ¶æ¯ä¸€ä¸ªå¯é€‰é¡¹çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="å®šåˆ¶æ¯ä¸€ä¸ªå¯é€‰é¡¹çš„ä¸¤ç§æ–¹æ³•"></a>å®šåˆ¶æ¯ä¸€ä¸ªå¯é€‰é¡¹çš„ä¸¤ç§æ–¹æ³•</h2><p><em>é™æ€é…ç½®æ–¹æ³•</em>:æ¯ä¸€ä¸ªnavigation å¯é€‰é¡¹éƒ½å¯ä»¥è¢«ç›´æ¥è®¾å®š:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"> static navigationOptions = &#123;</div><div class="line">   title: <span class="symbol">'Grea</span>t',</div><div class="line"> &#125;;</div><div class="line"> ...</div></pre></td></tr></table></figure>
<p><em>åŠ¨æ€é…ç½®æ–¹æ³•</em><br>è¦ä¹ˆå°±é‡‡ç”¨å‡½æ•°å¼çš„æ–¹æ³•,æ¥å—å‚æ•°,ç„¶åè¿”å›å¯é€‰é¡¹çš„å€¼.</p>
<ul>
<li><code>navigation</code>-screençš„navigation propå’Œ<code>navigation.state</code>ä¸­screençš„route</li>
<li><code>childRouter</code>-å¦‚æœscreenæ˜¯ä¸€ä¸ªnavigator,è¿™ä¸ªå‚æ•°å°±æ˜¯å­ä»£router.</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfileScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"> static navigationOptions = &#123;</div><div class="line">   title: (navigation, childRouter) =&gt; &#123;</div><div class="line">     <span class="keyword">return</span> navigation.state.params.name + <span class="string">"'s Profile!"</span>;</div><div class="line">   &#125;,</div><div class="line"> &#125;;</div><div class="line"> ...</div></pre></td></tr></table></figure>
<h2 id="é€šç”¨çš„Navigation-Options"><a href="#é€šç”¨çš„Navigation-Options" class="headerlink" title="é€šç”¨çš„Navigation Options"></a>é€šç”¨çš„Navigation Options</h2><p>navigationçš„å¯é€‰é¡¹<code>title</code>åœ¨æ¯ä¸€ä¸ªnavigatorä¹‹é—´æ˜¯é€šç”¨çš„,ç”¨æ¥è®¾å®šæ¯ä¸€ä¸ªscreençš„æ ‡é¢˜å­—ç¬¦ä¸².</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"> static navigationOptions = &#123;</div><div class="line">   title: <span class="symbol">'Grea</span>t',</div><div class="line"> &#125;;</div><div class="line"> ...</div></pre></td></tr></table></figure>
<p>ä¸åƒå…¶ä»–çš„navigationçš„å¯é…ç½®é¡¹ä»…ä»…ç”±navigator viewæ¥ä½¿ç”¨,title é€‰é¡¹å¯ä»¥è¢«ç¯å¢ƒå˜é‡ä½¿ç”¨æ¥æ›´æ–°æµè§ˆå™¨çš„æ ‡é¢˜æˆ–è€…appåˆ‡æ¢æ—¶å€™çš„æ ‡é¢˜.</p>
<h2 id="é»˜è®¤çš„Navigationé€‰é¡¹"><a href="#é»˜è®¤çš„Navigationé€‰é¡¹" class="headerlink" title="é»˜è®¤çš„Navigationé€‰é¡¹"></a>é»˜è®¤çš„Navigationé€‰é¡¹</h2><p>åœ¨screenä¸­å®šä¹‰<code>navigationOption</code>éå¸¸æ™®é,ä½†æ˜¯æœ‰æ—¶å€™åœ¨navigatorä¸­å®šä¹‰<code>navitationOptions</code>ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨</p>
<p>æƒ³è±¡ä¸‹é¢çš„åœºæ™¯:ä½ çš„<code>TabNavigator</code>ä»£è¡¨appä¸­çš„ä¸€ä¸ªscreen.ä»–åœ¨é¡¶å±‚<code>StackNavigator</code>ä¹‹å†…:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">StackNavigator:</span></div><div class="line"> - <span class="string">route1:</span> A screen</div><div class="line"> - <span class="string">route2:</span> A TabNavigator</div></pre></td></tr></table></figure>
<p>ç°åœ¨<code>route2</code>æ˜¯æ¿€æ´»çš„,ä½ å¯èƒ½ä¼šéšè—header,éšè—<code>route1</code>çš„headeréå¸¸å®¹æ˜“,<code>route2</code>çš„headeråº”è¯¥ä¹Ÿå¾ˆå®¹æ˜“éšè—.è¿™å°±æ˜¯é»˜è®¤Navigation Option è¦åšçš„.å¯ä»¥åœ¨<code>navigationOptions</code>ä¸­è®¾å®š:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">TabNavigator</span>(&#123;</div><div class="line">  <span class="attribute">profile</span>: ProfileScreen,</div><div class="line">  ...</div><div class="line">&#125;, &#123;</div><div class="line">  <span class="attribute">navigationOptions</span>: &#123;</div><div class="line">     header: &#123;</div><div class="line">       visible: false,</div><div class="line">     &#125;,</div><div class="line">   &#125;,</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<p>æç¤º:ä½ ä»ç„¶å¯ä»¥åœ¨å­ä»£å¯¼èˆªscreenä¸Šå®šåˆ¶<code>navigationOptions</code>.-ä¾‹å¦‚,ä¸Šé¢çš„<code>ProfileScreen</code>.ä»screenè·å¾—çš„<code>navigationOptions</code>ä¼šå’Œä»navigatoræ¥çš„é…ç½®æŒ‰ç…§é”®-é”®çš„æ–¹å¼èåˆåœ¨ä¸€èµ·.æ— è®ºåœ¨ä»€ä¹ˆè€Œæ—¶é—´,navigatorå’Œscreenå®šä¹‰ç›¸åŒçš„é…ç½®(ä¾‹å¦‚:<code>header</code>),screenä¼šä¼˜å…ˆä½¿ç”¨.å› æ­¤,å½“<code>ProfileScreen</code>æ¿€æ´»çš„æ—¶å€™,ä½ å¯ä»¥ä½¿headerå†æ¬¡å¯è§.</p>
<p><em>æ‰©å±•é»˜è®¤é…ç½®</em>:ä¸ºäº†ä½¿ç”¨screenç‰¹å®šçš„propertiesæ‰©å±•é»˜è®¤é…ç½®,è€Œä¸æ˜¯é‡å†™å®ƒ,ä½ å¯ä»¥åƒä¸‹é¢ä¸€æ ·é…ç½®é€‰é¡¹:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ProfileScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    header: (navigation, defaultHeader) =&gt; (&#123;</div><div class="line">      ...defaultHeader,</div><div class="line">      visible: <span class="literal">true</span>,</div><div class="line">    &#125;),</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¼ é€’åˆ°å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºåœ¨navigatorä¸­å®šä¹‰çš„<code>header</code>çš„é»˜è®¤å€¼.</p>
<h2 id="Tab-Navigation-Options"><a href="#Tab-Navigation-Options" class="headerlink" title="Tab Navigation Options"></a>Tab Navigation Options</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TabScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">  static navigationOptions = &#123;</div><div class="line">    tabBar: (&#123; state &#125;) =&gt; (&#123;</div><div class="line">      label: <span class="symbol">'Tab</span> <span class="type">Label</span>',</div><div class="line">      icon: (&#123; tintColor &#125;) =&gt; (</div><div class="line">        &lt;<span class="type">Image</span></div><div class="line">          source=&#123;require('./tab-icon.png')&#125;</div><div class="line">          style=&#123;[styles.icon, &#123;tintColor: tintColor&#125;]&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">      visible: <span class="literal">true</span></div><div class="line">    &#125;),</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><code>label</code>-å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ˜¯Reactç»„ä»¶</li>
<li><code>icon</code>-å‡½æ•°è¿”å›iconç»„ä»¶</li>
<li><code>visible</code>-trueæˆ–è€…false,æ˜¾ç¤ºæˆ–è€…éšè—tab bar,é»˜è®¤æ˜¯true</li>
</ul>
<h1 id="Custom-Navigation"><a href="#Custom-Navigation" class="headerlink" title="Custom Navigation"></a>Custom Navigation</h1><p>ä¸€ä¸ªnavigatoræ˜¯ä»»ä½•åŒ…å«routerçš„Reactç»„ä»¶.è¿™é‡Œæ˜¯ä¸€ä¸ªåŸºæœ¬navigator,ä½¿ç”¨routerçš„APIå»è·å¾—æ¿€æ´»ç»„ä»¶æ¥æ¸²æŸ“<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> class MyNavigator extends React.Component &#123;</div><div class="line">  static router = MyRouter;</div><div class="line">  render() &#123;</div><div class="line">    const &#123; <span class="keyword">state</span>, dispatch &#125; = this.props.navigation;</div><div class="line">    const &#123; routes, index &#125; = <span class="keyword">state</span>;</div><div class="line"></div><div class="line">    // Figure <span class="keyword">out</span> what <span class="keyword">to</span> render based <span class="keyword">on</span> the navigation <span class="keyword">state</span> and the router:</div><div class="line">    const Component = MyRouter.getComponentForState(<span class="keyword">state</span>);</div><div class="line"></div><div class="line">    // The <span class="keyword">state</span> of the active child screen can be found at routes[index]</div><div class="line">    let childNavigation = &#123; dispatch, <span class="keyword">state</span>: routes[index] &#125;;</div><div class="line">    // If we want, we can also tinker with the dispatch function here, <span class="keyword">to</span> <span class="keyword">limit</span></div><div class="line">    // or augment our children's actions</div><div class="line"></div><div class="line">    // Assuming our children want the convenience of calling .navigate() and so <span class="keyword">on</span>,</div><div class="line">    // we should call addNavigationHelpers <span class="keyword">to</span> augment our navigation prop:</div><div class="line">    childNavigation = addNavigationHelpers(childNavigation);</div><div class="line"></div><div class="line">    return <span class="variable">&lt;Component navigation=&#123;childNavigation&#125; /&gt;</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Navigation-Prop"><a href="#Navigation-Prop" class="headerlink" title="Navigation Prop"></a>Navigation Prop</h2><p>navigation propä¼ é€’ç»™navigatorçš„ä»…ä»…åŒ…å«<code>state</code>å’Œ<code>dispatch</code>,è¿™æ˜¯å½“å‰çš„navigatorçš„state,ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªäº‹ä»¶é¢‘é“ç”¨æ¥å‘é€action request.<br>æ‰€æœ‰çš„navigatorséƒ½æ˜¯å—æ§ç»„ä»¶:ä»–ä»¬æ€»æ˜¯æ˜¾ç¤ºæ ¹æ®<code>props.navigation.state</code>æ¥æ˜¾ç¤º,ä»–ä»¬è¦æ”¹å˜state,å”¯ä¸€çš„åŠæ³•æ˜¯å‘é€actionsåˆ°<code>props.navigation.dispatch</code>.<br>Navigatorså¯ä»¥é€šè¿‡å®šåˆ¶ä»–ä»¬çš„routeræ¥æ”¹å˜çˆ¶navigatorsçš„è¡Œä¸º.ä¾‹å¦‚,å½“actionåº”è¯¥ä»<code>router.getStateForAction</code>è¿”å›nullæ¥é˜»æ­¢å…¶è¿è¡Œçš„æ—¶å€™.æˆ–è€…ä¸€ä¸ªnavigatorå¯ä»¥ä¸ºäº†å®šåˆ¶URIçš„æ“ä½œè€Œæ”¹å†™<code>router.getActionForPathParams</code>,ä¸ºäº†è¾“å‡ºç›¸å¯¹navigation actionä»¥åŠæ“ä½œ<code>router.getStateForAction</code>çš„action.</p>
<h2 id="Navigation-State"><a href="#Navigation-State" class="headerlink" title="Navigation State"></a>Navigation State</h2><p>ä¼ é€’åˆ°<code>props.navigation.state</code>çš„navigation stateæœ‰ä¸‹é¢çš„ç»“æ„:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> &#123;</div><div class="line">  <span class="attribute">index</span>: <span class="number">1</span>, <span class="comment">// identifies which route in the routes array is active</span></div><div class="line">  <span class="attribute">routes</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Each route needs a name, which routers will use to associate each route</span></div><div class="line">      <span class="comment">// with a react component</span></div><div class="line">      <span class="attribute">routeName</span>: <span class="string">'MyRouteName'</span>,</div><div class="line"></div><div class="line">      <span class="comment">// A unique id for this route, used to keep order in the routes array:</span></div><div class="line">      <span class="attribute">key</span>: <span class="string">'myroute-123'</span>,</div><div class="line"></div><div class="line">      <span class="comment">// Routes can have any additional data. The included routers have `params`</span></div><div class="line">      ...customRouteData,</div><div class="line">    &#125;,</div><div class="line">    ..<span class="selector-class">.moreRoutes</span>,</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Navigation-Dispatchers"><a href="#Navigation-Dispatchers" class="headerlink" title="Navigation Dispatchers"></a>Navigation Dispatchers</h2><p>navigatorå¯ä»¥dispatch navigation actions,ä¾‹å¦‚Go to URI,Go back.<br>å¦‚æœactionè¢«æˆåŠŸæ“ä½œäº†,dispatcherå°†ä¼šè¿”å›true,å¦åˆ™å°±æ˜¯false</p>
<h2 id="æ„å»ºå®šåˆ¶navigatorsçš„API"><a href="#æ„å»ºå®šåˆ¶navigatorsçš„API" class="headerlink" title="æ„å»ºå®šåˆ¶navigatorsçš„API"></a>æ„å»ºå®šåˆ¶navigatorsçš„API</h2><p>ä¸ºäº†å¸®åŠ©å¼€å‘è€…å®æ–½å®šåˆ¶navigators,React Navigationæä¾›äº†ä¸‹é¢çš„å·¥å…·<br><code>createNavigator</code><br>è¿™ä¸ªå·¥å…·ä½¿ç”¨æ ‡å‡†æ–¹æ³•æŠŠrouterå’Œnavigation viewåˆå¹¶åœ¨ä¸€èµ·.<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const MyApp = createNavigator(<span class="name">MyRouter</span>)(<span class="name">MyView</span>)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>å¹•åæ‰€åšçš„æ˜¯:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> MyApp = <span class="function">(<span class="params">&#123; navigation &#125;</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">MyView</span> <span class="attr">router</span>=<span class="string">&#123;MyRouter&#125;</span> <span class="attr">navigation</span>=<span class="string">&#123;navigation&#125;</span> /&gt;</span></span></div><div class="line">);</div><div class="line">MyApp.router = MyRouter;</div></pre></td></tr></table></figure>
<p><code>addNavigationHelpers</code><br>æ¥æ”¶ä¸€ä¸ªæ‹¥æœ‰<code>state</code>å’Œ<code>dispatch</code>çš„çº¯navigatorçš„prop,ä¼ é€’çš„å‚æ•°æ˜¯åœ¨screen navigation propä¸­çš„å„ç§å‡½æ•°,ä¾‹å¦‚<code>navigation.navigate()</code>å’Œ<code>navigation.goBack()</code>.è¿™äº›å‡½æ•°æ˜¯ç®€å•çš„åŠ©æ‰‹å‡½æ•°å¸®åŠ©åˆ›å»ºactionå¹¶ä¸”å‘é€åˆ°<code>dispatch</code>.</p>
<p><code>createNavigationContainer</code></p>
<p>å¦‚æœä½ æƒ³è®©ä½ çš„navigatorä½œä¸ºé¡¶å±‚ç»„ä»¶ä½¿ç”¨(æ²¡æœ‰navigation propä¼ å…¥),ä½ å¯ä»¥ä½¿ç”¨<code>createNavigationContainer</code>.å½“ç¼ºå°‘navigtion propçš„æ—¶å€™,è¿™ä¸ªå·¥å…·ä½¿ä½ çš„navigatorçœ‹èµ·æ¥åƒä¸€ä¸ªé¡¶å±‚çš„å¯¼èˆªç»„ä»¶.å®ƒå°†ç®¡ç†appçš„state,å’Œappçº§åˆ«çš„å¯¼èˆªç‰¹æ€§æ•´åˆåœ¨ä¸€èµ·,ä¾‹å¦‚æ“ä½œè¿›å‡ºçš„é“¾æ¥å’Œandroidçš„è¿”å›æŒ‰é’®è¡Œä¸º.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(3)]]></title>
      <url>http://yoursite.com/2017/03/28/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-3/</url>
      <content type="html"><![CDATA[<h1 id="Navigators"><a href="#Navigators" class="headerlink" title="Navigators"></a>Navigators</h1><p>Navigatorså…è®¸ä½ å®šä¹‰ä½ çš„å¯¼èˆªç»“æ„.Navigatorsä¹Ÿå¯ä»¥æ¸²æŸ“æ™®é€šçš„å…ƒç´ ,ä¾‹å¦‚ä½ é…ç½®å¥½çš„headerå’Œtab bar.<br>navigatorså¯ä»¥æ˜¯å•çº¯çš„Reactç»„ä»¶.</p>
<h2 id="å†…å»ºçš„Navigators"><a href="#å†…å»ºçš„Navigators" class="headerlink" title="å†…å»ºçš„Navigators"></a>å†…å»ºçš„Navigators</h2><p><code>react-navigation</code>åŒ…å«ä¸‹é¢çš„å‡ ä¸ªå‡½æ•°å¸®åŠ©ä½ åˆ›å»ºnavigatorsï¼š</p>
<ul>
<li><code>StackNavigator</code>-ä¸€æ¬¡æ¸²æŸ“ä¸€ä¸ªscreen,åœ¨screenä¹‹é—´åˆ‡æ¢.å½“ä¸€ä¸ªæ–°çš„screenè¢«æ‰“å¼€çš„æ—¶å€™,ä»–è¢«æ”¾åœ¨æ ˆé¡¶.</li>
<li><code>TabNavigator</code>-æ¸²æŸ“å‡ºä¸€ä¸ªtab barè®©ç”¨æˆ·å¯ä»¥åœ¨å¤šä¸ªscreenä¹‹é—´åˆ‡æ¢.</li>
<li><code>DrawNavigator</code>-æ¸²æŸ“ä¸€ä¸ªæŠ½å±‰,å¯ä»¥ä»å±å¹•å·¦è¾¹ä¾§æ»‘å‡º.</li>
</ul>
<h2 id="ä½¿ç”¨Navigatorsæ¸²æŸ“screen"><a href="#ä½¿ç”¨Navigatorsæ¸²æŸ“screen" class="headerlink" title="ä½¿ç”¨Navigatorsæ¸²æŸ“screen"></a>ä½¿ç”¨Navigatorsæ¸²æŸ“screen</h2><p>navigatorså®é™…æ¸²æŸ“çš„å°±æ˜¯Reactç»„ä»¶<br>äº†è§£æ€ä¹ˆåˆ›å»ºscreen,è¯»è¯»ä¸€ä¸‹å†…å®¹:</p>
<ul>
<li>Screen<code>navigation</code>propså…è®¸screenåˆ†å‘navigationåŠ¨ä½œ,ä¾‹å¦‚æ“ä½œå¦å¤–ä¸€ä¸ªscreen.</li>
<li>Screen <code>navigationOptions</code>å®šåˆ¶screençš„å±•ç¤ºæ–¹å¼(ä¾‹å¦‚ï¼šheader title,tab label)<h2 id="åœ¨é¡¶å±‚ç»„ä»¶ä¸Šè°ƒç”¨å¯¼èˆª"><a href="#åœ¨é¡¶å±‚ç»„ä»¶ä¸Šè°ƒç”¨å¯¼èˆª" class="headerlink" title="åœ¨é¡¶å±‚ç»„ä»¶ä¸Šè°ƒç”¨å¯¼èˆª"></a>åœ¨é¡¶å±‚ç»„ä»¶ä¸Šè°ƒç”¨å¯¼èˆª</h2>ä¸‡ä¸€ä½ æƒ³åœ¨åŒä¸€çº§åˆ«çš„Navigation screenä¹‹é—´ä½¿ç”¨Navigator,ä½ å¯ä»¥ä½¿ç”¨reactçš„<code>ref</code>é€‰é¡¹:</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">   const <span class="type">AppNavigator</span> = <span class="type">StackNavigator</span>(<span class="type">SomeAppRouteConfigs</span>);</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  someEvent() &#123;</div><div class="line">    <span class="comment">// call navigate for AppNavigator here:</span></div><div class="line">    <span class="keyword">this</span>.navigator &amp;&amp; <span class="keyword">this</span>.navigator.dispatch(&#123; <span class="class"><span class="keyword">type</span></span>: <span class="symbol">'Navigat</span>e', routeName, params &#125;);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">AppNavigator</span> ref=&#123;nav =&gt; &#123; <span class="keyword">this</span>.navigator = nav; &#125;&#125; /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ³¨æ„:è¿™ä¸ªè§£å†³åŠæ³•åªèƒ½ç”¨åœ¨é¡¶å±‚navigatorä¸Š.</p>
<h2 id="Navigation-Containers"><a href="#Navigation-Containers" class="headerlink" title="Navigation Containers"></a>Navigation Containers</h2><p>å¦‚æœnavigatorsæ²¡æœ‰propsçš„è¯,ä»–å°±ä¼šè¡¨ç°ä¸ºé¡¶å±‚navigators.è¿™ä¸ªæ–¹å¼æä¾›äº†ä¸€ä¸ªé€æ˜çš„navigator container,è¿™æ˜¯é¡¶å±‚å¯¼èˆªpropsçš„æ¥æº.<br>å½“æ¸²æŸ“å…¶ä¸­ä¸€ä¸ªnavigatorsçš„æ—¶å€™,navigation propæ˜¯å¯é€‰çš„.å¦‚æœæ²¡æœ‰navigation prop,containerå°†ä¼šç®¡ç†è‡ªå·±çš„å¯¼èˆªstate.ä»–ä¹Ÿå¯ä»¥ä½¿ç”¨URLs,å¤–éƒ¨é“¾æ¥ä»¥åŠæ•´åˆandroidçš„back button.</p>
<p>ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿,åœ¨å¹•åå†…å»ºçš„navigatorsæœ‰è¿™ä¸ªèƒ½åŠ›,å› ä¸ºåœ¨å¹•åä»–ä»¬ä½¿ç”¨äº†<code>createNavigationContainer</code>.é€šå¸¸,navigatorséœ€è¦ä¸€ä¸ªnavigation propæ¥æ‰§è¡Œä¸€å®šçš„åŠŸèƒ½.<br><code>onNavigationStateChange(prevState, newState)</code></p>
<p>å½“navigation stateç”±é¡¶å±‚navigatorå˜åŒ–ç®¡ç†çš„æ—¶å€™,è¿™ä¸€ç‚¹éå¸¸æœ‰ç”¨.ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„,è¿™ä¸ªå‡½æ•°åœ¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šä½¿ç”¨å¯¼èˆªä¹‹å‰çš„stateå’Œå¯¼èˆªä¹‹åçš„æ–°stateä½œä¸ºå‚æ•°.</p>
<p><code>containerOptions</code><br>å½“ä¸€ä¸ªnavigatoråœ¨é¡¶å±‚è¢«ä½¿ç”¨çš„æ—¶å€™,è¿™äº›é€‰é¡¹å¯ä»¥æ¥é…ç½®è¿™ä¸ªnavigator.<br>å¦‚æœä¸€ä¸ªnavigatoré…ç½®äº†<code>containerOptions</code>,ä½†æ˜¯ä¹Ÿæ¥å—äº†<code>navigation</code>prop,ä¼šæŠ›å‡ºé”™è¯¯.å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹,navigatoræœ‰ä¸¤ç§é€‰æ‹©,å®ƒå°±ä¸çŸ¥é“æ€ä¹ˆåšäº†.</p>
<ul>
<li><code>URIPrefic</code>-appå¯ä»¥å¤„ç†çš„URIå‰ç¼€.åœ¨å¤„ç†<code>deep link</code>çš„æ—¶å€™ï¼Œå¯ä»¥æå–è·¯å¾„,å¹¶ä¸”ä¼ é€’åˆ°router.</li>
</ul>
<h1 id="StackNavigator"><a href="#StackNavigator" class="headerlink" title="StackNavigator"></a>StackNavigator</h1><p>ç»™ä½ çš„appæä¾›screenä¹‹é—´è½¬å˜çš„æ–¹æ³•,æ¯ä¸ªè½¬å˜åˆ°çš„screenä¼šå­˜æ”¾åœ¨å †æ ˆçš„æ ˆé¡¶.<br>é»˜è®¤æƒ…å†µä¸‹,StackNavigatoré…ç½®æœ‰iOSå’Œandroidçš„å¤–è§‚å’Œæ„Ÿè§‰:åœ¨iOSä¸‹,æ–°çš„screenä»å±å¹•çš„å³ä¾§æ»‘å…¥,åœ¨androidä¸‹,æ–°çš„screenä»åº•éƒ¨æ·¡å…¥.iOSä¸‹ä¹Ÿå¯ä»¥é…ç½®ä¸ºä»å±å¹•åº•éƒ¨æ»‘å…¥.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">MyHomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    title: <span class="symbol">'Hom</span>e',</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Button</span></div><div class="line">        onPress=&#123;() =&gt; <span class="keyword">this</span>.props.navigation.navigate(<span class="symbol">'Profil</span>e', &#123;name: <span class="symbol">'Luc</span>y'&#125;)&#125;</div><div class="line">        title=<span class="string">"Go to Lucy's profile"</span></div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const <span class="type">ModalStack</span> = <span class="type">StackNavigator</span>(&#123;</div><div class="line">  <span class="type">Home</span>: &#123;</div><div class="line">    screen: <span class="type">MyHomeScreen</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="type">Profile</span>: &#123;</div><div class="line">    path: <span class="symbol">'people</span>/:name',</div><div class="line">    screen: <span class="type">MyProfileScreen</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="å®šä¹‰API"><a href="#å®šä¹‰API" class="headerlink" title="å®šä¹‰API"></a>å®šä¹‰API</h2><p><code>StackNavigator(Routeconfigs,StackNavigatorConfig)</code></p>
<h2 id="RouteConfigs"><a href="#RouteConfigs" class="headerlink" title="RouteConfigs"></a>RouteConfigs</h2><p>routeçš„é…ç½®å¯¹è±¡æ˜¯route nameåˆ°route configçš„æ˜ å°„(è¯‘è€…:è¿™æ‰æ˜¯é‡ç‚¹),é…ç½®å¯¹è±¡å‘Šè¯‰navigatorä»€ä¹ˆæ¥ä»£è¡¨route.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">StackNavigator(&#123;</div><div class="line"></div><div class="line">  <span class="comment">// For each screen that you can navigate to, create a new entry like this:</span></div><div class="line">  Profile: &#123;</div><div class="line"></div><div class="line">    <span class="comment">// `ProfileScreen` is a React component that will be the main content of the screen.</span></div><div class="line">    screen: ProfileScreen,</div><div class="line">    <span class="comment">// When `ProfileScreen` is loaded by the StackNavigator, it will be given a `navigation` prop.</span></div><div class="line"></div><div class="line">    <span class="comment">// Optional: When deep linking or using react-navigation in a web app, this path is used:</span></div><div class="line">    path: <span class="string">'people/:username'</span>,</div><div class="line">    <span class="comment">// The action and route params are extracted from the path.</span></div><div class="line"></div><div class="line">    <span class="comment">// Optional: Override the `navigationOptions` for the screen</span></div><div class="line">    navigationOptions: &#123;</div><div class="line">      <span class="attr">title</span>: <span class="function">(<span class="params">&#123;state&#125;</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;state.params.username&#125;</span>'s Profile'`</span>,</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  ...MyOtherRoutes,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="StackNavigatorConfi"><a href="#StackNavigatorConfi" class="headerlink" title="StackNavigatorConfi"></a>StackNavigatorConfi</h2><p>Routerçš„Options:</p>
<ul>
<li><code>initialRouteName</code>-è®¾å®šé»˜è®¤çš„å †æ ˆçš„screen.éœ€è¦å’Œroute configçš„é”®ä¹‹ä¸€ç›¸åŒ.</li>
<li><code>initalRouteParams</code>-åˆå§‹åŒ–routeçš„å‚æ•°</li>
<li><code>navigationOptions</code>-é»˜è®¤éœ€è¦ä½¿ç”¨çš„å¯é€‰å‚æ•°</li>
<li><code>path</code>-è¦†ç›–route configsçš„è·¯å¾„è®¾ç½®</li>
</ul>
<p>å¯è§†åŒ–é€‰é¡¹:</p>
<ul>
<li><code>mode</code>-å®šä¹‰æ¸²æŸ“å’Œåˆ‡æ¢ä¹‹é—´çš„æ ·å¼:<ul>
<li><code>card</code>-ä½¿ç”¨iOSå’Œandroidæ ‡å‡†çš„åˆ‡æ¢æ–¹æ³•.é»˜è®¤å€¼</li>
<li><code>modal</code>-ä½¿screenä»åº•éƒ¨æ»‘åŠ¨æ˜¾ç¤º.ä»…ä»…åœ¨iOSä¸‹ä½¿ç”¨,Andoridä¸‹æ²¡æœ‰æ•ˆæœ</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>headerMode</code>-å®šåˆ¶headeræ¸²æŸ“çš„æ–¹æ³•</p>
<ul>
<li><code>float</code>-åˆ‡æ¢ç•Œé¢çš„æ—¶å€™,ç”¨åŠ¨ç”»æ•ˆæœåœ¨screençš„é¡¶éƒ¨æ¸²æŸ“header</li>
<li><code>screen</code>-æ¯ä¸€ä¸ªscreenéƒ½æœ‰ä¸€ä¸ªheaderé™„ç€åˆ°å¤´éƒ¨,åˆ‡æ¢çš„æ—¶å€™æœ‰æ·¡å…¥å’Œæ·¡å‡ºçš„æ•ˆæœ.andoridçš„åŸºæœ¬æ¨¡å¼</li>
<li><code>none</code>-æ²¡æœ‰headerçš„æ¸²æŸ“.</li>
</ul>
</li>
<li><p><code>cardStyle</code>-ä½¿ç”¨è¿™ä¸ªpropæ¥é‡å†™æˆ–è€…æ‰©å±•å•ä¸ªcardçš„é»˜è®¤style</p>
</li>
<li><code>onTransitionStart</code>-å½“cardå¼€å§‹åˆ‡æ¢åŠ¨ç”»çš„æ—¶å€™,è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨</li>
<li><code>onTransitionEnd</code>-å½“åˆ‡æ¢åŠ¨ç”»å®Œæˆçš„æ—¶å€™,è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨</li>
</ul>
<h2 id="Screen-Navigation-Options"><a href="#Screen-Navigation-Options" class="headerlink" title="Screen Navigation Options"></a>Screen Navigation Options</h2><p>é€šå¸¸åœ¨screenç»„ä»¶ä¸­å®šä¹‰é™æ€çš„<code>navigationOptions</code>.ä¾‹å¦‚:<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">class ProfileScreen extends React.Component &#123;</div><div class="line"></div><div class="line">  static navigationOptions = &#123;</div><div class="line"></div><div class="line">    title: (&#123; <span class="keyword">state</span> &#125;) =&gt; `$&#123;<span class="keyword">state</span>.params.name&#125;'s Profile!`,</div><div class="line"></div><div class="line">    header: (&#123; <span class="keyword">state</span>, <span class="built_in">set</span>Params &#125;) =&gt; (&#123;</div><div class="line">      // Render a button <span class="keyword">on</span> the right side of the header</div><div class="line">      // When pressed switches the screen <span class="keyword">to</span> edit mode.</div><div class="line">      right: (</div><div class="line">        <span class="variable">&lt;Button</span></div><div class="line">          title=&#123;state.params.editing ? 'Done' : 'Edit'&#125;</div><div class="line">          onPress=&#123;() =&gt; <span class="built_in">set</span>Params(&#123;editing: <span class="keyword">state</span>.params.editing ? false : true&#125;)&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">    &#125;),</div><div class="line">  &#125;;</div><div class="line">  ...</div></pre></td></tr></table></figure></p>
<p>æ‰€æœ‰çš„<code>stackNavigator</code>çš„<code>navigationOptions</code>:</p>
<ul>
<li><code>title</code>-sceneçš„æ ‡é¢˜(å­—ç¬¦ä¸²)</li>
<li><code>header</code>-header barçš„é…ç½®å¯¹è±¡<ul>
<li><code>visible</code>-headerå¯è§†æ€§çš„åˆ‡æ¢.åªæœ‰å½“<code>headerMode</code>æ˜¯<code>screen</code>çš„æ—¶å€™æ‰å¯ä»¥å·¥ä½œ</li>
<li><code>title</code>-headerå¯ä»¥ä½¿ç”¨çš„å­—ç¬¦ä¸²æˆ–è€…Reactç»„ä»¶,é»˜è®¤æ˜¯sceneçš„<code>title</code></li>
<li><code>backTitle</code>-iOS backæŒ‰é’®çš„titleå­—ç¬¦ä¸²æˆ–è€…<code>null</code>åˆ°disableæ ‡ç­¾,é»˜è®¤è®¾å®šåˆ°sceneçš„<code>title</code>.</li>
<li><code>right</code>-æ˜¾ç¤ºåœ¨headerå³ä¾§çš„Reactç»„ä»¶</li>
<li><code>left</code>-åŒä¸Š,å·¦ä¾§</li>
<li><code>style</code>-headerçš„Styleå¯¹è±¡</li>
<li><code>titleStyle</code>-titleç»„å»ºçš„Styleå¯¹è±¡</li>
<li><code>tintColor</code>-headerçš„ç€è‰²</li>
</ul>
</li>
<li><code>cardStack</code>-card stackçš„é…ç½®å¯¹è±¡<ul>
<li><code>gesturesEnabled</code>-ä¸ç®¡ä½ æ˜¯ä¸æ˜¯ç”¨æ‰‹åŠ¿,åœ¨iOSä¸Šæ˜¯true,åœ¨androidé‡Œæ˜¯false.<h2 id="Navigator-Props"><a href="#Navigator-Props" class="headerlink" title="Navigator Props"></a>Navigator Props</h2>ç”±<code>StackNavigator(...)</code>åˆ›å»ºçš„navigatorç»„ä»¶æ¥æ”¶ä¸¤ä¸ªprops:<br><code>screenProps</code>-å‘ä¸‹ä¼ é€’åˆ°å­screen,ä¾‹å¦‚:</li>
</ul>
</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> SomeStack = StackNavigator(&#123;</div><div class="line">  <span class="comment">// config</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">&lt;SomeStack</div><div class="line">  screenProps=&#123;<span class="comment">/* this prop will get passed to the screen components as this.props.screenProps */</span>&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>çœ‹çœ‹å®ä¾‹<a href="https://github.com/react-community/react-navigation/tree/master/examples/NavigationPlayground/js/SimpleStack.js" target="_blank" rel="external">SimpleStack.js</a>å’Œ<a href="https://github.com/react-community/react-navigation/tree/master/examples/NavigationPlayground/js/ModalStack.js" target="_blank" rel="external">ModalStack.js</a>,å¯ä»¥åœ¨æœ¬åœ°çš„<a href="https://github.com/react-community/react-navigation/tree/master/examples/NavigationPlayground" target="_blank" rel="external">NavigationPlayground</a>appä¸­è¿è¡Œ.</p>
<h1 id="TabNavigator"><a href="#TabNavigator" class="headerlink" title="TabNavigator"></a>TabNavigator</h1><p>é€šå¸¸å¾ˆå®¹æ˜“ä½¿ç”¨TabRouteræ¥åˆ›å»ºæœ‰å‡ ä¸ªtabsçš„screen.<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    tabBar: &#123;</div><div class="line">      label: <span class="symbol">'Hom</span>e',</div><div class="line">      <span class="comment">// Note: By default the icon is only shown on iOS. Search the showIcon option below.</span></div><div class="line">      icon: (&#123; tintColor &#125;) =&gt; (</div><div class="line">        &lt;<span class="type">Image</span></div><div class="line">          source=&#123;require('./chats-icon.png')&#125;</div><div class="line">          style=&#123;[styles.icon, &#123;tintColor: tintColor&#125;]&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">    &#125;,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Button</span></div><div class="line">        onPress=&#123;() =&gt; <span class="keyword">this</span>.props.navigation.navigate(<span class="symbol">'Notification</span>s')&#125;</div><div class="line">        title=<span class="string">"Go to notifications"</span></div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNotificationsScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    tabBar: &#123;</div><div class="line">      label: <span class="symbol">'Notification</span>s',</div><div class="line">      icon: (&#123; tintColor &#125;) =&gt; (</div><div class="line">        &lt;<span class="type">Image</span></div><div class="line">          source=&#123;require('./notif-icon.png')&#125;</div><div class="line">          style=&#123;[styles.icon, &#123;tintColor: tintColor&#125;]&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">    &#125;,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Button</span></div><div class="line">        onPress=&#123;() =&gt; <span class="keyword">this</span>.props.navigation.goBack()&#125;</div><div class="line">        title=<span class="string">"Go back home"</span></div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const styles = <span class="type">StyleSheet</span>.create(&#123;</div><div class="line">  icon: &#123;</div><div class="line">    width: <span class="number">26</span>,</div><div class="line">    height: <span class="number">26</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">const <span class="type">MyApp</span> = <span class="type">TabNavigator</span>(&#123;</div><div class="line">  <span class="type">Home</span>: &#123;</div><div class="line">    screen: <span class="type">MyHomeScreen</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="type">Notifications</span>: &#123;</div><div class="line">    screen: <span class="type">MyNotificationsScreen</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;, &#123;</div><div class="line">  tabBarOptions: &#123;</div><div class="line">    activeTintColor: '#e91e63',</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="å®šä¹‰API-1"><a href="#å®šä¹‰API-1" class="headerlink" title="å®šä¹‰API"></a>å®šä¹‰API</h2><p><code>TabNavigator(RouteConfigs,TabNavigator)</code></p>
<h2 id="RouteConfigs-1"><a href="#RouteConfigs-1" class="headerlink" title="RouteConfigs"></a>RouteConfigs</h2><p>routeçš„é…ç½®å¯¹è±¡æ˜¯route nameåˆ°route configçš„æ˜ å°„(è¯‘è€…:è¿™æ‰æ˜¯é‡ç‚¹),é…ç½®å¯¹è±¡å‘Šè¯‰navigatorä»€ä¹ˆæ¥ä»£è¡¨route.</p>
<h2 id="TabNavigatorConfig"><a href="#TabNavigatorConfig" class="headerlink" title="TabNavigatorConfig"></a>TabNavigatorConfig</h2><ul>
<li><code>tabBarComponent</code>-ä½œä¸ºtab barçš„ç»„ä»¶.ä¾‹å¦‚,<code>TabView.TabBarBottom</code>(iosçš„é»˜è®¤é…ç½®),<code>TabView.TabBarTop</code>(androidçš„é»˜è®¤é…ç½®)</li>
<li><code>tabBarPosition</code>-tab barçš„ä½ç½®,å¯ä»¥æ˜¯<code>top</code>å’Œ<code>bottom</code></li>
<li><code>swipeEnabled</code>-æ˜¯å¦åœ¨tabä¹‹é—´æ»‘åŠ¨</li>
<li><code>animationEnabled</code>-å˜æ¢tabsçš„æ—¶å€™æ˜¯å¦å¼€å¯åŠ¨ç”»æ•ˆæœ</li>
<li><code>lazyLoad</code>-æ˜¯å¦åœ¨éœ€è¦çš„æ—¶å€™æ‰æƒ°æ€§åŠ è½½tabs,ä»£æ›¿é¢„æ¸²æŸ“</li>
<li><code>tabBarOption</code>-é…ç½®tab bar,çœ‹ä¸‹é¢<br>å‡ ä¸ªOptionså¯ä»¥ä¼ é€’åˆ°æ½œåœ¨çš„çš„router,ä¿®æ”¹å¯¼èˆªçš„é€»è¾‘</li>
<li><code>initialRouteName</code>-åˆå§‹åŒ–æ—¶åŠ è½½çš„tab route</li>
<li><code>order</code>-å®šä¹‰tabsé¡ºåºçš„routeNameçš„æ•°ç»„</li>
<li><code>paths</code>-æä¾›routeNameåˆ°pathé…ç½®çš„æ˜ å°„,é‡å†™routeConfigsé‡Œçš„pathsè®¾ç½®</li>
<li><code>backBehavior</code>-back buttonæ˜¯ä¸æ˜¯åº”è¯¥å¯¼è‡´tabåˆ‡æ¢åˆ°åˆå§‹çš„tabï¼Ÿå…¥å¦‚æœæ˜¯çš„è¯,è®¾å®š<code>initialRoute</code>,å¦åˆ™å°±æ˜¯<code>none</code>.é»˜è®¤åˆ°<code>initialRoute</code>çš„è¡Œä¸º.</li>
</ul>
<p><code>TabBarTop</code>çš„<code>tabBarOptions</code>è®¾ç½®(androidé»˜è®¤çš„tab bar)</p>
<ul>
<li><code>activeTintColor</code>-æ¿€æ´»tabçš„æ ‡ç­¾å’Œiconçš„é¢œè‰²</li>
<li><code>inactiveTintColor</code>-æœªæ¿€æ´»tabçš„æ ‡ç­¾å’Œiconçš„é¢œè‰²</li>
<li><code>showIcon</code>-æ˜¯å¦åœ¨tabä¸­æ˜¾ç¤ºicon,é»˜è®¤æ˜¯false</li>
<li><code>showLabel</code>-æ˜¯å¦åœ¨tabæ˜¾ç¤ºlabel,é»˜è®¤æ˜¯true</li>
<li><code>upperCaseLabel</code>-tabçš„labelæ˜¯å¦æ˜¯å¤§å†™,é»˜è®¤æ˜¯true</li>
<li><code>pressColor</code>-materialæ¶Ÿæ¼ªæ•ˆæœçš„é¢œè‰²(Android&gt;=5.0)</li>
<li><code>pressOpacity</code>-æŒ‰ä¸‹tabçš„é€æ˜åº¦å˜åŒ–(iOSå’ŒAndroid&lt;5.0)</li>
<li><code>scrollEnabled</code>-æ˜¯å¦æ˜¯æ»‘åŠ¨å¼tabs.</li>
<li><code>tabStyle</code>-tabçš„æ ·å¼é…ç½®å¯¹è±¡</li>
<li><code>indicatorStyle</code>-tabæŒ‡ç¤ºå™¨çš„æ ·å¼å¯¹è±¡(tabåº•éƒ¨çš„åˆ’çº¿)</li>
<li><code>labelStyle</code>-tab labelçš„æ ·å¼å¯¹è±¡</li>
<li><code>style</code>-tab barçš„æ ·å¼å¯¹è±¡</li>
</ul>
<p>å®ä¾‹:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">tabBarOptions</span>: &#123;</div><div class="line">  <span class="attribute">labelStyle</span>: &#123;</div><div class="line">    fontSize: <span class="number">12</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="selector-tag">style</span>: &#123;</div><div class="line">    <span class="attribute">backgroundColor</span>: <span class="string">'blue'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Screenå¯¼èˆªçš„é€‰é¡¹"><a href="#Screenå¯¼èˆªçš„é€‰é¡¹" class="headerlink" title="Screenå¯¼èˆªçš„é€‰é¡¹"></a>Screenå¯¼èˆªçš„é€‰é¡¹</h2><p>é€šå¸¸åœ¨screenç»„ä»¶ä¸­å®šä¹‰é™æ€çš„<code>navigationOptions</code>.ä¾‹å¦‚:<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class ProfileScreen extends React.Component &#123;</div><div class="line"></div><div class="line"> static navigationOptions = &#123;</div><div class="line"></div><div class="line">   title: (&#123; <span class="keyword">state</span> &#125;) =&gt; `$&#123;<span class="keyword">state</span>.params.name&#125;'s Profile!`,</div><div class="line"></div><div class="line">   tabBar: (&#123; <span class="keyword">state</span>, <span class="built_in">set</span>Params &#125;) =&gt; (&#123;</div><div class="line">     icon: (</div><div class="line">       <span class="variable">&lt;Image src=&#123;require('./my-icon.png')&#125; /&gt;</span></div><div class="line">     ),</div><div class="line">   &#125;),</div><div class="line"> &#125;;</div><div class="line"> ...</div></pre></td></tr></table></figure></p>
<p>æ‰€æœ‰<code>TabNavigator</code>çš„<code>navigationOption</code>:</p>
<ul>
<li><code>title</code>-sceneçš„title(å­—ç¬¦ä¸²)</li>
<li><code>tabBar</code>-tab barçš„configå¯¹è±¡:<ul>
<li><code>visible</code>-tab barçš„å¯è§æ€§çš„åˆ‡æ¢</li>
<li><code>icon</code>-Reactç»„ä»¶æˆ–è€…å‡½æ•°ç»™å‡º<code>{focused:boolean,tintColor:string}</code>,è¿”å›ä¸€ä¸ªReactç»„ä»¶,æ˜¾ç¤ºåœ¨tab bar</li>
<li><code>label</code>-æ˜¾ç¤ºåœ¨tab barä¸­çš„tabçš„åå­—.å¦‚æœå®šä¹‰ä¸ºundefined,sceneçš„<code>title</code>ä¼šè¢«ä½¿ç”¨.å¦‚æœè¦éšè—,çœ‹å‰é¢éƒ¨åˆ†çš„<code>tabBarOption.showLabel</code>.<h2 id="Navigator-Props-1"><a href="#Navigator-Props-1" class="headerlink" title="Navigator Props"></a>Navigator Props</h2>ç”±<code>TabNavigator(...)</code>åˆ›å»ºçš„navigatorç»„ä»¶æ¥æ”¶ä¸‹é¢çš„props:</li>
</ul>
</li>
<li><code>screenProps</code>-å‘ä¸‹ä¼ é€’é¢å¤–çš„optionsç»™å­screen,ä¾‹å¦‚:</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> TabNav = TabNavigator(&#123;</div><div class="line">  <span class="comment">// config</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">&lt;TabNav</div><div class="line">  screenProps=&#123;<span class="comment">/* this prop will get passed to the screen components as this.props.screenProps */</span>&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<h1 id="æŠ½å±‰å¼å¯¼èˆª"><a href="#æŠ½å±‰å¼å¯¼èˆª" class="headerlink" title="æŠ½å±‰å¼å¯¼èˆª"></a>æŠ½å±‰å¼å¯¼èˆª</h1><p>ç”¨æ¥æ„å»ºæŠ½å±‰å¼å¯¼èˆª<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    drawer: () =&gt; (&#123;</div><div class="line">      label: <span class="symbol">'Hom</span>e',</div><div class="line">      icon: (&#123; tintColor &#125;) =&gt; (</div><div class="line">        &lt;<span class="type">Image</span></div><div class="line">          source=&#123;require('./chats-icon.png')&#125;</div><div class="line">          style=&#123;[styles.icon, &#123;tintColor: tintColor&#125;]&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">    &#125;),</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Button</span></div><div class="line">        onPress=&#123;() =&gt; <span class="keyword">this</span>.props.navigation.navigate(<span class="symbol">'Notification</span>s')&#125;</div><div class="line">        title=<span class="string">"Go to notifications"</span></div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNotificationsScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    drawer: () =&gt; (&#123;</div><div class="line">      label: <span class="symbol">'Notification</span>s',</div><div class="line">      icon: (&#123; tintColor &#125;) =&gt; (</div><div class="line">        &lt;<span class="type">Image</span></div><div class="line">          source=&#123;require('./notif-icon.png')&#125;</div><div class="line">          style=&#123;[styles.tabIcon, &#123;tintColor: tintColor&#125;]&#125;</div><div class="line">        /&gt;</div><div class="line">      ),</div><div class="line">    &#125;),</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">Button</span></div><div class="line">        onPress=&#123;() =&gt; <span class="keyword">this</span>.props.navigation.goBack()&#125;</div><div class="line">        title=<span class="string">"Go back home"</span></div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const styles = <span class="type">StyleSheet</span>.create(&#123;</div><div class="line">  icon: &#123;</div><div class="line">    width: <span class="number">24</span>,</div><div class="line">    height: <span class="number">24</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">const <span class="type">MyApp</span> = <span class="type">DrawerNavigator</span>(&#123;</div><div class="line">  <span class="type">Home</span>: &#123;</div><div class="line">    screen: <span class="type">MyHomeScreen</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="type">Notifications</span>: &#123;</div><div class="line">    screen: <span class="type">MyNotificationsScreen</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æ‰“å¼€æŠ½å±‰æˆ–è€…å…³é—­æŠ½å±‰,åˆ†åˆ«å¯¼èˆªåˆ°<code>DrawerOpen</code>å’Œ<code>Drawerclose</code>.<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.props.navigation.navigate(<span class="string">'DrawerOpen'</span>); <span class="comment">// open drawer</span></div><div class="line"><span class="keyword">this</span>.props.navigation.navigate(<span class="string">'DrawerClose'</span>); <span class="comment">// close drawer</span></div></pre></td></tr></table></figure></p>
<h2 id="å®šä¹‰API-2"><a href="#å®šä¹‰API-2" class="headerlink" title="å®šä¹‰API"></a>å®šä¹‰API</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">DrawerNavigator</span><span class="params">(RouteConfigs, DrawerNavigatorConfig)</span></span></div></pre></td></tr></table></figure>
<h2 id="RouteConfigs-2"><a href="#RouteConfigs-2" class="headerlink" title="RouteConfigs"></a>RouteConfigs</h2><p>å‚çœ‹å‰é¢çš„å†…å®¹</p>
<h2 id="DrawerNavigatonConfig"><a href="#DrawerNavigatonConfig" class="headerlink" title="DrawerNavigatonConfig"></a>DrawerNavigatonConfig</h2><ul>
<li><code>drawerWidth</code>-æŠ½å±‰çš„å®½åº¦</li>
<li><code>drawerPosition</code>-é€‰é¡¹æ˜¯<code>left</code>å’Œ<code>right</code>.é»˜è®¤æ˜¯<code>left</code>.</li>
<li><code>contentComponent</code>-ç”¨æ¥æ¸²æŸ“æŠ½å±‰å†…å®¹çš„ç»„ä»¶,ä¾‹å¦‚,navigation item.æ¥æ”¶<code>navigation</code>prop.é»˜è®¤æ˜¯<code>DrawerView.Items</code>.äº†è§£æ›´å¤šå†…å®¹çœ‹ä¸‹é¢å†…å®¹.</li>
<li><code>contentOptions</code>-é…ç½®drawerçš„å†…å®¹,çœ‹ä¸‹é¢å†…å®¹<br>å‡ ä¸ªé€‰é¡¹ä¼ é€’ç»™æ½œåœ¨çš„router,ç”¨æ¥ä¿®æ”¹navigationçš„é€»è¾‘:</li>
<li><code>initialRouteName</code>-åˆå§‹åŒ–routeçš„routeName</li>
<li><code>order</code>-å®šä¹‰drawer itemé¡ºåºçš„routeNameæ•°ç»„</li>
<li><code>path</code>-æä¾›ä¸€ä¸ªrouteNameåˆ°path configçš„æ˜ å°„,é‡å†™æ‰routeConfigsä¸­çš„pathé…ç½®</li>
<li><code>backBehavior</code>-backæŒ‰é’®ä¸€å®šè¦è¿”å›åˆ°åˆå§‹åŒ–çš„routeå—ï¼Ÿå¦‚æœæ˜¯çš„è¯,è®¾ç½®åˆ°<code>initialRoute</code>,å¦åˆ™å°±ç”¨<code>none</code>.é»˜è®¤åˆ°<code>initialRoute</code>çš„è¡Œä¸º.<h2 id="æä¾›å®šåˆ¶åŒ–çš„contentComponent"><a href="#æä¾›å®šåˆ¶åŒ–çš„contentComponent" class="headerlink" title="æä¾›å®šåˆ¶åŒ–çš„contentComponent"></a>æä¾›å®šåˆ¶åŒ–çš„<em>contentComponent</em></h2>å¯ä»¥ä½¿ç”¨<code>react-navigation</code>é‡å†™é»˜è®¤çš„ç»„ä»¶.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> CustomDrawerContentComponent = <span class="function">(<span class="params">props</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;style.container&#125;</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">DrawerView.Items</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">);</div><div class="line"></div><div class="line">const styles = StyleSheet.create(&#123;</div><div class="line">  container : &#123;</div><div class="line">    flex : 1,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>DrawerView.Item</code>çš„<code>contentOptions</code>é…ç½®</p>
<ul>
<li><code>activeTintColor</code>-æ¿€æ´»çš„æ ‡ç­¾çš„labelå’Œiconçš„é¢œè‰²</li>
<li><code>activeBackgroundColor</code>-æ¿€æ´»çš„æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²</li>
<li><code>inactiveTintColor</code>-æœªæ¿€æ´»çš„æ ‡ç­¾çš„labelå’Œiconçš„é¢œè‰²</li>
<li><code>inactiveBackgroundColor</code>-æœªæ¿€æ´»çš„æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²</li>
<li><code>style</code>-å†…å®¹éƒ¨åˆ†çš„æ ·å¼å¯¹è±¡</li>
</ul>
<p>ç¤ºä¾‹:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="selector-tag">contentOptions</span>: &#123;</div><div class="line">  <span class="attribute">activeTintColor</span>: <span class="string">'#e91e63'</span>,</div><div class="line">  style: &#123;</div><div class="line">    marginVertical: <span class="number">0</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Screenå¯¼èˆªçš„é€‰é¡¹-1"><a href="#Screenå¯¼èˆªçš„é€‰é¡¹-1" class="headerlink" title="Screenå¯¼èˆªçš„é€‰é¡¹"></a>Screenå¯¼èˆªçš„é€‰é¡¹</h2><p>é€šå¸¸åœ¨ç»„ä»¶ä¸­å®šä¹‰é™æ€çš„<code>navigationOptions</code>.<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProfileScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line"> static navigationOptions = &#123;</div><div class="line"></div><div class="line">   title: (&#123; state &#125;) =&gt; `$&#123;state.params.name&#125;<span class="symbol">'s</span> <span class="type">Profile</span>!`,</div><div class="line"></div><div class="line">   drawer: &#123;</div><div class="line">     icon: (</div><div class="line">       &lt;<span class="type">Image</span> src=&#123;require('./my-icon.png')&#125; /&gt;</div><div class="line">     ),</div><div class="line">   &#125;,</div><div class="line"> &#125;;</div><div class="line"> ...</div></pre></td></tr></table></figure></p>
<p>æ‰€æœ‰çš„<code>DrawerNavigation</code> <code>navigationOption</code>é…ç½®é¡¹</p>
<ul>
<li><code>title</code>-sceneçš„æ ‡é¢˜</li>
<li><code>drawer</code>-drawerçš„é…ç½®å¯¹è±¡<ul>
<li><code>label</code>-å­—ç¬¦ä¸²,Reactç»„ä»¶æˆ–è€…å‡½æ•°è¢«è®¾å®š<code>{fcoused:boolean,tinColor:string}</code>è¿”å›ä¸€ä¸ªReactç»„ä»¶,æ˜¾ç¤ºåœ¨drawerçš„è¾¹æ ä¸Š.å½“labelå®šä¹‰ä¸ºundefinedæ—¶,sceneçš„``titleè¢«ä½¿ç”¨.</li>
<li><code>icon</code>-Reactç»„ä»¶æˆ–è€…å‡½æ•°è¢«è®¾å®šä¸º<code>{fcoused:boolean,tintColor:string}</code>è¿”å›ä¸€ä¸ªReactå…ƒç´ ,æ˜¾ç¤ºåœ¨drawerçš„è¾¹æ ä¸Š.</li>
</ul>
</li>
</ul>
<h2 id="Navigator-çš„Props"><a href="#Navigator-çš„Props" class="headerlink" title="Navigator çš„Props"></a>Navigator çš„Props</h2><p>ç”±<code>DrawerNavigator(...)</code>åˆ›å»ºçš„navigatorç»„ä»¶æ¥å—ä¸‹é¢çš„props:</p>
<ul>
<li><code>screenProps</code>-å‘ä¸‹ä¼ é€’é¢å¤–çš„optionsåˆ°å­screen,ä¾‹å¦‚:</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> DrawerNav = DrawerNavigator(&#123;</div><div class="line">  <span class="comment">// config</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">&lt;DrawerNav</div><div class="line">  screenProps=&#123;<span class="comment">/* this prop will get passed to the screen components as this.props.screenProps */</span>&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<h1 id="Screen-Navigation-Prop"><a href="#Screen-Navigation-Prop" class="headerlink" title="Screen Navigation Prop"></a>Screen Navigation Prop</h1><p>appä¸­çš„æ¯ä¸ªscreenéƒ½æ¥æ”¶navigation prop åŒ…å«ä¸‹é¢çš„å†…å®¹:</p>
<ul>
<li><code>navigate</code>-(helper)é“¾æ¥çš„å…¶ä»–çš„screens</li>
<li><code>state</code>-screençš„å½“å‰stateå’Œroutes</li>
<li><code>setParam</code>-(helper)æ”¹å˜routeçš„å‚æ•°</li>
<li><code>goBack</code>-(helper)å…³é—­æ¿€æ´»çš„screenå¹¶ä¸”è¿”å›</li>
<li><code>dispatch</code>-å‘é€ä¸€ä¸ªactionåˆ°router</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigationå¯¼èˆªç³»ç»Ÿ(2)]]></title>
      <url>http://yoursite.com/2017/03/28/%E7%BF%BB%E8%AF%91-React-navigation%E5%AF%BC%E8%88%AA%E7%B3%BB%E7%BB%9F-2/</url>
      <content type="html"><![CDATA[<p>ç¬¬äºŒéƒ¨åˆ†</p>
<h1 id="å·¢å¼å¯¼èˆª"><a href="#å·¢å¼å¯¼èˆª" class="headerlink" title="å·¢å¼å¯¼èˆª"></a>å·¢å¼å¯¼èˆª</h1><p>åœ¨ç§»åŠ¨åº”ç”¨ä¸­ç»„åˆå„ç§å½¢å¼çš„å¯¼èˆªæ˜¯éå¸¸æ™®éçš„.React Navigationä¸­çš„routerå’Œnavigatorsæ˜¯ç»„åˆå¼çš„,å¦‚æ­¤ä»¥æ¥å¯ä»¥å…è®¸æˆ‘ä»¬å®šä¹‰éå¸¸å¤æ‚çš„å¯¼èˆªç³»ç»Ÿ.</p>
<h2 id="Tab-Navigatorçš„ä»‹ç»"><a href="#Tab-Navigatorçš„ä»‹ç»" class="headerlink" title="Tab Navigatorçš„ä»‹ç»"></a>Tab Navigatorçš„ä»‹ç»</h2><p> æˆ‘ä»¬åœ¨<code>App.js</code>ä¸­åˆ›å»º<code>TabNavigator</code>ï¼š<br>  <figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">RecentChatsScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;<span class="type">Text</span>&gt;<span class="type">List</span> of recent chats&lt;/<span class="type">Text</span>&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllContactsScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;<span class="type">Text</span>&gt;<span class="type">List</span> of all contacts&lt;/<span class="type">Text</span>&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const <span class="type">MainScreenNavigator</span> = <span class="type">TabNavigator</span>(&#123;</div><div class="line">  <span class="type">Recent</span>: &#123; screen: <span class="type">RecentChatsScreen</span> &#125;,</div><div class="line">  <span class="type">All</span>: &#123; screen: <span class="type">AllContactsScreen</span> &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p> å¦‚æœ<code>MainScreenNavigation</code>ä½œä¸ºé¡¶å±‚çš„å¯¼èˆªç»„ä»¶æ¥æ¸²æŸ“,çœ‹èµ·æ¥æ˜¯è¿™ä¸ªæ ·å­çš„:<br> <img src="https://ww1.sinaimg.cn/large/006tNbRwly1fe26v8brpug307i0dcjrv.gif" alt=""> </p>
<h2 id="åœ¨å±å¹•ä¸­æ„é€ ä¸€ä¸ªå·¢å¼å¯¼èˆªå™¨"><a href="#åœ¨å±å¹•ä¸­æ„é€ ä¸€ä¸ªå·¢å¼å¯¼èˆªå™¨" class="headerlink" title="åœ¨å±å¹•ä¸­æ„é€ ä¸€ä¸ªå·¢å¼å¯¼èˆªå™¨"></a>åœ¨å±å¹•ä¸­æ„é€ ä¸€ä¸ªå·¢å¼å¯¼èˆªå™¨</h2><p>æˆ‘ä»¬æƒ³è®©è¿™äº›tabsåœ¨appçš„ç¬¬ä¸€å±æ˜¾ç¤º,ä½†æ˜¯å †æ ˆä¸­çš„æ–°çš„screenä¼šè¦†ç›–tabs.<br>åœ¨å‰ä¸€æ­¥éª¤è®¾ç½®çš„<code>StackNavigator</code>ä¸­æ·»åŠ tabsä½œä¸ºé¡¶çº§å¯¼èˆª<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> const SimpleApp = StackNavigator(&#123;</div><div class="line"><span class="symbol">  Home:</span> &#123; <span class="keyword">screen: </span>MainScreenNavigator &#125;,</div><div class="line"><span class="symbol">  Chat:</span> &#123; <span class="keyword">screen: </span>ChatScreen &#125;,</div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>å› ä¸º<code>MainScreenNavigator</code>ä½œä¸ºscreen,å¯ä»¥ä¼ é€’<code>navigationOtions</code>å‚æ•°:<br><figure class="highlight hsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> MainScreenNavigator.navigationOptions = &#123;</div><div class="line">  <span class="keyword">title</span>: <span class="string">'My Chats'</span>,</div><div class="line">&#125;<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>åœ¨æ¯ä¸€ä¸ªtabsä¸­æ·»åŠ é“¾æ¥åˆ°chatçš„æŒ‰é’®:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> &lt;Button</div><div class="line">  onPress=&#123;() =&gt; this<span class="selector-class">.props</span><span class="selector-class">.navigation</span><span class="selector-class">.navigate</span>(<span class="string">'Chat'</span>, &#123; user: <span class="string">'Lucy'</span> &#125;)&#125;</div><div class="line">  title=<span class="string">"Chat with Lucy"</span></div><div class="line">/&gt;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬åœ¨æ¯ä¸ªå¯¼èˆªå™¨å½¼æ­¤ä¹‹é—´åšäº†é…ç½®,å¯ä»¥åœ¨å¯¼èˆªç•Œé¢ä¹‹é—´åˆ‡æ¢.</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNbRwly1fe2750jl3og307i0dc0x4.gif" alt=""></p>
<h1 id="é…ç½®å¤´éƒ¨"><a href="#é…ç½®å¤´éƒ¨" class="headerlink" title="é…ç½®å¤´éƒ¨"></a>é…ç½®å¤´éƒ¨</h1><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­,æˆ‘ä»¬ç”¨StactNavigatoråˆ›å»ºäº†å‡ ä¸ªscreen.<br>å½“æˆ‘ä»¬å¯¼èˆªåˆ°chat screen,æˆ‘ä»¬é€šè¿‡navigate å‡½æ•°ä¼ é€’ç‰¹å®šçš„å‚æ•°åˆ°æ–°çš„å¯¼èˆªç•Œé¢.ä¾‹å¦‚,æˆ‘ä»¬æƒ³ç»™chat screenæä¾›ä¸€ä¸ªäººå:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.props.navigation.navigate(<span class="string">'Chat'</span>, &#123; <span class="string">user:</span>  <span class="string">'Lucy'</span> &#125;);</div></pre></td></tr></table></figure></p>
<p><code>user</code>å‚æ•°å¯ä»¥åœ¨chat screenä¸­è·å–åˆ°:<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ChatScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    const &#123; params &#125; = <span class="keyword">this</span>.props.navigation.state;</div><div class="line">    <span class="keyword">return</span> &lt;<span class="type">Text</span>&gt;<span class="type">Chat</span> <span class="keyword">with</span> &#123;params.user&#125;&lt;/<span class="type">Text</span>&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="è®¾å®šå¤´éƒ¨æ ‡é¢˜"><a href="#è®¾å®šå¤´éƒ¨æ ‡é¢˜" class="headerlink" title="è®¾å®šå¤´éƒ¨æ ‡é¢˜"></a>è®¾å®šå¤´éƒ¨æ ‡é¢˜</h2><p>æ¥ç€æ¥,å¯ä»¥åœ¨screen å‚æ•°ä¸­é…ç½®å¤´éƒ¨çš„æ ‡é¢˜<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ChatScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    <span class="comment">// // Title may be a simple string:</span></div><div class="line">    <span class="comment">// title: 'Hello',</span></div><div class="line">     </div><div class="line">    <span class="comment">// Or the title string may be a function of the </span></div><div class="line">    navigation prop:å¯ä»¥æ˜¯propçš„å‡½æ•°è§£æ</div><div class="line">    title: (&#123; state &#125;) =&gt; `<span class="type">Chat</span> <span class="keyword">with</span> $&#123;state.params.user&#125;`</div><div class="line">  &#125;;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fe27gzgg40j30h90uojra.jpg" alt=""></p>
<h2 id="æ·»åŠ å³ä¾§çš„æŒ‰é’®"><a href="#æ·»åŠ å³ä¾§çš„æŒ‰é’®" class="headerlink" title="æ·»åŠ å³ä¾§çš„æŒ‰é’®"></a>æ·»åŠ å³ä¾§çš„æŒ‰é’®</h2><p>å¯ä»¥åœ¨optionä¸­æ·»åŠ å®šåˆ¶çš„å³ä¾§æŒ‰é’®<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">static navigationOptions = &#123;</div><div class="line">  <span class="selector-tag">header</span>: &#123;</div><div class="line">    <span class="attribute">right</span>: &lt;Button title=<span class="string">"Info"</span> /&gt;,</div><div class="line">  &#125;,</div><div class="line">  ...</div></pre></td></tr></table></figure></p>
<p><img src="https://ww4.sinaimg.cn/large/006tNbRwly1fe27iwdrcmj30ha0uowee.jpg" alt=""></p>
<p>å’Œ<code>title</code>ä¸€æ ·,<code>header</code>optionå¯ä»¥å®šä¹‰ä¸ºpropçš„ä¸€ä¸ªå‡½æ•°.è®©æˆ‘ä»¬æ¥åŸºäºå¯¼èˆªå‚æ•°æ¸²æŸ“ä¸€ä¸ªä¸åŒçš„æŒ‰é’®,è®¾å®šä¸ºç‚¹å‡»æ—¶è°ƒç”¨<code>navigation.setParams</code>:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">static navigationOptions = &#123;</div><div class="line">  title: (&#123; <span class="keyword">state</span> &#125;) =&gt; &#123;</div><div class="line">    if (<span class="keyword">state</span>.params.mode === 'info') &#123;</div><div class="line">      return `$&#123;<span class="keyword">state</span>.params.<span class="keyword">user</span>&#125;'s Contact Info`;</div><div class="line">    &#125;</div><div class="line">    return `Chat with $&#123;<span class="keyword">state</span>.params.<span class="keyword">user</span>&#125;`;</div><div class="line">  &#125;,</div><div class="line">  header: (&#123; <span class="keyword">state</span>, <span class="built_in">set</span>Params &#125;) =&gt; &#123;</div><div class="line">    // The navigation prop has functions like <span class="built_in">set</span>Params, goBack, and navigate.</div><div class="line">    let right = (</div><div class="line">      <span class="variable">&lt;Button</span></div><div class="line">        title=&#123;`$&#123;state.params.user&#125;'s info`&#125;</div><div class="line">        onPress=&#123;() =&gt; <span class="built_in">set</span>Params(&#123; mode: 'info' &#125;)&#125;</div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">    if (<span class="keyword">state</span>.params.mode === 'info') &#123;</div><div class="line">      right = (</div><div class="line">        <span class="variable">&lt;Button</span></div><div class="line">          title="Done"</div><div class="line">          onPress=&#123;() =&gt; <span class="built_in">set</span>Params(&#123; mode: '<span class="keyword">none</span>' &#125;)&#125;</div><div class="line">        /&gt;        </div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">    return &#123; right &#125;;</div><div class="line">  &#125;,</div><div class="line">  ...</div></pre></td></tr></table></figure>
<p>ç°åœ¨å¤´éƒ¨å¯ä»¥å’Œscreençš„è·¯ç”±stateè¿›è¡Œäº¤äº’äº†.<br><img src="https://ww1.sinaimg.cn/large/006tNbRwly1fe27os9kgrg307g0dc752.gif" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Airbnb React/JSX ç¼–ç è§„èŒƒ]]></title>
      <url>http://yoursite.com/2017/03/28/Airbnb-React-JSX-%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</url>
      <content type="html"><![CDATA[<h1 id="Airbnb-React-JSX-ç¼–ç è§„èŒƒ"><a href="#Airbnb-React-JSX-ç¼–ç è§„èŒƒ" class="headerlink" title="Airbnb React/JSX ç¼–ç è§„èŒƒ"></a>Airbnb React/JSX ç¼–ç è§„èŒƒ</h1><p><em>ç®—æ˜¯æœ€åˆç†çš„React/JSXç¼–ç è§„èŒƒä¹‹ä¸€äº†</em></p>
<h2 id="å†…å®¹ç›®å½•"><a href="#å†…å®¹ç›®å½•" class="headerlink" title="å†…å®¹ç›®å½•"></a>å†…å®¹ç›®å½•</h2><ol>
<li><a href="#basic-rules-åŸºæœ¬è§„èŒƒ">åŸºæœ¬è§„èŒƒ</a></li>
<li><a href="#åˆ›å»ºæ¨¡å—">Class vs React.createClass vs stateless</a></li>
<li><a href="#mixins">Mixins</a></li>
<li><a href="#naming-å‘½å">å‘½å</a></li>
<li><a href="#declaration-å£°æ˜æ¨¡å—">å£°æ˜æ¨¡å—</a></li>
<li><a href="#alignment-ä»£ç å¯¹é½">ä»£ç å¯¹é½</a></li>
<li><a href="#quotes-å•å¼•å·è¿˜æ˜¯åŒå¼•å·">å•å¼•å·è¿˜æ˜¯åŒå¼•å·</a></li>
<li><a href="#spacing-ç©ºæ ¼">ç©ºæ ¼</a></li>
<li><a href="#props-å±æ€§">å±æ€§</a></li>
<li><a href="#refs">Refså¼•ç”¨</a></li>
<li><a href="#parentheses-æ‹¬å·">æ‹¬å·</a></li>
<li><a href="#tags-æ ‡ç­¾">æ ‡ç­¾</a></li>
<li><a href="#methods-å‡½æ•°">å‡½æ•°/æ–¹æ³•</a></li>
<li><a href="#ordering-react-æ¨¡å—ç”Ÿå‘½å‘¨æœŸ">æ¨¡å—ç”Ÿå‘½å‘¨æœŸ</a></li>
<li><a href="#ismounted">isMounted</a></li>
</ol>
<h2 id="Basic-Rules-åŸºæœ¬è§„èŒƒ"><a href="#Basic-Rules-åŸºæœ¬è§„èŒƒ" class="headerlink" title="Basic Rules åŸºæœ¬è§„èŒƒ"></a>Basic Rules åŸºæœ¬è§„èŒƒ</h2><ul>
<li>æ¯ä¸ªæ–‡ä»¶åªå†™ä¸€ä¸ªæ¨¡å—.<ul>
<li>ä½†æ˜¯å¤šä¸ª<a href="https://facebook.github.io/react/docs/reusable-components.html#stateless-functions" target="_blank" rel="external">æ— çŠ¶æ€æ¨¡å—</a>å¯ä»¥æ”¾åœ¨å•ä¸ªæ–‡ä»¶ä¸­. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-multi-comp.md#ignorestateless" target="_blank" rel="external"><code>react/no-multi-comp</code></a>.</li>
</ul>
</li>
<li>æ¨èä½¿ç”¨JSXè¯­æ³•.</li>
<li>ä¸è¦ä½¿ç”¨ <code>React.createElement</code>ï¼Œé™¤éä»ä¸€ä¸ªéJSXçš„æ–‡ä»¶ä¸­åˆå§‹åŒ–ä½ çš„app.</li>
</ul>
<h2 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h2><p>   Class vs React.createClass vs stateless  </p>
<ul>
<li><p>å¦‚æœä½ çš„æ¨¡å—æœ‰å†…éƒ¨çŠ¶æ€æˆ–è€…æ˜¯<code>refs</code>, æ¨èä½¿ç”¨ <code>class extends React.Component</code> è€Œä¸æ˜¯ <code>React.createClass</code>.<br>eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/prefer-es6-class.md" target="_blank" rel="external"><code>react/prefer-es6-class</code></a> <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/prefer-stateless-function.md" target="_blank" rel="external"><code>react/prefer-stateless-function</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> Listing = React.createClass(&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div&gt;&#123;this.state.hello&#125;&lt;/div&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Listing</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div&gt;&#123;this.state.hello&#125;&lt;/div&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çš„æ¨¡å—æ²¡æœ‰çŠ¶æ€æˆ–æ˜¯æ²¡æœ‰å¼•ç”¨<code>refs</code>ï¼Œ æ¨èä½¿ç”¨æ™®é€šå‡½æ•°ï¼ˆéç®­å¤´å‡½æ•°ï¼‰è€Œä¸æ˜¯ç±»:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Listing</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div&gt;&#123;this.props.hello&#125;&lt;/div&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad (relying on function name inference is discouraged)</span></div><div class="line"><span class="keyword">const</span> Listing = <span class="function">(<span class="params">&#123; hello &#125;</span>) =&gt;</span> (</div><div class="line">  &lt;div&gt;&#123;hello&#125;&lt;/div&gt;</div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Listing</span>(<span class="params">&#123; hello &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &lt;div&gt;&#123;hello&#125;&lt;/div&gt;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h2><ul>
<li><p><a href="https://facebook.github.io/react/blog/2016/07/13/mixins-considered-harmful.html" target="_blank" rel="external">ä¸è¦ä½¿ç”¨ mixins</a>.</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? Mixins ä¼šå¢åŠ éšå¼çš„ä¾èµ–ï¼Œå¯¼è‡´å‘½åå†²çªï¼Œå¹¶ä¸”ä¼šä»¥é›ªçƒå¼å¢åŠ å¤æ‚åº¦ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹Mixinså¯ä»¥è¢«æ›´å¥½çš„æ–¹æ³•æ›¿ä»£ï¼Œå¦‚ï¼šç»„ä»¶åŒ–ï¼Œé«˜é˜¶ç»„ä»¶ï¼Œå·¥å…·æ¨¡å—ç­‰ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="Naming-å‘½å"><a href="#Naming-å‘½å" class="headerlink" title="Naming å‘½å"></a>Naming å‘½å</h2><ul>
<li><strong>æ‰©å±•å</strong>: Reactæ¨¡å—ä½¿ç”¨ <code>.jsx</code> æ‰©å±•å.</li>
<li><strong>æ–‡ä»¶å</strong>: æ–‡ä»¶åä½¿ç”¨å¸•æ–¯å¡å‘½å. å¦‚, <code>ReservationCard.jsx</code>.</li>
<li><p><strong>å¼•ç”¨å‘½å</strong>: Reactæ¨¡å—åä½¿ç”¨å¸•æ–¯å¡å‘½åï¼Œå®ä¾‹ä½¿ç”¨éª†é©¼å¼å‘½å. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-pascal-case.md" target="_blank" rel="external"><code>react/jsx-pascal-case</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> reservationCard <span class="keyword">from</span> <span class="string">'./ReservationCard'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> ReservationCard <span class="keyword">from</span> <span class="string">'./ReservationCard'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> ReservationItem = &lt;ReservationCard /&gt;;</div><div class="line"></div><div class="line">// good</div><div class="line">const reservationItem = &lt;ReservationCard /&gt;;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>æ¨¡å—å‘½å</strong>: æ¨¡å—ä½¿ç”¨å½“å‰æ–‡ä»¶åä¸€æ ·çš„åç§°. æ¯”å¦‚ <code>ReservationCard.jsx</code> åº”è¯¥åŒ…å«åä¸º <code>ReservationCard</code>çš„æ¨¡å—. ä½†æ˜¯ï¼Œå¦‚æœæ•´ä¸ªæ–‡ä»¶å¤¹æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œä½¿ç”¨ <code>index.js</code>ä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œç„¶åç›´æ¥ä½¿ç”¨ <code>index.js</code> æˆ–è€…æ–‡ä»¶å¤¹åä½œä¸ºæ¨¡å—çš„åç§°:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer/Footer'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer/index'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>é«˜é˜¶æ¨¡å—å‘½å</strong>: å¯¹äºç”Ÿæˆä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œå…¶ä¸­çš„æ¨¡å—å <code>displayName</code> åº”è¯¥ä¸ºé«˜é˜¶æ¨¡å—åå’Œä¼ å…¥æ¨¡å—åçš„ç»„åˆ. ä¾‹å¦‚, é«˜é˜¶æ¨¡å— <code>withFoo()</code>, å½“ä¼ å…¥ä¸€ä¸ª <code>Bar</code> æ¨¡å—çš„æ—¶å€™ï¼Œ ç”Ÿæˆçš„æ¨¡å—å <code>displayName</code> åº”è¯¥ä¸º <code>withFoo(Bar)</code>.</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆï¼Ÿä¸€ä¸ªæ¨¡å—çš„ <code>displayName</code> å¯èƒ½ä¼šåœ¨å¼€å‘è€…å·¥å…·æˆ–è€…é”™è¯¯ä¿¡æ¯ä¸­ä½¿ç”¨åˆ°ï¼Œå› æ­¤æœ‰ä¸€ä¸ªèƒ½æ¸…æ¥šçš„è¡¨è¾¾è¿™å±‚å…³ç³»çš„å€¼èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç†è§£æ¨¡å—å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ›´å¥½çš„Debug.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">withFoo</span>(<span class="params">WrappedComponent</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">WithFoo</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &lt;WrappedComponent &#123;...props&#125; foo /&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// good</div><div class="line">export default function withFoo(WrappedComponent) &#123;</div><div class="line">  function WithFoo(props) &#123;</div><div class="line">    return &lt;WrappedComponent &#123;...props&#125; foo /&gt;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  const wrappedComponentName = WrappedComponent.displayName</div><div class="line">    || WrappedComponent.name</div><div class="line">    || 'Component';</div><div class="line"></div><div class="line">  WithFoo.displayName = `withFoo($&#123;wrappedComponentName&#125;)`;</div><div class="line">  return WithFoo;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>å±æ€§å‘½å</strong>: é¿å…ä½¿ç”¨DOMç›¸å…³çš„å±æ€§æ¥ç”¨ä½œå…¶ä»–çš„ç”¨é€”ã€‚</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆï¼Ÿå¯¹äº<code>style</code> å’Œ <code>className</code>è¿™æ ·çš„å±æ€§åï¼Œæˆ‘ä»¬éƒ½ä¼šé»˜è®¤å®ƒä»¬ä»£è¡¨ä¸€äº›ç‰¹æ®Šçš„å«ä¹‰ï¼Œå¦‚å…ƒç´ çš„æ ·å¼ï¼ŒCSS classçš„åç§°ã€‚åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨è¿™äº›å±æ€§æ¥è¡¨ç¤ºå…¶ä»–çš„å«ä¹‰ä¼šä½¿ä½ çš„ä»£ç æ›´éš¾é˜…è¯»ï¼Œæ›´éš¾ç»´æŠ¤ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¼•èµ·bugã€‚</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;MyComponent style=<span class="string">"fancy"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;MyComponent variant=<span class="string">"fancy"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Declaration-å£°æ˜æ¨¡å—"><a href="#Declaration-å£°æ˜æ¨¡å—" class="headerlink" title="Declaration å£°æ˜æ¨¡å—"></a>Declaration å£°æ˜æ¨¡å—</h2><ul>
<li><p>ä¸è¦ä½¿ç”¨ <code>displayName</code> æ¥å‘½åReactæ¨¡å—ï¼Œè€Œæ˜¯ä½¿ç”¨å¼•ç”¨æ¥å‘½åæ¨¡å—ï¼Œ å¦‚ class åç§°.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.createClass(&#123;</div><div class="line">  <span class="attr">displayName</span>: <span class="string">'ReservationCard'</span>,</div><div class="line">  <span class="comment">// stuff goes here</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ReservationCard</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Alignment-ä»£ç å¯¹é½"><a href="#Alignment-ä»£ç å¯¹é½" class="headerlink" title="Alignment ä»£ç å¯¹é½"></a>Alignment ä»£ç å¯¹é½</h2><ul>
<li><p>éµå¾ªä»¥ä¸‹çš„JSXè¯­æ³•ç¼©è¿›/æ ¼å¼. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-closing-bracket-location.md" target="_blank" rel="external"><code>react/jsx-closing-bracket-location</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo superLongParam=<span class="string">"bar"</span></div><div class="line">     anotherSuperLongParam=<span class="string">"baz"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good, æœ‰å¤šè¡Œå±æ€§çš„è¯, æ–°å»ºä¸€è¡Œå…³é—­æ ‡ç­¾</span></div><div class="line">&lt;Foo</div><div class="line">  superLongParam=<span class="string">"bar"</span></div><div class="line">  anotherSuperLongParam=<span class="string">"baz"</span></div><div class="line">/&gt;</div><div class="line"></div><div class="line"><span class="comment">// è‹¥èƒ½åœ¨ä¸€è¡Œä¸­æ˜¾ç¤º, ç›´æ¥å†™æˆä¸€è¡Œ</span></div><div class="line">&lt;Foo bar=<span class="string">"bar"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// å­å…ƒç´ æŒ‰ç…§å¸¸è§„æ–¹å¼ç¼©è¿›</span></div><div class="line">&lt;Foo</div><div class="line">  superLongParam=<span class="string">"bar"</span></div><div class="line">  anotherSuperLongParam=<span class="string">"baz"</span></div><div class="line">&gt;</div><div class="line">  &lt;Quux /&gt;</div><div class="line">&lt;/Foo&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Quotes-å•å¼•å·è¿˜æ˜¯åŒå¼•å·"><a href="#Quotes-å•å¼•å·è¿˜æ˜¯åŒå¼•å·" class="headerlink" title="Quotes å•å¼•å·è¿˜æ˜¯åŒå¼•å·"></a>Quotes å•å¼•å·è¿˜æ˜¯åŒå¼•å·</h2><ul>
<li><p>å¯¹äºJSXå±æ€§å€¼æ€»æ˜¯ä½¿ç”¨åŒå¼•å·(<code>&quot;</code>), å…¶ä»–å‡ä½¿ç”¨å•å¼•å·(<code>&#39;</code>). eslint: <a href="http://eslint.org/docs/rules/jsx-quotes" target="_blank" rel="external"><code>jsx-quotes</code></a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? HTMLå±æ€§ä¹Ÿæ˜¯ç”¨åŒå¼•å·, å› æ­¤JSXçš„å±æ€§ä¹Ÿéµå¾ªæ­¤çº¦å®š.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo bar=<span class="string">'bar'</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo bar=<span class="string">"bar"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo style=&#123;&#123; <span class="attr">left</span>: <span class="string">"20px"</span> &#125;&#125; /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo style=&#123;&#123; <span class="attr">left</span>: <span class="string">'20px'</span> &#125;&#125; /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Spacing-ç©ºæ ¼"><a href="#Spacing-ç©ºæ ¼" class="headerlink" title="Spacing ç©ºæ ¼"></a>Spacing ç©ºæ ¼</h2><ul>
<li><p>æ€»æ˜¯åœ¨è‡ªåŠ¨å…³é—­çš„æ ‡ç­¾å‰åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦æ¢è¡Œ. eslint: <a href="http://eslint.org/docs/rules/no-multi-spaces" target="_blank" rel="external"><code>no-multi-spaces</code></a>, <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-space-before-closing.md" target="_blank" rel="external"><code>react/jsx-space-before-closing</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo/&gt;</div><div class="line"></div><div class="line"><span class="comment">// very bad</span></div><div class="line">&lt;Foo                 /&gt;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo</div><div class="line"> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>ä¸è¦åœ¨JSX <code>{}</code> å¼•ç”¨æ‹¬å·é‡Œä¸¤è¾¹åŠ ç©ºæ ¼. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-curly-spacing.md" target="_blank" rel="external"><code>react/jsx-curly-spacing</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo bar=&#123; baz &#125; /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo bar=&#123;baz&#125; /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Props-å±æ€§"><a href="#Props-å±æ€§" class="headerlink" title="Props å±æ€§"></a>Props å±æ€§</h2><ul>
<li><p>JSXå±æ€§åä½¿ç”¨éª†é©¼å¼é£æ ¼<code>camelCase</code>.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo</div><div class="line">  UserName=<span class="string">"hello"</span></div><div class="line">  phone_number=&#123;<span class="number">12345678</span>&#125;</div><div class="line">/&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo</div><div class="line">  userName=<span class="string">"hello"</span></div><div class="line">  phoneNumber=&#123;<span class="number">12345678</span>&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœå±æ€§å€¼ä¸º <code>true</code>, å¯ä»¥ç›´æ¥çœç•¥. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-boolean-value.md" target="_blank" rel="external"><code>react/jsx-boolean-value</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo</div><div class="line">  hidden=&#123;<span class="literal">true</span>&#125;</div><div class="line">/&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo</div><div class="line">  hidden</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;img&gt;</code> æ ‡ç­¾æ€»æ˜¯æ·»åŠ  <code>alt</code> å±æ€§. å¦‚æœå›¾ç‰‡ä»¥presentation(æ„Ÿè§‰æ˜¯ä»¥ç±»ä¼¼PPTæ–¹å¼æ˜¾ç¤º?)æ–¹å¼æ˜¾ç¤ºï¼Œ<code>alt</code> å¯ä¸ºç©º, æˆ–è€…<code>&lt;img&gt;</code> è¦åŒ…å«<code>role=&quot;presentation&quot;</code>. eslint: <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/img-has-alt.md" target="_blank" rel="external"><code>jsx-a11y/img-has-alt</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> alt=<span class="string">"Me waving hello"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> alt=<span class="string">""</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> role=<span class="string">"presentation"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>ä¸è¦åœ¨ <code>alt</code> å€¼é‡Œä½¿ç”¨å¦‚ â€œimageâ€, â€œphotoâ€, or â€œpictureâ€åŒ…æ‹¬å›¾ç‰‡å«ä¹‰è¿™æ ·çš„è¯ï¼Œ ä¸­æ–‡ä¹Ÿä¸€æ ·. eslint: <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/img-redundant-alt.md" target="_blank" rel="external"><code>jsx-a11y/img-redundant-alt</code></a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? å±å¹•åŠ©è¯»å™¨å·²ç»æŠŠ <code>img</code> æ ‡ç­¾æ ‡æ³¨ä¸ºå›¾ç‰‡äº†, æ‰€ä»¥æ²¡æœ‰å¿…è¦å†åœ¨ <code>alt</code> é‡Œè¯´æ˜äº†.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> alt=<span class="string">"Picture of me waving hello"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;img src=<span class="string">"hello.jpg"</span> alt=<span class="string">"Me waving hello"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨æœ‰æ•ˆæ­£ç¡®çš„ aria <code>role</code>å±æ€§å€¼ <a href="https://www.w3.org/TR/wai-aria/roles#role_definitions" target="_blank" rel="external">ARIA roles</a>. eslint: <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/aria-role.md" target="_blank" rel="external"><code>jsx-a11y/aria-role</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad - not an ARIA role</span></div><div class="line">&lt;div role=<span class="string">"datepicker"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// bad - abstract ARIA role</span></div><div class="line">&lt;div role=<span class="string">"range"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;div role=<span class="string">"button"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>ä¸è¦åœ¨æ ‡ç­¾ä¸Šä½¿ç”¨ <code>accessKey</code> å±æ€§. eslint: <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/no-access-key.md" target="_blank" rel="external"><code>jsx-a11y/no-access-key</code></a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? å±å¹•åŠ©è¯»å™¨åœ¨é”®ç›˜å¿«æ·é”®ä¸é”®ç›˜å‘½ä»¤æ—¶é€ æˆçš„ä¸ç»Ÿä¸€æ€§ä¼šå¯¼è‡´é˜…è¯»æ€§æ›´åŠ å¤æ‚.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;div accessKey=<span class="string">"h"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;div /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>é¿å…ä½¿ç”¨æ•°ç»„çš„indexæ¥ä½œä¸ºå±æ€§<code>key</code>çš„å€¼ï¼Œæ¨èä½¿ç”¨å”¯ä¸€ID. (<a href="https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318" target="_blank" rel="external">ä¸ºä»€ä¹ˆ?</a>)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&#123;todos.map(<span class="function">(<span class="params">todo, index</span>) =&gt;</span></div><div class="line">  &lt;Todo</div><div class="line">    &#123;...todo&#125;</div><div class="line">    key=&#123;index&#125;</div><div class="line">  /&gt;</div><div class="line">)&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> (</div><div class="line">  &lt;Todo</div><div class="line">    &#123;...todo&#125;</div><div class="line">    key=&#123;todo.id&#125;</div><div class="line">  /&gt;</div><div class="line">))&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>å¯¹äºæ‰€æœ‰éå¿…é¡»çš„å±æ€§ï¼Œæ€»æ˜¯æ‰‹åŠ¨å»å®šä¹‰<code>defaultProps</code>å±æ€§.</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? propTypes å¯ä»¥ä½œä¸ºæ¨¡å—çš„æ–‡æ¡£è¯´æ˜, å¹¶ä¸”å£°æ˜ defaultProps çš„è¯æ„å‘³ç€é˜…è¯»ä»£ç çš„äººä¸éœ€è¦å»å‡è®¾ä¸€äº›é»˜è®¤å€¼ã€‚æ›´é‡è¦çš„æ˜¯, æ˜¾ç¤ºçš„å£°æ˜é»˜è®¤å±æ€§å¯ä»¥è®©ä½ çš„æ¨¡å—è·³è¿‡å±æ€§ç±»å‹çš„æ£€æŸ¥.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SFC</span>(<span class="params">&#123; foo, bar, children &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &lt;div&gt;&#123;foo&#125;&#123;bar&#125;&#123;children&#125;&lt;/div&gt;;</div><div class="line">&#125;</div><div class="line">SFC.propTypes = &#123;</div><div class="line">  <span class="attr">foo</span>: PropTypes.number.isRequired,</div><div class="line">  <span class="attr">bar</span>: PropTypes.string,</div><div class="line">  <span class="attr">children</span>: PropTypes.node,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SFC</span>(<span class="params">&#123; foo, bar &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &lt;div&gt;&#123;foo&#125;&#123;bar&#125;&lt;/div&gt;;</div><div class="line">&#125;</div><div class="line">SFC.propTypes = &#123;</div><div class="line">  <span class="attr">foo</span>: PropTypes.number.isRequired,</div><div class="line">  <span class="attr">bar</span>: PropTypes.string,</div><div class="line">  <span class="attr">children</span>: PropTypes.node,</div><div class="line">&#125;;</div><div class="line">SFC.defaultProps = &#123;</div><div class="line">  <span class="attr">bar</span>: <span class="string">''</span>,</div><div class="line">  <span class="attr">children</span>: <span class="literal">null</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a>Refs</h2><ul>
<li><p>æ€»æ˜¯åœ¨Refsé‡Œä½¿ç”¨å›è°ƒå‡½æ•°. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-string-refs.md" target="_blank" rel="external"><code>react/no-string-refs</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo</div><div class="line">  ref=<span class="string">"myRef"</span></div><div class="line">/&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo</div><div class="line">  ref=&#123;(ref) =&gt; &#123; <span class="keyword">this</span>.myRef = ref; &#125;&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Parentheses-æ‹¬å·"><a href="#Parentheses-æ‹¬å·" class="headerlink" title="Parentheses æ‹¬å·"></a>Parentheses æ‹¬å·</h2><ul>
<li><p>å°†å¤šè¡Œçš„JSXæ ‡ç­¾å†™åœ¨ <code>()</code>é‡Œ. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-wrap-multilines.md" target="_blank" rel="external"><code>react/jsx-wrap-multilines</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span> &lt;MyComponent className="long body" foo="bar"&gt;</div><div class="line">           &lt;MyChild /&gt;</div><div class="line">         &lt;/MyComponent&gt;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;MyComponent className="long body" foo="bar"&gt;</div><div class="line">      &lt;MyChild /&gt;</div><div class="line">    &lt;/MyComponent&gt;</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good, å•è¡Œå¯ä»¥ä¸éœ€è¦</span></div><div class="line">render() &#123;</div><div class="line">  <span class="keyword">const</span> body = &lt;div&gt;hello&lt;/div&gt;;</div><div class="line">  <span class="keyword">return</span> &lt;MyComponent&gt;&#123;body&#125;&lt;/MyComponent&gt;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Tags-æ ‡ç­¾"><a href="#Tags-æ ‡ç­¾" class="headerlink" title="Tags æ ‡ç­¾"></a>Tags æ ‡ç­¾</h2><ul>
<li><p>å¯¹äºæ²¡æœ‰å­å…ƒç´ çš„æ ‡ç­¾æ¥è¯´æ€»æ˜¯è‡ªå·±å…³é—­æ ‡ç­¾. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/self-closing-comp.md" target="_blank" rel="external"><code>react/self-closing-comp</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo className=<span class="string">"stuff"</span>&gt;&lt;/Foo&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo className=<span class="string">"stuff"</span> /&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœæ¨¡å—æœ‰å¤šè¡Œçš„å±æ€§ï¼Œ å…³é—­æ ‡ç­¾æ—¶æ–°å»ºä¸€è¡Œ. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-closing-bracket-location.md" target="_blank" rel="external"><code>react/jsx-closing-bracket-location</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">&lt;Foo</div><div class="line">  bar=<span class="string">"bar"</span></div><div class="line">  baz=<span class="string">"baz"</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">&lt;Foo</div><div class="line">  bar=<span class="string">"bar"</span></div><div class="line">  baz=<span class="string">"baz"</span></div><div class="line">/&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Methods-å‡½æ•°"><a href="#Methods-å‡½æ•°" class="headerlink" title="Methods å‡½æ•°"></a>Methods å‡½æ•°</h2><ul>
<li><p>ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥è·å–æœ¬åœ°å˜é‡.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ItemList</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;ul&gt;</div><div class="line">      &#123;props.items.map((item, index) =&gt; (</div><div class="line">        &lt;Item</div><div class="line">          key=&#123;item.key&#125;</div><div class="line">          onClick=&#123;() =&gt; doSomethingWith(item.name, index)&#125;</div><div class="line">        /&gt;</div><div class="line">      ))&#125;</div><div class="line">    &lt;/ul&gt;</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å½“åœ¨ <code>render()</code> é‡Œä½¿ç”¨äº‹ä»¶å¤„ç†æ–¹æ³•æ—¶ï¼Œæå‰åœ¨æ„é€ å‡½æ•°é‡ŒæŠŠ <code>this</code> ç»‘å®šä¸Šå». eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md" target="_blank" rel="external"><code>react/jsx-no-bind</code></a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? åœ¨æ¯æ¬¡ <code>render</code> è¿‡ç¨‹ä¸­ï¼Œ å†è°ƒç”¨ <code>bind</code> éƒ½ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæµªè´¹èµ„æº.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  onClickDiv() &#123;</div><div class="line">    <span class="comment">// do stuff</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div onClick=&#123;this.onClickDiv.bind(this)&#125; /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// good</div><div class="line">class extends React.Component &#123;</div><div class="line">  constructor(props) &#123;</div><div class="line">    super(props);</div><div class="line"></div><div class="line">    this.onClickDiv = this.onClickDiv.bind(this);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  onClickDiv() &#123;</div><div class="line">    // do stuff</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    return &lt;div onClick=&#123;this.onClickDiv&#125; /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨Reactæ¨¡å—ä¸­ï¼Œä¸è¦ç»™æ‰€è°“çš„ç§æœ‰å‡½æ•°æ·»åŠ  <code>_</code> å‰ç¼€ï¼Œæœ¬è´¨ä¸Šå®ƒå¹¶ä¸æ˜¯ç§æœ‰çš„.</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆï¼Ÿ<code>_</code> ä¸‹åˆ’çº¿å‰ç¼€åœ¨æŸäº›è¯­è¨€ä¸­é€šå¸¸è¢«ç”¨æ¥è¡¨ç¤ºç§æœ‰å˜é‡æˆ–è€…å‡½æ•°ã€‚ä½†æ˜¯ä¸åƒå…¶ä»–çš„ä¸€äº›è¯­è¨€ï¼Œåœ¨JSä¸­æ²¡æœ‰åŸç”Ÿæ”¯æŒæ‰€è°“çš„ç§æœ‰å˜é‡ï¼Œæ‰€æœ‰çš„å˜é‡å‡½æ•°éƒ½æ˜¯å…±æœ‰çš„ã€‚å°½ç®¡ä½ çš„æ„å›¾æ˜¯ä½¿å®ƒç§æœ‰åŒ–ï¼Œåœ¨ä¹‹å‰åŠ ä¸Šä¸‹åˆ’çº¿å¹¶ä¸ä¼šä½¿è¿™äº›å˜é‡ç§æœ‰åŒ–ï¼Œå¹¶ä¸”æ‰€æœ‰çš„å±æ€§ï¼ˆåŒ…æ‹¬æœ‰ä¸‹åˆ’çº¿å‰ç¼€åŠæ²¡æœ‰å‰ç¼€çš„ï¼‰éƒ½åº”è¯¥è¢«è§†ä¸ºæ˜¯å…±æœ‰çš„ã€‚äº†è§£æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹Issue <a href="https://github.com/airbnb/javascript/issues/1024" target="_blank" rel="external">#1024</a>, å’Œ <a href="https://github.com/airbnb/javascript/issues/490" target="_blank" rel="external">#490</a> ã€‚</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">React.createClass(&#123;</div><div class="line">  _onClickSubmit() &#123;</div><div class="line">    <span class="comment">// do stuff</span></div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="comment">// other stuff</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  onClickSubmit() &#123;</div><div class="line">    <span class="comment">// do stuff</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// other stuff</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ <code>render</code> æ–¹æ³•ä¸­æ€»æ˜¯ç¡®ä¿ <code>return</code> è¿”å›å€¼. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/require-render-return.md" target="_blank" rel="external"><code>react/require-render-return</code></a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">render() &#123;</div><div class="line">  (&lt;div /&gt;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// good</div><div class="line">render() &#123;</div><div class="line">  return (&lt;div /&gt;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Ordering-React-æ¨¡å—ç”Ÿå‘½å‘¨æœŸ"><a href="#Ordering-React-æ¨¡å—ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Ordering React æ¨¡å—ç”Ÿå‘½å‘¨æœŸ"></a>Ordering React æ¨¡å—ç”Ÿå‘½å‘¨æœŸ</h2><ul>
<li><code>class extends React.Component</code> çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°:</li>
</ul>
<ol>
<li>å¯é€‰çš„ <code>static</code> æ–¹æ³•</li>
<li><code>constructor</code> æ„é€ å‡½æ•°</li>
<li><code>getChildContext</code> è·å–å­å…ƒç´ å†…å®¹</li>
<li><code>componentWillMount</code> æ¨¡å—æ¸²æŸ“å‰</li>
<li><code>componentDidMount</code> æ¨¡å—æ¸²æŸ“å</li>
<li><code>componentWillReceiveProps</code> æ¨¡å—å°†æ¥å—æ–°çš„æ•°æ®</li>
<li><code>shouldComponentUpdate</code> åˆ¤æ–­æ¨¡å—éœ€ä¸éœ€è¦é‡æ–°æ¸²æŸ“</li>
<li><code>componentWillUpdate</code> ä¸Šé¢çš„æ–¹æ³•è¿”å› <code>true</code>ï¼Œ æ¨¡å—å°†é‡æ–°æ¸²æŸ“</li>
<li><code>componentDidUpdate</code> æ¨¡å—æ¸²æŸ“ç»“æŸ</li>
<li><code>componentWillUnmount</code> æ¨¡å—å°†ä»DOMä¸­æ¸…é™¤, åšä¸€äº›æ¸…ç†ä»»åŠ¡</li>
<li><em>ç‚¹å‡»å›è°ƒæˆ–è€…äº‹ä»¶å¤„ç†å™¨</em> å¦‚ <code>onClickSubmit()</code> æˆ– <code>onChangeDescription()</code></li>
<li><em><code>render</code> é‡Œçš„ getter æ–¹æ³•</em> å¦‚ <code>getSelectReason()</code> æˆ– <code>getFooterContent()</code></li>
<li><em>å¯é€‰çš„ render æ–¹æ³•</em> å¦‚ <code>renderNavigation()</code> æˆ– <code>renderProfilePicture()</code></li>
<li><code>render</code> render() æ–¹æ³•</li>
</ol>
<ul>
<li><p>å¦‚ä½•å®šä¹‰ <code>propTypes</code>, <code>defaultProps</code>, <code>contextTypes</code>, ç­‰ç­‰å…¶ä»–å±æ€§â€¦</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> propTypes = &#123;</div><div class="line">  <span class="attr">id</span>: PropTypes.number.isRequired,</div><div class="line">  <span class="attr">url</span>: PropTypes.string.isRequired,</div><div class="line">  <span class="attr">text</span>: PropTypes.string,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> defaultProps = &#123;</div><div class="line">  <span class="attr">text</span>: <span class="string">'Hello World'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Link</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> methodsAreOk() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;a href=&#123;this.props.url&#125; data-id=&#123;this.props.id&#125;&gt;&#123;this.props.text&#125;&lt;/a&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Link.propTypes = propTypes;</div><div class="line">Link.defaultProps = defaultProps;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link;</div></pre></td></tr></table></figure>
</li>
<li><p><code>React.createClass</code> çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸ä½¿ç”¨classç¨æœ‰ä¸åŒ: eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/sort-comp.md" target="_blank" rel="external"><code>react/sort-comp</code></a></p>
</li>
</ul>
<ol>
<li><code>displayName</code> è®¾å®šæ¨¡å—åç§°</li>
<li><code>propTypes</code> è®¾ç½®å±æ€§çš„ç±»å‹</li>
<li><code>contextTypes</code> è®¾ç½®ä¸Šä¸‹æ–‡ç±»å‹</li>
<li><code>childContextTypes</code> è®¾ç½®å­å…ƒç´ ä¸Šä¸‹æ–‡ç±»å‹</li>
<li><code>mixins</code> æ·»åŠ ä¸€äº›mixins</li>
<li><code>statics</code></li>
<li><code>defaultProps</code> è®¾ç½®é»˜è®¤çš„å±æ€§å€¼</li>
<li><code>getDefaultProps</code> è·å–é»˜è®¤å±æ€§å€¼</li>
<li><code>getInitialState</code> æˆ–è€…åˆå§‹çŠ¶æ€</li>
<li><code>getChildContext</code></li>
<li><code>componentWillMount</code></li>
<li><code>componentDidMount</code></li>
<li><code>componentWillReceiveProps</code></li>
<li><code>shouldComponentUpdate</code></li>
<li><code>componentWillUpdate</code></li>
<li><code>componentDidUpdate</code></li>
<li><code>componentWillUnmount</code></li>
<li><em>clickHandlers or eventHandlers</em> like <code>onClickSubmit()</code> or <code>onChangeDescription()</code></li>
<li><em>getter methods for <code>render</code></em> like <code>getSelectReason()</code> or <code>getFooterContent()</code></li>
<li><em>Optional render methods</em> like <code>renderNavigation()</code> or <code>renderProfilePicture()</code></li>
<li><code>render</code></li>
</ol>
<h2 id="isMounted"><a href="#isMounted" class="headerlink" title="isMounted"></a>isMounted</h2><ul>
<li><p>ä¸è¦å†ä½¿ç”¨ <code>isMounted</code>. eslint: <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-is-mounted.md" target="_blank" rel="external"><code>react/no-is-mounted</code></a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆ? <a href="https://facebook.github.io/react/blog/2015/12/16/ismounted-antipattern.html" target="_blank" rel="external"><code>isMounted</code> åäººç±»è®¾è®¡æ¨¡å¼:()</a>, åœ¨ ES6 classes ä¸­æ— æ³•ä½¿ç”¨ï¼Œ å®˜æ–¹å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬é‡Œåˆ é™¤æ­¤æ–¹æ³•.</p>
</blockquote>
</li>
</ul>
<p><strong><a href="#å†…å®¹ç›®å½•">â¬† å›åˆ°é¡¶éƒ¨</a></strong></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|React-navigation(1)]]></title>
      <url>http://yoursite.com/2017/03/28/New-React-navigation-system-github-3211/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è¿™ä¸ªReact-nativeçš„å¯¼èˆªç³»ç»Ÿå¯èƒ½å·²ç»åŸºæœ¬å®˜æ–¹æ ‡é…ç³»ç»Ÿäº†.ä¸¤ä¸ªæœˆæ—¶é—´å·²ç»ç§¯ç´¯äº†3000å¤šçš„star.<br>æ•™ç¨‹å¯ä»¥å‚è€ƒ<a href="https://hackernoon.com/getting-started-with-react-navigation-the-navigation-solution-for-react-native-ea3f4bd786a4#.n0pz5ev39" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>,è¿™ä¸ªæ–‡ç« ä½œè€…è€å…„å’Œæˆ‘ä¸€æ ·å¾ˆå–œæ¬¢æŠ˜è…¾.å‰é¢å°±å‚è€ƒäº†ä»–çš„å¦ä¸€ä¸ªå¯¼èˆªæ•™ç¨‹,è¿™æ¬¡å†æ¥.</p>
<hr>
<p>æœ¬æ–‡æ˜¯ç¿»è¯‘çš„<a href="https://reactnavigation.org/docs/intro/" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>.æ‰“ç®—ç¿»è¯‘å®Œ<br>åŸºæœ¬æ€è·¯æ˜¯æœ‰å‡ ä¸ªæ³¨å†Œç³»ç»Ÿ,å¦‚æœè¦åœ¨appä¸­ä½¿ç”¨å¯¼èˆª,å¿…é¡»è¦æŠŠç»„ä»¶æ³¨å†Œåˆ°å¯¹åº”çš„ç³»ç»Ÿä¸­.</p>
<h1 id="åŸæ–‡å¼€å§‹ï¼šä½ å¥½ï¼ç§»åŠ¨å¯¼èˆª"><a href="#åŸæ–‡å¼€å§‹ï¼šä½ å¥½ï¼ç§»åŠ¨å¯¼èˆª" class="headerlink" title="åŸæ–‡å¼€å§‹ï¼šä½ å¥½ï¼ç§»åŠ¨å¯¼èˆª"></a>åŸæ–‡å¼€å§‹ï¼šä½ å¥½ï¼ç§»åŠ¨å¯¼èˆª</h1><p>ä½¿ç”¨React Navigationæ¥æ„å»ºè·¨å¹³å°å¯¼èˆª</p>
<h2 id="é…ç½®å’Œå®‰è£…"><a href="#é…ç½®å’Œå®‰è£…" class="headerlink" title="é…ç½®å’Œå®‰è£…"></a>é…ç½®å’Œå®‰è£…</h2><p>é¦–å…ˆè¦é…ç½®React Nativeç³»ç»Ÿ.æ¥ä¸‹æ¥åˆ›å»ºRNé¡¹ç›®,æ·»åŠ <code>react-navigation</code></p>
</blockquote>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># Create a new React Native App</span></div><div class="line"> <span class="comment">#åˆ›å»ºæ–°RN APP</span></div><div class="line">react-native init SimpleApp</div><div class="line">cd SimpleApp</div><div class="line"></div><div class="line"><span class="comment"># Install the latest version of react-navigation from npmå®‰è£…æœ€æ–°ç‰ˆæœ¬</span></div><div class="line">npm install --save react-navigation</div><div class="line"></div><div class="line"><span class="comment"># Run the new appè¿è¡Œï¼Œç¡®ä¿åˆå§‹åŒ–æ­£å¸¸</span></div><div class="line">react-native <span class="keyword">run</span><span class="bash">-android <span class="comment"># or:</span></span></div><div class="line">react-native <span class="keyword">run</span><span class="bash">-ios</span></div></pre></td></tr></table></figure>
<p> <img src="https://ww3.sinaimg.cn/large/006tKfTcly1fe1ostu6xlj30ku112jrj.jpg" alt="åˆå§‹åŒ–ç•Œé¢"></p>
<p>ä¸ºäº†åœ¨Androidå’ŒiOSä¹‹é—´å…±äº«ä»£ç ,åˆ é™¤æ‰<code>index.ios.js</code>å’Œ<code>index.andorid.js</code>çš„å®é™…ä»£ç ,ä½¿ç”¨<code>import &#39;./App&#39;</code>æ¥å®ç°å…·ä½“çš„ä»£ç </p>
<p>ç°åœ¨æ¥åˆ›å»ºâ€˜App.jsâ€™</p>
<h2 id="Stack-Navigatorä»‹ç»"><a href="#Stack-Navigatorä»‹ç»" class="headerlink" title="Stack Navigatorä»‹ç»"></a>Stack Navigatorä»‹ç»</h2><p>ä¸ºäº†æƒ³ä½¿ç”¨<code>stack</code> navigationçš„æ¦‚å¿µ,æˆ‘ä»¬ä¼šä½¿ç”¨<code>StactkNavigator</code>.(è¯‘æ³¨ï¼šstackå°±æ˜¯æ•°æ®ç»“æ„çš„å †æ ˆæŠ€æœ¯,éµå¾ªåè¿›å…ˆå‡ºçš„åŸç†).æ¯ä¸€ä¸ª<code>è¢«</code>åˆ°å¯¼èˆªçš„screen(å¯¼èˆªç”»é¢)è¢«æ”¾åœ¨å †æ ˆçš„æ ˆé¡¶,è¿”å›æ—¶å€™,ä¼šä»æ ˆé¡¶å¼¹å‡ºå¯¹åº”çš„ç»„ä»¶.å…ˆçœ‹çœ‹ä¸€ä¸ªscreençš„æƒ…å†µ</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å…¶å®è¿™ä¸ªä»£ç æ²¡æœ‰å®ç°App.jsï¼Œexportçš„æ¨¡å¼,æ³¨æ„</span></div><div class="line"><span class="keyword">import</span> <span class="type">React</span> from <span class="symbol">'reac</span>t';</div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  <span class="type">AppRegistry</span>,</div><div class="line">  <span class="type">Text</span>,</div><div class="line">&#125; from <span class="symbol">'react</span>-native';</div><div class="line"><span class="comment">//å¯¼å…¥stackå¯¼èˆªç»„ä»¶</span></div><div class="line"><span class="keyword">import</span> &#123; <span class="type">StackNavigator</span> &#125; from <span class="symbol">'react</span>-navigation';</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    title: <span class="symbol">'Welcom</span>e',<span class="comment">//åœ¨å¯¼èˆªä¸­æ˜¾ç¤ºçš„æ ‡é¢˜å†…å®¹</span></div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    <span class="comment">//è¿™é‡Œå¯ä»¥æ˜¯å¯¼å…¥çš„å…¶ä»–ç»„ä»¶</span></div><div class="line">    <span class="keyword">return</span> &lt;<span class="type">Text</span>&gt;<span class="type">Hello</span>, <span class="type">Navigation</span>!&lt;/<span class="type">Text</span>&gt;;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//è¿›è¡Œå¯¼èˆªçš„æ³¨å†Œ</span></div><div class="line">const <span class="type">SimpleApp</span> = <span class="type">StackNavigator</span>(&#123;</div><div class="line">  <span class="type">Home</span>: &#123; screen: <span class="type">HomeScreen</span> &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="type">AppRegistry</span>.registerComponent(<span class="symbol">'SimpleAp</span>p', () =&gt; <span class="type">SimpleApp</span>);</div></pre></td></tr></table></figure>
<p><code>title</code>æ˜¯static<code>navigationOptions</code>é‡Œé…ç½®çš„æ ‡é¢˜å†…å®¹,å‡ºç°çš„ç•Œé¢çœ‹ä¸‹é¢</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNbRwly1fe1pa9cdbrj30yj1pd0t3.jpg" alt=""></p>
<h2 id="æ·»åŠ æ–°çš„å¯¼èˆªç”»é¢"><a href="#æ·»åŠ æ–°çš„å¯¼èˆªç”»é¢" class="headerlink" title="æ·»åŠ æ–°çš„å¯¼èˆªç”»é¢"></a>æ·»åŠ æ–°çš„å¯¼èˆªç”»é¢</h2><p>å†æ·»åŠ ä¸€ä¸ª<code>ChatScreen</code>ç”»é¢</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ChatScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    title: <span class="symbol">'Chat</span> <span class="keyword">with</span> <span class="type">Lucy</span>',</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">View</span>&gt;</div><div class="line">        &lt;<span class="type">Text</span>&gt;<span class="type">Chat</span> <span class="keyword">with</span> <span class="type">Lucy</span>&lt;/<span class="type">Text</span>&gt;</div><div class="line">      &lt;/<span class="type">View</span>&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨<code>HomeScreen</code>ä¸­æ·»åŠ ä¸€ä¸ªbuttonç»„ä»¶,ä½¿ç”¨<code>routeName</code> <code>Chat</code>å…³è”åˆ°<code>ChatScreen</code>.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">HomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    title: <span class="symbol">'Welcom</span>e',</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    const &#123; navigate &#125; = <span class="keyword">this</span>.props.navigation;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">View</span>&gt;</div><div class="line">        &lt;<span class="type">Text</span>&gt;<span class="type">Hello</span>, <span class="type">Chat</span> <span class="type">App</span>!&lt;/<span class="type">Text</span>&gt;</div><div class="line">        &lt;<span class="type">Button</span></div><div class="line">          onPress=&#123;() =&gt; navigate(<span class="symbol">'Cha</span>t')&#125;</div><div class="line">          title=<span class="string">"Chat with Lucy"</span></div><div class="line">        /&gt;</div><div class="line">      &lt;/<span class="type">View</span>&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä»<code>screen navigation prop</code>è·å¾—çš„å¯¼èˆªå‡½æ•°è½¬å‘<code>ChatScreen</code>.ä½†æ˜¯è¿™éœ€è¦åœ¨<code>StackNavigator</code>ä¸­æ³¨å†Œ.<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> const SimpleApp = StackNavigator(&#123;</div><div class="line"><span class="symbol">  Home:</span> &#123; screen: HomeScreen &#125;,</div><div class="line"><span class="symbol">  Chat:</span> &#123; screen: ChatScreen &#125;,<span class="comment">//æ–°æ·»åŠ çš„screen</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨å¯ä»¥å¯¼èˆªåˆ°ChatScreen,ä¹Ÿå¯ä»¥è¿”å›äº†.<br><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fe1pjjrpn4g307i0dc75l.gif" alt=""></p>
<h2 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h2><p>åœ¨<code>ChatScreen</code>ä¸­ç¡¬ç¼–ç æ ‡é¢˜ä¸æ˜¯å¥½åŠæ³•,å¯ä»¥åœ¨å¯¼èˆªçš„æ—¶å€™ä¼ é€’å‚æ•°.é¦–å…ˆç¼–è¾‘ä¸€ä¸‹<code>HomeScreen</code>ç»„ä»¶,ä¼ é€’<code>name</code>å‚æ•°åˆ°è·¯ç”±ä¸­.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">HomeScreen</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    title: <span class="symbol">'Welcom</span>e',</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    const &#123; navigate &#125; = <span class="keyword">this</span>.props.navigation;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;<span class="type">View</span>&gt;</div><div class="line">        &lt;<span class="type">Text</span>&gt;<span class="type">Hello</span>, <span class="type">Chat</span> <span class="type">App</span>!&lt;/<span class="type">Text</span>&gt;</div><div class="line">        &lt;<span class="type">Button</span></div><div class="line">          onPress=&#123;() =&gt; navigate(<span class="symbol">'Cha</span>t', &#123; user: <span class="symbol">'Luc</span>y' &#125;)&#125;</div><div class="line">          title=<span class="string">"Chat with Lucy"</span></div><div class="line">        /&gt;</div><div class="line">      &lt;/<span class="type">View</span>&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç¼–è¾‘<code>ChatScreen</code>ç»„ä»¶æ˜¾ç¤ºçš„<code>name</code>å‚æ•°,è¿™ä¸ªå‚æ•°é€šè¿‡routeæ¥ä¼ é€’.</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> class ChatScreen extends React.Component &#123;</div><div class="line">  static navigationOptions = &#123;</div><div class="line">    // Nav options can be defined as a function of the navigation prop:</div><div class="line">    title: (&#123; <span class="keyword">state</span> &#125;) =&gt; `Chat with $&#123;<span class="keyword">state</span>.params.<span class="keyword">user</span>&#125;`,</div><div class="line">  &#125;;</div><div class="line">  render() &#123;</div><div class="line">    // The screen's current route is passed <span class="keyword">in</span> <span class="keyword">to</span> `props.navigation.<span class="keyword">state</span>`:</div><div class="line">    const &#123; params &#125; = this.props.navigation.<span class="keyword">state</span>;</div><div class="line">    return (</div><div class="line">      <span class="variable">&lt;View&gt;</span></div><div class="line">        <span class="variable">&lt;Text&gt;</span>Chat with &#123;params.<span class="keyword">user</span>&#125;&lt;/Text&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å½“ä½ å¯¼èˆªåˆ°Chat screençš„æ—¶å€™,å¯ä»¥çœ‹åˆ°åå­—äº†.åœ¨<code>HomeScreen</code>ä¸­æ”¹å˜<code>name</code>,çœ‹çœ‹å˜åŒ–.</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNbRwly1fe1t489r4gg307i0dc75l.gif" alt=""></p>
<p>ç¬¬ä¸€éƒ¨åˆ†å°±è¿™äº›.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Redux- actions Readme]]></title>
      <url>http://yoursite.com/2017/03/27/Redux-actions-Readme/</url>
      <content type="html"><![CDATA[<h1 id="redux-actions"><a href="#redux-actions" class="headerlink" title="redux-actions"></a>redux-actions</h1><p><a href="https://travis-ci.org/acdlite/redux-actions" target="_blank" rel="external"><img src="https://img.shields.io/travis/acdlite/redux-actions/master.svg?style=flat-square" alt="build status"></a></p>
<p><a href="https://nodei.co/npm/redux-actions/" target="_blank" rel="external"><img src="https://nodei.co/npm/redux-actions.png?downloads=true" alt="NPM"></a></p>
<p><a href="https://github.com/acdlite/flux-standard-action" target="_blank" rel="external">Flux Standard Action</a> utilities for Redux.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save redux-actions</div></pre></td></tr></table></figure>
<p>The <a href="https://www.npmjs.com" target="_blank" rel="external">npm</a> package provides a <a href="http://webpack.github.io/docs/commonjs.html" target="_blank" rel="external">CommonJS</a> build for use in Node.js, and with bundlers like <a href="http://webpack.github.io/" target="_blank" rel="external">Webpack</a> and <a href="http://browserify.org/" target="_blank" rel="external">Browserify</a>. It also includes an <a href="http://jsmodules.io/" target="_blank" rel="external">ES modules</a> build that works well with <a href="http://rollupjs.org/" target="_blank" rel="external">Rollup</a> and <a href="https://webpack.js.org" target="_blank" rel="external">Webpack2</a>â€˜s tree-shaking.</p>
<p>If you donâ€™t use <a href="https://www.npmjs.com" target="_blank" rel="external">npm</a>, you may grab the latest <a href="https://unpkg.com/redux-actions@latest/dist" target="_blank" rel="external">UMD</a> build from <a href="https://unpkg.com" target="_blank" rel="external">unpkg</a> (either a <a href="https://unpkg.com/redux-actions@latest/dist/redux-actions.js" target="_blank" rel="external">development</a> or a <a href="https://unpkg.com/redux-actions@latest/dist/redux-actions.min.js" target="_blank" rel="external">production</a> build). The UMD build exports a global called <code>window.ReduxActions</code> if you add it to your page via a <code>&lt;script&gt;</code> tag. We <em>donâ€™t</em> recommend UMD builds for any serious application, as most of the libraries complementary to Redux are only available on <a href="https://www.npmjs.com/search?q=redux" target="_blank" rel="external">npm</a>.</p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="createAction-type-payloadCreator-Identity-metaCreator"><a href="#createAction-type-payloadCreator-Identity-metaCreator" class="headerlink" title="createAction(type, payloadCreator = Identity, ?metaCreator)"></a><code>createAction(type, payloadCreator = Identity, ?metaCreator)</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createAction &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</div></pre></td></tr></table></figure>
<p>Wraps an action creator so that its return value is the payload of a Flux Standard Action.</p>
<p><code>payloadCreator</code> must be a function, <code>undefined</code>, or <code>null</code>. If <code>payloadCreator</code> is <code>undefined</code> or <code>null</code>, the identity function is used.</p>
<p>Example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> increment = createAction(<span class="string">'INCREMENT'</span>, amount =&gt; amount);</div><div class="line"><span class="comment">// same as</span></div><div class="line">increment = createAction(<span class="string">'INCREMENT'</span>);</div><div class="line"></div><div class="line">expect(increment(<span class="number">42</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'INCREMENT'</span>,</div><div class="line">  <span class="attr">payload</span>: <span class="number">42</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>If the payload is an instance of an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="external">Error<br>object</a>,<br>redux-actions will automatically set <figure class="highlight plain"><figcaption><span>to true.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Example:</div><div class="line"></div><div class="line">```js</div><div class="line">const increment = createAction(&apos;INCREMENT&apos;);</div><div class="line"></div><div class="line">const error = new TypeError(&apos;not a number&apos;);</div><div class="line">expect(increment(error)).to.deep.equal(&#123;</div><div class="line">  type: &apos;INCREMENT&apos;,</div><div class="line">  payload: error,</div><div class="line">  error: true</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><code>createAction</code> also returns its <code>type</code> when used as type in <code>handleAction</code> or <code>handleActions</code>.</p>
<p>Example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> increment = createAction(<span class="string">'INCREMENT'</span>);</div><div class="line"></div><div class="line"><span class="comment">// As parameter in handleAction:</span></div><div class="line">handleAction(increment, &#123;</div><div class="line">  next(state, action) &#123;...&#125;,</div><div class="line">  <span class="keyword">throw</span>(state, action) &#123;...&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// As object key in handleActions:</span></div><div class="line"><span class="keyword">const</span> reducer = handleActions(&#123;</div><div class="line">  [increment]: <span class="function">(<span class="params">state, action</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="attr">counter</span>: state.counter + action.payload</div><div class="line">  &#125;)</div><div class="line">&#125;, &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;);</div></pre></td></tr></table></figure>
<p><strong>NOTE:</strong> The more correct name for this function is probably <code>createActionCreator()</code>, but that seems a bit redundant.</p>
<p>Use the identity form to create one-off actions:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">createAction(<span class="string">'ADD_TODO'</span>)(<span class="string">'Use Redux'</span>);</div></pre></td></tr></table></figure>
<p><code>metaCreator</code> is an optional function that creates metadata for the payload. It receives the same arguments as the payload creator, but its result becomes the meta field of the resulting action. If <code>metaCreator</code> is undefined or not a function, the meta field is omitted.</p>
<h3 id="createActions-actionMap-identityActions"><a href="#createActions-actionMap-identityActions" class="headerlink" title="createActions(?actionMap, ?...identityActions)"></a><code>createActions(?actionMap, ?...identityActions)</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</div></pre></td></tr></table></figure>
<p>Returns an object mapping action types to action creators. The keys of this object are camel-cased from the keys in <code>actionMap</code> and the string literals of <code>identityActions</code>; the values are the action creators.</p>
<p><code>actionMap</code> is an optional object and a recursive data structure, with action types as keys, and whose values <strong>must</strong> be either</p>
<ul>
<li>a function, which is the payload creator for that action</li>
<li>an array with <code>payload</code> and <code>meta</code> functions in that order, as in <a href="#createactiontype-payloadcreator--identity-metacreator"><code>createAction</code></a><ul>
<li><code>meta</code> is <strong>required</strong> in this case (otherwise use the function form above)</li>
</ul>
</li>
<li>an <code>actionMap</code></li>
</ul>
<p><code>identityActions</code> is an optional list of positional string arguments that are action type strings; these action types will use the identity payload creator.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; actionOne, actionTwo, actionThree &#125; = createActions(&#123;</div><div class="line">  <span class="comment">// function form; payload creator defined inline</span></div><div class="line">  ACTION_ONE: <span class="function">(<span class="params">key, value</span>) =&gt;</span> (&#123; [key]: value &#125;),</div><div class="line"></div><div class="line">  <span class="comment">// array form</span></div><div class="line">  ACTION_TWO: [</div><div class="line">    <span class="function">(<span class="params">first</span>) =&gt;</span> [first],             <span class="comment">// payload</span></div><div class="line">    (first, second) =&gt; (&#123; second &#125;) <span class="comment">// meta</span></div><div class="line">  ],</div><div class="line"></div><div class="line">  <span class="comment">// trailing action type string form; payload creator is the identity</span></div><div class="line">&#125;, <span class="string">'ACTION_THREE'</span>);</div><div class="line"></div><div class="line">expect(actionOne(<span class="string">'key'</span>, <span class="number">1</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'ACTION_ONE'</span>,</div><div class="line">  <span class="attr">payload</span>: &#123; <span class="attr">key</span>: <span class="number">1</span> &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">expect(actionTwo(<span class="string">'first'</span>, <span class="string">'second'</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'ACTION_TWO'</span>,</div><div class="line">  <span class="attr">payload</span>: [<span class="string">'first'</span>],</div><div class="line">  <span class="attr">meta</span>: &#123; <span class="attr">second</span>: <span class="string">'second'</span> &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">expect(actionThree(<span class="number">3</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'ACTION_THREE'</span>,</div><div class="line">  <span class="attr">payload</span>: <span class="number">3</span>,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>If <code>actionMap</code> has a recursive structure, its leaves are used as payload and meta creators, and the action type for each leaf is the combined path to that leaf:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> actionCreators = createActions(&#123;</div><div class="line">  <span class="attr">APP</span>: &#123;</div><div class="line">    <span class="attr">COUNTER</span>: &#123;</div><div class="line">      <span class="attr">INCREMENT</span>: [</div><div class="line">        <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; amount &#125;),</div><div class="line">        amount =&gt; (&#123; <span class="attr">key</span>: <span class="string">'value'</span>, amount &#125;)</div><div class="line">      ],</div><div class="line">      <span class="attr">DECREMENT</span>: <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; <span class="attr">amount</span>: -amount &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">NOTIFY</span>: [</div><div class="line">      <span class="function">(<span class="params">username, message</span>) =&gt;</span> (&#123; <span class="attr">message</span>: <span class="string">`<span class="subst">$&#123;username&#125;</span>: <span class="subst">$&#123;message&#125;</span>`</span> &#125;),</div><div class="line">      (username, message) =&gt; (&#123; username, message &#125;)</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">expect(actionCreators.app.counter.increment(<span class="number">1</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'APP/COUNTER/INCREMENT'</span>,</div><div class="line">  <span class="attr">payload</span>: &#123; <span class="attr">amount</span>: <span class="number">1</span> &#125;,</div><div class="line">  <span class="attr">meta</span>: &#123; <span class="attr">key</span>: <span class="string">'value'</span>, <span class="attr">amount</span>: <span class="number">1</span> &#125;</div><div class="line">&#125;);</div><div class="line">expect(actionCreators.app.counter.decrement(<span class="number">1</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'APP/COUNTER/DECREMENT'</span>,</div><div class="line">  <span class="attr">payload</span>: &#123; <span class="attr">amount</span>: <span class="number">-1</span> &#125;</div><div class="line">&#125;);</div><div class="line">expect(actionCreators.app.notify(<span class="string">'yangmillstheory'</span>, <span class="string">'Hello World'</span>)).to.deep.equal(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'APP/NOTIFY'</span>,</div><div class="line">  <span class="attr">payload</span>: &#123; <span class="attr">message</span>: <span class="string">'yangmillstheory: Hello World'</span> &#125;,</div><div class="line">  <span class="attr">meta</span>: &#123; <span class="attr">username</span>: <span class="string">'yangmillstheory'</span>, <span class="attr">message</span>: <span class="string">'Hello World'</span> &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>When using this form, you can pass an object with key <code>namespace</code> as the last positional argument, instead of the default <code>/</code>.</p>
<h3 id="handleAction-type-reducer-reducerMap-Identity-defaultState"><a href="#handleAction-type-reducer-reducerMap-Identity-defaultState" class="headerlink" title="handleAction(type, reducer | reducerMap = Identity, defaultState)"></a><code>handleAction(type, reducer | reducerMap = Identity, defaultState)</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; handleAction &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</div></pre></td></tr></table></figure>
<p>Wraps a reducer so that it only handles Flux Standard Actions of a certain type.</p>
<p>If a <code>reducer</code> function is passed, it is used to handle both normal actions and failed actions. (A failed action is analogous to a rejected promise.) You can use this form if you know a certain type of action will never fail, like the increment example above.</p>
<p>Otherwise, you can specify separate reducers for <code>next()</code> and <code>throw()</code> using the <code>reducerMap</code> form. This API is inspired by the ES6 generator interface.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">handleAction(<span class="string">'FETCH_DATA'</span>, &#123;</div><div class="line">  next(state, action) &#123;...&#125;,</div><div class="line">  <span class="keyword">throw</span>(state, action) &#123;...&#125;</div><div class="line">&#125;, defaultState);</div></pre></td></tr></table></figure>
<p>If either <code>next()</code> or <code>throw()</code> are <code>undefined</code> or <code>null</code>, then the identity function is used for that reducer.</p>
<p>If the reducer argument (<code>reducer | reducerMap</code>) is <code>undefined</code>, then the identity function is used.</p>
<p>The third parameter <code>defaultState</code> is required, and is used when <code>undefined</code> is passed to the reducer.</p>
<h3 id="handleActions-reducerMap-defaultState"><a href="#handleActions-reducerMap-defaultState" class="headerlink" title="handleActions(reducerMap, defaultState)"></a><code>handleActions(reducerMap, defaultState)</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; handleActions &#125; <span class="keyword">from</span> <span class="string">'redux-actions'</span>;</div></pre></td></tr></table></figure>
<p>Creates multiple reducers using <code>handleAction()</code> and combines them into a single reducer that handles multiple actions. Accepts a map where the keys are passed as the first parameter to <code>handleAction()</code> (the action type), and the values are passed as the second parameter (either a reducer or reducer map). The map must not be empty.</p>
<p>The second parameter <code>defaultState</code> is required, and is used when <code>undefined</code> is passed to the reducer.</p>
<p>(Internally, <code>handleActions()</code> works by applying multiple reducers in sequence using <a href="https://github.com/acdlite/reduce-reducers" target="_blank" rel="external">reduce-reducers</a>.)</p>
<p>Example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> reducer = handleActions(&#123;</div><div class="line">  <span class="attr">INCREMENT</span>: <span class="function">(<span class="params">state, action</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="attr">counter</span>: state.counter + action.payload</div><div class="line">  &#125;),</div><div class="line"></div><div class="line">  <span class="attr">DECREMENT</span>: <span class="function">(<span class="params">state, action</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="attr">counter</span>: state.counter - action.payload</div><div class="line">  &#125;)</div><div class="line">&#125;, &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;);</div></pre></td></tr></table></figure>
<h3 id="combineActions-types"><a href="#combineActions-types" class="headerlink" title="combineActions(...types)"></a><code>combineActions(...types)</code></h3><p>Combine any number of action types or action creators. <code>types</code> is a list of positional arguments which can be action type strings, symbols, or action creators.</p>
<p>This allows you to reduce multiple distinct actions with the same reducer.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; increment, decrement &#125; = createActions(&#123;</div><div class="line">  <span class="attr">INCREMENT</span>: <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; amount &#125;),</div><div class="line">  <span class="attr">DECREMENT</span>: <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; <span class="attr">amount</span>: -amount &#125;),</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> reducer = handleAction(combineActions(increment, decrement), &#123;</div><div class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">state, &#123; payload: &#123; amount &#125; &#125;</span>) =&gt;</span> (&#123; ...state, <span class="attr">counter</span>: state.counter + amount &#125;),</div><div class="line">  <span class="attr">throw</span>: <span class="function"><span class="params">state</span> =&gt;</span> (&#123; ...state, <span class="attr">counter</span>: <span class="number">0</span> &#125;),</div><div class="line">&#125;, &#123; <span class="attr">counter</span>: <span class="number">10</span> &#125;)</div><div class="line"></div><div class="line">expect(reducer(<span class="literal">undefined</span>, increment(<span class="number">1</span>)).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">11</span> &#125;)</div><div class="line">expect(reducer(<span class="literal">undefined</span>, decrement(<span class="number">1</span>)).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">9</span> &#125;)</div><div class="line">expect(reducer(<span class="literal">undefined</span>, increment(<span class="keyword">new</span> <span class="built_in">Error</span>)).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;)</div><div class="line">expect(reducer(<span class="literal">undefined</span>, decrement(<span class="keyword">new</span> <span class="built_in">Error</span>)).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;)</div></pre></td></tr></table></figure>
<p>Hereâ€™s an example using <code>handleActions</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; increment, decrement &#125; = createActions(&#123;</div><div class="line">  <span class="attr">INCREMENT</span>: <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; amount &#125;),</div><div class="line">  <span class="attr">DECREMENT</span>: <span class="function"><span class="params">amount</span> =&gt;</span> (&#123; <span class="attr">amount</span>: -amount &#125;)</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> reducer = handleActions(&#123;</div><div class="line">  [combineActions(increment, decrement)](state, &#123; <span class="attr">payload</span>: &#123; amount &#125; &#125;) &#123;</div><div class="line">    <span class="keyword">return</span> &#123; ...state, <span class="attr">counter</span>: state.counter + amount &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;, &#123; <span class="attr">counter</span>: <span class="number">10</span> &#125;);</div><div class="line"></div><div class="line">expect(reducer(&#123; <span class="attr">counter</span>: <span class="number">5</span> &#125;, increment(<span class="number">5</span>))).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">10</span> &#125;);</div><div class="line">expect(reducer(&#123; <span class="attr">counter</span>: <span class="number">5</span> &#125;, decrement(<span class="number">5</span>))).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;);</div><div class="line">expect(reducer(&#123; <span class="attr">counter</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">type</span>: <span class="string">'NOT_TYPE'</span>, <span class="attr">payload</span>: <span class="number">1000</span> &#125;)).to.equal(&#123; <span class="attr">counter</span>: <span class="number">5</span> &#125;);</div><div class="line">expect(reducer(<span class="literal">undefined</span>, increment(<span class="number">5</span>))).to.deep.equal(&#123; <span class="attr">counter</span>: <span class="number">15</span> &#125;);</div></pre></td></tr></table></figure>
<h2 id="Usage-with-middleware"><a href="#Usage-with-middleware" class="headerlink" title="Usage with middleware"></a>Usage with middleware</h2><p>redux-actions is handy all by itself, however, its real power comes when you combine it with middleware.</p>
<p>The identity form of <code>createAction</code> is a great way to create a single action creator that handles multiple payload types. For example, using <a href="https://github.com/acdlite/redux-promise" target="_blank" rel="external">redux-promise</a> and <a href="https://github.com/acdlite/redux-rx" target="_blank" rel="external">redux-rx</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> addTodo = createAction(<span class="string">'ADD_TODO'</span>);</div><div class="line"></div><div class="line"><span class="comment">// A single reducer...</span></div><div class="line">handleAction(<span class="string">'ADD_TODO'</span>, (state = &#123; <span class="attr">todos</span>: [] &#125;, action) =&gt; (&#123;</div><div class="line">  ...state,</div><div class="line">  <span class="attr">todos</span>: [...state.todos, action.payload]</div><div class="line">&#125;));</div><div class="line"></div><div class="line"><span class="comment">// ...that works with all of these forms:</span></div><div class="line"><span class="comment">// (Don't forget to use `bindActionCreators()` or equivalent.</span></div><div class="line"><span class="comment">// I've left that bit out)</span></div><div class="line">addTodo(<span class="string">'Use Redux'</span>)</div><div class="line">addTodo(<span class="built_in">Promise</span>.resolve(<span class="string">'Weep with joy'</span>));</div><div class="line">addTodo(Observable.of(</div><div class="line">  <span class="string">'Learn about middleware'</span>,</div><div class="line">  <span class="string">'Learn about higher-order stores'</span></div><div class="line">)).subscribe();</div></pre></td></tr></table></figure>
<h2 id="See-also"><a href="#See-also" class="headerlink" title="See also"></a>See also</h2><p>Use redux-actions in combination with FSA-compliant libraries.</p>
<ul>
<li><a href="https://github.com/acdlite/redux-promise" target="_blank" rel="external">redux-promise</a> - Promise middleware</li>
<li><a href="https://github.com/acdlite/redux-rx" target="_blank" rel="external">redux-rx</a> - Includes observable middleware.</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React-Native-Immutable]]></title>
      <url>http://yoursite.com/2017/03/27/React-Native-Immutable/</url>
      <content type="html"><![CDATA[<h1 id="react-native-immutable"><a href="#react-native-immutable" class="headerlink" title="react-native-immutable"></a>react-native-immutable</h1><p><strong>using immutable.js library as store with react &amp;&amp; react-native</strong></p>
<p>More info of <a href="http://facebook.github.io/immutable-js/" target="_blank" rel="external">immutable.js</a></p>
<hr>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> react-<span class="keyword">native</span>-immutable <span class="comment">--save</span></div></pre></td></tr></table></figure>
<h2 id="Useage"><a href="#Useage" class="headerlink" title="Useage"></a>Useage</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">react-native project</div><div class="line">   <span class="string">|---index.ios.js</span></div><div class="line">   <span class="string">|---App</span></div><div class="line">         <span class="string">|---Actions</span></div><div class="line">         	   <span class="string">|--- mainAction.js</span></div><div class="line">         	   <span class="string">|--- userAction.js</span></div><div class="line">         	   <span class="string">|--- articleAction.js</span></div><div class="line">         	   <span class="string">|--- ...</span></div><div class="line">         <span class="string">|---Stores</span></div><div class="line">         	   <span class="string">|--- mainStore.js</span></div><div class="line">         	   <span class="string">|--- userStore.js</span></div><div class="line">         	   <span class="string">|--- articleStore.js</span></div><div class="line">         	   <span class="string">|--- ...</span></div><div class="line">         <span class="string">|---Webapi</span></div></pre></td></tr></table></figure>
<h3 id="index-ios-js"><a href="#index-ios-js" class="headerlink" title="index.ios.js"></a>index.ios.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react-native'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123; mixins &#125; = <span class="built_in">require</span>(<span class="string">'react-native-immutable'</span>);</div><div class="line"><span class="keyword">var</span> StoreMixin = mixins.StoreMixin;</div><div class="line"><span class="keyword">var</span> appStore = <span class="built_in">require</span>(<span class="string">'./App/Stores/mainStore'</span>);</div><div class="line"><span class="keyword">var</span> appAction = <span class="built_in">require</span>(<span class="string">'./App/Actions/mainAction'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123;</div><div class="line">  AppRegistry,</div><div class="line">  StyleSheet,</div><div class="line">  View,</div><div class="line">  Text</div><div class="line">&#125; = React;</div><div class="line"></div><div class="line"><span class="keyword">var</span> App = React.createClass(&#123;</div><div class="line">    <span class="attr">mixins</span>: [StoreMixin(appStore,<span class="string">"user"</span>,<span class="string">"article"</span>)],</div><div class="line">    <span class="attr">onChangeUserName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    	appAction.emit(<span class="string">'onChangeUserName'</span>, <span class="string">"wilson"</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        </div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state);  <span class="comment">// when store was changed, the state will change;</span></div><div class="line">        </div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.state.username)</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> (</div><div class="line">        	<span class="xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></div><div class="line">        		<span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;this.onChangeUserName&#125;</span>&gt;</span>Change user name<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></div><div class="line">        	<span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line">        )   </div><div class="line">    &#125; </div><div class="line">&#125;);</div><div class="line">    </div><div class="line">    </div><div class="line">AppRegistry.registerComponent(<span class="string">'DEMO'</span>, () =&gt; App);</div></pre></td></tr></table></figure>
<h3 id="mainAction-js"><a href="#mainAction-js" class="headerlink" title="mainAction.js"></a>mainAction.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123;Action&#125; = <span class="built_in">require</span>(<span class="string">'react-native-immutable'</span>);</div><div class="line"></div><div class="line"><span class="comment">// require userAction</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./userAction'</span>)();</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// require articleAction</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./articleAction'</span>)();</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Action;</div></pre></td></tr></table></figure>
<h3 id="userAction-js"><a href="#userAction-js" class="headerlink" title="userAction.js"></a>userAction.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Immutable = <span class="built_in">require</span>(<span class="string">'immutable'</span>);</div><div class="line"><span class="keyword">var</span> &#123;Action&#125; = <span class="built_in">require</span>(<span class="string">'react-native-immutable'</span>);</div><div class="line"><span class="keyword">var</span> appStore = <span class="built_in">require</span>(<span class="string">'../Stores/mainStore'</span>);</div><div class="line"></div><div class="line"><span class="comment">// æ›´æ–°ç®¡ç†å‘˜</span></div><div class="line"><span class="keyword">var</span> userAction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	Action.on(<span class="string">'onChangeUserName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">		<span class="comment">// study immutable.js visit http://facebook.github.io/immutable-js/</span></div><div class="line">    	appStore.getStore(<span class="string">"user"</span>).set(<span class="string">'name'</span>, name );</div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = userAction;</div></pre></td></tr></table></figure>
<h3 id="mainStore-js"><a href="#mainStore-js" class="headerlink" title="mainStore.js"></a>mainStore.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> Immutable = <span class="built_in">require</span>(<span class="string">'immutable'</span>);</div><div class="line"><span class="keyword">var</span> &#123;Store,Action&#125; = <span class="built_in">require</span>(<span class="string">'react-native-immutable'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react-native'</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> appStore = <span class="built_in">module</span>.exports = Store(&#123;</div><div class="line">    <span class="attr">user</span>: <span class="built_in">require</span>(<span class="string">'./userStore'</span>),</div><div class="line">    <span class="attr">article</span>: <span class="built_in">require</span>(<span class="string">'./articleStore'</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Use AsyncStorage if u what</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> &#123;</div><div class="line">    AsyncStorage</div><div class="line">&#125; = React;</div><div class="line"></div><div class="line"><span class="keyword">var</span> db_name = <span class="string">"app_store"</span>;</div><div class="line"></div><div class="line">Action.on(<span class="string">"_updateStore"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    AsyncStorage.setItem(db_name, <span class="built_in">JSON</span>.stringify(data), <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (err) &#123;</div><div class="line">            <span class="built_in">console</span>.error(<span class="string">"error"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//initial Data</span></div><div class="line">AsyncStorage.getItem(db_name, <span class="function"><span class="keyword">function</span>(<span class="params">err, res</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (err) &#123;</div><div class="line">        <span class="built_in">console</span>.error(<span class="string">"error"</span>)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span>( <span class="keyword">typeof</span> res == <span class="literal">undefined</span> )&#123;</div><div class="line">            Action.emit(<span class="string">"_updateStore"</span>,appStore.getData());</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            appStore = Immutable.fromJS(<span class="built_in">JSON</span>.parse(res));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="userStore-js"><a href="#userStore-js" class="headerlink" title="userStore.js"></a>userStore.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">''</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Immutable.js-doc]]></title>
      <url>http://yoursite.com/2017/03/26/Immutable-js/</url>
      <content type="html"><![CDATA[<h1 id="Immutable-collections-for-JavaScript"><a href="#Immutable-collections-for-JavaScript" class="headerlink" title="Immutable collections for JavaScript"></a>Immutable collections for JavaScript</h1><p><a href="https://travis-ci.org/facebook/immutable-js" target="_blank" rel="external"><img src="https://travis-ci.org/facebook/immutable-js.svg?branch=master" alt="Build Status"></a></p>
<p><a href="http://en.wikipedia.org/wiki/Immutable_object" target="_blank" rel="external">Immutable</a> data cannot be changed once created, leading to much simpler<br>application development, no defensive copying, and enabling advanced memoization<br>and change detection techniques with simple logic. <a href="http://en.wikipedia.org/wiki/Persistent_data_structure" target="_blank" rel="external">Persistent</a> data presents<br>a mutative API which does not update the data in-place, but instead always<br>yields new updated data.</p>
<p>Immutable.js provides many Persistent Immutable data structures including:<br><code>List</code>, <code>Stack</code>, <code>Map</code>, <code>OrderedMap</code>, <code>Set</code>, <code>OrderedSet</code> and <code>Record</code>.</p>
<p>These data structures are highly efficient on modern JavaScript VMs by using<br>structural sharing via <a href="http://en.wikipedia.org/wiki/Hash_array_mapped_trie" target="_blank" rel="external">hash maps tries</a> and <a href="http://hypirion.com/musings/understanding-persistent-vector-pt-1" target="_blank" rel="external">vector tries</a> as popularized<br>by Clojure and Scala, minimizing the need to copy or cache data.</p>
<p>Immutable.js also provides a lazy <code>Seq</code>, allowing efficient<br>chaining of collection methods like <code>map</code> and <code>filter</code> without creating<br>intermediate representations. Create some <code>Seq</code> with <code>Range</code> and <code>Repeat</code>.</p>
<p>Want to hear more? Watch the presentation about Immutable.js:</p>
<p><a href="https://youtu.be/I7IdS-PbEgI" target="_blank" alt="Immutable Data and React"><img src="https://img.youtube.com/vi/I7IdS-PbEgI/0.jpg"></a></p>
<h2 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h2><p>Install <code>immutable</code> using npm.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install immutable</div></pre></td></tr></table></figure>
<p>Then require it into any module.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)</div><div class="line"><span class="keyword">const</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>)</div><div class="line">map1.get(<span class="string">'b'</span>) <span class="comment">// 2</span></div><div class="line">map2.get(<span class="string">'b'</span>) <span class="comment">// 50</span></div></pre></td></tr></table></figure>
<h3 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h3><p>To use Immutable.js from a browser, download <a href="https://github.com/facebook/immutable-js/blob/master/dist/immutable.min.js" target="_blank" rel="external">dist/immutable.min.js</a><br>or use a CDN such as <a href="https://cdnjs.com/libraries/immutable" target="_blank" rel="external">CDNJS</a><br>or <a href="http://www.jsdelivr.com/#!immutable.js" target="_blank" rel="external">jsDelivr</a>.</p>
<p>Then, add it as a script tag to your page:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"immutable.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">    <span class="keyword">var</span> map1 = Immutable.Map(&#123;a:<span class="number">1</span>, b:<span class="number">2</span>, c:<span class="number">3</span>&#125;);</div><div class="line">    <span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">    map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">    map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Or use an AMD loader (such as <a href="http://requirejs.org/" target="_blank" rel="external">RequireJS</a>):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'./immutable.min.js'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">Immutable</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line">    <span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">    map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">    map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>If youâ€™re using <a href="https://webpack.github.io/" target="_blank" rel="external">webpack</a> or<br><a href="http://browserify.org/" target="_blank" rel="external">browserify</a>, the <code>immutable</code> npm module also works<br>from the browser.</p>
<h3 id="Flow-amp-TypeScript"><a href="#Flow-amp-TypeScript" class="headerlink" title="Flow &amp; TypeScript"></a>Flow &amp; TypeScript</h3><p>Use these Immutable collections and sequences as you would use native<br>collections in your <a href="https://flowtype.org/" target="_blank" rel="external">Flowtype</a> or <a href="http://typescriptlang.org" target="_blank" rel="external">TypeScript</a> programs while still taking<br>advantage of type generics, error detection, and auto-complete in your IDE.</p>
<p>Installing <code>immutable</code> via npm brings with it type definitions for Flow (v0.39.0 or higher)<br>and TypeScript (v2.1.0 or higher), so you shouldnâ€™t need to do anything at all!</p>
<h4 id="Using-TypeScript-with-Immutable-js-v4"><a href="#Using-TypeScript-with-Immutable-js-v4" class="headerlink" title="Using TypeScript with Immutable.js v4"></a>Using TypeScript with Immutable.js v4</h4><p>Immutable.js type definitions embrace ES2015. While Immutable.js itself supports<br>legacy browsers and environments, its type definitions require TypeScriptâ€™s 2015<br>lib. Include either <code>&quot;target&quot;: &quot;es2015&quot;</code> or <code>&quot;lib&quot;: &quot;es2015&quot;</code> in your<br><code>tsconfig.json</code>, or provide <code>--target es2015</code> or <code>--lib es2015</code> to the<br><code>tsc</code> command.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; <span class="built_in">Map</span> &#125; <span class="keyword">from</span> <span class="string">"immutable"</span>;</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;);</div><div class="line"><span class="keyword">const</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div></pre></td></tr></table></figure>
<h4 id="Using-TypeScript-with-Immutable-js-v3-and-earlier"><a href="#Using-TypeScript-with-Immutable-js-v3-and-earlier" class="headerlink" title="Using TypeScript with Immutable.js v3 and earlier:"></a>Using TypeScript with Immutable.js v3 and earlier:</h4><p>Previous versions of Immutable.js include a reference file which you can include<br>via relative path to the type definitions at the top of your file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">///&lt;reference path='./node_modules/immutable/dist/immutable.d.ts'/&gt;</span></div><div class="line"><span class="keyword">import</span> Immutable = <span class="built_in">require</span>(<span class="string">'immutable'</span>);</div><div class="line"><span class="keyword">var</span> map1: Immutable.Map&lt;string, number&gt;;</div><div class="line">map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div></pre></td></tr></table></figure>
<h2 id="The-case-for-Immutability"><a href="#The-case-for-Immutability" class="headerlink" title="The case for Immutability"></a>The case for Immutability</h2><p>Much of what makes application development difficult is tracking mutation and<br>maintaining state. Developing with immutable data encourages you to think<br>differently about how data flows through your application.</p>
<p>Subscribing to data events throughout your application creates a huge overhead of<br>book-keeping which can hurt performance, sometimes dramatically, and creates<br>opportunities for areas of your application to get out of sync with each other<br>due to easy to make programmer error. Since immutable data never changes,<br>subscribing to changes throughout the model is a dead-end and new data can only<br>ever be passed from above.</p>
<p>This model of data flow aligns well with the architecture of <a href="http://facebook.github.io/react/" target="_blank" rel="external">React</a><br>and especially well with an application designed using the ideas of <a href="http://facebook.github.io/flux/docs/overview.html" target="_blank" rel="external">Flux</a>.</p>
<p>When data is passed from above rather than being subscribed to, and youâ€™re only<br>interested in doing work when something has changed, you can use equality.</p>
<p>Immutable collections should be treated as <em>values</em> rather than <em>objects</em>. While<br>objects represent some thing which could change over time, a value represents<br>the state of that thing at a particular instance of time. This principle is most<br>important to understanding the appropriate use of immutable data. In order to<br>treat Immutable.js collections as values, itâ€™s important to use the<br><code>Immutable.is()</code> function or <code>.equals()</code> method to determine value equality<br>instead of the <code>===</code> operator which determines object reference identity.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>( &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)</div><div class="line"><span class="keyword">const</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">2</span>)</div><div class="line">assert(map1.equals(map2) === <span class="literal">true</span>)</div><div class="line"><span class="keyword">const</span> map3 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>)</div><div class="line">assert(map1.equals(map3) === <span class="literal">false</span>)</div></pre></td></tr></table></figure>
<p>Note: As a performance optimization Immutable.js attempts to return the existing<br>collection when an operation would result in an identical collection, allowing<br>for using <code>===</code> reference equality to determine if something definitely has not<br>changed. This can be extremely useful when used within a memoization function<br>which would prefer to re-run the function if a deeper equality check could<br>potentially be more costly. The <code>===</code> equality check is also used internally by<br><code>Immutable.is</code> and <code>.equals()</code> as a performance optimization.</p>
<p>If an object is immutable, it can be â€œcopiedâ€ simply by making another reference<br>to it instead of copying the entire object. Because a reference is much smaller<br>than the object itself, this results in memory savings and a potential boost in<br>execution speed for programs which rely on copies (such as an undo-stack).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)</div><div class="line"><span class="keyword">const</span> clone = map1;</div></pre></td></tr></table></figure>
<h2 id="JavaScript-first-API"><a href="#JavaScript-first-API" class="headerlink" title="JavaScript-first API"></a>JavaScript-first API</h2><p>While Immutable.js is inspired by Clojure, Scala, Haskell and other functional<br>programming environments, itâ€™s designed to bring these powerful concepts to<br>JavaScript, and therefore has an Object-Oriented API that closely mirrors that<br>of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla" target="_blank" rel="external">ES2015</a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a>.</p>
<p>The difference for the immutable collections is that methods which would mutate<br>the collection, like <code>push</code>, <code>set</code>, <code>unshift</code> or <code>splice</code> instead return a new<br>immutable collection. Methods which return new arrays like <code>slice</code> or <code>concat</code><br>instead return new immutable collections.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; List &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> list1 = List([ <span class="number">1</span>, <span class="number">2</span> ]);</div><div class="line"><span class="keyword">const</span> list2 = list1.push(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> list3 = list2.unshift(<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> list4 = list1.concat(list2, list3);</div><div class="line">assert(list1.size === <span class="number">2</span>);</div><div class="line">assert(list2.size === <span class="number">5</span>);</div><div class="line">assert(list3.size === <span class="number">6</span>);</div><div class="line">assert(list4.size === <span class="number">13</span>);</div><div class="line">assert(list4.get(<span class="number">0</span>) === <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>Almost all of the methods on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a> will be found in similar form on<br><code>Immutable.List</code>, those of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a> found on <code>Immutable.Map</code>, and those of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a><br>found on <code>Immutable.Set</code>, including collection operations like <code>forEach()</code><br>and <code>map()</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> alpha = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span> &#125;);</div><div class="line">alpha.map(<span class="function">(<span class="params">v, k</span>) =&gt;</span> k.toUpperCase()).join();</div><div class="line"><span class="comment">// 'A,B,C,D'</span></div></pre></td></tr></table></figure>
<h3 id="Accepts-raw-JavaScript-objects"><a href="#Accepts-raw-JavaScript-objects" class="headerlink" title="Accepts raw JavaScript objects."></a>Accepts raw JavaScript objects.</h3><p>Designed to inter-operate with your existing JavaScript, Immutable.js<br>accepts plain JavaScript Arrays and Objects anywhere a method expects an<br><code>Collection</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span> &#125;)</div><div class="line"><span class="keyword">const</span> map2 = <span class="built_in">Map</span>(&#123; <span class="attr">c</span>: <span class="number">10</span>, <span class="attr">a</span>: <span class="number">20</span>, <span class="attr">t</span>: <span class="number">30</span> &#125;)</div><div class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">d</span>: <span class="number">100</span>, <span class="attr">o</span>: <span class="number">200</span>, <span class="attr">g</span>: <span class="number">300</span> &#125;</div><div class="line"><span class="keyword">const</span> map3 = map1.merge(map2, obj);</div><div class="line"><span class="comment">// Map &#123; a: 20, b: 2, c: 10, d: 100, t: 30, o: 200, g: 300 &#125;</span></div></pre></td></tr></table></figure>
<p>This is possible because Immutable.js can treat any JavaScript Array or Object<br>as a Collection. You can take advantage of this in order to get sophisticated<br>collection methods on JavaScript Objects, which otherwise have a very sparse<br>native API. Because Seq evaluates lazily and does not cache intermediate<br>results, these operations can be extremely efficient.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; Seq &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> myObject = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;</div><div class="line">Seq(myObject).map(<span class="function"><span class="params">x</span> =&gt;</span> x * x).toObject();</div><div class="line"><span class="comment">// &#123; a: 1, b: 4, c: 9 &#125;</span></div></pre></td></tr></table></figure>
<p>Keep in mind, when using JS objects to construct Immutable Maps, that<br>JavaScript Object properties are always strings, even if written in a quote-less<br>shorthand, while Immutable Maps accept keys of any type.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; fromJS &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> obj = &#123; <span class="number">1</span>: <span class="string">"one"</span> &#125;</div><div class="line"><span class="built_in">Object</span>.keys(obj) <span class="comment">// [ "1" ]</span></div><div class="line">obj[<span class="string">"1"</span>] <span class="comment">// "one"</span></div><div class="line">obj[<span class="number">1</span>]   <span class="comment">// "one"</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map = fromJS(obj)</div><div class="line">map.get(<span class="string">"1"</span>) <span class="comment">// "one"</span></div><div class="line">map.get(<span class="number">1</span>)   <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<p>Property access for JavaScript Objects first converts the key to a string, but<br>since Immutable Map keys can be of any type the argument to <code>get()</code> is<br>not altered.</p>
<h3 id="Converts-back-to-raw-JavaScript-objects"><a href="#Converts-back-to-raw-JavaScript-objects" class="headerlink" title="Converts back to raw JavaScript objects."></a>Converts back to raw JavaScript objects.</h3><p>All Immutable.js Collections can be converted to plain JavaScript Arrays and<br>Objects shallowly with <code>toArray()</code> and <code>toObject()</code> or deeply with <code>toJS()</code>.<br>All Immutable Collections also implement <code>toJSON()</code> allowing them to be passed<br>to <code>JSON.stringify</code> directly.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, List &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> deep = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: List([ <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]) &#125;)</div><div class="line">deep.toObject() <span class="comment">// &#123; a: 1, b: 2, c: List [ 3, 4, 5 ] &#125;</span></div><div class="line">deep.toArray() <span class="comment">// [ 1, 2, List [ 3, 4, 5 ] ]</span></div><div class="line">deep.toJS() <span class="comment">// &#123; a: 1, b: 2, c: [ 3, 4, 5 ] &#125;</span></div><div class="line"><span class="built_in">JSON</span>.stringify(deep) <span class="comment">// '&#123;"a":1,"b":2,"c":[3,4,5]&#125;'</span></div></pre></td></tr></table></figure>
<h3 id="Embraces-ES2015"><a href="#Embraces-ES2015" class="headerlink" title="Embraces ES2015"></a>Embraces ES2015</h3><p>Immutable.js supports all JavaScript environments, including legacy<br>browsers (even IE8). However it also takes advantage of features added to<br>JavaScript in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla" target="_blank" rel="external">ES2015</a>, the latest standard version of JavaScript, including<br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol" target="_blank" rel="external">Iterators</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="external">Arrow Functions</a>, <a href="http://wiki.ecmascript.org/doku.php?id=strawman:maximally_minimal_classes" target="_blank" rel="external">Classes</a>, and <a href="http://www.2ality.com/2014/09/es6-modules-final.html" target="_blank" rel="external">Modules</a>. Itâ€™s inspired<br>by the native <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a> collections added to ES2015.</p>
<p>All examples in the Documentation are presented in ES2015. To run in all<br>browsers, they need to be translated to ES3.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ES2015</span></div><div class="line"><span class="keyword">const</span> mapped = foo.map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</div><div class="line"><span class="comment">// ES3</span></div><div class="line"><span class="keyword">var</span> mapped = foo.map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x; &#125;);</div></pre></td></tr></table></figure>
<h2 id="Nested-Structures"><a href="#Nested-Structures" class="headerlink" title="Nested Structures"></a>Nested Structures</h2><p>The collections in Immutable.js are intended to be nested, allowing for deep<br>trees of data, similar to JSON.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; fromJS &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> nested = fromJS(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: [ <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ] &#125; &#125; &#125;)</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ] &#125; &#125; &#125;</span></div></pre></td></tr></table></figure>
<p>A few power-tools allow for reading and operating on nested data. The<br>most useful are <code>mergeDeep</code>, <code>getIn</code>, <code>setIn</code>, and <code>updateIn</code>, found on <code>List</code>,<br><code>Map</code> and <code>OrderedMap</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nested2 = nested.mergeDeep(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">d</span>: <span class="number">6</span> &#125; &#125; &#125;)</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ], d: 6 &#125; &#125; &#125;</span></div><div class="line"></div><div class="line">nested2.getIn([ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span> ]) <span class="comment">// 6</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> nested3 = nested2.updateIn([ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span> ], value =&gt; value + <span class="number">1</span>)</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ], d: 7 &#125; &#125; &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> nested4 = nested3.updateIn([ <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> ], list =&gt; list.push(<span class="number">6</span>))</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5, 6 ], d: 7 &#125; &#125; &#125;</span></div></pre></td></tr></table></figure>
<h2 id="Lazy-Seq"><a href="#Lazy-Seq" class="headerlink" title="Lazy Seq"></a>Lazy Seq</h2><p><code>Seq</code> describes a lazy operation, allowing them to efficiently chain<br>use of all the sequence methods (such as <code>map</code> and <code>filter</code>).</p>
<p><strong>Seq is immutable</strong> â€” Once a Seq is created, it cannot be<br>changed, appended to, rearranged or otherwise modified. Instead, any mutative<br>method called on a Seq will return a new Seq.</p>
<p><strong>Seq is lazy</strong> â€” Seq does as little work as necessary to respond to any<br>method call.</p>
<p>For example, the following does not perform any work, because the resulting<br>Seq is never used:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; Seq &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> oddSquares = Seq([ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> ])</div><div class="line">  .filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span>)</div><div class="line">  .map(<span class="function"><span class="params">x</span> =&gt;</span> x * x)</div></pre></td></tr></table></figure>
<p>Once the Seq is used, it performs only the work necessary. In this<br>example, no intermediate arrays are ever created, filter is called three times,<br>and map is only called once:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(oddSquares.get(<span class="number">1</span>)); <span class="comment">// 9</span></div></pre></td></tr></table></figure>
<p>Any collection can be converted to a lazy Seq with <code>.toSeq()</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span> &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> seq = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;).toSeq()</div></pre></td></tr></table></figure>
<p>Seq allows for the efficient chaining of sequence operations, especially when<br>converting to a different concrete type (such as to a JS object):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">seq.flip().map(<span class="function"><span class="params">key</span> =&gt;</span> key.toUpperCase()).flip().toObject();</div><div class="line"><span class="comment">// &#123; A: 1, B: 1, C: 1 &#125;</span></div></pre></td></tr></table></figure>
<p>As well as expressing logic that would otherwise seem memory-limited:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; Range &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line">Range(<span class="number">1</span>, <span class="literal">Infinity</span>)</div><div class="line">  .skip(<span class="number">1000</span>)</div><div class="line">  .map(<span class="function"><span class="params">n</span> =&gt;</span> -n)</div><div class="line">  .filter(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)</div><div class="line">  .take(<span class="number">2</span>)</div><div class="line">  .reduce(<span class="function">(<span class="params">r, n</span>) =&gt;</span> r * n, <span class="number">1</span>);</div><div class="line"><span class="comment">// 1006008</span></div></pre></td></tr></table></figure>
<p>Note: A Collection is always iterated in the same order, however that order may<br>not always be well defined, as is the case for the <code>Map</code>.</p>
<h2 id="Equality-treats-Collections-as-Data"><a href="#Equality-treats-Collections-as-Data" class="headerlink" title="Equality treats Collections as Data"></a>Equality treats Collections as Data</h2><p>Immutable.js provides equality which treats immutable data structures as pure<br>data, performing a deep equality check if necessary.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, is &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)</div><div class="line"><span class="keyword">const</span> map2 = <span class="built_in">Map</span>(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;)</div><div class="line">assert(map1 !== map2) <span class="comment">// two different instances</span></div><div class="line">assert(is(map1, map2)) <span class="comment">// have equivalent values</span></div><div class="line">assert(map1.equals(map2)) <span class="comment">// alternatively use the equals method</span></div></pre></td></tr></table></figure>
<p><code>Immutable.is()</code> uses the same measure of equality as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="external">Object.is</a><br>including if both are immutable and all keys and values are equal<br>using the same measure of equality.</p>
<h2 id="Batching-Mutations"><a href="#Batching-Mutations" class="headerlink" title="Batching Mutations"></a>Batching Mutations</h2><blockquote>
<p>If a tree falls in the woods, does it make a sound?</p>
<p>If a pure function mutates some local data in order to produce an immutable<br>return value, is that ok?</p>
<p>â€” Rich Hickey, Clojure</p>
</blockquote>
<p>Applying a mutation to create a new immutable object results in some overhead,<br>which can add up to a minor performance penalty. If you need to apply a series<br>of mutations locally before returning, Immutable.js gives you the ability to<br>create a temporary mutable (transient) copy of a collection and apply a batch of<br>mutations in a performant manner by using <code>withMutations</code>. In fact, this is<br>exactly how  Immutable.js applies complex mutations itself.</p>
<p>As an example, building <code>list2</code> results in the creation of 1, not 3, new<br>immutable Lists.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123; List &#125; = <span class="built_in">require</span>(<span class="string">'immutable'</span>)</div><div class="line"><span class="keyword">const</span> list1 = List([ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]);</div><div class="line"><span class="keyword">const</span> list2 = list1.withMutations(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line">  list.push(<span class="number">4</span>).push(<span class="number">5</span>).push(<span class="number">6</span>);</div><div class="line">&#125;);</div><div class="line">assert(list1.size === <span class="number">3</span>);</div><div class="line">assert(list2.size === <span class="number">6</span>);</div></pre></td></tr></table></figure>
<p>Note: Immutable.js also provides <code>asMutable</code> and <code>asImmutable</code>, but only<br>encourages their use when <code>withMutations</code> will not suffice. Use caution to not<br>return a mutable copy, which could result in undesired behavior.</p>
<p><em>Important!</em>: Only a select few methods can be used in <code>withMutations</code> including<br><code>set</code>, <code>push</code> and <code>pop</code>. These methods can be applied directly against a<br>persistent data-structure where other methods like <code>map</code>, <code>filter</code>, <code>sort</code>,<br>and <code>splice</code> will always return new immutable data-structures and never mutate<br>a mutable collection.</p>
<h2 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2><p><a href="http://facebook.github.io/immutable-js/docs/" target="_blank" rel="external">Read the docs</a> and eat your vegetables.</p>
<p>Docs are automatically generated from <a href="https://github.com/facebook/immutable-js/blob/master/type-definitions/Immutable.d.ts" target="_blank" rel="external">Immutable.d.ts</a>.<br>Please contribute!</p>
<p>Also, donâ€™t miss the <a href="https://github.com/facebook/immutable-js/wiki" target="_blank" rel="external">Wiki</a> which<br>contains articles on specific topics. Canâ€™t find something? Open an <a href="https://github.com/facebook/immutable-js/issues" target="_blank" rel="external">issue</a>.</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>If you are using the <a href="http://chaijs.com/" target="_blank" rel="external">Chai Assertion Library</a>, <a href="https://github.com/astorije/chai-immutable" target="_blank" rel="external">Chai Immutable</a> provides a set of assertions to use against Immutable.js collections.</p>
<h2 id="Contribution"><a href="#Contribution" class="headerlink" title="Contribution"></a>Contribution</h2><p>Use <a href="https://github.com/facebook/immutable-js/issues" target="_blank" rel="external">Github issues</a> for requests.</p>
<p>We actively welcome pull requests, learn how to <a href="./CONTRIBUTING.md">contribute</a>.</p>
<h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><p>Changes are tracked as <a href="https://github.com/facebook/immutable-js/releases" target="_blank" rel="external">Github releases</a>.</p>
<h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://www.youtube.com/watch?v=K2NYwP90bNs" target="_blank" rel="external">Phil Bagwell</a>, for his inspiration<br>and research in persistent data structures.</p>
<p><a href="https://github.com/hughfdjackson/" target="_blank" rel="external">Hugh Jackson</a>, for providing the npm package<br>name. If youâ€™re looking for his unsupported package, see <a href="https://github.com/hughfdjackson/immutable" target="_blank" rel="external">this repository</a>.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>Immutable.js is <a href="https://github.com/facebook/immutable-js/blob/master/LICENSE" target="_blank" rel="external">BSD-licensed</a>. We also provide an additional <a href="https://github.com/facebook/immutable-js/blob/master/PATENTS" target="_blank" rel="external">patent grant</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[paserServer-Dashboard]]></title>
      <url>http://yoursite.com/2017/03/26/paserServer-Dashboard/</url>
      <content type="html"><![CDATA[<h1 id="Parse-Dashboard"><a href="#Parse-Dashboard" class="headerlink" title="Parse Dashboard"></a>Parse Dashboard</h1><p><a href="https://travis-ci.org/ParsePlatform/parse-dashboard" target="_blank" rel="external"><img src="https://img.shields.io/travis/ParsePlatform/parse-dashboard/master.svg?style=flat" alt="Build Status"></a><br><a href="https://www.npmjs.com/package/parse-dashboard" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/parse-dashboard.svg?style=flat" alt="npm version"></a></p>
<p>Parse Dashboard is a standalone dashboard for managing your Parse apps. You can use it to manage your <a href="https://github.com/ParsePlatform/parse-server" target="_blank" rel="external">Parse Server</a> apps and your apps that are running on <a href="https://Parse.com" target="_blank" rel="external">Parse.com</a>.</p>
<ul>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#local-installation">Local Installation</a><ul>
<li><a href="#configuring-parse-dashboard">Configuring Parse Dashboard</a></li>
<li><a href="#managing-multiple-apps">Managing Multiple Apps</a></li>
<li><a href="#other-configuration-options">Other Configuration Options</a></li>
</ul>
</li>
<li><a href="#running-as-express-middleware">Running as Express Middleware</a></li>
<li><a href="#deploying-parse-dashboard">Deploying Parse Dashboard</a><ul>
<li><a href="#preparing-for-deployment">Preparing for Deployment</a></li>
<li><a href="#security-considerations">Security Considerations</a><ul>
<li><a href="#configuring-basic-authentication">Configuring Basic Authentication</a></li>
<li><a href="#separating-app-access-based-on-user-identity">Separating App Access Based on User Identity</a></li>
</ul>
</li>
<li><a href="#run-with-docker">Run with Docker</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
</ul>
<h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><p><a href="https://nodejs.org" target="_blank" rel="external">Node.js</a> version &gt;= 4.3 is required to run the dashboard. You also need to be using Parse Server version 2.1.4 or higher.</p>
<h1 id="Local-Installation"><a href="#Local-Installation" class="headerlink" title="Local Installation"></a>Local Installation</h1><p>Install the dashboard from <code>npm</code>.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g <span class="keyword">parse</span>-dashboard</div></pre></td></tr></table></figure>
<p>You can launch the dashboard for an app with a single command by supplying an app ID, master key, URL, and name like this:</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">parse-dashboard </span><span class="built_in">--appId</span> <span class="string">yourAppId </span><span class="built_in">--masterKey</span> <span class="string">yourMasterKey </span><span class="built_in">--serverURL</span> <span class="string">"https://example.com/parse"</span> <span class="built_in">--appName</span> <span class="string">optionalName</span></div></pre></td></tr></table></figure>
<p>You may set the host, port and mount path by supplying the <code>--host</code>, <code>--port</code> and <code>--mountPath</code> options to parse-dashboard. You can use anything you want as the app name, or leave it out in which case the app ID will be used.</p>
<p>After starting the dashboard, you can visit <a href="http://localhost:4040" target="_blank" rel="external">http://localhost:4040</a> in your browser:</p>
<p><img src=".github/dash-shot.png" alt="Parse Dashboard"></p>
<h2 id="Configuring-Parse-Dashboard"><a href="#Configuring-Parse-Dashboard" class="headerlink" title="Configuring Parse Dashboard"></a>Configuring Parse Dashboard</h2><h3 id="File"><a href="#File" class="headerlink" title="File"></a>File</h3><p>You can also start the dashboard from the command line with a config file.  To do this, create a new file called <code>parse-dashboard-config.json</code> inside your local Parse Dashboard directory hierarchy.  The file should match the following format:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"serverURL"</span>: <span class="string">"http://localhost:1337/parse"</span>,</div><div class="line">      <span class="attr">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="attr">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="attr">"appName"</span>: <span class="string">"MyApp"</span></div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can then start the dashboard using <code>parse-dashboard --config parse-dashboard-config.json</code>.</p>
<h3 id="Environment-variables"><a href="#Environment-variables" class="headerlink" title="Environment variables"></a>Environment variables</h3><blockquote>
<p>This only works when starting the app using the <code>parse-dashboard</code> command</p>
</blockquote>
<p>There are also two methods you can use to configure the dashboard using environment variables.</p>
<h4 id="Multiple-apps"><a href="#Multiple-apps" class="headerlink" title="Multiple apps"></a>Multiple apps</h4><p>Provide the entire JSON configuration in <code>PARSE_DASHBOARD_CONFIG</code> and it will be parsed just like the config file.</p>
<h4 id="Single-app"><a href="#Single-app" class="headerlink" title="Single app"></a>Single app</h4><p>You can also define each configuration option individually.</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">HOST:</span> <span class="string">"0.0.0.0"</span></div><div class="line"><span class="symbol">PORT:</span> <span class="string">"4040"</span></div><div class="line"><span class="symbol">MOUNT_PATH:</span> <span class="string">"/"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_TRUST_PROXY:</span> undefined <span class="comment">// Or "1" to trust connection info from a proxy's X-Forwarded-* headers</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_SERVER_URL:</span> <span class="string">"http://localhost:1337/parse"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_MASTER_KEY:</span> <span class="string">"myMasterKey"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_APP_ID:</span> <span class="string">"myAppId"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_APP_NAME:</span> <span class="string">"MyApp"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_USER_ID:</span> <span class="string">"user1"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_USER_PASSWORD:</span> <span class="string">"pass"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_SSL_KEY:</span> <span class="string">"sslKey"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_SSL_CERT:</span> <span class="string">"sslCert"</span></div><div class="line"><span class="symbol">PARSE_DASHBOARD_CONFIG:</span> undefined <span class="comment">// Only for reference, it must not exist</span></div></pre></td></tr></table></figure>
<h2 id="Managing-Multiple-Apps"><a href="#Managing-Multiple-Apps" class="headerlink" title="Managing Multiple Apps"></a>Managing Multiple Apps</h2><p>Managing multiple apps from the same dashboard is also possible.  Simply add additional entries into the <code>parse-dashboard-config.json</code> fileâ€™s <code>&quot;apps&quot;</code> array.</p>
<p>You can manage self-hosted <a href="https://github.com/ParsePlatform/parse-server" target="_blank" rel="external">Parse Server</a> apps, <em>and</em> apps that are hosted on <a href="http://parse.com/" target="_blank" rel="external">Parse.com</a> from the same dashboard. In your config file, you will need to add the <code>restKey</code> and <code>javascriptKey</code> as well as the other paramaters, which you can find on <code>dashboard.parse.com</code>. Set the serverURL to <code>http://api.parse.com/1</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"serverURL"</span>: <span class="string">"https://api.parse.com/1"</span>, <span class="comment">// Hosted on Parse.com</span></div><div class="line">      <span class="string">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="string">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="string">"javascriptKey"</span>: <span class="string">"myJavascriptKey"</span>,</div><div class="line">      <span class="string">"restKey"</span>: <span class="string">"myRestKey"</span>,</div><div class="line">      <span class="string">"appName"</span>: <span class="string">"My Parse.Com App"</span>,</div><div class="line">      <span class="string">"production"</span>: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="string">"serverURL"</span>: <span class="string">"http://localhost:1337/parse"</span>, <span class="comment">// Self-hosted Parse Server</span></div><div class="line">      <span class="string">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="string">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="string">"appName"</span>: <span class="string">"My Parse Server App"</span></div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="App-Icon-Configuration"><a href="#App-Icon-Configuration" class="headerlink" title="App Icon Configuration"></a>App Icon Configuration</h2><p>Parse Dashboard supports adding an optional icon for each app, so you can identify them easier in the list. To do so, you <em>must</em> use the configuration file, define an <code>iconsFolder</code> in it, and define the <code>iconName</code> parameter for each app (including the extension). The path of the <code>iconsFolder</code> is relative to the configuration file. If you have installed ParseDashboard globally you need to use the full path as value for the <code>iconsFolder</code>. To visualize what it means, in the following example <code>icons</code> is a directory located under the same directory as the configuration file:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"serverURL"</span>: <span class="string">"http://localhost:1337/parse"</span>,</div><div class="line">      <span class="attr">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="attr">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="attr">"appName"</span>: <span class="string">"My Parse Server App"</span>,</div><div class="line">      <span class="attr">"iconName"</span>: <span class="string">"MyAppIcon.png"</span>,</div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"iconsFolder"</span>: <span class="string">"icons"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Other-Configuration-Options"><a href="#Other-Configuration-Options" class="headerlink" title="Other Configuration Options"></a>Other Configuration Options</h2><p>You can set <code>appNameForURL</code> in the config file for each app to control the url of your app within the dashboard. This can make it easier to use bookmarks or share links on your dashboard.</p>
<p>To change the app to production, simply set <code>production</code> to <code>true</code> in your config file. The default value is false if not specified.</p>
<h1 id="Running-as-Express-Middleware"><a href="#Running-as-Express-Middleware" class="headerlink" title="Running as Express Middleware"></a>Running as Express Middleware</h1><p>Instead of starting Parse Dashboard with the CLI, you can also run it as an <a href="https://github.com/expressjs/express" target="_blank" rel="external">express</a> middleware.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="keyword">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> ParseDashboard = <span class="keyword">require</span>(<span class="string">'parse-dashboard'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> dashboard = <span class="keyword">new</span> ParseDashboard(&#123;</div><div class="line">  <span class="string">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"serverURL"</span>: <span class="string">"http://localhost:1337/parse"</span>,</div><div class="line">      <span class="string">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="string">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="string">"appName"</span>: <span class="string">"MyApp"</span></div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line"><span class="comment">// make the Parse Dashboard available at /dashboard</span></div><div class="line">app.<span class="keyword">use</span>(<span class="string">'/dashboard'</span>, dashboard);</div><div class="line"></div><div class="line"><span class="keyword">var</span> httpServer = <span class="keyword">require</span>(<span class="string">'http'</span>).createServer(app);</div><div class="line">httpServer.listen(<span class="number">4040</span>);</div></pre></td></tr></table></figure>
<p>If you want to run both <a href="https://github.com/ParsePlatform/parse-server" target="_blank" rel="external">Parse Server</a> and Parse Dashboard on the same server/port, you can run them both as express middleware:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="keyword">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> ParseServer = <span class="keyword">require</span>(<span class="string">'parse-server'</span>).ParseServer;</div><div class="line"><span class="keyword">var</span> ParseDashboard = <span class="keyword">require</span>(<span class="string">'parse-dashboard'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> allowInsecureHTTP = <span class="keyword">false</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> api = <span class="keyword">new</span> ParseServer(&#123;</div><div class="line">	<span class="comment">// Parse Server settings</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> dashboard = <span class="keyword">new</span> ParseDashboard(&#123;</div><div class="line">	<span class="comment">// Parse Dashboard settings</span></div><div class="line">&#125;, allowInsecureHTTP);</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line"><span class="comment">// make the Parse Server available at /parse</span></div><div class="line">app.<span class="keyword">use</span>(<span class="string">'/parse'</span>, api);</div><div class="line"></div><div class="line"><span class="comment">// make the Parse Dashboard available at /dashboard</span></div><div class="line">app.<span class="keyword">use</span>(<span class="string">'/dashboard'</span>, dashboard);</div><div class="line"></div><div class="line"><span class="keyword">var</span> httpServer = <span class="keyword">require</span>(<span class="string">'http'</span>).createServer(app);</div><div class="line">httpServer.listen(<span class="number">4040</span>);</div></pre></td></tr></table></figure>
<h1 id="Deploying-Parse-Dashboard"><a href="#Deploying-Parse-Dashboard" class="headerlink" title="Deploying Parse Dashboard"></a>Deploying Parse Dashboard</h1><h2 id="Preparing-for-Deployment"><a href="#Preparing-for-Deployment" class="headerlink" title="Preparing for Deployment"></a>Preparing for Deployment</h2><p>Make sure the server URLs for your apps can be accessed by your browser. If you are deploying the dashboard, then <code>localhost</code> urls will not work.</p>
<h2 id="Security-Considerations"><a href="#Security-Considerations" class="headerlink" title="Security Considerations"></a>Security Considerations</h2><p>In order to securely deploy the dashboard without leaking your apps master key, you will need to use HTTPS and Basic Authentication.</p>
<p>The deployed dashboard detects if you are using a secure connection. If you are deploying the dashboard behind a load balancer or front-facing proxy, then the app wonâ€™t be able to detect that the connection is secure. In this case, you can start the dashboard with the <code>--trustProxy=1</code> option (or set the PARSE_DASHBOARD_TRUST_PROXY config var to 1) to rely on the X-Forwarded-* headers for the clientâ€™s connection security.  This is useful for hosting on services like Heroku, where you can trust the provided proxy headers to correctly determine whether youâ€™re using HTTP or HTTPS.  You can also turn on this setting when using the dashboard as <a href="https://github.com/expressjs/express" target="_blank" rel="external">express</a> middleware:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> trustProxy = <span class="literal">true</span>;</div><div class="line"><span class="keyword">var</span> dashboard = <span class="keyword">new</span> ParseDashboard(&#123;</div><div class="line">  <span class="string">"apps"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"serverURL"</span>: <span class="string">"http://localhost:1337/parse"</span>,</div><div class="line">      <span class="string">"appId"</span>: <span class="string">"myAppId"</span>,</div><div class="line">      <span class="string">"masterKey"</span>: <span class="string">"myMasterKey"</span>,</div><div class="line">      <span class="string">"appName"</span>: <span class="string">"MyApp"</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="string">"trustProxy"</span>: <span class="number">1</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Configuring-Basic-Authentication"><a href="#Configuring-Basic-Authentication" class="headerlink" title="Configuring Basic Authentication"></a>Configuring Basic Authentication</h3><p>You can configure your dashboard for Basic Authentication by adding usernames and passwords your <code>parse-dashboard-config.json</code> configuration file:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"apps"</span>: [&#123;<span class="attr">"..."</span>: <span class="string">"..."</span>&#125;],</div><div class="line">  <span class="attr">"users"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"user"</span>:<span class="string">"user1"</span>,</div><div class="line">      <span class="attr">"pass"</span>:<span class="string">"pass"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"user"</span>:<span class="string">"user2"</span>,</div><div class="line">      <span class="attr">"pass"</span>:<span class="string">"pass"</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"useEncryptedPasswords"</span>: <span class="literal">true</span> | <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can store the password in either <code>plain text</code> or <code>bcrypt</code> formats. To use the <code>bcrypt</code> format, you must set the config <code>useEncryptedPasswords</code> parameter to <code>true</code>.<br>You can encrypt the password using any online bcrypt tool e.g. <a href="https://www.bcrypt-generator.com" target="_blank" rel="external">https://www.bcrypt-generator.com</a>.</p>
<h3 id="Separating-App-Access-Based-on-User-Identity"><a href="#Separating-App-Access-Based-on-User-Identity" class="headerlink" title="Separating App Access Based on User Identity"></a>Separating App Access Based on User Identity</h3><p>If you have configured your dashboard to manage multiple applications, you can restrict the management of apps based on user identity.</p>
<p>To do so, update your <code>parse-dashboard-config.json</code> configuration file to match the following format:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"apps"</span>: [&#123;<span class="attr">"..."</span>: <span class="string">"..."</span>&#125;],</div><div class="line">  <span class="attr">"users"</span>: [</div><div class="line">     &#123;</div><div class="line">       <span class="attr">"user"</span>:<span class="string">"user1"</span>,</div><div class="line">       <span class="attr">"pass"</span>:<span class="string">"pass1"</span>,</div><div class="line">       <span class="attr">"apps"</span>: [&#123;<span class="attr">"appId"</span>: <span class="string">"myAppId1"</span>&#125;, &#123;<span class="attr">"appId"</span>: <span class="string">"myAppId2"</span>&#125;]</div><div class="line">     &#125;,</div><div class="line">     &#123;</div><div class="line">       <span class="attr">"user"</span>:<span class="string">"user2"</span>,</div><div class="line">       <span class="attr">"pass"</span>:<span class="string">"pass2"</span>,</div><div class="line">       <span class="attr">"apps"</span>: [&#123;<span class="attr">"appId"</span>: <span class="string">"myAppId1"</span>&#125;]</div><div class="line">     &#125;  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The effect of such a configuration is as follows:</p>
<p>When <code>user1</code> logs in, he/she will be able to manage <code>myAppId1</code> and <code>myAppId2</code> from the dashboard.</p>
<p>When <em><code>user2</code></em>  logs in, he/she will only be able to manage <em><code>myAppId1</code></em> from the dashboard.</p>
<h2 id="Run-with-Docker"><a href="#Run-with-Docker" class="headerlink" title="Run with Docker"></a>Run with Docker</h2><p>It is easy to use it with Docker. First build the image:</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">docker</span> <span class="keyword">build </span>-t parse-dashboard .</div></pre></td></tr></table></figure>
<p>Run the image with your <code>config.json</code> mounted as a volume</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -d -<span class="selector-tag">p</span> <span class="number">8080</span>:<span class="number">4040</span> -v host/path/to/config<span class="selector-class">.json</span>:/src/Parse-Dashboard/parse-dashboard-config<span class="selector-class">.json</span> parse-dashboard</div></pre></td></tr></table></figure>
<p>By default, the container will start the app at port 4040 inside the container. However, you can run custom command as well (see <code>Deploying in production</code> for custom setup).</p>
<p>In this example, we want to run the application in production mode at port 80 of the host machine.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -d -<span class="selector-tag">p</span> <span class="number">80</span>:<span class="number">8080</span> -v host/path/to/config<span class="selector-class">.json</span>:/src/Parse-Dashboard/parse-dashboard-config<span class="selector-class">.json</span> parse-dashboard --port <span class="number">8080</span></div></pre></td></tr></table></figure>
<p>If you are not familiar with Docker, <code>--port 8080</code> will be passed in as argument to the entrypoint to form the full command <code>npm start -- --port 8080</code>. The application will start at port 8080 inside the container and port <code>8080</code> will be mounted to port <code>80</code> on your host machine.</p>
<h1 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h1><p>We really want Parse to be yours, to see it grow and thrive in the open source community. Please see the <a href="CONTRIBUTING.md">Contributing to Parse Dashboard guide</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[PaserServer_readme]]></title>
      <url>http://yoursite.com/2017/03/26/PaserServer-readme/</url>
      <content type="html"><![CDATA[<p><img src=".github/parse-server-logo.png?raw=true" alt="Parse Server logo"></p>
<p><a href="https://travis-ci.org/ParsePlatform/parse-server" target="_blank" rel="external"><img src="https://img.shields.io/travis/ParsePlatform/parse-server/master.svg?style=flat" alt="Build Status"></a><br><a href="https://codecov.io/github/ParsePlatform/parse-server?branch=master" target="_blank" rel="external"><img src="https://img.shields.io/codecov/c/github/ParsePlatform/parse-server/master.svg" alt="Coverage Status"></a><br><a href="https://www.npmjs.com/package/parse-server" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/parse-server.svg?style=flat" alt="npm version"></a></p>
<p><a href="https://gitter.im/ParsePlatform/Chat" target="_blank" rel="external"><img src="https://img.shields.io/badge/gitter-join%20chat%20%E2%86%92-brightgreen.svg" alt="Join Chat"></a></p>
<p>Parse Server is an <a href="http://blog.parse.com/announcements/introducing-parse-server-and-the-database-migration-tool/" target="_blank" rel="external">open source version of the Parse backend</a> that can be deployed to any infrastructure that can run Node.js.</p>
<p>Parse Server works with the Express web application framework. It can be added to existing web applications, or run by itself.</p>
<h1 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h1><p>April 2016 - We created a series of video screencasts, please check them out here: <a href="http://blog.parse.com/learn/parse-server-video-series-april-2016/" target="_blank" rel="external">http://blog.parse.com/learn/parse-server-video-series-april-2016/</a></p>
<p>The fastest and easiest way to get started is to run MongoDB and Parse Server locally.</p>
<h2 id="Running-Parse-Server"><a href="#Running-Parse-Server" class="headerlink" title="Running Parse Server"></a>Running Parse Server</h2><h3 id="Locally"><a href="#Locally" class="headerlink" title="Locally"></a>Locally</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> -g <span class="keyword">parse</span>-<span class="keyword">server</span> mongodb-runner</div><div class="line">$ mongodb-runner <span class="keyword">start</span></div><div class="line">$ <span class="keyword">parse</span>-<span class="keyword">server</span> <span class="comment">--appId APPLICATION_ID --masterKey MASTER_KEY --databaseURI mongodb://localhost/test</span></div></pre></td></tr></table></figure>
<h3 id="Inside-a-Docker-container"><a href="#Inside-a-Docker-container" class="headerlink" title="Inside a Docker container"></a>Inside a Docker container</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$ docker build --tag <span class="built_in">parse</span>-server .</div><div class="line">$ docker <span class="keyword">run</span> --name my-mongo -d mongo</div><div class="line">$ docker <span class="keyword">run</span> --name my-<span class="built_in">parse</span>-server --link my-mongo:mongo <span class="built_in">parse</span>-server --appId APPLICATION_ID --masterKey MASTER_KEY --databaseURI mongodb:<span class="comment">//mongo/test</span></div><div class="line">```  </div><div class="line"></div><div class="line">You can <span class="keyword">use</span> any arbitrary <span class="keyword">string</span> as your application id <span class="keyword">and</span> master <span class="built_in">key</span>. These will be used by your clients to authenticate with the <span class="built_in">Parse</span> Server.</div><div class="line"></div><div class="line">That's it! You are now running a standalone version of <span class="built_in">Parse</span> Server on your machine.</div><div class="line"></div><div class="line">**Using a remote MongoDB?** Pass the  `--databaseURI DATABASE_URI` parameter when starting `<span class="built_in">parse</span>-server`. Learn more about configuring <span class="built_in">Parse</span> Server [here](<span class="meta">#configuration). For a full list of available options, run `parse-server --help`.</span></div><div class="line"></div><div class="line"><span class="meta">### Saving your first object</span></div><div class="line"></div><div class="line">Now that you're running <span class="built_in">Parse</span> Server, it is <span class="built_in">time</span> to <span class="keyword">save</span> your first object. We'll <span class="keyword">use</span> the [REST API](https:<span class="comment">//parse.com/docs/rest/guide), but you can easily do the same using any of the [Parse SDKs](https://parseplatform.github.io/#sdks). Run the following:</span></div><div class="line"></div><div class="line">```bash</div><div class="line">curl -X POST \</div><div class="line">-H <span class="string">"X-Parse-Application-Id: APPLICATION_ID"</span> \</div><div class="line">-H <span class="string">"Content-Type: application/json"</span> \</div><div class="line">-d '&#123;<span class="string">"score"</span>:<span class="number">1337</span>,<span class="string">"playerName"</span>:<span class="string">"Sean Plott"</span>,<span class="string">"cheatMode"</span>:false&#125;' \</div><div class="line">http:<span class="comment">//localhost:1337/parse/classes/GameScore</span></div></pre></td></tr></table></figure>
<p>You should get a response similar to this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"objectId"</span>: <span class="string">"2ntvSpRGIK"</span>,</div><div class="line">  <span class="string">"createdAt"</span>: <span class="string">"2016-03-11T23:51:48.050Z"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can now retrieve this object directly (make sure to replace <code>2ntvSpRGIK</code> with the actual <code>objectId</code> you received when the object was created):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ curl -X GET \</div><div class="line">  -H <span class="string">"X-Parse-Application-Id: APPLICATION_ID"</span> \</div><div class="line">  http://localhost:1337/parse/classes/GameScore/2ntvSpRGIK</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// Response</div><div class="line">&#123;</div><div class="line">  "objectId": "2ntvSpRGIK",</div><div class="line">  "score": 1337,</div><div class="line">  "playerName": "Sean Plott",</div><div class="line">  "cheatMode": false,</div><div class="line">  "updatedAt": "2016-03-11T23:51:48.050Z",</div><div class="line">  "createdAt": "2016-03-11T23:51:48.050Z"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Keeping tracks of individual object ids is not ideal, however. In most cases you will want to run a query over the collection, like so:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>curl -X GET \</div><div class="line">  -H <span class="string">"X-Parse-Application-Id: APPLICATION_ID"</span> \</div><div class="line">  <span class="symbol">http:</span>/<span class="regexp">/localhost:1337/parse</span><span class="regexp">/classes/</span>GameScore</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// The response will provide all the matching objects within the `results` array:</div><div class="line">&#123;</div><div class="line">  "results": [</div><div class="line">    &#123;</div><div class="line">      "objectId": "2ntvSpRGIK",</div><div class="line">      "score": 1337,</div><div class="line">      "playerName": "Sean Plott",</div><div class="line">      "cheatMode": false,</div><div class="line">      "updatedAt": "2016-03-11T23:51:48.050Z",</div><div class="line">      "createdAt": "2016-03-11T23:51:48.050Z"</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>To learn more about using saving and querying objects on Parse Server, check out the <a href="https://parse.com/docs" target="_blank" rel="external">Parse documentation</a>.</p>
<h3 id="Connect-your-app-to-Parse-Server"><a href="#Connect-your-app-to-Parse-Server" class="headerlink" title="Connect your app to Parse Server"></a>Connect your app to Parse Server</h3><p>Parse provides SDKs for all the major platforms. Refer to the Parse Server guide to <a href="https://github.com/ParsePlatform/parse-server/wiki/Parse-Server-Guide#using-parse-sdks-with-parse-server" target="_blank" rel="external">learn how to connect your app to Parse Server</a>.</p>
<h2 id="Running-Parse-Server-elsewhere"><a href="#Running-Parse-Server-elsewhere" class="headerlink" title="Running Parse Server elsewhere"></a>Running Parse Server elsewhere</h2><p>Once you have a better understanding of how the project works, please refer to the <a href="https://github.com/ParsePlatform/parse-server/wiki" target="_blank" rel="external">Parse Server wiki</a> for in-depth guides to deploy Parse Server to major infrastructure providers. Read on to learn more about additional ways of running Parse Server.</p>
<h3 id="Parse-Server-Sample-Application"><a href="#Parse-Server-Sample-Application" class="headerlink" title="Parse Server Sample Application"></a>Parse Server Sample Application</h3><p>We have provided a basic <a href="https://github.com/ParsePlatform/parse-server-example" target="_blank" rel="external">Node.js application</a> that uses the Parse Server module on Express and can be easily deployed to various infrastructure providers:</p>
<ul>
<li><a href="https://devcenter.heroku.com/articles/deploying-a-parse-server-to-heroku" target="_blank" rel="external">Heroku and mLab</a></li>
<li><a href="http://mobile.awsblog.com/post/TxCD57GZLM2JR/How-to-set-up-Parse-Server-on-AWS-using-AWS-Elastic-Beanstalk" target="_blank" rel="external">AWS and Elastic Beanstalk</a></li>
<li><a href="https://medium.com/@justinbeckwith/deploying-parse-server-to-google-app-engine-6bc0b7451d50" target="_blank" rel="external">Google App Engine</a></li>
<li><a href="https://azure.microsoft.com/en-us/blog/azure-welcomes-parse-developers/" target="_blank" rel="external">Microsoft Azure</a></li>
<li><a href="https://blog.sashido.io/tag/migration/" target="_blank" rel="external">SashiDo</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-run-parse-server-on-ubuntu-14-04" target="_blank" rel="external">Digital Ocean</a></li>
<li><a href="https://github.com/cf-platform-eng/pws-parse-server" target="_blank" rel="external">Pivotal Web Services</a></li>
<li><a href="http://blog.back4app.com/2016/03/01/quick-wizard-migration/" target="_blank" rel="external">Back4app</a></li>
<li><a href="https://gomix.com/#!/project/parse-server" target="_blank" rel="external">Gomix</a></li>
</ul>
<h3 id="Parse-Server-Express"><a href="#Parse-Server-Express" class="headerlink" title="Parse Server + Express"></a>Parse Server + Express</h3><p>You can also create an instance of Parse Server, and mount it on a new or existing Express website:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> ParseServer = <span class="built_in">require</span>(<span class="string">'parse-server'</span>).ParseServer;</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line"><span class="keyword">var</span> api = <span class="keyword">new</span> ParseServer(&#123;</div><div class="line">  <span class="attr">databaseURI</span>: <span class="string">'mongodb://localhost:27017/dev'</span>, <span class="comment">// Connection string for your MongoDB database</span></div><div class="line">  cloud: <span class="string">'/home/myApp/cloud/main.js'</span>, <span class="comment">// Absolute path to your Cloud Code</span></div><div class="line">  appId: <span class="string">'myAppId'</span>,</div><div class="line">  <span class="attr">masterKey</span>: <span class="string">'myMasterKey'</span>, <span class="comment">// Keep this key secret!</span></div><div class="line">  fileKey: <span class="string">'optionalFileKey'</span>,</div><div class="line">  <span class="attr">serverURL</span>: <span class="string">'http://localhost:1337/parse'</span> <span class="comment">// Don't forget to change to https if needed</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Serve the Parse API on the /parse URL prefix</span></div><div class="line">app.use(<span class="string">'/parse'</span>, api);</div><div class="line"></div><div class="line">app.listen(<span class="number">1337</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'parse-server-example running on port 1337.'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>For a full list of available options, run <code>parse-server --help</code>.</p>
<h2 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h2><p>Parse Server will, by default, log:</p>
<ul>
<li>to the console</li>
<li>daily rotating files as new line delimited JSON</li>
</ul>
<p>Logs are also be viewable in Parse Dashboard.</p>
<p><strong>Want to log each request and response?</strong> Set the <code>VERBOSE</code> environment variable when starting <code>parse-server</code>. Usage :-  <code>VERBOSE=&#39;1&#39; parse-server --appId APPLICATION_ID --masterKey MASTER_KEY</code></p>
<p><strong>Want logs to be in placed in other folder?</strong> Pass the <code>PARSE_SERVER_LOGS_FOLDER</code> environment variable when starting <code>parse-server</code>. Usage :-  <code>PARSE_SERVER_LOGS_FOLDER=&#39;&lt;path-to-logs-folder&gt;&#39; parse-server --appId APPLICATION_ID --masterKey MASTER_KEY</code></p>
<p><strong>Want new line delimited JSON error logs (for consumption by CloudWatch, Google Cloud Logging, etc.)?</strong> Pass the <code>JSON_LOGS</code> environment variable when starting <code>parse-server</code>. Usage :-  <code>JSON_LOGS=&#39;1&#39; parse-server --appId APPLICATION_ID --masterKey MASTER_KEY</code></p>
<h1 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h1><p>The full documentation for Parse Server is available in the <a href="https://github.com/ParsePlatform/parse-server/wiki" target="_blank" rel="external">wiki</a>. The <a href="https://github.com/ParsePlatform/parse-server/wiki/Parse-Server-Guide" target="_blank" rel="external">Parse Server guide</a> is a good place to get started. If youâ€™re interested in developing for Parse Server, the <a href="https://github.com/ParsePlatform/parse-server/wiki/Development-Guide" target="_blank" rel="external">Development guide</a> will help you get set up.</p>
<h2 id="Migrating-an-Existing-Parse-App"><a href="#Migrating-an-Existing-Parse-App" class="headerlink" title="Migrating an Existing Parse App"></a>Migrating an Existing Parse App</h2><p>The hosted version of Parse will be fully retired on January 28th, 2017. If you are planning to migrate an app, you need to begin work as soon as possible. There are a few areas where Parse Server does not provide compatibility with the hosted version of Parse. Learn more in the <a href="https://parse.com/migration" target="_blank" rel="external">Migration guide</a>.</p>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>Parse Server can be configured using the following options. You may pass these as parameters when running a standalone <code>parse-server</code>, or by loading a configuration file in JSON format using <code>parse-server path/to/configuration.json</code>. If youâ€™re using Parse Server on Express, you may also pass these to the <code>ParseServer</code> object as options.</p>
<p>For the full list of available options, run <code>parse-server --help</code>.</p>
<h4 id="Basic-options"><a href="#Basic-options" class="headerlink" title="Basic options"></a>Basic options</h4><ul>
<li><code>appId</code> <strong>(required)</strong> - The application id to host with this server instance. You can use any arbitrary string. For migrated apps, this should match your hosted Parse app.</li>
<li><code>masterKey</code> <strong>(required)</strong> - The master key to use for overriding ACL security.  You can use any arbitrary string. Keep it secret! For migrated apps, this should match your hosted Parse app.</li>
<li><code>databaseURI</code> <strong>(required)</strong> - The connection string for your database, i.e. <code>mongodb://user:pass@host.com/dbname</code>. Be sure to <a href="https://app.zencoder.com/docs/guides/getting-started/special-characters-in-usernames-and-passwords" target="_blank" rel="external">URL encode your password</a> if your password has special characters.</li>
<li><code>port</code> - The default port is 1337, specify this parameter to use a different port.</li>
<li><code>serverURL</code> - URL to your Parse Server (donâ€™t forget to specify http:// or https://). This URL will be used when making requests to Parse Server from Cloud Code.</li>
<li><code>cloud</code> - The absolute path to your cloud code <code>main.js</code> file.</li>
<li><code>push</code> - Configuration options for APNS and GCM push. See the <a href="https://github.com/ParsePlatform/parse-server/wiki/Push" target="_blank" rel="external">Push Notifications wiki entry</a>.</li>
</ul>
<h4 id="Client-key-options"><a href="#Client-key-options" class="headerlink" title="Client key options"></a>Client key options</h4><p>The client keys used with Parse are no longer necessary with Parse Server. If you wish to still require them, perhaps to be able to refuse access to older clients, you can set the keys at initialization time. Setting any of these keys will require all requests to provide one of the configured keys.</p>
<ul>
<li><code>clientKey</code></li>
<li><code>javascriptKey</code></li>
<li><code>restAPIKey</code></li>
<li><code>dotNetKey</code></li>
</ul>
<h4 id="Advanced-options"><a href="#Advanced-options" class="headerlink" title="Advanced options"></a>Advanced options</h4><ul>
<li><code>fileKey</code> - For migrated apps, this is necessary to provide access to files already hosted on Parse.</li>
<li><code>allowClientClassCreation</code> - Set to false to disable client class creation. Defaults to true.</li>
<li><code>enableAnonymousUsers</code> - Set to false to disable anonymous users. Defaults to true.</li>
<li><code>auth</code> - Used to configure support for <a href="https://github.com/ParsePlatform/parse-server/wiki/OAuth--and-Custom-Authentication" target="_blank" rel="external">3rd party authentication</a>.</li>
<li><code>facebookAppIds</code> - An array of valid Facebook application IDs that users may authenticate with.</li>
<li><code>mountPath</code> - Mount path for the server. Defaults to <code>/parse</code>.</li>
<li><code>filesAdapter</code> - The default behavior (GridStore) can be changed by creating an adapter class (see <a href="https://github.com/ParsePlatform/parse-server/blob/master/src/Adapters/Files/FilesAdapter.js" target="_blank" rel="external"><code>FilesAdapter.js</code></a>).</li>
<li><code>maxUploadSize</code> - Max file size for uploads. Defaults to 20 MB.</li>
<li><code>loggerAdapter</code> - The default behavior/transport (File) can be changed by creating an adapter class (see <a href="https://github.com/ParsePlatform/parse-server/blob/master/src/Adapters/Logger/LoggerAdapter.js" target="_blank" rel="external"><code>LoggerAdapter.js</code></a>).</li>
<li><code>sessionLength</code> - The length of time in seconds that a session should be valid for. Defaults to 31536000 seconds (1 year).</li>
<li><code>revokeSessionOnPasswordReset</code> - When a user changes their password, either through the reset password email or while logged in, all sessions are revoked if this is true. Set to false if you donâ€™t want to revoke sessions.</li>
<li><code>accountLockout</code> - Lock account when a malicious user is attempting to determine an account password by trial and error.</li>
<li><code>passwordPolicy</code> - Optional password policy rules to enforce.</li>
<li><code>customPages</code> - A hash with urls to override email verification links, password reset links and specify frame url for masking user-facing pages. Available keys: <code>parseFrameURL</code>, <code>invalidLink</code>, <code>choosePassword</code>, <code>passwordResetSuccess</code>, <code>verifyEmailSuccess</code>.</li>
<li><code>middleware</code> - (CLI only), a module name, function that is an express middleware. When using the CLI, the express app will load it just <strong>before</strong> mounting parse-server on the mount path. This option is useful for injecting a monitoring middleware.</li>
</ul>
<h5 id="Logging-1"><a href="#Logging-1" class="headerlink" title="Logging"></a>Logging</h5><p>Use the <code>PARSE_SERVER_LOGS_FOLDER</code> environment variable when starting <code>parse-server</code> to save your server logfiles to the specified folder.</p>
<p>Usage:</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">PARSE_SERVER_LOGS_FOLDER=</span><span class="string">'&lt;path-to-logs-folder&gt;'</span> <span class="string">parse-server </span><span class="built_in">--appId</span> <span class="string">APPLICATION_ID </span><span class="built_in">--masterKey</span> <span class="string">MASTER_KEY</span></div></pre></td></tr></table></figure>
<h5 id="Email-verification-and-password-reset"><a href="#Email-verification-and-password-reset" class="headerlink" title="Email verification and password reset"></a>Email verification and password reset</h5><p>Verifying user email addresses and enabling password reset via email requires an email adapter. As part of the <code>parse-server</code> package we provide an adapter for sending email through Mailgun. To use it, sign up for Mailgun, and add this to your initialization code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> server = ParseServer(&#123;</div><div class="line">  ...otherOptions,</div><div class="line">  <span class="comment">// Enable email verification</span></div><div class="line">  verifyUserEmails: <span class="literal">true</span>,</div><div class="line"></div><div class="line">  <span class="comment">// if `verifyUserEmails` is `true` and</span></div><div class="line">  <span class="comment">//     if `emailVerifyTokenValidityDuration` is `undefined` then</span></div><div class="line">  <span class="comment">//        email verify token never expires</span></div><div class="line">  <span class="comment">//     else</span></div><div class="line">  <span class="comment">//        email verify token expires after `emailVerifyTokenValidityDuration`</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// `emailVerifyTokenValidityDuration` defaults to `undefined`</span></div><div class="line">  <span class="comment">//</span></div><div class="line">  <span class="comment">// email verify token below expires in 2 hours (= 2 * 60 * 60 == 7200 seconds)</span></div><div class="line">  emailVerifyTokenValidityDuration: <span class="number">2</span> * <span class="number">60</span> * <span class="number">60</span>, <span class="comment">// in seconds (2 hours = 7200 seconds)</span></div><div class="line"></div><div class="line">  <span class="comment">// set preventLoginWithUnverifiedEmail to false to allow user to login without verifying their email</span></div><div class="line">  <span class="comment">// set preventLoginWithUnverifiedEmail to true to prevent user from login if their email is not verified</span></div><div class="line">  preventLoginWithUnverifiedEmail: <span class="literal">false</span>, <span class="comment">// defaults to false</span></div><div class="line"></div><div class="line">  <span class="comment">// The public URL of your app.</span></div><div class="line">  <span class="comment">// This will appear in the link that is used to verify email addresses and reset passwords.</span></div><div class="line">  <span class="comment">// Set the mount path as it is in serverURL</span></div><div class="line">  publicServerURL: <span class="string">'https://example.com/parse'</span>,</div><div class="line">  <span class="comment">// Your apps name. This will appear in the subject and body of the emails that are sent.</span></div><div class="line">  appName: <span class="string">'Parse App'</span>,</div><div class="line">  <span class="comment">// The email adapter</span></div><div class="line">  emailAdapter: &#123;</div><div class="line">    <span class="attr">module</span>: <span class="string">'parse-server-simple-mailgun-adapter'</span>,</div><div class="line">    <span class="attr">options</span>: &#123;</div><div class="line">      <span class="comment">// The address that your emails come from</span></div><div class="line">      fromAddress: <span class="string">'parse@example.com'</span>,</div><div class="line">      <span class="comment">// Your domain from mailgun.com</span></div><div class="line">      domain: <span class="string">'example.com'</span>,</div><div class="line">      <span class="comment">// Your API key from mailgun.com</span></div><div class="line">      apiKey: <span class="string">'key-mykey'</span>,</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="comment">// account lockout policy setting (OPTIONAL) - defaults to undefined</span></div><div class="line">  <span class="comment">// if the account lockout policy is set and there are more than `threshold` number of failed login attempts then the `login` api call returns error code `Parse.Error.OBJECT_NOT_FOUND` with error message `Your account is locked due to multiple failed login attempts. Please try again after &lt;duration&gt; minute(s)`. After `duration` minutes of no login attempts, the application will allow the user to try login again.</span></div><div class="line">  accountLockout: &#123;</div><div class="line">    <span class="attr">duration</span>: <span class="number">5</span>, <span class="comment">// duration policy setting determines the number of minutes that a locked-out account remains locked out before automatically becoming unlocked. Set it to a value greater than 0 and less than 100000.</span></div><div class="line">    threshold: <span class="number">3</span>, <span class="comment">// threshold policy setting determines the number of failed sign-in attempts that will cause a user account to be locked. Set it to an integer value greater than 0 and less than 1000.</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// optional settings to enforce password policies</span></div><div class="line">  passwordPolicy: &#123;</div><div class="line">    <span class="comment">// Two optional settings to enforce strong passwords. Either one or both can be specified. </span></div><div class="line">    <span class="comment">// If both are specified, both checks must pass to accept the password</span></div><div class="line">    <span class="comment">// 1. a RegExp object or a regex string representing the pattern to enforce </span></div><div class="line">    validatorPattern: <span class="regexp">/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.&#123;8,&#125;)/</span>, <span class="comment">// enforce password with at least 8 char with at least 1 lower case, 1 upper case and 1 digit</span></div><div class="line">    <span class="comment">// 2. a callback function to be invoked to validate the password  </span></div><div class="line">    validatorCallback: <span class="function">(<span class="params">password</span>) =&gt;</span> &#123; <span class="keyword">return</span> validatePassword(password) &#125;, </div><div class="line">    <span class="attr">doNotAllowUsername</span>: <span class="literal">true</span>, <span class="comment">// optional setting to disallow username in passwords</span></div><div class="line">    maxPasswordAge: <span class="number">90</span>, <span class="comment">// optional setting in days for password expiry. Login fails if user does not reset the password within this period after signup/last reset. </span></div><div class="line">    maxPasswordHistory: <span class="number">5</span>, <span class="comment">// optional setting to prevent reuse of previous n passwords. Maximum value that can be specified is 20. Not specifying it or specifying 0 will not enforce history.</span></div><div class="line">    <span class="comment">//optional setting to set a validity duration for password reset links (in seconds)</span></div><div class="line">    resetTokenValidityDuration: <span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>, <span class="comment">// expire after 24 hours</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>You can also use other email adapters contributed by the community such as:</p>
<ul>
<li><a href="https://www.npmjs.com/package/parse-server-postmark-adapter" target="_blank" rel="external">parse-server-postmark-adapter</a></li>
<li><a href="https://www.npmjs.com/package/parse-server-sendgrid-adapter" target="_blank" rel="external">parse-server-sendgrid-adapter</a></li>
<li><a href="https://www.npmjs.com/package/parse-server-mandrill-adapter" target="_blank" rel="external">parse-server-mandrill-adapter</a></li>
<li><a href="https://www.npmjs.com/package/parse-server-simple-ses-adapter" target="_blank" rel="external">parse-server-simple-ses-adapter</a></li>
<li><a href="https://www.npmjs.com/package/parse-server-mailgun-adapter-template" target="_blank" rel="external">parse-server-mailgun-adapter-template</a></li>
<li><a href="https://www.npmjs.com/package/parse-server-mailjet-adapter" target="_blank" rel="external">parse-server-mailjet-adapter</a></li>
<li><a href="https://www.npmjs.com/package/simple-parse-smtp-adapter" target="_blank" rel="external">simple-parse-smtp-adapter</a></li>
</ul>
<h3 id="Using-environment-variables-to-configure-Parse-Server"><a href="#Using-environment-variables-to-configure-Parse-Server" class="headerlink" title="Using environment variables to configure Parse Server"></a>Using environment variables to configure Parse Server</h3><p>You may configure the Parse Server using environment variables:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PORT</div><div class="line">PARSE_SERVER_APPLICATION_ID</div><div class="line">PARSE_SERVER_MASTER_KEY</div><div class="line">PARSE_SERVER_DATABASE_URI</div><div class="line">PARSE_SERVER_URL</div><div class="line">PARSE_SERVER_CLOUD_CODE_MAIN</div></pre></td></tr></table></figure>
<p>The default port is 1337, to use a different port set the PORT environment variable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ PORT=8080 parse-server --appId APPLICATION_ID --masterKey MASTER_KEY</div></pre></td></tr></table></figure>
<p>For the full list of configurable environment variables, run <code>parse-server --help</code>.</p>
<h3 id="Available-Adapters"><a href="#Available-Adapters" class="headerlink" title="Available Adapters"></a>Available Adapters</h3><p><a href="https://github.com/parse-server-modules" target="_blank" rel="external">Parse Server Modules (Adapters)</a></p>
<h3 id="Configuring-File-Adapters"><a href="#Configuring-File-Adapters" class="headerlink" title="Configuring File Adapters"></a>Configuring File Adapters</h3><p>Parse Server allows developers to choose from several options when hosting files:</p>
<ul>
<li><code>GridStoreAdapter</code>, which is backed by MongoDB;</li>
<li><code>S3Adapter</code>, which is backed by <a href="https://aws.amazon.com/s3/" target="_blank" rel="external">Amazon S3</a>; or</li>
<li><code>GCSAdapter</code>, which is backed by <a href="https://cloud.google.com/storage/" target="_blank" rel="external">Google Cloud Storage</a></li>
</ul>
<p><code>GridStoreAdapter</code> is used by default and requires no setup, but if youâ€™re interested in using S3 or Google Cloud Storage, additional configuration information is available in the <a href="https://github.com/ParsePlatform/parse-server/wiki/Configuring-File-Adapters" target="_blank" rel="external">Parse Server wiki</a>.</p>
<h1 id="Support"><a href="#Support" class="headerlink" title="Support"></a>Support</h1><p>For implementation related questions or technical support, please refer to the <a href="http://stackoverflow.com/questions/tagged/parse.com" target="_blank" rel="external">Stack Overflow</a> and <a href="https://serverfault.com/tags/parse" target="_blank" rel="external">Server Fault</a> communities.</p>
<p>If you believe youâ€™ve found an issue with Parse Server, make sure these boxes are checked before <a href="https://github.com/ParsePlatform/parse-server/issues" target="_blank" rel="external">reporting an issue</a>:</p>
<ul>
<li><p>[ ] Youâ€™ve met the <a href="https://github.com/ParsePlatform/parse-server/wiki/Parse-Server-Guide#prerequisites" target="_blank" rel="external">prerequisites</a>.</p>
</li>
<li><p>[ ] Youâ€™re running the <a href="https://github.com/ParsePlatform/parse-server/releases" target="_blank" rel="external">latest version</a> of Parse Server.</p>
</li>
<li><p>[ ] Youâ€™ve searched through <a href="https://github.com/ParsePlatform/parse-server/issues?utf8=%E2%9C%93&amp;q=" target="_blank" rel="external">existing issues</a>. Chances are that your issue has been reported or resolved before.</p>
</li>
</ul>
<h1 id="Want-to-ride-the-bleeding-edge"><a href="#Want-to-ride-the-bleeding-edge" class="headerlink" title="Want to ride the bleeding edge?"></a>Want to ride the bleeding edge?</h1><p>The <code>latest</code> branch in this repository is automatically maintained to be the last<br>commit to <code>master</code> to pass all tests, in the same form found on npm. It is<br>recommend to use builds deployed npm for many reasons, but if you want to use<br>the latest not-yet-released version of parse-server, you can do so by depending<br>directly on this branch:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install parseplatform/parse-<span class="keyword">server</span>.git<span class="meta">#latest</span></div></pre></td></tr></table></figure>
<h1 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h1><p>We really want Parse to be yours, to see it grow and thrive in the open source community. Please see the <a href="CONTRIBUTING.md">Contributing to Parse Server guide</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[GraphQL for ParserServer]]></title>
      <url>http://yoursite.com/2017/03/25/graphql_for_parserserver/</url>
      <content type="html"><![CDATA[<h1 id="GraphQL-for-Parse-Server"><a href="#GraphQL-for-Parse-Server" class="headerlink" title="GraphQL for Parse Server"></a>GraphQL for Parse Server</h1><p><a href="https://travis-ci.org/thebakeryio/parse-graphql-server" target="_blank" rel="external"><img src="https://travis-ci.org/thebakeryio/parse-graphql-server.svg?branch=master" alt="Build Status"></a><br><a href="https://codeclimate.com/github/thebakeryio/parse-graphql-server" target="_blank" rel="external"><img src="https://codeclimate.com/github/thebakeryio/parse-graphql-server/badges/gpa.svg" alt="Code Climate"></a><br><a href="https://codeclimate.com/github/thebakeryio/parse-graphql-server/coverage" target="_blank" rel="external"><img src="https://codeclimate.com/github/thebakeryio/parse-graphql-server/badges/coverage.svg" alt="Test Coverage"></a><br><a href="https://david-dm.org/thebakeryio/parse-graphql-server" target="_blank" rel="external"><img src="https://david-dm.org/thebakeryio/parse-graphql-server.svg" alt="Dependency Status"></a><br><a href="https://david-dm.org/thebakeryio/parse-graphql-server#info=devDependencies" target="_blank" rel="external"><img src="https://david-dm.org/thebakeryio/parse-graphql-server/dev-status.svg" alt="devDependency Status"></a></p>
<h2 id="When-to-use"><a href="#When-to-use" class="headerlink" title="When to use"></a>When to use</h2><ul>
<li>you are using Parse SDK (web or mobile) coupled with Parse Server running on Express</li>
<li>you are using GraphQL</li>
<li>you want to control access to Parse models in your resolvers using Parse ACL system</li>
<li>you are using <a href="https://github.com/thebakeryio/parse-graphql-client" target="_blank" rel="external">parse-graphql-client</a> package</li>
</ul>
<h2 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save graphql parse-graphql-server parse</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">'express'</span>;</div><div class="line"><span class="keyword">import</span> Parse <span class="keyword">from</span> <span class="string">'parse/node'</span>;</div><div class="line"><span class="keyword">import</span> parseGraphQLHTTP <span class="keyword">from</span> <span class="string">'parse-graphql-server'</span>;</div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  GraphQLObjectType,</div><div class="line">  GraphQLSchema,</div><div class="line">  GraphQLID,</div><div class="line">  GraphQLString,</div><div class="line">  GraphQLBoolean,</div><div class="line">  GraphQLList,</div><div class="line">  GraphQLNonNull,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'graphql'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> Todo = Parse.Object.extend(<span class="string">'Todo'</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> TodoType = <span class="keyword">new</span> GraphQLObjectType(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'Todo'</span>,</div><div class="line">  <span class="attr">description</span>: <span class="string">'Item in todo list'</span>,</div><div class="line">  <span class="attr">fields</span>: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</div><div class="line">    <span class="attr">id</span>: &#123;</div><div class="line">      <span class="attr">type</span>: GraphQLID,</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">text</span>: &#123;</div><div class="line">      <span class="attr">type</span>: GraphQLString,</div><div class="line">      <span class="attr">resolve</span>: <span class="function"><span class="params">todo</span> =&gt;</span> todo.get(<span class="string">'text'</span>),</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">isComplete</span>: &#123;</div><div class="line">      <span class="attr">type</span>: GraphQLBoolean,</div><div class="line">      <span class="attr">resolve</span>: <span class="function"><span class="params">todo</span> =&gt;</span> todo.get(<span class="string">'isComplete'</span>),</div><div class="line">    &#125;,</div><div class="line">  &#125;),</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> schema = <span class="keyword">new</span> GraphQLSchema(&#123;</div><div class="line">  <span class="attr">query</span>: <span class="keyword">new</span> GraphQLObjectType(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Query'</span>,</div><div class="line">    <span class="attr">fields</span>: &#123;</div><div class="line">      <span class="attr">todos</span>: &#123;</div><div class="line">        <span class="attr">type</span>: <span class="keyword">new</span> GraphQLList(TodoType),</div><div class="line">        <span class="attr">resolve</span>: <span class="function">(<span class="params">_, args, &#123; user, Query &#125;</span>) =&gt;</span> &#123;</div><div class="line">          <span class="keyword">const</span> query = <span class="keyword">new</span> Query(Todo);</div><div class="line">          <span class="keyword">return</span> query.find();</div><div class="line">        &#125;,</div><div class="line">      &#125;,</div><div class="line">    &#125;,</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">mutation</span>: <span class="keyword">new</span> GraphQLObjectType(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Mutation'</span>,</div><div class="line">    <span class="attr">fields</span>: &#123;</div><div class="line">      <span class="attr">addTodo</span>: &#123;</div><div class="line">        <span class="attr">type</span>: Todo.SchemaType,</div><div class="line">        <span class="attr">description</span>: <span class="string">'Create a new todo item'</span>,</div><div class="line">        <span class="attr">args</span>: &#123;</div><div class="line">          <span class="attr">text</span>: &#123; <span class="attr">type</span>: <span class="keyword">new</span> GraphQLNonNull(GraphQLString) &#125;,</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">resolve</span>: <span class="function">(<span class="params">_, &#123; text &#125;, &#123; Query, user &#125;</span>) =&gt;</span> &#123;</div><div class="line">          <span class="keyword">const</span> newTodo = <span class="keyword">new</span> Query(Todo).create(&#123; text, <span class="attr">isComplete</span>: <span class="literal">false</span> &#125;);</div><div class="line">          <span class="keyword">if</span> (user) &#123;</div><div class="line">            newTodo.setACL(<span class="keyword">new</span> Parse.ACL(user));</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">return</span> newTodo.save().then(<span class="function"><span class="params">td</span> =&gt;</span> td);</div><div class="line">        &#125;,</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">deleteTodo</span>: &#123;</div><div class="line">        <span class="attr">type</span>: Todo.SchemaType,</div><div class="line">        <span class="attr">description</span>: <span class="string">'Delete a todo'</span>,</div><div class="line">        <span class="attr">args</span>: &#123;</div><div class="line">          <span class="attr">id</span>: &#123; <span class="attr">type</span>: <span class="keyword">new</span> GraphQLNonNull(GraphQLID) &#125;,</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">resolve</span>: <span class="function">(<span class="params">_, &#123; id &#125;, &#123; Query &#125;</span>) =&gt;</span></div><div class="line">          <span class="keyword">new</span> Query(Todo).get(id).then(<span class="function">(<span class="params">todo</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">if</span> (todo) &#123;</div><div class="line">              <span class="keyword">return</span> todo.destroy();</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> todo;</div><div class="line">          &#125;),</div><div class="line">      &#125;,</div><div class="line">    &#125;,</div><div class="line">  &#125;),</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> app = express();</div><div class="line">app.use(<span class="string">'/graphql'</span>, parseGraphQLHTTP(&#123; schema, <span class="attr">graphiql</span>: <span class="literal">true</span>, &#125;));</div><div class="line"></div><div class="line">app.listen(process.env.PORT, () =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'server running'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Writing-resolvers"><a href="#Writing-resolvers" class="headerlink" title="Writing resolvers"></a>Writing resolvers</h2><p>When using Parse GraphQL server package, all your GraphQL resolvers include authentication information and updated version of Parse.Query that passes ACL info along to make sure your queries are authenticated</p>
<pre><code>{
  resolve: (_, args, { Query, user }) =&gt; {
    // **Query** is a patched version of Parse.Query that
    // includes session token information for the currently authenticated 
    // user (if any)
    // It also extends basic Parse.Query to include a **create** method:
    // const newTodo = new Query(Todo).create({ text, isComplete: false });
    //
    // **user** is an instance of Parse.User set to the authenticated user (if any)
  },
}
</code></pre><h2 id="Client-side"><a href="#Client-side" class="headerlink" title="Client side"></a>Client side</h2><p>Parse GraphQL server looks for <strong>Authorization</strong> header set to the session token of the current Parse User. <a href="https://github.com/thebakeryio/parse-graphql-client" target="_blank" rel="external">Parse GraphQL client</a> sets this up for you automatically.  </p>
<h2 id="See-it-in-action"><a href="#See-it-in-action" class="headerlink" title="See it in action"></a>See it in action</h2><ul>
<li><a href="https://github.com/thebakeryio/todomvc-react-native" target="_blank" rel="external">TodoMVC using React Native</a></li>
</ul>
<h2 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h2><p>Parse GraphQL server relies heavily on <a href="https://github.com/graphql/express-graphql" target="_blank" rel="external">Express GraphQL package</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[becoming a profess programmer]]></title>
      <url>http://yoursite.com/2017/03/25/becoming-a-profess-programmer/</url>
      <content type="html"><![CDATA[<pre><code># å‰è¨€
</code></pre><p>æˆä¸ºä¸€åä¸“ä¸šç¨‹åºå‘˜çš„é“è·¯ä¸Šï¼Œéœ€è¦åšæŒç»ƒä¹ ã€å­¦ä¹ ä¸ç§¯ç´¯ï¼ŒæŠ€æœ¯æ–¹é¢æ—¢è¦æœ‰ä¸€å®šçš„å¹¿åº¦ï¼Œæ›´è¦æœ‰è‡ªå·±çš„æ·±åº¦ã€‚</p>
<p>ç¬”è€…ä½œä¸ºä¸€ä½tool madï¼Œå°†å·¥ä½œä»¥æ¥ç”¨åˆ°çš„å„ç§ä¼˜ç§€èµ„æ–™ã€ç¥å™¨åŠæ¡†æ¶æ•´ç†åœ¨æ­¤ï¼Œæ¯•ç«Ÿå¥½è®°æ€§ä¸å¦‚çƒ‚é”®ç›˜ï¼Œæ­¤é¡¹ç›®å¯ä»¥ä½œä¸ºè‡ªå·±çš„ä¸æ—¶ä¹‹éœ€ã€‚</p>
<p>æœ¬äººå–œæ¬¢æŠ˜è…¾ï¼Œè®°å½•çš„ä¸œè¥¿ä¹Ÿæ¯”è¾ƒæ‚ï¼Œå„æ–¹é¢éƒ½ä¼šæœ‰ä¸€äº›ï¼Œå†…å®¹æŒ‰é‡è¦ç­‰çº§æ’åºï¼Œå¤§å®¶å„å–æ‰€éœ€ã€‚</p>
<p>è¿™é‡Œçš„ä¸œè¥¿ä¼šæŒç»­ç§¯ç´¯ä¸‹å»ï¼Œæ¬¢è¿Starï¼Œä¹Ÿæ¬¢è¿å‘PRç»™æˆ‘ã€‚</p>
<p><a href="https://github.com/thonatos" target="_blank" rel="external">Thonatos.Yang</a>æ•´ç†çš„GitBookç‰ˆæœ¬ï¼Œé˜…è¯»ä½“éªŒæ›´ä½³ï¼š<a href="https://thonatos.gitbooks.io/be-a-professional-programmer/" target="_blank" rel="external">https://thonatos.gitbooks.io/be-a-professional-programmer/</a></p>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<ul>
<li><a href="#%E8%B5%84%E6%96%99%E7%AF%87">èµ„æ–™ç¯‡</a><ul>
<li><a href="#%E6%8A%80%E6%9C%AF%E7%AB%99%E7%82%B9">æŠ€æœ¯ç«™ç‚¹</a></li>
<li><a href="#%E5%BF%85%E7%9C%8B%E4%B9%A6%E7%B1%8D">å¿…çœ‹ä¹¦ç±</a></li>
<li><a href="#%E5%A4%A7%E7%89%9B%E5%8D%9A%E5%AE%A2">å¤§ç‰›åšå®¢</a></li>
<li><a href="#github%E7%AF%87">GitHubç¯‡</a></li>
</ul>
</li>
<li><a href="#%E5%B7%A5%E5%85%B7%E7%AF%87">å·¥å…·ç¯‡</a><ul>
<li><a href="#%E5%B9%B3%E5%8F%B0%E5%B7%A5%E5%85%B7">å¹³å°å·¥å…·</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7">å¸¸ç”¨å·¥å…·</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1">ç¬¬ä¸‰æ–¹æœåŠ¡</a></li>
<li><a href="#%E7%88%AC%E8%99%AB%E7%9B%B8%E5%85%B3%E5%A5%BD%E7%8E%A9%E7%9A%84%E5%B7%A5%E5%85%B7">çˆ¬è™«ç›¸å…³(å¥½ç©çš„å·¥å…·)</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3">å®‰å…¨ç›¸å…³</a></li>
<li><a href="#web%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%99%A8">WebæœåŠ¡å™¨æ€§èƒ½/å‹åŠ›æµ‹è¯•å·¥å…·/è´Ÿè½½å‡è¡¡å™¨</a></li>
</ul>
</li>
<li><a href="#%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%88%86%E5%B8%83%E5%BC%8F%E5%B7%A5%E5%85%B7">å¤§æ•°æ®å¤„ç†/æ•°æ®åˆ†æ/åˆ†å¸ƒå¼å·¥å…·</a></li>
<li><a href="#web%E5%89%8D%E7%AB%AF">Webå‰ç«¯</a></li>
<li><a href="#%E8%AF%AD%E8%A8%80%E7%AF%87">è¯­è¨€ç¯‡</a><ul>
<li><a href="#scala">Scala</a></li>
<li><a href="#java">Java</a></li>
<li><a href="#python">Python</a></li>
<li><a href="#swift">Swift</a></li>
<li><a href="#net">.NET</a></li>
<li><a href="#c--c">C &amp; C++</a></li>
</ul>
</li>
<li><a href="#%E5%85%B6%E4%BB%96">å…¶ä»–</a><ul>
<li><a href="#%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3">æ¸¸æˆå¼€å‘ç›¸å…³</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E8%81%9A%E5%90%88%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86">æ—¥å¿—èšåˆï¼Œåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</a></li>
<li><a href="#rtp%E5%AE%9E%E6%97%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E4%B8%8E%E9%9F%B3%E8%A7%86%E9%A2%91">RTP,å®æ—¶ä¼ è¾“åè®®ä¸éŸ³è§†é¢‘</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="èµ„æ–™ç¯‡"><a href="#èµ„æ–™ç¯‡" class="headerlink" title="èµ„æ–™ç¯‡"></a>èµ„æ–™ç¯‡</h2><h3 id="æŠ€æœ¯ç«™ç‚¹"><a href="#æŠ€æœ¯ç«™ç‚¹" class="headerlink" title="æŠ€æœ¯ç«™ç‚¹"></a>æŠ€æœ¯ç«™ç‚¹</h3><ul>
<li>åœ¨çº¿å­¦ä¹ ï¼š<a href="https://www.coursera.org/" target="_blank" rel="external">Coursera</a>ã€<a href="https://www.edx.org/" target="_blank" rel="external">edX</a>ã€<a href="https://cn.udacity.com/" target="_blank" rel="external">Udacity</a>ã€<a href="https://ocw.mit.edu/index.htm" target="_blank" rel="external">MITå…¬å¼€è¯¾</a>ã€<a href="http://mooc.guokr.com/course/" target="_blank" rel="external">MOOCå­¦é™¢</a>ã€<a href="http://www.imooc.com/" target="_blank" rel="external">æ…•è¯¾ç½‘</a></li>
<li><a href="https://news.ycombinator.com/" target="_blank" rel="external">Hacker News</a>ï¼šéå¸¸æ£’çš„é’ˆå¯¹ç¼–ç¨‹çš„é“¾æ¥èšåˆç½‘ç«™</li>
<li><a href="https://www.techmeme.com/" target="_blank" rel="external">Techmeme</a>ï¼šç¾å›½çŸ¥åç§‘æŠ€æ–°é—»å’Œåšå®¢èšé›†ç½‘ç«™ï¼Œç±»ä¼¼çš„è¿˜æœ‰ï¼ˆPanda, Hacker &amp; Designer Newsï¼‰</li>
<li><a href="https://www.reddit.com/r/programming/" target="_blank" rel="external">Reddit - Programmingæ¿å—</a>ï¼šåŒä¸Š</li>
<li>Javaç‰›äººå¿…å¤‡ï¼š<a href="http://www.programcreek.com/" target="_blank" rel="external">Program Creek</a></li>
<li><a href="https://stackoverflow.com/" target="_blank" rel="external">Stack Overflow</a>ï¼šITæŠ€æœ¯é—®ç­”ç½‘ç«™</li>
<li><a href="https://segmentfault.com/" target="_blank" rel="external">SegmentFault</a>ï¼šä¸­æ–‡çš„æŠ€æœ¯é—®ç­”ç¤¾åŒº</li>
<li><a href="https://github.com/" target="_blank" rel="external">GitHub</a>ï¼šå…¨çƒæœ€å¤§çš„æºä»£ç ç®¡ç†å¹³å°ï¼Œå¾ˆå¤šçŸ¥åå¼€æºé¡¹ç›®éƒ½åœ¨ä¸Šé¢ï¼Œå¦‚<a href="https://github.com/torvalds/linux" target="_blank" rel="external">Linuxå†…æ ¸</a>ï¼Œ<a href="https://github.com/openstack/openstack" target="_blank" rel="external">OpenStack</a>ç­‰</li>
<li><a href="https://git.oschina.net/" target="_blank" rel="external">ç äº‘</a>ï¼šæ”¯æŒä¸­æ–‡å¯å…è´¹åˆ›å»ºç§æœ‰é¡¹ç›®çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œå¯ä½œä¸ºå¤‡é€‰</li>
<li><a href="https://leetcode.com/" target="_blank" rel="external">LeetCode</a>ï¼šæ¥åšåšè¿™äº›é¢˜å§ï¼Œçœ‹çœ‹è‡ªå·±çš„ç®—æ³•æ°´å¹³å¦‚ä½•ï¼Ÿè¿™å¯æ¯”ä»€ä¹ˆé¢è¯•å®å…¸å¼ºå¤šäº†ã€‚</li>
<li><a href="http://www.lintcode.com/zh-cn/" target="_blank" rel="external">LintCode</a>ï¼šæ”¯æŒä¸­æ–‡çš„ç¼–ç¨‹é¢˜åœ¨çº¿è®­ç»ƒå¹³å°ï¼Œå¯ä½œä¸ºå¤‡é€‰</li>
<li><a href="https://www.kaggle.com/" target="_blank" rel="external">Kaggle</a>,<a href="https://www.topcoder.com/" target="_blank" rel="external">Topcoder</a>: æœºå™¨å­¦ä¹ ã€å¤§æ•°æ®ç«èµ›</li>
<li><a href="https://gold.xitu.io/" target="_blank" rel="external">æ˜é‡‘</a>ï¼šé«˜è´¨é‡çš„æŠ€æœ¯ç¤¾åŒº</li>
<li><a href="https://toutiao.io/" target="_blank" rel="external">å¼€å‘è€…å¤´æ¡</a></li>
<li><a href="http://www.infoq.com/cn" target="_blank" rel="external">InfoQ</a>ï¼šä¼ä¸šçº§åº”ç”¨ï¼Œå…³æ³¨è½¯ä»¶å¼€å‘é¢†åŸŸ</li>
<li><a href="https://www.v2ex.com/" target="_blank" rel="external">V2EX: way to explore</a></li>
<li>å›½å†…è€ç‰ŒæŠ€æœ¯ç¤¾åŒºï¼š<a href="https://www.oschina.net/" target="_blank" rel="external">OSChina</a>ã€<a href="http://www.cnblogs.com/" target="_blank" rel="external">åšå®¢å›­</a>ã€<a href="http://www.csdn.net/" target="_blank" rel="external">CSDN</a>ã€<a href="http://www.51cto.com/" target="_blank" rel="external">51CTO</a></li>
<li>å…è´¹çš„itç”µå­ä¹¦ï¼š<a href="http://it-ebooks.info/" target="_blank" rel="external">http://it-ebooks.info/</a></li>
<li>åœ¨çº¿å­¦ä¹ ï¼š<a href="http://www.udemy.com/" target="_blank" rel="external">http://www.udemy.com/</a></li>
<li>ä¼˜è´¨å­¦ä¹ èµ„æºï¼š<a href="http://plus.mojiax.com/" target="_blank" rel="external">http://plus.mojiax.com/</a></li>
<li>ä»£ç ç»ƒä¹ ï¼š<a href="http://exercism.io/" target="_blank" rel="external">http://exercism.io/</a>   and  <a href="https://www.codingame.com" target="_blank" rel="external">https://www.codingame.com</a></li>
<li><a href="http://www.devstore.cn/" target="_blank" rel="external">DevStore</a>:å¼€å‘è€…æœåŠ¡å•†åº—</li>
<li><a href="https://msdn.microsoft.com/zh-cn" target="_blank" rel="external">MSDN</a>ï¼šå¾®è½¯ç›¸å…³çš„å®˜æ–¹æŠ€æœ¯é›†ä¸­åœ°ï¼Œä¸»è¦æ˜¯æ–‡æ¡£ç±»</li>
<li><a href="https://developers.google.cn/" target="_blank" rel="external">è°·æ­Œå¼€å‘è€…</a></li>
<li><a href="http://www.ctolib.com/" target="_blank" rel="external">ç åº“</a> - æ”¶å½•äº†å®ç”¨çš„å¼€æºé¡¹ç›®åŠèµ„æº</li>
<li><a href="http://coding.net" target="_blank" rel="external">Coding</a> åŸºäºGitçš„å›½å†…ä»£ç æ‰˜ç®¡å¹³å°ï¼Œæ”¯æŒç§æœ‰é¡¹ç›®ï¼Œæœ‰é¡¹ç›®ç®¡ç†ç›¸å…³åŠŸèƒ½</li>
</ul>
<h3 id="å¿…çœ‹ä¹¦ç±"><a href="#å¿…çœ‹ä¹¦ç±" class="headerlink" title="å¿…çœ‹ä¹¦ç±"></a>å¿…çœ‹ä¹¦ç±</h3><ul>
<li>SICP(<a href="https://mitpress.mit.edu/sicp/" target="_blank" rel="external">Structure and Interpretation of Computer Programs</a>)</li>
<li>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</li>
<li>ä»£ç å¤§å…¨2</li>
<li>äººä»¶</li>
<li>äººæœˆç¥è¯</li>
<li>è½¯ä»¶éšæƒ³å½•</li>
<li>ç®—æ³•å¯¼è®ºï¼ˆéº»çœç†å·¥å­¦é™¢å‡ºç‰ˆç¤¾ï¼‰</li>
<li>ç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨</li>
<li>è®¾è®¡æ¨¡å¼</li>
<li>ç¼–ç¨‹ä¹‹ç¾</li>
<li>é»‘å®¢ä¸ç”»å®¶</li>
<li>ç¼–ç¨‹ç ç‘</li>
<li>The Little Schemer</li>
<li>Simply Scheme_Introducing_Computer_Science</li>
<li>C++ Prime</li>
<li>Effective C++</li>
<li>TCP/IPè¯¦è§£</li>
<li>Unix ç¼–ç¨‹è‰ºæœ¯</li>
<li>æŠ€æœ¯çš„æœ¬è´¨</li>
<li>è½¯ä»¶éšæƒ³å½•</li>
<li>è®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯</li>
<li>èŒä¸šç¯‡ï¼šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»,ç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“,é«˜æ•ˆèƒ½ç¨‹åºå‘˜çš„ä¿®ç‚¼</li>
<li>ã€Šç²¾ç¥åˆ†æå¼•è®ºã€‹å¼—æ´›ä¼Šå¾·</li>
<li>ã€Šå¤±æ§ã€‹ã€Šç§‘æŠ€æƒ³è¦ä»€ä¹ˆã€‹ã€ŠæŠ€æœ¯å…ƒç´ ã€‹å‡¯æ–‡å‡¯åˆ©</li>
<li>ç¨‹åºå¼€å‘å¿ƒç†å­¦</li>
<li>å¤©åœ°ä¸€æ²™é¸¥</li>
<li>æå®šï¼šæ— å‹åŠ›å·¥ä½œçš„è‰ºæœ¯</li>
</ul>
<h3 id="å¤§ç‰›åšå®¢"><a href="#å¤§ç‰›åšå®¢" class="headerlink" title="å¤§ç‰›åšå®¢"></a>å¤§ç‰›åšå®¢</h3><ul>
<li>äº‘é£ï¼ˆæ¸¸æˆç•Œå¤§ç‰›ï¼‰: <a href="http://blog.codingnow.com/" target="_blank" rel="external">http://blog.codingnow.com/</a></li>
<li>ç‹å ï¼ˆä¸å°‘æ–‡ç« å–·åˆ°è›®æœ‰é“ç†ï¼‰ï¼š<a href="http://www.yinwang.org/" target="_blank" rel="external">http://www.yinwang.org/</a></li>
<li>å†°æ²³-ä¼å“¥(Lispå¤§ç‰›)ï¼š<a href="http://tianchunbinghe.blog.163.com/" target="_blank" rel="external">http://tianchunbinghe.blog.163.com/</a></li>
<li>Rå¤§<a href="https://zhuanlan.zhihu.com/p/25042028" target="_blank" rel="external">ã€å¹²è´§æ»¡æ»¡ã€‘RednaxelaFXå†™çš„æ–‡ç« /å›ç­”çš„å¯¼èˆªå¸–</a></li>
<li>é™ˆçš“-å·¦è€³æœµè€—å­ï¼š<a href="http://coolshell.cn/" target="_blank" rel="external">http://coolshell.cn/</a></li>
<li>Jeff Atwoodï¼ˆå›½å¤–çŸ¥ååšä¸»ï¼‰: <a href="https://blog.codinghorror.com/" target="_blank" rel="external">https://blog.codinghorror.com/</a></li>
<li>é˜®ä¸€å³°ï¼ˆé»‘å®¢ä¸ç”»å®¶è¯‘è€…ï¼ŒWebï¼‰ï¼š<a href="http://www.ruanyifeng.com/" target="_blank" rel="external">http://www.ruanyifeng.com/</a></li>
<li>å»–é›ªå³°ï¼ˆä»–çš„Pythonã€Gitæ•™ç¨‹ä¸å°‘äººéƒ½çœ‹è¿‡ï¼‰ï¼š<a href="http://www.liaoxuefeng.com/" target="_blank" rel="external">http://www.liaoxuefeng.com/</a></li>
<li>é“å“¥çš„é»‘æ¿æŠ¥ï¼ˆå®‰å…¨ï¼‰ï¼š<a href="https://zhuanlan.zhihu.com/taosay" target="_blank" rel="external">https://zhuanlan.zhihu.com/taosay</a></li>
<li><a href="https://github.com/search?l=&amp;o=desc&amp;p=1&amp;q=location%3AChina&amp;ref=advsearch&amp;s=followers&amp;type=Users&amp;utf8=%E2%9C%93" target="_blank" rel="external">å›½å†…GitHubä¸Šå…³æ³¨åº¦è¾ƒé«˜çš„å¼€å‘è€…</a></li>
</ul>
<h3 id="GitHubç¯‡"><a href="#GitHubç¯‡" class="headerlink" title="GitHubç¯‡"></a>GitHubç¯‡</h3><p><strong> Awesome </strong></p>
<ul>
<li><a href="https://github.com/sindresorhus/awesome" target="_blank" rel="external">Awesome</a>: è¿™æ˜¯ä¸ªAwesomeåˆé›†ï¼Œå¸¸è§çš„èµ„æ–™è¿™é‡Œé¢éƒ½èƒ½æ‰¾åˆ°</li>
<li><a href="https://github.com/sindresorhus/awesome" target="_blank" rel="external">Awesome2</a>: ç±»ä¼¼ç¬¬ä¸€ä¸ªAwesome</li>
<li><a href="https://github.com/jnv/lists" target="_blank" rel="external">æ‚ä¸ƒæ‚å…«ã€æœ‰ç”¨æ²¡ç”¨çš„Awesomeåˆé›†</a></li>
<li><a href="https://github.com/bayandin/awesome-awesomeness" target="_blank" rel="external">éå¸¸ä¸é”™çš„è¯­è¨€ç±»å­¦ä¹ èµ„æ–™é›†åˆï¼šAwesomeness</a></li>
<li><a href="https://github.com/cjwirth/awesome-ios-ui" target="_blank" rel="external">awesome-ios-ui</a></li>
<li><a href="https://github.com/wasabeef/awesome-android-ui" target="_blank" rel="external">awesome-android-ui</a></li>
<li><a href="https://github.com/lightSky/Awesome-MaterialDesign" target="_blank" rel="external">Awesome-MaterialDesign</a></li>
<li><a href="https://github.com/caesar0301/awesome-public-datasets" target="_blank" rel="external">awesome-public-datasets</a></li>
<li><a href="https://github.com/paragonie/awesome-appsec" target="_blank" rel="external">awesome-AppSec(ç³»ç»Ÿå®‰å…¨)</a></li>
<li><a href="https://github.com/okulbilisim/awesome-datascience" target="_blank" rel="external">awesome-datascience</a></li>
<li><a href="https://github.com/fasouto/awesome-dataviz" target="_blank" rel="external">awesome-dataviz</a> - æ•°æ®å¯è§†åŒ–åº“åŠèµ„æ–™</li>
<li><a href="https://github.com/jacksu/awesome-es" target="_blank" rel="external">awesome-es</a></li>
</ul>
<p><strong> ä¹¦ç±èµ„æ–™ </strong></p>
<ul>
<li><a href="https://github.com/bingwen/free-programming-books/blob/master/free-programming-books-ch.md" target="_blank" rel="external">free-programming-books</a> <a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books-zh.md" target="_blank" rel="external">ä¸­æ–‡ç‰ˆ</a></li>
<li><a href="https://github.com/justjavac/free-programming-books-zh_CN" target="_blank" rel="external">å…è´¹çš„ç¼–ç¨‹ä¸­æ–‡ä¹¦ç±ç´¢å¼•</a></li>
<li><a href="https://github.com/julycoding/The-Art-Of-Programming-By-July" target="_blank" rel="external">ã€Šç¨‹åºå‘˜ç¼–ç¨‹è‰ºæœ¯ â€” é¢è¯•å’Œç®—æ³•å¿ƒå¾—ã€‹</a></li>
<li><a href="https://github.com/dariubs/GoBooks" target="_blank" rel="external">GoBooks</a></li>
<li><a href="https://github.com/papers-we-love/papers-we-love" target="_blank" rel="external">Papers we love</a></li>
<li><a href="https://github.com/JustFollowUs/Natural-Language-Processing" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†NLPæ¨èå­¦ä¹ è·¯çº¿åŠå‚è€ƒèµ„æ–™</a></li>
<li><a href="https://github.com/josephmisiti/awesome-machine-learning" target="_blank" rel="external">è¶…çº§æ£’çš„æœºå™¨å­¦ä¹ èµ„æ–™ï¼ˆæ¡†æ¶ï¼Œåº“ï¼Œè½¯ä»¶ï¼‰</a>, <a href="http://www.oschina.net/news/53818/awesome-machine-learning" target="_blank" rel="external">ä¸­æ–‡ç¿»è¯‘ç‰ˆ</a></li>
<li><a href="http://news.cnblogs.com/n/504467/" target="_blank" rel="external">æœºå™¨å­¦ä¹ (Machine Learning)&amp;æ·±å…¥å­¦ä¹ (Deep Learning)èµ„æ–™</a></li>
<li><a href="http://special.csdncms.csdn.net/BeDocker/" target="_blank" rel="external">Dockerèµ„æ–™åˆé›†</a></li>
<li><a href="https://github.com/apache/incubator-storm/tree/master/examples/storm-starter" target="_blank" rel="external">å­¦ä¹ ä½¿ç”¨Strom</a></li>
<li><a href="http://ercoppa.github.io/HadoopInternals/" target="_blank" rel="external">Hadoop Internals</a></li>
<li><a href="https://github.com/JerryLead/SparkInternals/tree/master/markdown" target="_blank" rel="external">Spark Internals</a></li>
<li><a href="http://hadoop.readthedocs.org/en/latest/" target="_blank" rel="external">å¤§æ•°æ®æ—¶ä»£çš„æ•°æ®åˆ†æä¸æ•°æ®æŒ–æ˜ â€“ åŸºäºHadoopå®ç°</a></li>
<li><a href="http://samypesse.gitbooks.io/how-to-create-an-operating-system/index.html" target="_blank" rel="external">å¦‚ä½•åˆ¶ä½œæ“ä½œç³»ç»Ÿ</a></li>
<li><a href="https://github.com/zhuangbiaowei/learn-with-open-source" target="_blank" rel="external">å€ŸåŠ©å¼€æºé¡¹ç›®å­¦ä¹ è½¯ä»¶å¼€å‘</a></li>
<li><a href="http://code.csdn.net/news/2821842" target="_blank" rel="external">å‡ ä¸ªä¸é”™çš„å¼€æºæ¸¸æˆå¼•æ“</a></li>
<li><a href="https://github.com/hit9/PyZh" target="_blank" rel="external">ä¸€èµ·å†™Pythonæ–‡ç« ï¼Œä¸€èµ·çœ‹Pythonæ–‡ç« </a></li>
<li><a href="http://blog.fens.me/series-r/" target="_blank" rel="external">Rçš„æå®¢ç†æƒ³ç³»åˆ—æ–‡ç« </a></li>
<li><a href="https://github.com/bolasblack/http-api-guide" target="_blank" rel="external">HTTPæ¥å£è®¾è®¡æŒ‡å—</a></li>
<li><a href="https://github.com/foru17/front-end-collect" target="_blank" rel="external">åˆ†äº«è‡ªå·±é•¿æœŸå…³æ³¨çš„å‰ç«¯å¼€å‘ç›¸å…³çš„ä¼˜ç§€ç½‘ç«™ã€åšå®¢ã€ä»¥åŠæ´»è·ƒå¼€å‘è€…</a></li>
<li><a href="https://github.com/rxin/db-readings" target="_blank" rel="external">Readings in Databases</a></li>
<li><a href="https://github.com/rushter/data-science-blogs" target="_blank" rel="external">Data Science blogs</a></li>
<li><a href="https://github.com/oldratlee/translations/blob/master/log-what-every-software-engineer-should-know-about-real-time-datas-unifying/README.md" target="_blank" rel="external">æ—¥å¿—ï¼šæ¯ä¸ªè½¯ä»¶å·¥ç¨‹å¸ˆéƒ½åº”è¯¥çŸ¥é“çš„æœ‰å…³å®æ—¶æ•°æ®çš„ç»Ÿä¸€æ¦‚å¿µ</a></li>
<li><a href="http://guides.codepath.com/android" target="_blank" rel="external">Android Code Path</a></li>
<li><a href="https://github.com/GeniusVJR/LearningNotes" target="_blank" rel="external">Android Learn Notes</a></li>
<li><a href="https://github.com/ziadoz/awesome-php" target="_blank" rel="external">PHP ç±»åº“æ¡†æ¶ï¼Œèµ„æ–™é›†åˆ</a></li>
</ul>
<p><strong> ä¼˜ç§€é¡¹ç›® </strong></p>
<ul>
<li><a href="http://news.cnblogs.com/n/506775/" target="_blank" rel="external">æœ€å€¼å¾—å…³æ³¨çš„10ä¸ªCè¯­è¨€å¼€æºé¡¹ç›®</a></li>
<li><a href="http://code.csdn.net/news/2822568" target="_blank" rel="external">15æ¬¾å€¼å¾—å­¦ä¹ çš„å°å‹å¼€æºé¡¹ç›®</a></li>
<li><a href="https://github.com/Aufree/trip-to-iOS" target="_blank" rel="external">iOS-100ä¸ªå¼€æºç»„ä»¶</a></li>
<li><a href="http://code.csdn.net/news/2822753" target="_blank" rel="external">åå¤§Material Designå¼€æºé¡¹ç›®</a></li>
<li><a href="https://github.com/Trinea/android-open-project" target="_blank" rel="external">Androidå¼€æºé¡¹ç›®åˆ†ç±»æ±‡æ€»</a></li>
</ul>
<p><strong> å‰ç«¯ &amp; Node.js </strong></p>
<ul>
<li><a href="https://github.com/moklick/frontend-stuff" target="_blank" rel="external">å‰ç«¯èµ„æº</a></li>
<li><a href="https://github.com/w3crange/Front-End-Develop-Guide" target="_blank" rel="external">å‰ç«¯å¼€å‘æŒ‡å—</a></li>
<li><a href="http://html5ify.com/fks/" target="_blank" rel="external">å‰ç«¯æŠ€èƒ½æ±‡æ€»</a></li>
<li><a href="http://www.daqianduan.com/nav" target="_blank" rel="external">å‰ç«¯èµ„æºå¤§å¯¼èˆª</a></li>
<li><a href="https://github.com/lisposter/frontend-books" target="_blank" rel="external">æ”¶é›†å‰ç«¯æ–¹é¢çš„ä¹¦ç±</a></li>
<li><a href="https://github.com/markyun/My-blog/tree/master/Front-end-Developer-Questions" target="_blank" rel="external">2014å¹´æœ€æ–°å‰ç«¯å¼€å‘é¢è¯•é¢˜</a></li>
<li><a href="https://github.com/airbnb/javascript" target="_blank" rel="external">ç®€å•æ¸…æ™°çš„JavaScriptè¯­è¨€æ•™ç¨‹ï¼Œä»£ç ç¤ºä¾‹</a></li>
<li><a href="https://github.com/airbnb/javascript" target="_blank" rel="external">JavaScriptç¼–ç¨‹è§„èŒƒ</a></li>
<li><a href="https://github.com/bolshchikov/js-must-watch" target="_blank" rel="external">JavaScriptå¿…çœ‹è§†é¢‘</a></li>
<li><a href="http://javascript.ruanyifeng.com/" target="_blank" rel="external">JavaScriptæ ‡å‡†å‚è€ƒæ•™ç¨‹ï¼ˆé˜®ä¸€å³°çš„ï¼Œæ•´ç†çš„ä¸é”™ï¼‰</a></li>
<li><a href="https://github.com/bolshchikov/js-must-watch" target="_blank" rel="external">JSå¿…çœ‹</a></li>
<li><a href="https://github.com/jmcunningham/AngularJS-Learning/blob/master/ZH-CN.md" target="_blank" rel="external">AngularJS Guideçš„ä¸­æ–‡åˆ†æ”¯</a></li>
<li><a href="https://github.com/timjacobi/angular2-education" target="_blank" rel="external">Angular2å­¦ä¹ èµ„æ–™</a></li>
<li><a href="https://github.com/mgechev/angularjs-style-guide/blob/master/README-zh-cn.md" target="_blank" rel="external">AngularJSåº”ç”¨çš„æœ€ä½³å®è·µå’Œé£æ ¼æŒ‡å—</a></li>
<li><a href="https://github.com/reactnativecn/react-native-guide" target="_blank" rel="external">React-Nativeå­¦ä¹ æŒ‡å—</a></li>
<li><a href="http://nqdeng.github.io/7-days-nodejs/" target="_blank" rel="external">ä¸ƒå¤©å­¦ä¼šNodeJS</a></li>
<li><a href="https://github.com/sergtitov/NodeJS-Learning/blob/master/cn_resource.md" target="_blank" rel="external">node.jsä¸­æ–‡èµ„æ–™å¯¼èˆª</a></li>
<li><a href="http://blog.fens.me/nodejs-roadmap/" target="_blank" rel="external">Nodejså­¦ä¹ è·¯çº¿å›¾</a></li>
<li><a href="http://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js/9629682#9629682" target="_blank" rel="external">å¦‚ä½•å­¦ä¹ nodejs</a></li>
</ul>
<p><strong> å·¥ä½œï¼Œå·¥å…· </strong></p>
<ul>
<li><a href="https://github.com/kahun/awesome-sysadmin" target="_blank" rel="external">ç³»ç»Ÿç®¡ç†å‘˜å·¥å…·é›†åˆ</a></li>
<li><a href="http://git-scm.com/book/zh" target="_blank" rel="external">Pro Git</a></li>
<li><a href="https://github.com/taobao/nginx-book" target="_blank" rel="external">Nginxå¼€å‘ä»å…¥é—¨åˆ°ç²¾é€š</a></li>
<li><a href="https://github.com/justjavac/Google-IPs.git" target="_blank" rel="external">Google å…¨çƒ IP åœ°å€åº“</a></li>
<li><a href="https://github.com/greatghoul/remote-working" target="_blank" rel="external">æ”¶é›†æ•´ç†è¿œç¨‹å·¥ä½œç›¸å…³çš„èµ„æ–™</a></li>
<li><a href="https://github.com/chriskempson/base16" target="_blank" rel="external">Color schemes for hackers</a></li>
<li><a href="https://github.com/ellisonleao/magictools" target="_blank" rel="external">æ¸¸æˆå¼€å‘å·¥å…·é›†ï¼ŒMagicTools</a></li>
<li><a href="https://github.com/ripienaar/free-for-dev" target="_blank" rel="external">å¼€å‘è€…å·¥å…·ç®±ï¼Œ free-for-dev</a></li>
<li><a href="https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.zh-cn.md" target="_blank" rel="external">GitHubç§˜ç±</a></li>
<li><a href="https://github.com/agis-/git-style-guide" target="_blank" rel="external">Gité£æ ¼æŒ‡å—</a></li>
<li><a href="https://github.com/hzlzh/Best-App" target="_blank" rel="external">Bast-App</a></li>
</ul>
<h2 id="å·¥å…·ç¯‡"><a href="#å·¥å…·ç¯‡" class="headerlink" title="å·¥å…·ç¯‡"></a>å·¥å…·ç¯‡</h2><h3 id="å¹³å°å·¥å…·"><a href="#å¹³å°å·¥å…·" class="headerlink" title="å¹³å°å·¥å…·"></a>å¹³å°å·¥å…·</h3><ul>
<li>Phabricator: è½¯ä»¶å¼€å‘å¹³å°ï¼ŒFacebookå‡ºå“ï¼Œç°å·²å¼€æºï¼ŒCodeReviewç¥å™¨ï¼ˆä»è¿™ä¸ªå¾€ä¸‹ä¸€ç›´åˆ°GitLabä¹‹é—´çš„å·¥å…·ç»Ÿç»Ÿå¯ä»¥å¿½ç•¥äº†ï¼‰</li>
<li>Redmine/Tracï¼šé¡¹ç›®ç®¡ç†å¹³å°</li>
<li>Jenkins/Jira(éå¼€æº)ï¼šæŒç»­é›†æˆç³»ç»Ÿï¼ˆApache Continuumï¼Œè¿™ä¸ªæ˜¯Apacheä¸‹çš„CIç³»ç»Ÿï¼Œè¿˜æ²¡æ¥å¾—åŠç ”ç©¶ï¼‰</li>
<li>gitï¼Œsvnï¼šæºä»£ç ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li>
<li>GitLab/Gitoriousï¼šæ„å»ºè‡ªå·±çš„GitHubæœåŠ¡å™¨</li>
<li>Postman:RESTfulï¼Œapiæµ‹è¯•å·¥å…·ï¼ŒHTTPæ¥å£å¼€å‘å¿…å¤‡ç¥å™¨</li>
<li><a href="http://airbnb.design/lottie/" target="_blank" rel="external">Lottie</a>: AEåŠ¨ç”»å˜åŸç”Ÿä»£ç ï¼Œè®¾è®¡å¸ˆå¿…å¤‡</li>
<li>Sonarï¼šä»£ç è´¨é‡ç®¡ç†å¹³å°</li>
<li>Nessus: ç³»ç»Ÿæ¼æ´æ‰«æå™¨</li>
<li>gitbookï¼š<a href="https://www.gitbook.io/" target="_blank" rel="external">https://www.gitbook.io/</a>å†™ä¹¦çš„å¥½ä¸œè¥¿ï¼Œå½“ç„¶ç”¨æ¥å†™æ–‡æ¡£ä¹Ÿå¾ˆä¸é”™çš„ï¼ˆå‘ç°ä¸å°‘äº§å“çš„æ–‡æ¡£å°±æ˜¯ç”¨çš„å®ƒï¼‰</li>
<li>Travis-ciï¼šå¼€æºé¡¹ç›®æŒç»­é›†æˆå¿…å¤‡ï¼Œå’ŒGitHubç›¸ç»“åˆï¼Œ<a href="https://travis-ci.org/" target="_blank" rel="external">https://travis-ci.org/</a></li>
<li>Trelloï¼šç®€å•é«˜æ•ˆçš„é¡¹ç›®ç®¡ç†å¹³å°ï¼Œæ³¨é‡çœ‹æ¿ç®¡ç†</li>
<li>æ—¥å¿—èšåˆï¼šgraylogã€ELKï¼ˆæ¨èæ–°ä¸€ä»£çš„graylogï¼ŒåŸºæœ¬ä¸Šç®—ä½œæ˜¯å¼€æºçš„Splunkäº†ï¼‰</li>
<li>å¼€æºæµ‹è¯•å·¥å…·ã€ç¤¾åŒºï¼ˆSeleniumã€OpenQA.orgï¼‰</li>
<li>Puppet:ä¸€ä¸ªè‡ªåŠ¨ç®¡ç†å¼•æ“ï¼Œå¯ä»¥é€‚ç”¨äºLinuxã€Unixä»¥åŠWindowså¹³å°ã€‚æ‰€è°“é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œå°±æ˜¯ç®¡ç†æœºå™¨é‡Œé¢è¯¸å¦‚æ–‡ä»¶ã€ç”¨æˆ·ã€è¿›ç¨‹ã€è½¯ä»¶åŒ…è¿™äº›èµ„æºã€‚æ— è®ºæ˜¯ç®¡ç†1å°ï¼Œè¿˜æ˜¯ä¸Šä¸‡å°æœºå™¨Puppetéƒ½èƒ½è½»æ¾æå®šã€‚å…¶ä»–ç±»ä¼¼å·¥å…·ï¼šCFEngineã€SaltStackã€Ansible</li>
<li>Nagiosï¼šç³»ç»ŸçŠ¶æ€ç›‘æ§æŠ¥è­¦ï¼Œè¿˜æœ‰ä¸ªIcinga(å®Œå…¨å…¼å®¹nagiosæ‰€æœ‰çš„æ’ä»¶,å·¥ä½œåŸç†,é…ç½®æ–‡ä»¶ä»¥åŠæ–¹æ³•,å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚é…ç½®ç®€å•,åŠŸèƒ½å¼ºå¤§)</li>
<li>Gangliaï¼šåˆ†å¸ƒå¼ç›‘æ§ç³»ç»Ÿ</li>
<li>fleetï¼šåˆ†å¸ƒå¼initç³»ç»Ÿ</li>
<li>Ansibleï¼šèƒ½å¤Ÿå¤§å¤§ç®€åŒ–Unixç®¡ç†å‘˜çš„è‡ªåŠ¨åŒ–é…ç½®ç®¡ç†ä¸æµç¨‹æ§åˆ¶æ–¹å¼ã€‚</li>
<li>GeoLiteå…è´¹æ•°æ®åº“</li>
<li>jsHint:jsä»£ç éªŒè¯å·¥å…·</li>
<li>haproxy: é«˜å¯ç”¨è´Ÿè½½å‡è¡¡ï¼ˆæ­¤å¤–ç±»ä¼¼çš„ç³»ç»Ÿè¿˜æœ‰nginxï¼Œlvsï¼‰</li>
<li>linux OSæ€§èƒ½åˆ†æå·¥å…·ï¼šdstatï¼Œiostatï¼Œiotopï¼Œnmon</li>
<li>kimonoï¼šå°†ç½‘é¡µä¿¡æ¯è½¬æ¢ä¸ºapiæ¥å£çš„å·¥å…·</li>
<li>é›†ç¾¤ç®¡ç†å·¥å…·ï¼špdshï¼ŒClusterSSHï¼Œmusshï¼ˆå¯ä»¥ç”¨å®ƒå¿«é€Ÿç®¡ç†Hadoopé›†ç¾¤ï¼‰ipa-serveråšç»Ÿä¸€çš„è®¤è¯ç®¡ç†</li>
<li>influxdb: åˆ†å¸ƒå¼æ—¶åºæ•°æ®åº“ï¼Œç»“åˆGrafanaå¯ä»¥è¿›è¡Œå®æ—¶æ•°æ®åˆ†æ</li>
<li>dot: ç¨‹åºå‘˜ç»˜å›¾åˆ©å™¨ï¼ˆæ˜¯ç§è¯­è¨€ï¼Œä¹Ÿæ˜¯ä¸ªå·¥å…·ï¼‰</li>
<li>Graph::Easy: ï¼ˆAscii Artå·¥å…·ï¼‰å­—ç¬¦æµç¨‹å›¾ç»˜åˆ¶ï¼Œå®ä¹ƒç¨‹åºå‘˜è£…é€¼ç¥å™¨ã€‚å…¶ä»–ç±»ä¼¼çš„å·¥å…·Asciiflow, viæ’ä»¶ï¼šdrawit!</li>
<li>spf13-vim: è®©ä½ çš„vimé£èµ·æ¥ï¼</li>
<li>Kubernetes: å®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿ</li>
<li>Gatling: æœåŠ¡å™¨æ€§èƒ½å‹åŠ›æµ‹è¯•å·¥å…·</li>
<li>systemtap: Linuxå†…æ ¸æ¢æµ‹å·¥å…·ã€å†…æ ¸è°ƒè¯•ç¥å™¨</li>
<li>Cygwinï¼šWindowsä¸‹çš„ç±»UNIXæ¨¡æ‹Ÿç¯å¢ƒ</li>
<li>MinGWï¼šWindowsä¸‹çš„GNUå·¥å…·é›†</li>
</ul>
<h3 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·"></a>å¸¸ç”¨å·¥å…·</h3><ul>
<li><a href="https://github.com/hzlzh/Best-App" target="_blank" rel="external">Macä¸‹çš„ç¥å…µåˆ©å™¨</a></li>
<li><a href="https://asciinema.org/" target="_blank" rel="external">asciinema</a>: ç»ˆç«¯å½•å±ç¥å™¨</li>
<li>Fiddlerï¼šéå¸¸å¥½ç”¨çš„Webå‰ç«¯è°ƒè¯•å·¥å…·ï¼Œå½“ç„¶æ˜¯é’ˆå¯¹åº•å±‚httpåè®®çš„ï¼Œä¸€èˆ¬æƒ…å†µä½¿ç”¨Chromeç­‰è‡ªå¸¦çš„è°ƒè¯•å·¥å…·ä¹Ÿè¶³å¤Ÿäº†ï¼Œç‰¹æ®Šæƒ…å†µè¿˜å¾—ç”¨å®ƒå»å¤„ç†</li>
<li>Charles: Macä¸Šçš„Webä»£ç†è°ƒè¯•å·¥å…·ï¼Œç±»ä¼¼Fiddler</li>
<li><a href="https://fir.im/" target="_blank" rel="external">fir.im</a>å…è´¹çš„ç§»åŠ¨Appå†…æµ‹æ‰˜ç®¡å¹³å°</li>
<li>wiresharkï¼šçŸ¥åçš„ç½‘ç»œæ•°æ®åŒ…åˆ†æå·¥å…·</li>
<li>PowerCmd:æ›¿ä»£Windows Cmdçš„åˆ©å™¨</li>
<li>RegexBuddy:å¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å·¥å…·</li>
<li>Soure Insightï¼šæºä»£ç é˜…è¯»ç¥å™¨</li>
<li>SublimeTextï¼šç¨‹åºå‘˜æœ€çˆ±çš„ç¼–è¾‘å™¨</li>
<li>Database.NETï¼šä¸€ä¸ªé€šç”¨çš„å…³ç³»å‹æ•°æ®åº“å®¢æˆ·ç«¯ï¼ŒåŸºäº.NET 4.0å¼€å‘çš„ï¼Œåšç®€å•çš„å¤„ç†è¿˜æ˜¯è›®æ–¹ä¾¿çš„</li>
<li>Navicat Premiumï¼šæ”¯æŒMySqlã€PostgreSQLã€Oracleã€Sqliteå’ŒSQL Serverçš„å®¢æˆ·ç«¯ï¼Œé€šç”¨æ€§ä¸Šä¸å¦‚Database.NETï¼Œä½†æ€§èƒ½æ–¹é¢æ¯”Database.NETå¥½å¾ˆå¤šï¼Œè‡ªå¸¦å¤‡ä»½åŠŸèƒ½ä¹Ÿç”¨äºæ•°æ®åº“å®šæ—¶å¤‡ä»½ã€‚</li>
<li>Synergy : å±€åŸŸç½‘å†…ä¸€å¥—é”®ç›˜é¼ æ ‡æ§åˆ¶å¤šå°ç”µè„‘</li>
<li>DameWareï¼šè¿œç¨‹ååŠ©å·¥å…·é›†ï¼ˆæˆ‘åœ¨å…¬å¸ä¸»è¦æ§åˆ¶å¤§å±å¹•ç”¨ï¼‰</li>
<li>Radmin: è¿œç¨‹æ§åˆ¶å·¥å…·ï¼Œç”¨äº†ä¸€æ®µæ—¶é—´çš„DameWareï¼Œè¿˜è¦ç ´è§£ï¼Œå¯¹Win7æ”¯æŒçš„ä¸å¥½ï¼Œè¿˜æ˜¯å‘ç°è¿™ä¸ªå¥½ç”¨</li>
<li>Listaryï¼šèƒ½æå¤§å¹…åº¦æé«˜ä½  Windows æ–‡ä»¶æµè§ˆä¸æœç´¢é€Ÿåº¦æ•ˆç‡çš„ã€Œè¶…çº§ç¥å™¨ã€</li>
<li>Cloverï¼šç»™èµ„æºç®¡ç†å™¨åŠ ä¸Šå¤šæ ‡ç­¾ï¼Œæˆ‘å¹³æ—¶å·¥ä½œçš„æ—¶å€™å°±ç”¨å®ƒï¼ŒåƒChromeä¸€æ ·ä½¿ç”¨èµ„æºç®¡ç†å™¨ï¼Œç”šæ˜¯æ–¹ä¾¿å•Šï¼ˆè¿™æ˜¯Windowså¹³å°çš„ï¼‰</li>
<li>WinLaunchï¼šæ¨¡æ‹ŸMac OSçš„Launchå·¥å…·</li>
<li>OllyDbg: ODå¤§åé¼é¼çš„åæ±‡ç¼–å·¥å…·ï¼ŒWinå¹³å°</li>
<li>Fritzingï¼šç»˜åˆ¶ç”µè·¯å›¾</li>
<li>LICEcapï¼šgifæ•™ç¨‹åˆ¶ä½œ</li>
<li>gitï¼Œsvnï¼šç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li>
<li>Enigma Virtual Boxï¼ˆå°†exeï¼Œdllç­‰å°è£…æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼‰</li>
<li>Open DBDiff(é’ˆå¯¹SqlServer)æ•°æ®åº“åŒæ­¥</li>
<li>SymmetricDSï¼šæ•°æ®åº“åŒæ­¥</li>
<li>BIEE,Infomaticaï¼ŒSPSSï¼Œwekaï¼ŒRè¯­è¨€ï¼šæ•°æ®åˆ†æ</li>
<li>CodeSmithï¼ŒLightSwitchï¼šä»£ç ç”Ÿæˆ</li>
<li>Pandocï¼šMarkdownè½¬æ¢å·¥å…·ï¼Œå‡ºä¹¦ç”¨çš„ã€‚ä»¥å‰ç©è¿‡docbookï¼Œä¸è¿‡ç°åœ¨è¿˜æ˜¯Markdownç››è¡Œå•Šã€‚</li>
<li>Window Magnet[Mac]ï¼šå¢å¼ºMacçª—å£ç®¡ç†åŠŸèƒ½ï¼Œæƒ³Win7ä¸€æ ·å…·æœ‰çª—å£æ‹–æ”¾åˆ°å±å¹•è¾¹ç¼˜è‡ªåŠ¨è°ƒæ•´çš„åŠŸèƒ½</li>
<li>log explorerï¼šæŸ¥çœ‹SqlServeræ—¥å¿—</li>
<li>dependency walkerï¼šæŸ¥è¯¢Windowsåº”ç”¨ç¨‹åºdllä¾èµ–é¡¹</li>
<li>Shairport4wï¼šå°†iPhoneï¼ŒiPadï¼ŒiPodä¸Šçš„éŸ³é¢‘é€šè¿‡AirPlayåè®®ä¼ è¾“åˆ°PCä¸Š</li>
<li>ngrokï¼šå†…ç½‘ç©¿é€å·¥å…·</li>
<li>Axure:å¿«é€ŸåŸå‹åˆ¶ä½œå·¥å…·ï¼Œè¿˜æœ‰ä¸ªåœ¨çº¿ä½œå›¾çš„å·¥å…·å›½å†…çš„ä¸€ä¸ªåˆ›ä¸šå›¢é˜Ÿåšçš„ï¼Œç”¨ç€å¾ˆä¸é”™<a href="http://www.processon.com/" target="_blank" rel="external">http://www.processon.com/</a></li>
<li>Origami: æ¬¡ä¸–ä»£äº¤äº’è®¾è®¡ç¥å™¨</li>
<li>ç™¾åº¦è„‘å›¾ï¼š<a href="http://naotu.baidu.com/" target="_blank" rel="external">http://naotu.baidu.com/</a></li>
<li>tinyproxy:ï¼ˆLinuxï¼‰å°å‹çš„ä»£ç†æœåŠ¡å™¨æ”¯æŒhttpå’Œhttpsåè®®</li>
<li>EaseUS Partition Masterï¼šè¶…çº§ç®€å•çš„åˆ†åŒºè°ƒæ•´å·¥å…·ï¼Œé€Ÿåº¦è¿˜æ˜¯è›®å¿«çš„ï¼ŒCç›˜ä¸å¤Ÿç”¨äº†å°±ç”¨å®ƒä»Dç›˜åˆ’ç‚¹ç©ºé—´å§ï¼Œä¸ç”¨é‡è£…ç³»ç»Ÿè¿™ä¹ˆæŠ˜è…¾å“¦ã€‚</li>
<li>CheatEngineï¼šç©æ¸¸æˆä¿®æ”¹å†…å­˜å€¼å¿…å¤‡ç¥å™¨ï¼ˆè®°å¾—æˆ‘åœ¨ç©è½©è¾•å‰‘6çš„æ—¶å€™å°±ç”¨çš„å®ƒï¼Œè¶…çº§æ–¹ä¾¿å‘¢ï¼‰</li>
<li>ApkIDE:Androidåç¼–è¯‘ç¥å™¨</li>
<li>ç¿»ã€å¢™å·¥å…·ï¼ˆè‡ª|ç”±|é—¨ã€å¤©è¡Œæµè§ˆå™¨ï¼Œå…è´¹çš„VPNï¼š<a href="http://www.mangovpn.com/ï¼‰,å‘ç°æœ€æ–¹ä¾¿è¿˜å±Lanternï¼Œå…è´¹ç”¨èµ·æ¥è¶…çº§æ–¹ä¾¿ï¼ˆæ›´æ–°äº2015-08-22ï¼‰" target="_blank" rel="external">http://www.mangovpn.com/ï¼‰,å‘ç°æœ€æ–¹ä¾¿è¿˜å±Lanternï¼Œå…è´¹ç”¨èµ·æ¥è¶…çº§æ–¹ä¾¿ï¼ˆæ›´æ–°äº2015-08-22ï¼‰</a></li>
<li>è®¾è®¡å·¥å…·ï¼šSketchã€OmniGraffle</li>
<li>MindMangerï¼šæ€ç»´å¯¼å›¾</li>
<li>MagicDraw:Umlå›¾å·¥å…·</li>
<li>innotopï¼šMySqlçŠ¶æ€ç›‘æµ‹å·¥å…·</li>
<li>å¢¨åˆ€ï¼šæ¯”Axureæ›´ä¸ºç®€å•çš„åŸå‹å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿåˆ¶ä½œåŸå‹</li>
<li>Karabiner: Macä¸“ç”¨ï¼Œä¿®æ”¹é”®ç›˜é”®ä½çš„ç¥å™¨ï¼Œæœºæ¢°é”®ç›˜å¿…å¤‡</li>
<li>Timingï¼šMacä¸“ç”¨ï¼Œç»Ÿè®¡ä½ çš„æ—¶é—´éƒ½èŠ±åœ¨å“ªäº†</li>
<li>f.lux: æŠ¤çœ¼ç¥å™¨ï¼Œè¿‡æ»¤è“å…‰ï¼Œç¨‹åºå‘˜æŠ¤çœ¼å¿…å¤‡è‰¯å“</li>
<li>LaTeX: åŸºäºÎ¤Î•Î§çš„æ’ç‰ˆç³»ç»Ÿ, è®©å†™è®ºæ–‡æ›´æ–¹ä¾¿</li>
<li>Antlrï¼šå¼€æºçš„è¯­æ³•åˆ†æå™¨ï¼Œå¯ä»¥è®©ä½ æ¯«æ— å‹åŠ›çš„å†™ä¸ªå°parser</li>
</ul>
<h3 id="ç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#ç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="ç¬¬ä¸‰æ–¹æœåŠ¡"></a>ç¬¬ä¸‰æ–¹æœåŠ¡</h3><ul>
<li>DnsPodï¼šä¸€ä¸ªä¸é”™çš„æ™ºèƒ½DNSæœåŠ¡è§£ææä¾›å•†</li>
<li>DigitalOceanï¼šæµ·å¤–çš„äº‘ä¸»æœºæä¾›å•†ï¼Œä»·æ ¼ä¾¿å®œï¼Œç£ç›˜æ˜¯SSDçš„ï¼Œç”¨è¿‡ä¸€æ®µæ—¶é—´æ•´ä½“ä¸Šè¿˜å¯ä»¥ï¼Œä¸è¿‡æ¯•ç«Ÿæ˜¯æµ·å¤–çš„ï¼Œç½‘é€Ÿæ¯”è¾ƒæ…¢ã€‚å›½å†…çš„å°±æ˜¯é˜¿é‡Œäº‘äº†ã€‚è¿˜æœ‰ä¸ªæ¯”è¾ƒçŸ¥åçš„æ˜¯ï¼šLinodeï¼Œæ®è¯´é€Ÿåº¦ä¸Šæ¯”DigitalOceanå¥½å¾ˆå¤š</li>
<li>ç§»åŠ¨ç«¯æ¨é€æœåŠ¡ï¼šä¸ªæ¨ã€JPushã€äº‘å·´</li>
<li><a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a>ï¼šç§»åŠ¨åº”ç”¨å¼€å‘æœåŠ¡ï¼ŒåŒ…æ‹¬:æ•°æ®å­˜å‚¨ã€ç”¨æˆ·ç®¡ç†ã€æ¶ˆæ¯æ¨é€ã€åº”ç”¨ç»Ÿè®¡ã€ç¤¾äº¤åˆ†äº«ã€å®æ—¶èŠå¤©ç­‰æœåŠ¡</li>
<li><a href="http://www.colorhunt.co/" target="_blank" rel="external">Color Hunt</a>: æ¼‚äº®ç‚«é…·çš„é…è‰²ç½‘ç«™ï¼Œç¨‹åºå‘˜çš„ç¦éŸ³</li>
<li><a href="https://www.heroku.com/" target="_blank" rel="external">Heroku: PaaSå¹³å°</a></li>
</ul>
<h3 id="çˆ¬è™«ç›¸å…³-å¥½ç©çš„å·¥å…·"><a href="#çˆ¬è™«ç›¸å…³-å¥½ç©çš„å·¥å…·" class="headerlink" title="çˆ¬è™«ç›¸å…³(å¥½ç©çš„å·¥å…·)"></a>çˆ¬è™«ç›¸å…³(å¥½ç©çš„å·¥å…·)</h3><ul>
<li>Phantomjs(Webè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ç­‰)</li>
<li>berserkJS(åŸºäºPhantomjsçš„æ”¹è¿›ç‰ˆæœ¬)</li>
<li>SlimerJS</li>
<li>CasperJS</li>
<li>selenium</li>
<li>HtmlUnitï¼ˆå¼€æºçš„java é¡µé¢åˆ†æå·¥å…·ï¼Œä¹Ÿæ˜¯ä¸ªHeadlessçš„æµè§ˆå™¨ï¼‰</li>
</ul>
<h3 id="å®‰å…¨ç›¸å…³"><a href="#å®‰å…¨ç›¸å…³" class="headerlink" title="å®‰å…¨ç›¸å…³"></a>å®‰å…¨ç›¸å…³</h3><ul>
<li>sqlæ³¨å…¥æ£€æµ‹ï¼šsqlmapã€haviji</li>
<li>ç«¯å£æ‰«æï¼šnmap</li>
<li>æ¸—é€æµ‹è¯•ï¼šBurpLoader</li>
<li>sqltools: sqlæ¼æ´åˆ©ç”¨å·¥å…·</li>
<li>snort: å…¥ä¾µæ£€æµ‹</li>
</ul>
<h3 id="WebæœåŠ¡å™¨æ€§èƒ½-å‹åŠ›æµ‹è¯•å·¥å…·-è´Ÿè½½å‡è¡¡å™¨"><a href="#WebæœåŠ¡å™¨æ€§èƒ½-å‹åŠ›æµ‹è¯•å·¥å…·-è´Ÿè½½å‡è¡¡å™¨" class="headerlink" title="WebæœåŠ¡å™¨æ€§èƒ½/å‹åŠ›æµ‹è¯•å·¥å…·/è´Ÿè½½å‡è¡¡å™¨"></a>WebæœåŠ¡å™¨æ€§èƒ½/å‹åŠ›æµ‹è¯•å·¥å…·/è´Ÿè½½å‡è¡¡å™¨</h3><ul>
<li>ab: abæ˜¯apacheè‡ªå¸¦çš„ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æµ‹è¯•å·¥å…·</li>
<li>curl-loader: çœŸå®æ¨¡æ‹Ÿã€æµ‹è¯•Webè´Ÿè½½</li>
<li>http_load: ç¨‹åºéå¸¸å°ï¼Œè§£å‹åä¹Ÿä¸åˆ°100K</li>
<li>webbench: æ˜¯Linuxä¸‹çš„ä¸€ä¸ªç½‘ç«™å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œæœ€å¤šå¯ä»¥æ¨¡æ‹Ÿ3ä¸‡ä¸ªå¹¶å‘è¿æ¥å»æµ‹è¯•ç½‘ç«™çš„è´Ÿè½½èƒ½åŠ›ã€‚</li>
<li>Siege: ä¸€æ¬¾å¼€æºçš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥æ ¹æ®é…ç½®å¯¹ä¸€ä¸ªWEBç«™ç‚¹è¿›è¡Œå¤šç”¨æˆ·çš„å¹¶å‘è®¿é—®ï¼Œè®°å½•æ¯ä¸ªç”¨æˆ·æ‰€æœ‰è¯·æ±‚è¿‡ç¨‹çš„ç›¸åº”æ—¶é—´ï¼Œå¹¶åœ¨ä¸€å®šæ•°é‡çš„å¹¶å‘è®¿é—®ä¸‹é‡å¤è¿›è¡Œã€‚</li>
<li>squidï¼ˆå‰ç«¯ç¼“å­˜ï¼‰ï¼Œnginxï¼ˆè´Ÿè½½ï¼‰ï¼Œnodejsï¼ˆæ²¡é”™å®ƒä¹Ÿå¯ä»¥ï¼Œè‡ªå·±å†™ç‚¹ä»£ç å°±èƒ½å®ç°é«˜æ€§èƒ½çš„è´Ÿè½½å‡è¡¡å™¨ï¼‰ï¼šå¸¸ç”¨çš„è´Ÿè½½å‡è¡¡å™¨</li>
<li>Piwikï¼šå¼€æºç½‘ç«™è®¿é—®é‡ç»Ÿè®¡ç³»ç»Ÿ</li>
<li>ClickHeatï¼šå¼€æºçš„ç½‘ç«™ç‚¹å‡»æƒ…å†µçƒ­åŠ›å›¾</li>
<li>HAProxyï¼šé«˜æ€§èƒ½TCP /HTTPè´Ÿè½½å‡è¡¡å™¨</li>
<li>ElasticSearchï¼šæœç´¢å¼•æ“åŸºäºLucene</li>
<li>Page Speed SDKå’ŒYSLOW</li>
<li>HAR Viewer: HARåˆ†æå·¥å…·</li>
<li>protractorï¼šE2Eï¼ˆend to endï¼‰è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·</li>
</ul>
<h2 id="å¤§æ•°æ®å¤„ç†-æ•°æ®åˆ†æ-åˆ†å¸ƒå¼å·¥å…·"><a href="#å¤§æ•°æ®å¤„ç†-æ•°æ®åˆ†æ-åˆ†å¸ƒå¼å·¥å…·" class="headerlink" title="å¤§æ•°æ®å¤„ç†/æ•°æ®åˆ†æ/åˆ†å¸ƒå¼å·¥å…·"></a>å¤§æ•°æ®å¤„ç†/æ•°æ®åˆ†æ/åˆ†å¸ƒå¼å·¥å…·</h2><ul>
<li>Hadoopï¼šåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç»“åˆå…¶MapReduceç¼–ç¨‹æ¨¡å‹å¯ä»¥ç”¨æ¥åšæµ·é‡æ•°æ®çš„æ‰¹å¤„ç†ï¼ˆHiveï¼ŒPigï¼ŒHBaseå•¥çš„å°±ä¸è¯´äº†ï¼‰ï¼Œå€¼å¾—ä»‹ç»çš„æ˜¯Clouderaçš„Hadoopåˆ†æ”¯CDH5ï¼ŒåŸºäºYARN MRv2é›†æˆäº†Sparkå¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒçš„Hadoopï¼Œå¯¹äºä¼ä¸šå¿«é€Ÿæ„å»ºæ•°æ®ä»“åº“éå¸¸æœ‰ç”¨ã€‚</li>
<li>Sparkï¼šå¤§è§„æ¨¡æ•°æ®å¤„ç†æ¡†æ¶ï¼ˆå¯ä»¥åº”ä»˜ä¼ä¸šä¸­å¸¸è§çš„ä¸‰ç§æ•°æ®å¤„ç†åœºæ™¯ï¼šå¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼ˆbatch data processingï¼‰ï¼›åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼ˆinteractive queryï¼‰ï¼›åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼ˆstreaming data processingï¼‰ï¼‰ï¼ŒCSNDæœ‰ç¯‡æ–‡ç« ä»‹ç»çš„ä¸é”™</li>
<li>é™¤äº†Sparkï¼Œå…¶ä»–å‡ ä¸ªä¸é”™çš„è®¡ç®—æ¡†æ¶è¿˜æœ‰ï¼šKylinï¼ŒFlinkï¼ŒDrill</li>
<li>Ignite: In-Memory Data Fabric</li>
<li>CarbonData: åä¸ºçš„å­µåŒ–é¡¹ç›®ï¼Œæ”¯æŒç´¢å¼•çš„åˆ—å¼å­˜å‚¨</li>
<li>Ceph:Linuxåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆç‰¹ç‚¹ï¼šæ— ä¸­å¿ƒï¼‰</li>
<li>Stormï¼šå®æ—¶æµæ•°æ®å¤„ç†ï¼Œå¯ä»¥çœ‹ä¸‹IBMçš„ä¸€ç¯‡ä»‹ç» ï¼ˆè¿˜æœ‰ä¸ªYahooçš„S4ï¼Œä¹Ÿæ˜¯åšæµæ•°æ®å¤„ç†çš„ï¼‰</li>
<li>Druid: å®æ—¶æ•°æ®åˆ†æå­˜å‚¨ç³»ç»Ÿ</li>
<li>Ambari: å¤§æ•°æ®å¹³å°æ­å»ºã€ç›‘æ§åˆ©å™¨ï¼›ç±»ä¼¼çš„è¿˜æœ‰CDH</li>
<li>Tachyonï¼šåˆ†å¸ƒå¼å†…å­˜æ–‡ä»¶ç³»ç»Ÿ</li>
<li>Mesosï¼šè®¡ç®—æ¡†æ¶ä¸€ä¸ªé›†ç¾¤ç®¡ç†å™¨ï¼Œæä¾›äº†æœ‰æ•ˆçš„ã€è·¨åˆ†å¸ƒå¼åº”ç”¨æˆ–æ¡†æ¶çš„èµ„æºéš”ç¦»å’Œå…±äº«</li>
<li>Impalaï¼šæ–°ä¸€ä»£å¼€æºå¤§æ•°æ®åˆ†æå¼•æ“ï¼Œæä¾›Sqlè¯­ä¹‰ï¼Œæ¯”Hiveå¼ºåœ¨é€Ÿåº¦ä¸Š</li>
<li>presto: facebookçš„å¼€æºå·¥å…·ï¼Œå¤§æ•°æ®åˆ†å¸ƒå¼sqlæŸ¥è¯¢å¼•æ“</li>
<li>SNAPPYï¼šå¿«é€Ÿçš„æ•°æ®å‹ç¼©ç³»ç»Ÿï¼Œé€‚ç”¨äºHadoopç”Ÿæ€ç³»ç»Ÿä¸­</li>
<li>Kafka:é«˜ååé‡çš„åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ</li>
<li>ActiveMQ:æ˜¯Apacheå‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿</li>
<li>MQTT:Message Queuing Telemetry Transportï¼Œæ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼‰æ˜¯IBMå¼€å‘çš„ä¸€ä¸ªå³æ—¶é€šè®¯åè®®ï¼Œæœ‰å¯èƒ½æˆä¸ºç‰©è”ç½‘çš„é‡è¦ç»„æˆéƒ¨åˆ†</li>
<li>RabbitMQï¼šè®°å¾—OpenStackå°±æ˜¯ç”¨çš„è¿™ä¸ªä¸œè¥¿å§</li>
<li>ZeroMQï¼šå®£ç§°æ˜¯å°†åˆ†å¸ƒå¼è®¡ç®—å˜å¾—æ›´ç®€å•ï¼Œæ˜¯ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥çœ‹ä¸‹äº‘é£çš„ä¸€ç¯‡æ–‡ç« çš„ä»‹ç»</li>
<li>å¼€æºçš„æ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼šscribeã€chukwaã€kafkaã€flumeã€‚è¿™æœ‰ä¸€ç¯‡å¯¹æ¯”æ–‡ç« </li>
<li>Zookeeperï¼šå¯é çš„åˆ†å¸ƒå¼åè°ƒçš„å¼€æºé¡¹ç›®</li>
<li>Databusï¼šLinkedIn å®æ—¶ä½å»¶è¿Ÿæ•°æ®æŠ“å–ç³»ç»Ÿ</li>
<li>æ•°æ®æºè·å–ï¼šFlumeã€Google Refineã€Needlebaseã€ScraperWikiã€BloomReach</li>
<li>åºåˆ—åŒ–æŠ€æœ¯ï¼šJSONã€BSONã€Thriftã€Avroã€Google Protocol Buffers</li>
<li>NoSqlï¼šScyllaDBï¼ˆå®£ç§°æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„NoSqlï¼‰ã€Apache Casandraã€MongoDBã€Apache CouchDBã€Redisã€BigTableã€HBaseã€Hypertableã€Voldemortã€Neo4j</li>
<li>MapReduceç›¸å…³ï¼šHiveã€Pigã€Cascadingã€Cascalogã€mrjobã€Caffeineã€S4ã€MapRã€Acunuã€Flumeã€Kafkaã€Azkabanã€Oozieã€Greenplum </li>
<li>æ•°æ®å¤„ç†ï¼šRã€Yahoo! Pipesã€Mechanical Turkã€Solr/ Luceneã€ElasticSearchã€Datameerã€Bigsheetsã€Tinkerpop</li>
<li>NLPè‡ªç„¶è¯­è¨€å¤„ç†ï¼šNatural Language Toolkitã€Apache OpenNLPã€Boilerpipeã€OpenCalais</li>
<li>æœºå™¨å­¦ä¹ ï¼šTensorFlowï¼ˆGoogleå‡ºå“ï¼‰ï¼ŒWEKAã€Mahoutã€scikits.learnã€SkyTree</li>
<li>å¯è§†åŒ–æŠ€æœ¯ï¼šGraphVizã€Processingã€Protovisã€Google Fusion Tablesã€Tableauã€Highchartsã€EChatsï¼ˆç™¾åº¦çš„è¿˜ä¸é”™ï¼‰ã€RaphaÃ«l.js</li>
<li>Kettleï¼šå¼€æºçš„ETLå·¥å…·</li>
<li>Pentahoï¼šä»¥å·¥ä½œæµä¸ºæ ¸å¿ƒçš„å¼€æºBIç³»ç»Ÿ</li>
<li>Mondrianï¼šå¼€æºçš„RolapæœåŠ¡å™¨</li>
<li>Oozieï¼šå¼€æºhadoopçš„å·¥ä½œæµè°ƒåº¦å¼•æ“ï¼Œç±»ä¼¼çš„è¿˜æœ‰ï¼šAzkaban</li>
<li>å¼€æºçš„æ•°æ®åˆ†æå¯è§†åŒ–å·¥å…·ï¼šWekaã€Orangeã€KNIME</li>
<li>Cobarï¼šé˜¿é‡Œå·´å·´çš„MySqlåˆ†å¸ƒå¼ä¸­é—´ä»¶</li>
<li>æ•°æ®æ¸…æ´—ï¼šdata wranglerï¼Œ Google Refine</li>
</ul>
<h2 id="Webå‰ç«¯"><a href="#Webå‰ç«¯" class="headerlink" title="Webå‰ç«¯"></a>Webå‰ç«¯</h2><ul>
<li><a href="https://material.io/" target="_blank" rel="external">Material Design</a>: è°·æ­Œå‡ºå“ï¼Œå¿…å±ç²¾å“</li>
<li>Vue.js: å€Ÿé‰´äº†AngularåŠReactçš„JSæ¡†æ¶ï¼Œè®¾è®¡ç†å¿µè¾ƒä¸ºå…ˆè¿›</li>
<li>GRUNT: js task runner</li>
<li>Sea.js: jsæ¨¡å—åŒ–</li>
<li>knockout.jsï¼šMVVMå¼€å‘å‰å°ï¼Œç»‘å®šæŠ€æœ¯</li>
<li>Angular.js: ä½¿ç”¨è¶…åŠ¨æ„ŸHTML &amp; JSå¼€å‘WEBåº”ç”¨ï¼</li>
<li>Highcharts.jsï¼ŒFlot:å¸¸ç”¨çš„Webå›¾è¡¨æ’ä»¶</li>
<li>NVD3: åŸºäºd3.jsçš„å›¾è¡¨åº“</li>
<li>Rawï¼šéå¸¸ä¸é”™çš„ä¸€æ¬¾é«˜çº§æ•°æ®å¯è§†åŒ–å·¥å…·</li>
<li>Rickshaw:æ—¶åºå›¾æ ‡åº“ï¼Œå¯ç”¨äºæ„å»ºå®æ—¶å›¾è¡¨</li>
<li>JavaScript InfoVis Toolkitï¼šå¦ä¸€æ¬¾Webæ•°æ®å¯è§†åŒ–æ’ä»¶</li>
<li>Pdf.jsï¼Œåœ¨htmlä¸­å±•ç°pdf</li>
<li>ACEï¼ŒCodeMirrorï¼šHtmlä»£ç ç¼–è¾‘å™¨ï¼ˆACEç”šå¥½å•Šï¼‰</li>
<li>NProcessï¼šç»šä¸½çš„åŠ è½½è¿›åº¦æ¡</li>
<li>impress.jsï¼šè®©ä½ åˆ¶ä½œå‡ºä»¤äººçœ©ç›®çš„å†…å®¹å±•ç¤ºæ•ˆæœ(ç±»ä¼¼çš„è¿˜æœ‰reveal)</li>
<li>Threejsï¼š3DWebåº“</li>
<li>Hightopoï¼šåŸºäºHtml5çš„2Dã€3Då¯è§†åŒ–UIåº“</li>
<li>jQuery.dataTables.js:é«˜åº¦çµæ´»çš„è¡¨æ ¼æ’ä»¶</li>
<li>RaphaÃ«lï¼šjsï¼Œcanvasç»˜å›¾åº“ï¼Œåæ¥å‘ç°ç™¾åº¦æŒ‡æ•°çš„å›¾å½¢å°±æ˜¯ç”¨å®ƒç»˜å‡ºæ¥çš„</li>
<li>director.jsï¼šjsè·¯ç”±æ¨¡å—ï¼Œå‰ç«¯è·¯ç”±ï¼ŒNodejsåç«¯è·¯ç”±ç­‰ï¼Œé€‚åˆæ„é€ å•é¡µåº”ç”¨</li>
<li>pace.jsï¼šé¡µé¢åŠ è½½è¿›åº¦æ¡</li>
<li>bowerï¼šWebåŒ…ç®¡ç†å™¨</li>
<li>jsniceï¼šæœ‰è¶£çš„jsåç¼–è¯‘å·¥å…·ï¼ŒçŒœå‹ç¼©åçš„å˜é‡åï¼Œ<a href="http://www.jsnice.org/" target="_blank" rel="external">http://www.jsnice.org/</a></li>
<li>D3.js: æ˜¯ä¸€ä¸ªåŸºäºJavaScriptæ•°æ®å±•ç¤ºåº“ï¼ˆç±»ä¼¼çš„è¿˜æœ‰P5.jsï¼‰</li>
<li>Zepto.jsï¼šç§»åŠ¨ç«¯æ›¿ä»£jQueryçš„ä¸œä¸œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨jquery-mobile.</li>
<li>UIæ¡†æ¶ï¼šFoundationï¼ŒBoostrapï¼ŒPureï¼ŒEasyUIï¼ŒPolymer</li>
<li>å‰æ®µUIè®¾è®¡å¸ˆå¿…å»çš„å‡ ä¸ªç½‘ç«™ï¼šDribbbleï¼Œawwwardsï¼Œunmatchedstyleï¼ŒUIMaker</li>
<li>Mozilla å¼€å‘è€…ä¸­å¿ƒï¼š<a href="https://developer.mozilla.org/en-US/" target="_blank" rel="external">https://developer.mozilla.org/en-US/</a></li>
<li>å›¾æ ‡èµ„æºï¼šIcoMoonï¼ˆæˆ‘çš„æœ€çˆ±ï¼‰ï¼ŒFont Awesome, Themify Iconsï¼ŒFreePikï¼ŒGlyphicons</li>
<li>artDialog:éå¸¸æ¼‚äº®çš„å¯¹è¯æ¡†</li>
<li>AdminLTEï¼šgithubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒåŸºäºBoostrap3çš„åå°ç®¡ç†é¡µé¢æ¡†æ¶</li>
<li>Respond.jsï¼šè®©ä¸æ‡‚çˆ±çš„IE6-8æ”¯æŒå“åº”å¼è®¾è®¡</li>
<li>require.js: jsæ¨¡å—åŠ è½½åº“</li>
<li>select2ï¼šæ¯”chosenå…·æœ‰æ›´å¤šç‰¹æ€§çš„é€‰æ‹©æ¡†æ›¿ä»£åº“</li>
<li>AngularUIï¼šé›†æˆangular.jsçš„UIåº“</li>
<li>normalize.css: é‡‡ç”¨äº†ç°ä»£åŒ–æ ‡å‡†è®©å„æµè§ˆå™¨æ¸²æŸ“å‡ºçš„htmlä¿æŒä¸€è‡´çš„åº“</li>
<li>CreateJSï¼šHtml5æ¸¸æˆå¼•æ“</li>
<li>Less,Compass:ç®€åŒ–CSSå¼€å‘</li>
<li>emojify.js:ç”¨äºè‡ªåŠ¨è¯†åˆ«ç½‘é¡µä¸Šçš„Emojiæ–‡å­—å¹¶å°†å…¶æ˜¾ç¤ºä¸ºå›¾åƒ</li>
<li>simditor:ä¸€ä¸ªä¸é”™çš„å¼€æºçš„htmlç¼–è¾‘å™¨ï¼Œç®€æ´é«˜æ•ˆ</li>
<li>Sencha:  åŸºäºhtml5çš„ç§»åŠ¨ç«¯å¼€å‘æ¡†æ¶</li>
<li>SuperScrollorama+TweenMax+skrollr:æ‰“é€ è¶…é…·çš„è§†å·®æ»šåŠ¨æ•ˆæœç½‘é¡µåŠ¨ç”»</li>
<li>jquery-smooth-scroll:åŒä¸Šï¼Œå¹³æ»‘æ»šåŠ¨æ’ä»¶</li>
<li>Animate.css:å®ç°äº†å„ç§åŠ¨ç”»æ•ˆæœçš„cssåº“</li>
<li>Emmet:å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡ï¼Œå‰èº«ä¸º Zen Coding</li>
<li>React: facebookå‡ºå“çš„js UIåº“</li>
<li>highlight.jsï¼šä¸“é—¨ç”¨æ¥åšè¯­æ³•é«˜äº®çš„åº“</li>
<li>GoJS: Html5äº¤äº’å¼å›¾è¡¨åº“ï¼Œçœ‹demoæ›´é€‚åˆå±‚æ¬¡ç»“æ„çš„å›¾è¡¨ã€‚</li>
<li>10 Pure CSS (Mostly) Flat Mobile Devices: <a href="http://marvelapp.github.io/devices.css/" target="_blank" rel="external">http://marvelapp.github.io/devices.css/</a></li>
<li>CodePen: <a href="http://codepen.io/" target="_blank" rel="external">http://codepen.io/</a></li>
<li>jsfiddle: <a href="http://jsfiddle.net/" target="_blank" rel="external">http://jsfiddle.net/</a> å‰ç«¯jsï¼Œhtmlï¼Œcssæµ‹è¯•åˆ©å™¨</li>
</ul>
<h2 id="è¯­è¨€ç¯‡"><a href="#è¯­è¨€ç¯‡" class="headerlink" title="è¯­è¨€ç¯‡"></a>è¯­è¨€ç¯‡</h2><p>æŠ˜è…¾ä¸­ï¼šScalaã€Pythonã€Luaã€JavaScriptã€Go</p>
<p>å¾…æŠ˜è…¾ï¼š</p>
<ul>
<li><a href="http://racket-lang.org/" target="_blank" rel="external">Racket</a></li>
<li><a href="http://ocaml.org/" target="_blank" rel="external">OCaml</a></li>
<li><a href="https://www.rust-lang.org" target="_blank" rel="external">Rust</a></li>
<li><a href="http://julialang.org/" target="_blank" rel="external">Julia</a></li>
</ul>
<h3 id="Scala"><a href="#Scala" class="headerlink" title="Scala"></a>Scala</h3><ul>
<li><a href="http://www.scala-lang.org/api/current/" target="_blank" rel="external">Scala Standard Library API</a></li>
<li><a href="http://twitter.github.io/scala_school/" target="_blank" rel="external">Scala School!</a>: A Scala tutorial by Twitter</li>
<li><a href="http://docs.scala-lang.org/tutorials/tour/tour-of-scala.html" target="_blank" rel="external">A Tour of Scala</a>: Tutorial introducing the main concepts of Scala</li>
<li><a href="http://stackoverflow.com/tags/scala/info" target="_blank" rel="external">Scala Overview on StackOverflow</a>: A list of useful questions sorted by topic</li>
<li><a href="http://www.artima.com/pins1ed/" target="_blank" rel="external">Programming in Scala</a>ï¼Œæœ€æ–°çš„ç¬¬3ç‰ˆï¼Œè¿˜æ²¡æœ‰ç”µå­ç‰ˆï¼Œç”µå­ç‰ˆæ˜¯ç¬¬ä¸€ç‰ˆ</li>
<li>ã€ŠScala for the Impatientã€‹</li>
<li>ã€ŠScala in Depthã€‹</li>
<li>ã€ŠProgramming Scalaã€‹Dean Wampler and Alex Payne. Oâ€™Reilly 2009</li>
<li><a href="http://www.scala-lang.org/docu/files/ScalaByExample.pdf" target="_blank" rel="external">Scala By Example</a></li>
<li><a href="http://docs.scala-lang.org/cheatsheets/" target="_blank" rel="external">Scala Cheatsheet</a>å­¦ä¹ æ¨¡å¼åŒ¹é…çš„å¥½èµ„æ–™</li>
<li><a href="http://docs.scala-lang.org/glossary/" target="_blank" rel="external">Glossary of Scala and FP terms</a></li>
<li><a href="https://github.com/lihaoyi/Metascala" target="_blank" rel="external">Metascala: A JVM written in Scala</a></li>
<li><a href="https://scala-lms.github.io/" target="_blank" rel="external">LMS: Program Generation and Embedded Compilers in Scala</a></li>
</ul>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ul>
<li>å¸¸ç”¨çš„IDEï¼šIntelliJ IDEA(å¼ºçƒˆæ¨è)ï¼ŒEclipseï¼ŒNetbeans</li>
<li><a href="http://fastutil.di.unimi.it/" target="_blank" rel="external">fastutil</a>: æ€§èƒ½æ›´å¥½çš„Javaé›†åˆæ¡†æ¶</li>
<li>Guava: è°·æ­Œçš„Javaå·¥å…·åŒ…ï¼Œåº”ç”¨å¹¿æ³›</li>
<li>Curatorï¼šNetflixå…¬å¸å¼€æºçš„ä¸€ä¸ªZookeeper client libraryï¼Œç”¨äºç®€åŒ–Zookeeperå®¢æˆ·ç«¯ç¼–ç¨‹ï¼Œç°åœ¨å·²ç»æ˜¯apacheä¸‹çš„ä¸€ä¸ªç‹¬ç«‹é¡¹ç›®äº†ã€‚Sparkçš„HAä¹Ÿç”¨çš„è¿™è´§ã€‚</li>
<li>Rx(Reactive Extensions)æ¡†æ¶ï¼šVert.x, RxJava(Androidä¸­ç”¨çš„æ¯”è¾ƒå¤š),  Quasar</li>
<li>FindBugs: ä»£ç é™æ€åˆ†æå·¥å…·ï¼Œæ‰¾å‡ºä»£ç ç¼ºé™·</li>
<li>Javaåç¼–è¯‘å·¥å…·ï¼šLuytenï¼ŒJD-Gui</li>
<li>Drools: è§„åˆ™å¼•æ“</li>
<li>Jersey: Java RESTful æ¡†æ¶</li>
<li>canal: é˜¿é‡Œå·´å·´å‡ºå“ï¼Œbinlogå¢é‡è®¢é˜…&amp;æ¶ˆè´¹ç»„ä»¶</li>
<li>Webå¼€å‘ç›¸å…³ï¼šTomcatã€Resinã€Jettyã€WebLogicç­‰ï¼Œå¸¸ç”¨çš„ç»„ä»¶Strutsï¼ŒSpringï¼ŒHibernate</li>
<li>Netty: å¼‚æ­¥äº‹ä»¶é©±åŠ¨ç½‘ç»œåº”ç”¨ç¼–ç¨‹æ¡†æ¶ï¼Œç”¨äºé«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹æ¯”è¾ƒå¥½ï¼ˆNIOæ¡†æ¶ï¼Œspark 1.2.0å°±ç”¨nettyæ›¿ä»£äº†nioï¼‰</li>
<li>MINAï¼šç®€å•åœ°å¼€å‘é«˜æ€§èƒ½å’Œé«˜å¯é æ€§çš„ç½‘ç»œåº”ç”¨ç¨‹åºï¼ˆä¹Ÿæ˜¯ä¸ªNIOæ¡†æ¶ï¼‰ï¼Œä¸å°‘æ‰‹æ¸¸æœåŠ¡ç«¯æ˜¯ç”¨å®ƒå¼€å‘çš„</li>
<li>jOOQï¼šjava Ormæ¡†æ¶</li>
<li>Janino: è¶…çº§å°åˆå¿«çš„Javaç¼–è¯‘å™¨ï¼ŒSparkçš„Tungstenå¼•èµ·ç”¨çš„å®ƒ</li>
<li>Activiti:å·¥ä½œæµå¼•æ“ï¼Œç±»ä¼¼çš„è¿˜æœ‰jBPMã€Snaker</li>
<li>Perfuse:æ˜¯ä¸€ä¸ªç”¨æˆ·ç•Œé¢åŒ…ç”¨æ¥æŠŠæœ‰ç»“æ„ä¸æ— ç»“æ„æ•°æ®ä»¥å…·æœ‰äº¤äº’æ€§çš„å¯è§†åŒ–å›¾å½¢å±•ç¤ºå‡ºæ¥.</li>
<li>Gephi:å¤æ‚ç½‘ç»œåˆ†æè½¯ä»¶, å…¶ä¸»è¦ç”¨äºå„ç§ç½‘ç»œå’Œå¤æ‚ç³»ç»Ÿï¼ŒåŠ¨æ€å’Œåˆ†å±‚å›¾çš„äº¤äº’å¯è§†åŒ–ä¸æ¢æµ‹å¼€æºå·¥å…·</li>
<li>Nutch:çŸ¥åçš„çˆ¬è™«é¡¹ç›®ï¼Œhadoopå°±æ˜¯ä»è¿™ä¸ªé¡¹ç›®ä¸­å‘å±•å‡ºæ¥çš„</li>
<li>web-harvestï¼šWebæ•°æ®æå–å·¥å…·</li>
<li>POMå·¥å…·ï¼šMaven+Artifactory</li>
<li>Akka:ä¸€æ¬¾åŸºäºactoræ¨¡å‹å®ç°çš„ å¹¶å‘å¤„ç†æ¡†æ¶</li>
<li>EclEmmaï¼šè¦†ç›–æµ‹è¯•å·¥å…·</li>
<li>Shiro:å®‰å…¨æ¡†æ¶</li>
<li>joda-time:ç®€åŒ–æ—¶é—´å¤„ç†</li>
<li>parboiled:è¡¨è¾¾å¼è§£æ</li>
<li>dozer: æ·±æ‹·è´ç¥å™¨</li>
<li>dubbo: é˜¿é‡Œå·´å·´å‡ºå“çš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶</li>
<li>jackson databind: jsonåºåˆ—åŒ–å·¥å…·(fastjson,simplejson)</li>
<li>Atomikos: åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†</li>
<li>BoneCPï¼šæ€§èƒ½å¾ˆèµçš„æ•°æ®åº“è¿æ¥æ± ç»„ä»¶ï¼Œæ®è¯´æ¯”c3p0å¿«å¥½å¤š</li>
<li>ProGuard: obconfuscation tool, å¼ºå¤§çš„æ··æ·†å·¥å…·</li>
<li>S-99ï¼šScalaç›¸å…³çš„99ä¸ªé—®é¢˜</li>
</ul>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><ul>
<li>PyCharmï¼šæœ€ä½³Python IDE</li>
<li>Eric,Eclipse+pydev,æ¯”è¾ƒä¸é”™çš„Python IDE</li>
<li>PyWin:Win32 apiç¼–ç¨‹åŒ…</li>
<li>numpy:ç§‘å­¦è®¡ç®—åŒ…ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¤§å‹çŸ©é˜µè®¡ç®—ç­‰ï¼Œæ­¤å¤–è¿˜æœ‰SciPyï¼ŒMatplotlib</li>
<li>GUIç›¸å…³ï¼šPyQtï¼ŒPyQwt</li>
<li>supervisor:è¿›ç¨‹ç›‘æ§å·¥å…·</li>
<li>PyGame: åŸºäºPythonçš„å¤šåª’ä½“å¼€å‘å’Œæ¸¸æˆè½¯ä»¶å¼€å‘æ¨¡å—</li>
<li>Webæ¡†æ¶: Django å¼€æºwebå¼€å‘æ¡†æ¶ï¼Œå®ƒé¼“åŠ±å¿«é€Ÿå¼€å‘,å¹¶éµå¾ªMVCè®¾è®¡</li>
</ul>
<h3 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h3><ul>
<li><a href="https://github.com/ipader/SwiftGuide" target="_blank" rel="external">Swiftç²¾é€‰èµ„æ–™</a></li>
<li><a href="http://www.csdn.net/article/2015-01-09/2823502-swift-open-source-libs" target="_blank" rel="external">43ä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®</a></li>
</ul>
<p><strong>å®¢æˆ·ç«¯</strong></p>
<ul>
<li><a href="https://github.com/YANGReal/JokeClient-Swift" target="_blank" rel="external">ç³—äº‹ç™¾ç§‘ Swift</a></li>
<li><a href="https://github.com/amitburst/HackerNews" target="_blank" rel="external">HackerNews Swift</a></li>
<li><a href="https://github.com/jxd001/Swift-ZhihuDaily" target="_blank" rel="external">çŸ¥ä¹æ—¥æŠ¥app</a></li>
</ul>
<p><strong>Framework</strong></p>
<ul>
<li><a href="https://github.com/mattdonnelly/Swifter" target="_blank" rel="external">Twitteræ¡†æ¶</a></li>
<li><a href="https://github.com/glock45/swifter" target="_blank" rel="external">Macä¸‹ç®€å•HTTP Server Swifter</a></li>
</ul>
<p><strong>å°å·¥å…·</strong></p>
<ul>
<li><a href="https://github.com/ChrisChares/swift-alarm" target="_blank" rel="external">Swift Alarm</a></li>
<li><a href="https://github.com/mslathrop/SwiftNote" target="_blank" rel="external">Swift Note</a></li>
<li><a href="https://github.com/wantedly/swift-rss-sample" target="_blank" rel="external">Swift RSS Reader</a></li>
<li><a href="https://github.com/sxyx2008/Swift-PM25" target="_blank" rel="external">Swift-PM2.5æŸ¥è¯¢app</a></li>
</ul>
<p><strong>æ¸¸æˆ</strong></p>
<ul>
<li><a href="https://github.com/fullstackio/FlappySwift" target="_blank" rel="external">Flappy Swift</a></li>
<li><a href="https://github.com/geek5nan/FanFanSwift" target="_blank" rel="external">FanFan Swift</a></li>
</ul>
<h3 id="NET"><a href="#NET" class="headerlink" title=".NET"></a>.NET</h3><ul>
<li>Xilium.CefGlue:åŸºäºCEFæ¡†æ¶çš„.NETå°è£…ï¼ŒåŸºäº.NETå¼€å‘Chromeå†…æ ¸æµè§ˆå™¨</li>
<li>CefSharpï¼šåŒä¸Šï¼Œæœ‰ä¸€æ¬¾WebKitçš„å°è£…ï¼ŒC#å’ŒJsäº¤äº’ä¼šæ›´ç®€å•</li>
<li>netz:å…è´¹çš„ .NET å¯æ‰§è¡Œæ–‡ä»¶å‹ç¼©å·¥å…·</li>
<li>SmartAssembly:å˜æ€çš„.netä»£ç ä¼˜åŒ–æ··æ·†å·¥å…·</li>
<li>NETDeob0ï¼š.netåæ··æ·†å·¥å…·ï¼ŒçœŸæ˜¯é­”é«˜ä¸€å°ºé“é«˜ä¸€ä¸ˆå•Š(è¿˜æœ‰ä¸ªde4dotï¼Œåœ¨GitHubä¸Šï¼Œéƒ½æ˜¯å¼€æºçš„)</li>
<li>ILMergeï¼šå°†æ‰€æœ‰å¼•ç”¨çš„DLLå’Œexeæ–‡ä»¶æ‰“æˆä¸€ä¸ªexeæ–‡ä»¶</li>
<li>ILSpy:å¼€æº.netç¨‹åºåç¼–è¯‘å·¥å…·</li>
<li>Javascript.NETï¼šå¾ˆä¸é”™çš„jsæ‰§è¡Œå¼•æ“ï¼Œå¯¹v8åšäº†å°è£…</li>
<li>NPOI: Excelæ“ä½œ</li>
<li>DotRAS:è¿œç¨‹è®¿é—®æœåŠ¡çš„æ¨¡å—</li>
<li>WinHtmlEditor: Winformä¸‹çš„htmlç¼–è¾‘å™¨</li>
<li>SmartThreadPool:ä½¿ç”¨C#å®ç°çš„ï¼Œå¸¦é«˜çº§ç‰¹æ€§çš„çº¿ç¨‹æ± </li>
<li>Snoop: WPF Spy Utility</li>
<li>Autofac: è½»é‡çº§IoCæ¡†æ¶</li>
<li>HtmlAgilityPackï¼šHtmlè§£æåˆ©å™¨</li>
<li>Quartz.NETï¼šJobè°ƒåº¦</li>
<li>HttpLibï¼š@CodePlexï¼Œç®€åŒ–httpè¯·æ±‚</li>
<li>SuperSocketï¼šç®€åŒ–Socketæ“ä½œï¼ŒåŸºäºä»–çš„è¿˜æœ‰ä¸ªSuperWebSocketï¼Œå¯ä»¥å¼€å‘ç‹¬ç«‹çš„WebSocketæœåŠ¡å™¨äº†</li>
<li>DocXï¼šæœªå®‰è£…Officeçš„æƒ…å†µä¸‹æ“ä½œWordæ–‡ä»¶</li>
<li>Dapperï¼šè½»é‡çº§çš„ORMç±»ï¼Œæ€§èƒ½ä¸é”™</li>
<li>HubbleDotNetï¼šæ”¯æŒæ¥å…¥æ•°æ®åº“çš„å…¨æ–‡æœç´¢ç³»ç»Ÿ</li>
<li>fastJSONï¼š@CodeProjectï¼Œé«˜æ€§èƒ½çš„jsonåºåˆ—åŒ–ç±»</li>
<li>ZXing.NETï¼š@CodePlexï¼ŒQRï¼Œæ¡å½¢ç ç›¸å…³</li>
<li>Nancyï¼šè½»é‡çº§HttpæœåŠ¡å™¨ï¼Œåšä¸ªå°å‹çš„Webåº”ç”¨å¯ä»¥æ‘†è„±IISå–½(Nancy.Viewengines.Razor,å¯ä»¥åŠ å…¥Razorå¼•æ“)</li>
<li>AntiXSSï¼šå¾®è½¯çš„XSSé˜²å¾¡åº“Microsoft Web Protection Library</li>
<li>Jintï¼šJavaScriptè§£é‡Šå™¨</li>
<li>CS-Scriptï¼šå°†C#ä»£ç æ–‡ä»¶ä½œä¸ºè„šæœ¬æ‰§è¡Œ</li>
<li>Jexusï¼šLinuxä¸‹ é«˜æ€§èƒ½ã€æ˜“ç”¨ã€å…è´¹çš„ASP.NETæœåŠ¡å™¨</li>
<li>Clayï¼šå°†dynamicå‘æŒ¥çš„æ›´åŠ çµæ´»ï¼Œåƒå†™jsä¸€æ ·å†™C#</li>
<li>DynamicJSONï¼šä¸å¿…å®šä¹‰æ•°æ®æ¨¡å‹è·å–jsonæ•°æ®</li>
<li>SharpPcapï¼šC#ç‰ˆçš„WinPcapè°ƒç”¨ç«¯ï¼Œç‰›é€¼çš„ç½‘ç»œåŒ…åˆ†æåº“ï¼ˆè‡ªå¸¦PacketNotNetç”¨äºåŒ…åè®®åˆ†æï¼‰</li>
<li>Roslynï¼šC#ï¼ŒVBç¼–è¯‘å™¨</li>
<li>ImageResizer: æœåŠ¡ç«¯è‡ªç”±æ§åˆ¶å›¾ç‰‡å¤§å°ï¼ŒçœŸä¹ƒç¥å™¨ä¹Ÿï¼Œå¯¹æ‰‹æœºç«¯ä¼ å°å›¾ï¼ŒPCç«¯ä¼ å¤§å›¾ï¼ŒCMSç”¨å®ƒå¾ˆæ–¹ä¾¿</li>
<li>UIç›¸å…³ï¼šDevExpress, Fluent(Office 07é£æ ¼), muiï¼ˆModern UI for WPFï¼‰</li>
<li>NetSparkleï¼šåº”ç”¨è‡ªåŠ¨æ›´æ–°ç»„ä»¶</li>
<li>ConfuserEx: å¼€æº.netæ··æ·†å·¥å…·</li>
<li>ServiceStack: å¼€æºé«˜æ€§èƒ½WebæœåŠ¡æ¡†æ¶ï¼Œå¯ç”¨äºæ„å»ºé«˜æ€§èƒ½çš„RESTæœåŠ¡</li>
<li>Expression Evaluatorï¼šEval for C#,å¤„ç†å­—ç¬¦ä¸²è¡¨è¾¾å¼</li>
<li><a href="http://nugetmusthaves.com/" target="_blank" rel="external">http://nugetmusthaves.com/</a></li>
<li>Reactive Extensions (Rx):å¼‚æ­¥ï¼Œäº‹ä»¶é©±åŠ¨ç¼–ç¨‹åŒ…ï¼Œ Rx = Observables + LINQ + Schedulers</li>
</ul>
<h3 id="C-amp-C"><a href="#C-amp-C" class="headerlink" title="C &amp; C++"></a>C &amp; C++</h3><ul>
<li>Thrift:ç”¨æ¥è¿›è¡Œå¯æ‰©å±•ä¸”è·¨è¯­è¨€çš„æœåŠ¡çš„å¼€å‘(ç±»ä¼¼çš„è¿˜æœ‰ä¸ªAvroï¼ŒGoogle protobuf)ã€‚</li>
<li>libevent:æ˜¯ä¸€ä¸ªäº‹ä»¶è§¦å‘çš„ç½‘ç»œåº“ï¼Œé€‚ç”¨äºwindowsã€linuxã€bsdç­‰å¤šç§å¹³å°ï¼Œå†…éƒ¨ä½¿ç”¨selectã€epollã€kqueueç­‰ç³»ç»Ÿè°ƒç”¨ç®¡ç†äº‹ä»¶æœºåˆ¶ã€‚ï¼ˆå¯¹äº†è¿˜æœ‰ä¸ªlibevå‘¢ï¼‰</li>
<li>Boost:ä¸å¤šè¯´äº†ï¼Œå‡†C++æ ‡å‡†åº“</li>
<li>Valgrind\Ptmalloc\Purify: è°ƒè¯•å·¥å…·</li>
<li>NetworkServeræ¶æ„ï¼šacceptor-&gt;dispatcher-&gt;worker(è¿™ä¸ªä¸ç®—å·¥å…·å“¦)</li>
<li><a href="https://pocoproject.org/" target="_blank" rel="external">POCO</a> - å¼€æºçš„C++ç±»åº“åŠåº”ç”¨ç¨‹åºæ¡†æ¶çš„é›†åˆ,å®ƒä¸»è¦æä¾›ç®€å•çš„ã€å¿«é€Ÿçš„ç½‘ç»œå’Œå¯ç§»æ¤åº”ç”¨ç¨‹åº</li>
<li>breakpad:å´©æºƒè½¬å‚¨å’Œåˆ†ææ¨¡å—ï¼Œå¾ˆå¤šcrashreportä¼šç”¨åˆ°</li>
<li>UIç•Œé¢ç›¸å…³ï¼šMFCã€BCGå’ŒQTè¿™ç±»çš„å°±ä¸è¯´äº†ï¼Œé«˜ç«¯ä¸€ç‚¹çš„è¿˜æœ‰Htmlå’ŒDirectUIæŠ€æœ¯ï¼šlibcefï¼ˆåŸºäºchromeå†…æ ¸çš„ï¼Œæƒ³æƒ³ä½¿ç”¨html5å¼€å‘é¡µé¢ï¼Œè¿˜çœŸæœ‰ç‚¹å°æ¿€åŠ¨å‘¢ï¼‰ã€HtmlLayoutã€Duilibã€Boltï¼ŒéC++çš„ï¼Œè¿˜æœ‰node-webkitä¹Ÿä¸é”™ï¼Œé›†æˆäº†nodeå’Œwebkitå†…æ ¸ã€‚</li>
</ul>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="æ¸¸æˆå¼€å‘ç›¸å…³"><a href="#æ¸¸æˆå¼€å‘ç›¸å…³" class="headerlink" title="æ¸¸æˆå¼€å‘ç›¸å…³"></a>æ¸¸æˆå¼€å‘ç›¸å…³</h3><ul>
<li>MINAï¼šä½¿ç”¨Javaå¼€å‘æ‰‹æ¸¸å’Œé¡µæ¸¸æœåŠ¡å™¨(å¯¹äº†è¿˜æœ‰Nettyï¼Œä¹Ÿå¾ˆçŒ›çš„ï¼Œéƒ½æ˜¯åŸºäºNIOçš„)</li>
<li>HP-Socketï¼šè§æœ‰æœ‰äº›é¡µæ¸¸æœåŠ¡å™¨ä½¿ç”¨è¿™ä¸ªæ„å»ºçš„</li>
<li>Unreal: è™šå¹»å¼•æ“ï¼ŒC++ï¼ŒåŸºäºè¿™ä¸ªå¼•æ“çš„æ¸¸æˆå¾ˆå¤š</li>
<li>OGREï¼šå¤§åé¼é¼çš„3Då›¾å½¢æ¸²æŸ“å¼•æ“ï¼Œå¤©é¾™å…«éƒ¨OLã€ç«ç‚¬ä¹‹å…‰ç­‰ä¸å°‘æ¸¸æˆéƒ½ç”¨äº†è¿™ä¸ªå¼•æ“</li>
<li>OpenVDBï¼šæ¢¦å·¥å‚C++çš„ç‰¹æ•ˆåº“ï¼Œå¼€æºçš„</li>
<li>cocos2dï¼šè·¨å¹³å°2Dæ¸¸æˆå¼•æ“</li>
<li>unity3dï¼šè·¨å¹³å°3Dæ¸¸æˆå¼•æ“ï¼Œå¾ˆç«çš„å“¦</li>
<li>Nodejsï¼šä¹Ÿæœ‰ä¸å°‘ä½¿ç”¨å®ƒæ¥å¼€å‘æ‰‹æ¸¸å’Œé¡µæ¸¸æœåŠ¡å™¨ï¼ˆç½‘æ˜“çš„Pomeloï¼‰</li>
</ul>
<h3 id="æ—¥å¿—èšåˆï¼Œåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†"><a href="#æ—¥å¿—èšåˆï¼Œåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†" class="headerlink" title="æ—¥å¿—èšåˆï¼Œåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†"></a>æ—¥å¿—èšåˆï¼Œåˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†</h3><ul>
<li>Scribeï¼šFacebookçš„ï¼ˆnodejs + scribe + inotify åŒæ­¥æ—¥å¿—ï¼‰</li>
<li>logstash:å¼ºå¤§çš„æ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼Œå¯ä»¥åŸºäºlogstash+kibana+elasticsearch+rediså¼€å‘å¼ºå¤§çš„æ—¥å¿—åˆ†æå¹³å°</li>
<li>log.io: nodejså¼€å‘çš„å®æ—¶æ—¥å¿—æ”¶é›†ç³»ç»Ÿ</li>
<li>Graylog: æ˜“ç”¨ã€åŠŸèƒ½ä¸°å¯Œçš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼Œ éƒ¨ç½²ã€ç»´æŠ¤ã€æœç´¢æ¯”<code>ELK</code>ç®€å•</li>
</ul>
<h3 id="RTP-å®æ—¶ä¼ è¾“åè®®ä¸éŸ³è§†é¢‘"><a href="#RTP-å®æ—¶ä¼ è¾“åè®®ä¸éŸ³è§†é¢‘" class="headerlink" title="RTP,å®æ—¶ä¼ è¾“åè®®ä¸éŸ³è§†é¢‘"></a>RTP,å®æ—¶ä¼ è¾“åè®®ä¸éŸ³è§†é¢‘</h3><ul>
<li>RTPï¼ŒRTCPï¼ŒRTSP-&gt; librtpï¼ŒJRTPLIB(éµå¾ªäº†RFC1889æ ‡å‡†)</li>
<li>ç¯å½¢ç¼“å†²åŒºï¼Œå®æ—¶æ•°æ®ä¼ è¾“ç”¨</li>
<li>SDL,ffmpeg,live555,Speex</li>
<li>Red5:ç”¨Javaå¼€å‘å¼€æºçš„Flashæµåª’ä½“æœåŠ¡å™¨ã€‚å®ƒæ”¯æŒï¼šæŠŠéŸ³é¢‘ï¼ˆMP3ï¼‰å’Œè§†é¢‘ï¼ˆFLVï¼‰è½¬æ¢æˆæ’­æ”¾æµï¼› å½•åˆ¶å®¢æˆ·ç«¯æ’­æ”¾æµï¼ˆåªæ”¯æŒFLVï¼‰ï¼›å…±äº«å¯¹è±¡ï¼›ç°åœºç›´æ’­æµå‘å¸ƒï¼›è¿œç¨‹è°ƒç”¨ã€‚</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptæ¡¥æ¥æ¨¡å¼(1)-é˜Ÿåˆ—æ•°æ®ç»“æ„]]></title>
      <url>http://yoursite.com/2017/03/24/javascript%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F(1)-%E9%98%9F%E5%88%97%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æ ¹æ®ä¹¦ä¸Šä¾‹å­çš„å®é™…è¦æ±‚ï¼Œæ¶‰åŠåˆ°jsé˜Ÿåˆ—çš„é—®é¢˜ã€‚æ‰€ä»¥å…ˆæŠŠjsä¸­é˜Ÿåˆ—çš„å…·ä½“å®ç°æ•°æ®ç»“æ„è´´å‡ºæ¥ã€‚å…·ä½“å‚è€ƒã€Šå­¦ä¹ javascriptæ•°æ®ç»“æ„å’Œç®—æ³•ã€‹ç¬¬å››ç« ã€‚<br>é˜Ÿåˆ—æ•°æ®ç»“æ„éµå¾ªå…ˆå…¥å…ˆå‡ºçš„åŸåˆ™ã€‚å…¥é˜Ÿæ“ä½œæ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œè¿”å›æ–°æ•°ç»„ã€‚å‡ºé˜Ÿæ“ä½œå¼¹å‡ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›æ–°æ•°ç»„ã€‚ä¸¤ä¸ªæ“ä½œå¯¹äºæ•°ç»„éƒ½æœ‰ç»“æ„çš„æ”¹å˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//jsä¸­é˜Ÿåˆ—çš„å®ç°æ˜¯ä¾èµ–æ•°ç»„çš„æ•°æ®ç»“æ„</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> items = [];  <span class="comment">//åˆå§‹åŒ–ç©ºæ•°ç»„ï¼Œletå…³é”®å­—æ˜¯es6ä¸­çš„</span></div><div class="line">    <span class="comment">//ç”¨äºå½¢æˆå¤§æ‹¬å·åŒ…å›´çš„ä½œç”¨åŸŸ</span></div><div class="line"></div><div class="line">    <span class="keyword">this</span>.enqueue = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123; <span class="comment">//å…¥é˜Ÿæ“ä½œ</span></div><div class="line">        items.push(element); <span class="comment">//æ•°ç»„pushæ“ä½œ</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.dequeue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//å‡ºå¯¹</span></div><div class="line">        <span class="keyword">return</span> items.shift(); <span class="comment">//æ•°ç»„shiftæ“ä½œ</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.front = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ </span></div><div class="line">        <span class="keyword">return</span> items[<span class="number">0</span>];     <span class="comment">//æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.isEmpty = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æœ‰æ— æˆå‘˜</span></div><div class="line">        <span class="keyword">return</span> items.length == <span class="number">0</span>; <span class="comment">//å¸ƒå°”å€¼åˆ¤æ–­</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.clear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ¸…ç©ºé˜Ÿåˆ—</span></div><div class="line">        items = [];   <span class="comment">//å˜é‡é‡æ–°èµ‹å€¼ç©ºæ•°ç»„</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.size = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//è·å¾—é˜Ÿåˆ—çš„é•¿åº¦</span></div><div class="line">        <span class="keyword">return</span> items.length; </div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ‰“å°é˜Ÿåˆ—</span></div><div class="line">        <span class="built_in">console</span>.log(items.toString());</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>ä¸‹é¢æ˜¯ä¼˜å…ˆé˜Ÿåˆ—ã€‚æ•°æ®æˆå‘˜å…¥é˜Ÿçš„æ—¶å€™è¦æºå¸¦æ•°æ®å’Œä¼˜å…ˆçº§ã€‚<br>ä¼˜å…ˆçº§åœ¨è¿™é‡Œçš„å®šä¹‰æ˜¯æ•°å­—è¶Šå¤§åœ¨æ•°ç»„ä¸­çš„ä½ç½®é åã€‚å½“æ’å…¥ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„æ—¶å€™ï¼Œå…ˆè¦æ ¹æ®å®ƒçš„ä¼˜å…ˆçº§æ¥åˆ¤æ–­ï¼Œæœ€å°æ˜¯ç›´æ¥æ’å…¥åˆ°ç¬¬ä¸€ä½ï¼Œç´§é‚»ä¸€ä¸ªæ¯”ä»–å¤§çš„ä¼˜å…ˆçº§æ˜¯ï¼Œå°±æ’å…¥åˆ°è¿™ä¸ªé‚»å±…çš„å‰é¢ã€‚å¦‚æœæ˜¯æœ€å¤§çš„æ•°å­—å°±æ’åˆ°æ•°ç»„çš„æœ€åã€‚<br>ä¸€ç»´æ•°ç»„å˜æˆäº†äºŒä½æ•°ç»„ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">PriorityQueue</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> items = [];</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">QueueElement</span> (<span class="params">element, priority</span>)</span>&#123; </div><div class="line">            <span class="keyword">this</span>.element = element;<span class="comment">//æˆå‘˜æœ¬èº«</span></div><div class="line">        <span class="keyword">this</span>.priority = priority;  <span class="comment">//ä¼˜å…ˆçº§</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.enqueue = <span class="function"><span class="keyword">function</span>(<span class="params">element, priority</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> queueElement = <span class="keyword">new</span> QueueElement(element, priority);</div><div class="line"></div><div class="line">        <span class="keyword">let</span> added = <span class="literal">false</span>; <span class="comment">//æ·»åŠ æ ‡è®°</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;items.length; i++)&#123;</div><div class="line">            <span class="keyword">if</span> (queueElement.priority &lt;            </div><div class="line"> items[i].priority)&#123;  <span class="comment">//æ‰¾åˆ°ä¼˜å…ˆçº§æ•°å­—æ¯”ä»–å¤§çš„é‚£ä¸ªå…ƒç´ </span></div><div class="line"></div><div class="line">                items.splice(i,<span class="number">0</span>,queueElement);            </div><div class="line">             <span class="comment">// æ’åˆ°è¿™ä¸ªå…ƒç´ çš„å‰é¢</span></div><div class="line">                added = <span class="literal">true</span>;</div><div class="line">                <span class="keyword">break</span>; <span class="comment">// ç»ˆæ­¢</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!added)&#123; <span class="comment">//å¦‚æœæ˜¯ä¼˜å…ˆçº§æ•°å­—æ˜¯æœ€å¤§çš„ï¼Œç›´æ¥æ’å…¥åˆ°</span></div><div class="line">        <span class="comment">//æ•°ç»„çš„æœ«å°¾</span></div><div class="line">            items.push(queueElement); <span class="comment">//&#123;5&#125;</span></div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    <span class="comment">//å…¶ä»–æ“ä½œå’Œæ™®é€šé˜Ÿåˆ—æ˜¯ä¸€æ ·çš„</span></div><div class="line"></div><div class="line">    <span class="keyword">this</span>.dequeue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> items.shift();</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.front = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> items[<span class="number">0</span>];</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.isEmpty = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> items.length == <span class="number">0</span>;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.size = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> items.length;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//printä½¿ç”¨äº†es6é‡Œçš„æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹æ³•</span></div><div class="line">    <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;items.length; i++)&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;items[i].element&#125;</span>  - <span class="subst">$&#123;items[i].priority&#125;</span>`</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> priorityQueue = <span class="keyword">new</span> PriorityQueue();</div><div class="line">priorityQueue.enqueue(<span class="string">"John"</span>, <span class="number">2</span>);</div><div class="line">priorityQueue.enqueue(<span class="string">"Jack"</span>, <span class="number">1</span>);</div><div class="line">priorityQueue.enqueue(<span class="string">"Camila"</span>, <span class="number">1</span>);</div><div class="line">priorityQueue.enqueue(<span class="string">"Maxwell"</span>, <span class="number">2</span>);</div><div class="line">priorityQueue.enqueue(<span class="string">"Ana"</span>, <span class="number">3</span>);</div><div class="line">priorityQueue.print();</div><div class="line"><span class="comment">//=&gt;</span></div><div class="line"><span class="comment">//æ‰“å°å‡ºçš„ç»“æœ</span></div><div class="line">Jack  - <span class="number">1</span>  <span class="comment">//æ•°ç»„å…ƒç´ --ä¼˜å…ˆçº§</span></div><div class="line">Camila  - <span class="number">1</span></div><div class="line">John  - <span class="number">2</span></div><div class="line">Maxwell  - <span class="number">2</span></div><div class="line">Ana  - <span class="number">3</span></div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªé˜Ÿåˆ—çš„åŸºç¡€ä¸Šå¯ä»¥å®ç°javascriptä¸­æ¡¥æ¥æ¨¡å¼çš„ä¾‹å­ã€‚æœ¬æ–‡ç®—æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„javascripté˜Ÿåˆ—çš„ä»‹ç»ï¼Œä¹Ÿä½œä¸ºæ¡¥æ¥æ¨¡å¼ä¾‹å­çš„èƒŒæ™¯æ–¹æ³•ã€‚<br><a href="http://www.apress.com/cn/book/9781590599082" target="_blank" rel="external">javascriptè®¾è®¡æ¨¡å¼ ç¬¬å…«ç« -æ¡¥æ¥æ¨¡å¼</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[react-nativeè§†å·®æ»šåŠ¨ç»„ä»¶ä½¿ç”¨]]></title>
      <url>http://yoursite.com/2017/03/24/react-native%E8%A7%86%E5%B7%AE%E6%BB%9A%E5%8A%A8%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>çœ‹åˆ°è®¸å¤šappåœ¨ç•Œé¢ä¸Šå®ç°äº†å¤´éƒ¨çš„å›¾ç‰‡å’Œæ–‡å­—çš„æ¸éšæ•ˆæœï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªç»„ä»¶ï¼Œå®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚å¦‚æœè¦ä½“ç°æ¯”è¾ƒå¥½çš„æ•ˆæœè¿˜éœ€è¦åœ¨ç»†èŠ‚åœ°æ–¹å¤šç ”ç©¶ã€‚<br>è¿™é‡Œå†™å‡ºæ¥ä»…ä¾›å­¦ä¹ çš„è¿›ä¸€æ­¥çš„ç ”ç©¶</p>
<p>   çœ‹çœ‹æ•ˆæœå›¾</p>
<p><a href="https://github.com/phpsmarter/react-native-parallax-scroll-view" target="_blank" rel="external">react-native-parallax-scroll-view ,githubåœ°å€</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-32c303299eff67ca.gif?imageMogr2/auto-orient/strip" alt="ScreenFlow.gif"><br>ä¸‹é¢çœ‹ä¸€ä¸‹ä»£ç <br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">import</span> React, &#123; Component &#125; from <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  Dimensions,</div><div class="line">  Image,</div><div class="line">  Text,</div><div class="line">  View,</div><div class="line">  AppRegistry,</div><div class="line">  StatusBar</div><div class="line">&#125; from <span class="string">'react-native'</span>;</div><div class="line"><span class="comment">//å¯¼å…¥ç»„ä»¶</span></div><div class="line"><span class="keyword">import</span> ParallaxScrollView from <span class="string">'react-native-parallax-scroll-view'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> window = Dimensions.<span class="built_in">get</span>(<span class="string">'window'</span>);<span class="comment">//è·å–å®½åº¦</span></div><div class="line">console.<span class="built_in">log</span>(window.<span class="built_in">width</span>);</div><div class="line"></div><div class="line">class Nested extends Component &#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;View style=&#123;&#123; flex: <span class="number">1</span> &#125;&#125;&gt;</div><div class="line">         <span class="comment">//æ–¹å‘ï¼Œå¯ä»¥ä¸ºrow</span></div><div class="line">        &lt;View style=&#123;&#123; flex: <span class="number">1</span>, flexDirection: <span class="string">'column'</span> &#125;&#125;&gt;</div><div class="line">          &lt;View style=&#123;&#123; <span class="built_in">width</span>: <span class="number">60</span>, backgroundColor: <span class="string">'red'</span> &#125;&#125;/&gt;</div><div class="line">         <span class="comment">//æ»šåŠ¨æ•ˆæœéƒ½åœ¨ä¸‹é¢è¿™ä¸ªç»„ä»¶</span></div><div class="line">          &lt;ParallaxScrollView</div><div class="line">              style=&#123;&#123; flex: <span class="number">1</span>, backgroundColor: <span class="string">'hotpink'</span>, overflow: <span class="string">'hidden'</span> &#125;&#125;</div><div class="line">             <span class="comment">//ä¸‹é¢æ¸²æŸ“èƒŒæ™¯</span></div><div class="line">              renderBackground=&#123;() =&gt;  &lt;Image style=&#123;&#123;<span class="built_in">width</span>:window.<span class="built_in">width</span>,<span class="built_in">height</span>:<span class="number">350</span>&#125;&#125; source=&#123;require(<span class="string">'./images/schedule-background.png'</span>)&#125;/&gt;&#125;</div><div class="line">             <span class="comment">//ä¸‹é¢æ˜¯æ¸²æŸ“å‰æ™¯</span></div><div class="line">              renderForeground=&#123;() =&gt; (</div><div class="line">                &lt;View&gt;</div><div class="line">                &lt;View style=&#123;&#123;alignItems: <span class="string">'center'</span>, justifyContent: <span class="string">'center'</span>,marginTop:<span class="number">50</span>&#125;&#125;&gt;</div><div class="line">              </div><div class="line">                &lt;Image style=&#123;&#123;borderRadius:<span class="number">50</span></div><div class="line">              &#125;&#125; source=&#123;&#123;</div><div class="line">                  uri: <span class="string">'https://pbs.twimg.com/profile_images/2694242404/5b0619220a92d391534b0cd89bf5adc1_400x400.jpeg'</span>,</div><div class="line">                  <span class="built_in">width</span>: <span class="number">100</span>,</div><div class="line">                  <span class="built_in">height</span>: <span class="number">100</span></div><div class="line">                &#125;&#125;/&gt;</div><div class="line">                &lt;/View&gt;</div><div class="line">               </div><div class="line">                  &lt;Text style=&#123;&#123;paddingVertical: <span class="number">5</span>,<span class="built_in">textAlign</span>:<span class="string">'center'</span>,<span class="built_in">color</span>:<span class="string">'white'</span>&#125;&#125;&gt;</div><div class="line">                    Talks by Rich Hickey</div><div class="line">                   &lt;/Text&gt;</div><div class="line">                   &lt;Text style=&#123;&#123;paddingVertical: <span class="number">5</span> ,<span class="built_in">textAlign</span>:<span class="string">'center'</span>,<span class="built_in">color</span>:<span class="string">'white'</span>&#125;&#125;&gt;</div><div class="line">                    CTO of Cognitec, Creator of Clojure</div><div class="line">                  &lt;/Text&gt;</div><div class="line">                </div><div class="line">                &lt;/View&gt;</div><div class="line">                </div><div class="line">            )&#125;</div><div class="line">             <span class="comment">//æ¸²æŸ“å›ºå®šå¤´éƒ¨</span></div><div class="line">              renderFixedHeader=&#123;() =&gt; &lt;Text style=&#123;&#123; <span class="built_in">textAlign</span>: <span class="string">'right'</span>, <span class="built_in">color</span>: <span class="string">'white'</span>, padding: <span class="number">5</span>, fontSize: <span class="number">20</span>,marginTop:<span class="number">20</span> &#125;&#125;&gt;Hello&lt;/Text&gt;&#125;</div><div class="line">              parallaxHeaderHeight=&#123; <span class="number">350</span> &#125;&gt;</div><div class="line">                        &lt;View style=&#123;&#123; alignItems: <span class="string">'center'</span>&#125;&#125;&gt;&lt;Text style=&#123;&#123; fontSize: <span class="number">20</span> ,backgroundColor:<span class="string">"#519caf"</span>,<span class="built_in">width</span>:window.<span class="built_in">width</span>,<span class="built_in">textAlign</span>:<span class="string">'center'</span>&#125;&#125;&gt;This is parallaxbox&lt;/Text&gt;&lt;/View&gt;          </div><div class="line"></div><div class="line">          &lt;/ParallaxScrollView&gt;</div><div class="line">          </div><div class="line">        &lt;/View&gt;</div><div class="line">        &lt;View style=&#123;&#123; <span class="built_in">height</span>: <span class="number">30</span>, backgroundColor: <span class="string">'#6577cc'</span> &#125;&#125;/&gt;</div><div class="line">      &lt;/View&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export <span class="keyword">default</span> Nested;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">AppRegistry.registerComponent(<span class="string">'parallaxBox'</span>, () =&gt; Nested);</div></pre></td></tr></table></figure></p>
<p>èƒŒæ™¯å›¾ç‰‡ç”¨äº†ä¸€å¼ f8appçš„èƒŒæ™¯å›¾ç‰‡ï¼Œæ›²çº¿æœ‰åŠ¨æ€å˜åŒ–æ•ˆæœã€‚<br>è¿™ä¸ªç»„ä»¶çš„apiè¿˜æ˜¯æœ‰ä¸€äº›ï¼Œç”¨å¥½äº†æ•ˆæœå°±å‡ºæ¥äº†ã€‚å…·ä½“çš„çœ‹githubä»‹ç»</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[VelocityåŠ¨ç”»åº“å­¦ä¹ ]]></title>
      <url>http://yoursite.com/2017/03/24/Velocity%E5%8A%A8%E7%94%BB%E5%BA%93%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/2044710-a6a2735312d5c432.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt="1661.987.big.jpg.png"></p>
<blockquote>
<p>çœ‹velocity.jsçš„å†…å®¹æœ‰æ®µæ—¶é—´äº†ï¼Œæºäºå›¾ç‰‡è¿™æœ¬ä¹¦ã€‚å‰é¢çœ‹ç›´è§‚çš„æ„Ÿå—æ˜¯ï¼šè¿™ä¸ªåº“çš„æ“ä½œå¾ˆç®€å•ã€‚è¦è§£å†³ä¸€ä¸ªrnçš„åŠ¨ç”»é—®é¢˜ï¼ŒæŠŠè¿™æœ¬ä¹¦åˆæ‹¿å‡ºæ¥çœ‹ï¼Œåˆšå¥½çœ‹åˆ°ä¹Ÿæœ‰äº†velocity-reactç‰ˆï¼Œè€ƒè™‘æ˜¯å¦ä»¥åå¯ä»¥ç”¨åœ¨react-nativeä¸Šï¼Œè¿™æ ·çš„è¯åº”ç”¨èŒƒå›´å°±å¤§å¾ˆå¤šã€‚<br><a href="http://velocityjs.org" target="_blank" rel="external">Velocity.jsæ–‡æ¡£</a><br><a href="https://github.com/twitter-fabric/velocity-react" target="_blank" rel="external">velocity-react githubåœ°å€</a>ï¼›<br><a href="https://fabric.io/blog/introducing-the-velocityreact-library" target="_blank" rel="external">velocity-reactçš„å†…å®¹</a>ï¼›</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-a00dfb63a7e5f09d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt="1443477710321.png"><br>åˆå§‹åŒ–æ¯”è¾ƒç®€å•ï¼Œç½‘é¡µä¸­å…ˆå¯¼å…¥jqueryåº“ï¼Œç„¶åå¯¼å…¥velocity.jsåº“<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  //æœ€å¥½æ˜¯é…åˆjqueryæ¥ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨jqueryçš„é“¾å¼æ“ä½œã€‚</div><div class="line">  //jqueryçš„å‡½æ•°æ“ä½œåœ¨å®Œæˆä»¥åä¼šæœ‰ä¸€å¥ return this,ç”±æ­¤é“¾å¼æ“ä½œçš„</div><div class="line"> //çš„åä¸€ä¸ªæ–¹æ³•çš„å¯¹è±¡å’Œå‰ä¸€ä¸ªæ–¹æ³•çš„å¯¹è±¡æ˜¯ç›¸åŒçš„</div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/js/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/js/velocity.min.js"</span>&gt;</span><span class="javascript">/script&gt; </span></div><div class="line">   $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    $div=$(<span class="string">"div"</span>);   <span class="comment">//jQueryå¯¹è±¡ç¼“å­˜èµ·æ¥</span></div><div class="line">    $div.velocity(&#123;<span class="attr">opacity</span>:<span class="number">0.5</span>&#125;);  <span class="comment">//è°ƒç”¨æ–¹æ³•</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><em>Velocityæ¥å—å¤šä¸ªå‚æ•°</em>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå°†csså±æ€§æ˜ å°„åˆ°å¯¹åº”çš„ç›®æ ‡å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šåŠ¨ç”»çš„é€‰é¡¹<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> $element.velocity(&#123;<span class="string">width:</span><span class="string">"500px"</span>,<span class="string">opacity:</span><span class="number">0.5</span>&#125;,&#123;<span class="string">duration:</span><span class="number">400</span>,<span class="string">easing:</span><span class="string">"swing"</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨ç®€å†™</span></div><div class="line">$element.velocity(&#123;<span class="string">width:</span><span class="string">"500px"</span>,<span class="string">opacity:</span><span class="number">0.5</span>&#125;,<span class="number">400</span>ï¼Œ<span class="string">"ease-in-out"</span>);</div></pre></td></tr></table></figure></p>
<p><em>å¯¹äºcsså±æ€§ï¼Œvelocityä¸æ”¯æŒç®€å†™ï¼Œåªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„å†™ï¼Œè€Œä¸”csså±æ€§ä¹Ÿå’Œreactä¸€æ ·æ˜¯é©¼å³°å‘½åã€‚</em></p>
<p>é“¾å¼æ“ä½œï¼›å¦‚æœä¸ºäº†æ•ˆç‡æ”¾å¼ƒä½¿ç”¨jquery,é‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨é“¾å¼æ“ä½œäº†<br>æ¯ä¸ªæ“ä½œå•ç‹¬å†™å°±å¯ä»¥äº†ã€‚<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$elemnt</span><span class="selector-class">.velocity</span>(&#123;<span class="attribute">width</span>:<span class="string">"400px"</span>&#125;).velocity(&#123;opacity:<span class="number">0.6</span>&#125;);</div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨è¿™ä¸ªåº“å®ç°æ—‹è½¬åŠ¨ç”» </p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-5ddc998c6c858840.gif?imageMogr2/auto-orient/strip" alt="ScreenFlow.gif"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;image id=<span class="string">"pic"</span> src=<span class="string">"img/pic.jpg"</span>/&gt;</div><div class="line">   <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></span></div><div class="line">         $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">             $pic=$(<span class="string">"#pic"</span>);</div><div class="line">            $pic.velocity(  <span class="comment">//loopè¡¨ç¤ºæ— é™å¾ªç¯</span></div><div class="line">                    &#123;<span class="attr">rotateZ</span>: <span class="string">"360deg"</span>&#125;,&#123;<span class="attr">duration</span>:<span class="number">5000</span>,<span class="attr">loop</span>: <span class="literal">true</span> &#125;,<span class="string">"linear"</span>)ï¼›   </div><div class="line">         &#125;);   </div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><a href="http://twitter-fabric.github.io/velocity-react/" target="_blank" rel="external">è¿™æ˜¯å®˜æ–¹çš„ä¸€ä¸ªç¤ºä¾‹</a><br><img src="http://upload-images.jianshu.io/upload_images/2044710-019b0a1d63961dd2.gif?imageMogr2/auto-orient/strip" alt="ScreenFlow3.gif"><br>ä¸‹é¢æ˜¯reactç»„ä»¶çš„ç”¨æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ npm install --save velocity-react</div><div class="line"><span class="built_in">require</span>(<span class="string">'velocity-animate'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'velocity-animate/velocity.ui'</span>);</div><div class="line"> <span class="xml"><span class="tag">&lt;<span class="name">VelocityComponent</span> <span class="attr">animation</span>=<span class="string">&#123;&#123;</span> <span class="attr">opacity:</span> <span class="attr">this.state.showSubComponent</span> ? <span class="attr">1</span> <span class="attr">:</span> <span class="attr">0</span> &#125;&#125; <span class="attr">duration</span>=<span class="string">&#123;500&#125;</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">MySubComponent</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">VelocityComponent</span>&gt;</span></div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Reactç»„ä»¶çš„äº«å…ƒæ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/24/React%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F-1/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[Reactç»„ä»¶çš„äº«å…ƒæ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/24/React%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨react/react-nativeçš„ä»£ç ä¸­éƒ½æœ‰è¿™æ ·çš„ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; View,  </div><div class="line">               StyleSheet, </div><div class="line">               ScrollView, </div><div class="line">               ListView,  </div><div class="line">               StatusBar,</div><div class="line">              InteractionManager,</div><div class="line">              Navigator, &#125;</div><div class="line">              <span class="keyword">from</span> <span class="string">'react-native'</span></div></pre></td></tr></table></figure>
<p>é€šè¿‡è¿™æ ·çš„æ–¹å¼å¼•å…¥ç»„ä»¶å¯¹è±¡ã€‚ ä»Šå¤©åˆä¸€æ¬¡è¯»jsè®¾è®¡æ¨¡å¼çš„æ—¶å€™å‘ç°åŸæ¥çš„ç†è§£æ˜¯é”™è¯¯çš„ï¼Œè¯¯è§£äº†ç»„ä»¶çš„å¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œä»è€Œæ²¡æœ‰é¢†ä¼šç»„ä»¶çš„å¾®å¦™ä¹‹å¤„ã€‚ä»Šå¤©æŠŠæ­£ç¡®çš„æ¦‚å¿µå†™å‡ºæ¥ã€‚</p>
<p>åœ¨æ›¾æ¢çš„ã€Šjavascript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹å…³äºäº«å…ƒæ¨¡å¼çš„å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€æœ‰è¿™æ ·çš„æè¿°</p>
<blockquote>
<p>-å†…éƒ¨çŠ¶æ€å­˜å‚¨äºå¯¹è±¡å†…éƒ¨<br>  -å†…éƒ¨çŠ¶æ€å¯ä»¥è¢«ä¸€äº›å¯¹è±¡å…±äº«<br>  -å†…éƒ¨çŠ¶æ€å¯ä»¥ç‹¬ç«‹äºåœºæ™¯ï¼Œé€šå¸¸ä¸ä¼šå˜<br>  -å¤–éƒ¨çŠ¶æ€å–å†³äºå…·ä½“çš„åœºæ™¯ï¼Œå¹¶æ ¹æ®åœºæ™¯è€Œå˜åŒ–ï¼Œå¤–éƒ¨çŠ¶æ€ä¸èƒ½è¢«å…±äº«</p>
</blockquote>
<p>æ€ä¹ˆè§£é‡Šå‘¢ï¼Ÿæ„æ€æ˜¯é¡µé¢ä¸­å‡ºç°çš„æ‰€æœ‰Viewç»„ä»¶å®é™…æ˜¯åŒä¸€ä¸ªå…±äº«å¯¹è±¡ï¼Œå¤–éƒ¨çŠ¶æ€ä»å¯¹è±¡ä¸Šå‰¥ç¦»å¼€æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤–éƒ¨ã€‚<br>   å‰¥ç¦»äº†å¤–éƒ¨çŠ¶æ€çš„å°±æ˜¯å…±äº«ç»„ä»¶ã€‚ å¤–éƒ¨çŠ¶æ€å¿…è¦æ—¶ä¼ å…¥å…±äº«ç»„ä»¶å°±å¯ä»¥ç»„æˆä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ã€‚è¿™äº›å¤–éƒ¨çŠ¶æ€åŒ…æ‹¬ stateï¼Œprops,styleç­‰<br>ç»„è£…å¤–éƒ¨çŠ¶æ€éœ€è¦æ—¶é—´ï¼Œä½†æ˜¯å¯ä»¥å¤§å¤§å‡å°‘ç³»ç»Ÿä¸­çš„å¯¹è±¡æ•°é‡ï¼Œäº«å…ƒæ¨¡å¼æ˜¯ç”¨æ—¶é—´æ¢ç©ºé—´çš„åšæ³•ã€‚<br>é€šè¿‡importå¯¼å…¥çš„å°±æ˜¯å…¬å…±ç»„ä»¶å¯¹è±¡ã€‚ å…¬å…±ç»„ä»¶å†…éƒ¨å¯ä»¥ä¸ºå¤–éƒ¨çŠ¶æ€åŠ ä¸Šæ ‡ç­¾ä»¥ç¤ºåŒºåˆ«ï¼Œè¿™å°±æ˜¯refå‚æ•°å­˜åœ¨çš„å«ä¹‰ã€‚</p>
<p>è¿™å°±æ˜¯å€ŸåŠ©äº«å…ƒæ¨¡å¼ç†è§£çš„reactç»„ä»¶çš„æ„é€ å’Œç”¨æ³•ã€‚</p>
<p>å€ŸåŠ©æ¨¡å¼è®¾è®¡æ…¢æ…¢è¯»ä»£ç ï¼Œå†™ä»£ç ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Reduxå‡½æ•°]]></title>
      <url>http://yoursite.com/2017/03/24/Redux%E5%87%BD%E6%95%B0-2/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[Reduxå‡½æ•°]]></title>
      <url>http://yoursite.com/2017/03/24/Redux%E5%87%BD%E6%95%B0-1/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[Reduxå‡½æ•°]]></title>
      <url>http://yoursite.com/2017/03/24/Redux%E5%87%BD%E6%95%B0/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[Javascript reducerå‡½æ•°å®æˆ˜]]></title>
      <url>http://yoursite.com/2017/03/24/Javascript%20reducer%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<blockquote>
<p>javascript Reduceå‡½æ•°æ˜¯æ¯”è¾ƒå¼ºå¤§çš„ä¸€ä¸ªå‡½æ•°,åœ¨ç®€ä¹¦ä¸Šçœ‹åˆ°æœ‰ä¸ªä½œè€…å†™äº†è¿™ä¸ªå‡½æ•°çš„æ–‡ç« ,ä¹Ÿæ˜¯çœ‹åˆ°æœ‰ä¸ªé—®é¢˜å°±å‘ä»–è¯·æ•™,å¤§ç¥å¾ˆå¿™,ä½†æ˜¯ä»ç„¶åœ¨githubä¸Šåšäº†ç­”å¤,æˆ‘å¯¹é‚£ä¸ªé—®é¢˜ææ˜ç™½äº†,æ‰€ä»¥å†™äº†ä¸‹é¢è¿™ä¸ªæ–‡ç« ,ä½†æ˜¯æ²¡æœ‰å†™å®Œ,ç°åœ¨é™ªè€å¨˜åœ¨åŒ»é™¢,åˆæŠŠè¿™ä¸ªé—®é¢˜ç¿»å‡ºæ¥çœ‹,åˆä¸æ‡‚äº†,è¿˜æ˜¯æ‹‰é”¯æˆ˜å•Š. javascriptçš„ç¼–ç¨‹ä¸­,æˆ‘å¼€å§‹æ„Ÿåˆ°çœ‹åˆ«äººçš„æºç æœ€éš¾çš„åœ°æ–¹å®é™…è¿˜æ˜¯ä¸¤ä¸ª,ä¸€ä¸ªæ˜¯æ•°ç»„æ–¹æ³•çš„çµæ´»åº”ç”¨,å¦ä¸€ä¸ªæ˜¯å¯¹è±¡çš„æµ…æ‹·è´å’Œæ·±æ‹·è´çš„é—®é¢˜.è¿™ä¸¤ä¸ªé—®é¢˜è¦æ˜¯æœ‰æ·±åˆ»çš„ä½“ä¼š,çœ‹æºç çš„éš¾åº¦ä¼šé™ä½å¾ˆå¤š.reduce,slice,splice,concatå‡½æ•°æ˜¯æ˜æ˜Ÿ.é‡åˆ°è¿™å‡ ä¸ªå‡½æ•°çš„æ—¶å€™å°±æœ‰äº›çœ‹ä¸æ‡‚,æ‰€ä»¥æŒæ¡è¿™å‡ ä¸ªå‡½æ•°æ˜¯éå¸¸é‡è¦çš„. æ·±æ‹·è´å’Œæµ…æ‹·è´çš„é—®é¢˜å…¶å®å’Œjavascriptçš„å¯¹è±¡å’Œå‡½æ•°éƒ½æ˜¯ä¼ å¼•ç”¨èµ‹å€¼æ¯æ¯ç›¸å…³,ä¸€å¥è¯è§£å†³å¯¹è±¡çš„å…±äº«è¿˜æ˜¯ç‹¬äº«çš„é—®é¢˜.javascriptçš„è®¾è®¡æ¨¡å¼å¾ˆå¤šéƒ½æ˜¯åˆ©ç”¨å¯¹è±¡å¾ˆå‡½æ•°çš„ä¼ å¼•ç”¨èµ‹å€¼çš„ç‰¹ç‚¹æ¥å®Œæˆçš„.æ‰€ä»¥è¿™å„¿åœ°æ–¹ä¹Ÿæ˜¯éå¸¸çš„é‡è¦.javascriptçš„æ•°ç»„å…ƒç´ ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„å¼•ç”¨.</p>
</blockquote>
<p>æœ¬äººæ˜¯æ–°æ‰‹,æœ€å¤§çš„ä½“ä¼šæ˜¯å­¦åˆ°çš„ä¸¤ä¸ªç®€å•åŸåˆ™:1 å¯¹è±¡æ˜¯ç”¨æ¥ç»„ç»‡æ•°æ®å’Œç›¸å…³æ–¹æ³•çš„,æ‰€ä»¥ç»„ç»‡æ–¹å¼è¶Šç®€å•,è¶Šçµæ´»è¶Šå¥½,ç”±äºjsçš„å¯¹è±¡å’Œå‡½æ•°éƒ½å¯ä»¥ä¼ å¼•ç”¨èµ‹å€¼,æ‰€ä»¥åœ¨jsä¸­,ä»¥å¯¹è±¡å­—é¢é‡å’Œæ•°ç»„çš„ç»„ç»‡æ–¹å¼çœŸçš„æ˜¯éå¸¸çš„å¼ºå¤§,ä¹‹æ‰€ä»¥è¿™ä¹ˆè®²,å°±æ˜¯è¦æŠŠå­¦ä¹ æ•°ç»„çš„æ–¹æ³•æåˆ°æ–°çš„é«˜åº¦.2 ç¼–ç¨‹åˆ°åº•æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿ æˆ‘é€æ¸ä½“ä¼šåˆ°ç¼–ç¨‹ä¹Ÿå°±æ˜¯è§£å†³ä¿¡æ¯çš„ä¼ é€’ï¼Œå­˜å‚¨å’Œå¤„ç†çš„é—®é¢˜. æ‰€ä»¥å¾ˆå¤šé—®é¢˜å…¶å®ç¨å¾®æŠ½è±¡ä¸€ä¸‹,é—®é¢˜å¯èƒ½ä¼šç®€å•ä¸€ç‚¹. æˆ‘ç®€å•çš„å†™äº†ä¸€ä¸ªä¸œè¥¿,åœ¨å­¦ä¹ React/Reduxçš„æ—¶å€™,æ€»æ˜¯æŒæ¡ä¸äº†å®è´¨,å°±æ˜¯Reduxä¸­çš„stateçš„å®è´¨æ˜¯ä»€ä¹ˆ.å‰é¢å­¦ä¹ çš„æ—¶å€™,æ€»æ˜¯è¨€å¿…ç§°state,æƒ³äº†å„ç§åŠæ³•å»äº†è§£ä»€ä¹ˆæ˜¯stateï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡.å…¶å®å†æŠ½è±¡ä¸€ä¸‹,è¿™ä¸å°±æ˜¯ä¸€ä¸ªå°å‹çš„æ•°æ®åº“å—ï¼Ÿå¯ä»¥è¿™æ ·è¯´å—ï¼Ÿå½“ç„¶å¯ä»¥äº†,æˆ‘çœ‹äº†ä¸€æœ¬ä»‹ç»Reactçš„ä¹¦,æœ‰ç‚¹ç¡®è®¤äº†,å½“æˆ‘è¿™å‡ å¤©å†è¯»F8 appçš„ä»£ç å®˜æ–¹æ–‡æ¡£çš„æ—¶å€™,facebookç›´æ¥å°±æ˜¯æŠŠReduxç§°ä¸ºæ•°æ®å±‚.æˆ‘è¿˜æƒ³äº†ä¸€äº›åŠæ³•æ¥ç†è§£Reduxï¼Œæ¯”å¦‚è¯´å€Ÿç”¨ä¸­ä»‹è€…æ¨¡å¼,MVCè§£è€¦å’Œæ¨¡å¼,ä½†æ˜¯å¦‚æœæŠ½è±¡ä¸ºæ•°æ®å±‚,é‚£ä¹ˆè¿˜æœ‰ä»€ä¹ˆé—®é¢˜è§£å†³ä¸äº†çš„å—ï¼Ÿ å¦‚æœæ¥è§¦è¿‡ä»»ä½•ä¸€ç§webæ¡†æ¶è¯­è¨€,ä¾‹å¦‚php/mysql,node/mongodb.æ¯ç§éƒ½æ˜¯è§£è€¦å’Œ,æ¯ç§éƒ½æ˜¯ä¸­ä»‹è€…æ¨¡å¼.æ‰€ä»¥åœ¨ç†è§£è¿™äº›æ¦‚å¿µçš„æ—¶å€™æœ€åŸºç¡€çš„å†…å®¹å¯èƒ½æ˜¯æœ€è§£å†³é—®é¢˜çš„æ¡ä»¶.ä½ å¯ä»¥æ¢³ç†ä¸€ä¸‹è¿™äº›æ¡†æ¶ä¸­ä¸æ•°æ®åº“æ“ä½œéƒ½æœ‰å“ªäº›? è¿æ¥æ•°æ®åº“,æ•°æ®åº“æ“ä½œè¯­å¥,æ•°æ®åº“æ–‡ä»¶,è¿”å›å€¼ç­‰ç­‰.è¿™äº›ä¸œè¥¿åœ¨react/reduxä¸­éƒ½èƒ½æ‰¾åˆ°ä¸€æ‘¸ä¸€æ ·çš„å†…å®¹.webæ¡†æ¶é‡Œçš„æ•°æ®åº“æ“ä½œå’Œreduxçš„æ“ä½œæ˜¯å®Œå…¨ä¸€æ ·çš„,æœ‰ä»€ä¹ˆå¥‡æ€ªçš„å—ï¼Ÿéƒ½æ˜¯æ•°æ®åº“.</p>
<p>Reduxçš„æ–‡æ¡£ä¸­æœ‰ä¸ªredo,undoçš„ä¾‹å­,æˆ‘æœ€è¿‘åˆé‡æ–°çœ‹reduxæ–‡æ¡£çš„æ—¶å€™ï¼Œæ„Ÿè§‰è¿™ä¸€éƒ¨åˆ†è®²çš„çœŸæ˜¯å¥½,ä»¥å‰æ€ä¹ˆæ²¡æœ‰ç†è§£å‘¢ï¼Ÿ  æœ‰ä¸‰ä¸ªç¼ºé™·ä¸€ä¸ªæ˜¯å¯¹äºstateçš„æ•°æ®ç»“æ„çš„ç†è§£,ä¸€ä¸ªæ˜¯å †æ ˆæ–¹æ³•ä½¿ç”¨ç†è§£,å¦ä¸€ä¸ªå°±æ˜¯jsçš„æµ…æ‹·è´çš„é—®é¢˜ã€‚å‰é¢çœ‹é‚£æœ¬æ•°æ®ç»“æ„çš„ä¹¦,ä¹Ÿä¸å¾—æ³•,ä½†æ˜¯ç¡¬ç€å¤´çš®æŠŠå‡ ç§æ•°æ®ç»“æ„æ‹¿ä¸‹ä»¥å,çªç„¶è§‰å¾—å¥½å¤šé—®é¢˜éƒ½æ‰¾åˆ°äº†è§£å†³åŠæ³•,è®¡ç®—æœºä¸­å¯¹äºæ•°æ®ç»“æ„å’Œç®—æ³•çš„é‡è§†ä¸æ˜¯ç™½æ¥çš„.stateå¦‚æœä½œä¸ºä¸€ä¸ªç®€å•æ•°æ®åº“,ä»–é‡Œé¢å°±æ˜¯ä¸€äº›<code>é”®å€¼å¯¹</code>. ç”±äºjsä¸­å¯¹è±¡å¯ä»¥ä¼ å¼•ç”¨,æ‰€ä»¥å¯ä»¥å¾ˆå®¹æ˜“çš„å»ºç«‹ä¸€ä¸ªç±»æ•°æ®åº“çš„ç»“æ„.å…¶ä»–è¯­è¨€å¯ä»¥å—ï¼Ÿ</p>
<p>#####ä¸‹é¢æˆ‘ä»¬å°±è´¯å½»ä»¥ä¸Šçš„ç†å¿µ,æ¥ç ”ç©¶ä¸€äº›åŸºç¡€çš„å†…å®¹ã€‚<br>ç¬¬ä¸€ä¸ªå°±æ˜¯Reducerå‡½æ•°,å‚è€ƒ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">MDN</a> æ–‡æ¡£</p>
<p>ç›´æ¥çœ‹ä»£ç ä¾‹å­</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//accumulatoræ˜¯ç´¯åŠ å€¼,currentValueæ˜¯å½“å‰éå†çš„å€¼</span></div><div class="line">[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce( (accumulator, currentValue, currentIndex, array) =&gt; &#123;</div><div class="line">  return accumulator + currentValue;</div><div class="line">&#125;, <span class="number">10</span>);</div></pre></td></tr></table></figure>
<hr>
<table>
<thead>
<tr>
<th style="text-align:left">callback</th>
<th style="text-align:left">accumulate</th>
<th style="text-align:left">currentValue</th>
<th style="text-align:left">currentIndex</th>
<th style="text-align:left">array</th>
<th style="text-align:left">return</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ç¬¬ä¸€æ¬¡è°ƒç”¨</td>
<td style="text-align:left">10</td>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
<td style="text-align:left">[0,1,2,3,4]</td>
<td style="text-align:left">10</td>
</tr>
<tr>
<td style="text-align:left">ç¬¬äºŒæ¬¡è°ƒç”¨</td>
<td style="text-align:left">10</td>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
<td style="text-align:left">[0,1,2,3,4]</td>
<td style="text-align:left">11</td>
</tr>
<tr>
<td style="text-align:left">ç¬¬ä¸‰æ¬¡è°ƒç”¨</td>
<td style="text-align:left">11</td>
<td style="text-align:left">2</td>
<td style="text-align:left">2</td>
<td style="text-align:left">[0,1,2,3,4]</td>
<td style="text-align:left">13</td>
</tr>
<tr>
<td style="text-align:left">ç¬¬å››æ¬¡è°ƒç”¨</td>
<td style="text-align:left">13</td>
<td style="text-align:left">3</td>
<td style="text-align:left">3</td>
<td style="text-align:left">[0,1,2,3,4]</td>
<td style="text-align:left">16</td>
</tr>
<tr>
<td style="text-align:left">ç¬¬äº”æ¬¡è°ƒç”¨</td>
<td style="text-align:left">16</td>
<td style="text-align:left">4</td>
<td style="text-align:left">4</td>
<td style="text-align:left">[0,1,2,3,4]</td>
<td style="text-align:left">20</td>
</tr>
</tbody>
</table>
<p>ç¬¬ä¸€ä¸ªéå†ï¼Œaccumulateç­‰äº10.éå†çš„æ•°ç»„å…ƒç´ æ˜¯0ï¼Œindexæ˜¯0.è¿™æ˜¯å·§åˆã€‚æ•°ç»„è¿˜æ˜¯[0,1,2,3,4]ã€‚è¿”å›çš„å€¼æ˜¯åˆå§‹å€¼åŠ å½“å‰çš„æ•°ç»„å…ƒç´ å€¼ï¼Œä¹Ÿå°±æ˜¯è¿”å›accumulate+array[currentIndex]ã€‚returnçš„å°±æ˜¯ 10+array[0]=10.</p>
<p>ç¬¬äºŒä¸ªéå†ï¼Œaccumulateå°±æ˜¯10ï¼Œéå†çš„æ•°ç»„å…ƒç´ æ˜¯1ï¼Œindexæ˜¯1.è¿™ä¹Ÿæ˜¯å·§åˆã€‚æ•°ç»„è¿˜æ˜¯[0,1,2,3,4]ã€‚è¿”å›çš„å€¼æ˜¯accumulateåŠ å½“å‰çš„æ•°ç»„å€¼ï¼Œaccumulate+array[currentIndex]ã€‚<br>ä¹Ÿå°±æ˜¯è¿”å› 10+array[1]=11.</p>
<p>ç¬¬äºŒä¸ªéå†å’Œç¬¬ä¸€ä¸ªéå†çš„åŒºåˆ«å°±æ˜¯åˆå§‹å€¼æ¥æºä¸åŒã€‚ç¬¬ä¸€ä¸ªéå†çš„æ˜¯reduceå¸¦è¿›æ¥çš„æ•°æ®ã€‚ç¬¬äºŒä¸ªéå†ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ä¸ªéå†è¿”å›çš„å€¼ã€‚<br>åé¢çš„å‡ ä¸ªéå†å°±å’Œç¬¬äºŒä¸ªéå†ä¸€æ ·äº†ã€‚</p>
<p><em>æ•°ç»„æ‰å¹³åŒ–</em><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var flattened = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(function(a, b) &#123;</div><div class="line">    return a.concat(b); <span class="comment">//è¦äº†è§£concatçš„ä½¿ç”¨,è¿”å›çš„æ˜¯</span></div><div class="line">    <span class="comment">//æ•°ç»„åˆå¹¶çš„è¿”å›å¯¹è±¡</span></div><div class="line">&#125;, []); <span class="comment">//èµ·å§‹æ˜¯ç©ºæ•°ç»„</span></div><div class="line"><span class="comment">// flattened is [0, 1, 2, 3, 4, 5]</span></div></pre></td></tr></table></figure></p>
<hr>
<p>å°±è¿™ä¹ˆç®€å•,ä½†æ˜¯çµæ´»å˜åŠ¨èµ·æ¥ä¹Ÿä¸æ˜¯å¤ªå¥½ç†è§£å•Š<br>çœ‹è¿™ä¸ªè®¡ç®—å™¨çš„React-Nativeçš„ä»£ç ,åœ¨UIç»„ä»¶ä¸­æ¸²æŸ“å‡ºè®¡ç®—å™¨çš„å‡ ä¸ªæŒ‰é”®çš„æ–¹æ³•</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> Types = &#123; <span class="comment">//ç±»å‹</span></div><div class="line">  NUMBER: <span class="string">'NUMBER'</span>,</div><div class="line">  DECIMAL: <span class="string">'DECIMAL'</span>,</div><div class="line">  SIGN: <span class="string">'SIGN'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> inputs = [</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">1</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">2</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">3</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">4</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">5</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">6</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">7</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">8</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">9</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'+/-'</span>, type: Types.SIGN&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">0</span>, type: Types.NUMBER&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'.'</span>, type: Types.DECIMAL&#125;,</div><div class="line">];</div><div class="line"><span class="comment">//æ“ä½œç¬¦çš„é…ç½®</span></div><div class="line"><span class="keyword">var</span> operations = [</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'/'</span>, color: <span class="string">'#c77ccc'</span>, altColor: <span class="string">'#b16eb7'</span>, operation: OPERATION_DIVIDE&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'-'</span>, color: <span class="string">'#f8b055'</span>, altColor: <span class="string">'#dc9c4c'</span>, operation: OPERATION_SUBTRACT&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'+'</span>, color: <span class="string">'#f796d2'</span>, altColor: <span class="string">'#e088be'</span>, operation: OPERATION_ADD&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'x'</span>, color: <span class="string">'#6fcdf4'</span>, altColor: <span class="string">'#65badd'</span>, operation: OPERATION_MULTIPLY&#125;</div><div class="line">];</div><div class="line"></div><div class="line">renderInputRows() &#123;</div><div class="line">    <span class="keyword">var</span> &#123;inputNumber, inputSigned, inputDecimal&#125; = <span class="keyword">this</span>.props;<span class="comment">//æ³¨æ„åœ¨reduxä¸­é‚£ä¸ªåœ°æ–¹è¿”å›äº†è¿™ä¸‰ä¸ªå‡½æ•°çš„åå­—</span></div><div class="line">    <span class="keyword">return</span> inputs.reduce((collection, input) =&gt; &#123;<span class="comment">//è¿™é‡Œçš„reduceæ˜¯æ€ä¹ˆç”¨çš„å‘¢ï¼Ÿ</span></div><div class="line">      <span class="keyword">if</span> (collection[collection.length - <span class="number">1</span>].length === <span class="number">3</span>) &#123;<span class="comment">//ä¸ºä»€ä¹ˆç­‰äº3</span></div><div class="line">        collection.push([]);</div><div class="line">      &#125;</div><div class="line">      collection[collection.length<span class="number">-1</span>].push(input);</div><div class="line">      <span class="keyword">return</span> collection;</div><div class="line">    &#125;, [[]]).map((<span class="keyword">group</span>, rowIndex) =&gt; &#123;</div><div class="line">      <span class="keyword">var</span> columns = <span class="keyword">group</span>.map((item, columnIndex) =&gt; &#123;<span class="comment">//çœ‹çœ‹mapçš„æ–¹æ³•</span></div><div class="line">        <span class="keyword">return</span> (</div><div class="line">          &lt;TouchableHighlight</div><div class="line">            key=&#123;<span class="string">'inputRow_'</span> + rowIndex + <span class="string">'_inputCol_'</span> + columnIndex&#125;</div><div class="line">            underlayColor=<span class="string">"#ededed"</span></div><div class="line">            style=&#123;styles.input&#125;</div><div class="line">            onPress=&#123;() =&gt; &#123; <span class="comment">//dispatchæ–¹æ³•</span></div><div class="line">              <span class="keyword">if</span> (item.type === Types.NUMBER) &#123;</div><div class="line">                inputNumber(item.<span class="keyword">value</span>);</div><div class="line">              &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">item.type === Types.DECIMAL</span>) </span>&#123;</div><div class="line">                inputDecimal();</div><div class="line">              &#125; <span class="function"><span class="keyword">else</span> <span class="title">if</span> (<span class="params">item.type === Types.SIGN</span>) </span>&#123;</div><div class="line">                inputSigned();</div><div class="line">              &#125;</div><div class="line">            &#125;&#125;&gt;</div><div class="line">            &lt;Text style=&#123;styles.inputText&#125;&gt;&#123;item.<span class="keyword">value</span>&#125;&lt;/Text&gt;</div><div class="line">          &lt;/TouchableHighlight&gt;</div><div class="line">        );</div><div class="line">      &#125;);</div></pre></td></tr></table></figure>
<p>çœ‹çœ‹è¿™ä¸ªæ•°ç»„çš„reduceræ–¹æ³•çš„ä½¿ç”¨.<a href="https://github.com/benoitvallon/react-native-nw-react-calculator" target="_blank" rel="external">æºä»£ç åœ¨è¿™é‡Œ</a></p>
<p>è¿™ä¸ªæˆ‘ç¨åå†è¡¥å……,ä¼šè¡¥å……å¤§ç¥ç»™æˆ‘çš„è§£ç­”.</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"> var Types = &#123;</div><div class="line">  <span class="keyword">NUMBER</span>: <span class="string">'NUMBER'</span>,</div><div class="line">  <span class="keyword">DECIMAL</span>: <span class="string">'DECIMAL'</span>,</div><div class="line">  <span class="built_in">SIGN</span>: <span class="string">'SIGN'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">var inputs = [</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">1</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">2</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">3</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">4</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">5</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">6</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">7</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">8</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">9</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'+/-'</span>, <span class="keyword">type</span>: Types.<span class="built_in">SIGN</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="number">0</span>, <span class="keyword">type</span>: Types.<span class="keyword">NUMBER</span>&#125;,</div><div class="line">  &#123;<span class="keyword">value</span>: <span class="string">'.'</span>, <span class="keyword">type</span>: Types.<span class="keyword">DECIMAL</span>&#125;,</div><div class="line">];</div><div class="line">//è¿™é‡Œå…¶å®æ˜¯æœ‰ä¸€ç»´æ•°ç»„è½¬ä¸ºäºŒç»´æ•°ç»„ï¼Œæ‰“å°ç»“æ„å¯ä»¥çœ‹åˆ°.</div><div class="line">//æ³¨æ„reduceçš„èµ·å§‹å€¼å°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„.</div><div class="line">var result = inputs.reduce((collection, input) =&gt; &#123;</div><div class="line">      <span class="keyword">if</span> (collection[collection.length - <span class="number">1</span>].length === <span class="number">3</span>) &#123;</div><div class="line">        collection.push([]);</div><div class="line">      &#125;</div><div class="line">      collection[collection.length-<span class="number">1</span>].push(input);</div><div class="line">      <span class="keyword">return</span> collection;</div><div class="line">    &#125;, [[]])</div><div class="line"></div><div class="line">console.<span class="built_in">log</span>(result)</div><div class="line">console.table(result)</div></pre></td></tr></table></figure>
<p>å†çœ‹çœ‹ä¸‹é¢è¿™é‡Œä¸¤æ®µä»£ç <br><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let str = `name,  age,  hair\nMerble,  <span class="number">35</span>,  red\nBob,  <span class="number">64</span>,  blonde`;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">lameCSV</span><span class="params">(str)</span></span> &#123;</div><div class="line">  <span class="keyword">return</span> str.split(<span class="string">'\n'</span>).reduce(<span class="function"><span class="keyword">function</span><span class="params">(table, row)</span></span>&#123;</div><div class="line">    <span class="built_in">table</span>.push(row.split(<span class="string">','</span>).map(<span class="function"><span class="keyword">function</span><span class="params">(c)</span></span> &#123;<span class="keyword">return</span> c.trim();&#125;));</div><div class="line">    <span class="keyword">return</span> <span class="built_in">table</span></div><div class="line">  &#125;, <span class="string">[[]]</span>);</div><div class="line">&#125;;</div><div class="line">lameCSV(str);</div></pre></td></tr></table></figure></p>
<hr>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var arr=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</div><div class="line"> var result = arr.reduce((collection, input) =&gt; &#123;</div><div class="line">      if (collection[collection.length - <span class="number">1</span>].length === <span class="number">3</span>) &#123;</div><div class="line">        collection.push([]);</div><div class="line">      &#125;</div><div class="line">      collection[collection.length<span class="number">-1</span>].push(input);</div><div class="line">      console.log(collection);</div><div class="line">      return collection;</div><div class="line">    &#125;, [[]]);</div></pre></td></tr></table></figure>
<hr>
<p><a href="https://github.com/zaxlct/baike_spider/issues/1" target="_blank" rel="external">æ„Ÿè°¢å¤§ç¥çš„å¸®åŠ©,å¤§ç¥çš„github</a><br>reduceè¿™ä¸ªæ–¹æ³•è¿˜èƒ½æ¼”å˜å‡ºä»€ä¹ˆèŠ±æ ·æ¥å‘¢ï¼Ÿæ•°ç»„çš„æ“ä½œçœŸçš„æ˜¯ä¸€ä¸ªéœ€è¦å¥½å¥½å­¦ä¹ çš„å†…å®¹.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æµ‹è¯•æ–‡ä»¶]]></title>
      <url>http://yoursite.com/2017/03/23/new-article-2/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-å¦‚ä½•ä½¿ç”¨React,Reduxå’ŒImmutable-jsæ„å»ºTodo-App]]></title>
      <url>http://yoursite.com/2017/03/23/%E7%BF%BB%E8%AF%91-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8React,Redux%E5%92%8CImmutable-js%E6%9E%84%E5%BB%BATodo-App/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡æ˜¯ç¿»è¯‘ç‰ˆæœ¬,<a href="https://www.sitepoint.com/how-to-build-a-todo-app-using-react-redux-and-immutable-js/" target="_blank" rel="external">åŸæ–‡è¯·è§</a><br><em>By Dan Prince  May 03, 2016</em></p>
</blockquote>
<p>Reactä½¿ç”¨ç»„ä»¶å’Œå•å‘æ•°æ®æµæ–¹å¼æè¿°ç”¨æˆ·ç•Œé¢,ä½†æ˜¯Reactå¯¹stateçš„å¤„ç†éå¸¸çš„ç®€å•.è¿™ä¸€ç‚¹è®©æˆ‘ä»¬çŸ¥é“,Reactä»…ä»…åªå½“äºä¼ ç»Ÿçš„<code>Model-View-Controller</code>æ„æ¶çš„<code>View</code>å±‚.</p>
<p>ä»…ä»…ä½¿ç”¨Reactä¹Ÿå¯ä»¥æ„å»ºå¤§å‹çš„app,ä½†æ˜¯å¾ˆå¿«æˆ‘ä»¬ä¼šå‘ç°,è¦ä¿æŒä»£ç çš„ç®€æ´,æˆ‘ä»¬éœ€è¦åœ¨å…¶ä»–åœ°æ–¹ç®¡ç†state(æŠŠstateçš„ç®¡ç†ç‹¬ç«‹å‡ºæ¥).</p>
<p>æ²¡æœ‰å®˜æ–¹ç®¡ç†åº”ç”¨stateçš„å·¥å…·,ä½†æ˜¯æœ‰å‡ ä¸ªåº“å·¥ä½œçš„çš„ä¸é”™.ä»Šå¤©æˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªåº“å’ŒReactä¸€èµ·æ¥æ„å»ºä¸€ä¸ªç®€å•çš„app.</p>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p>Reduxæ˜¯ä¸€ä¸ªå°å‹çš„jsåº“,ä½œä¸ºappçš„stateå®¹å™¨.ç³…åˆäº†Flucå’ŒElmçš„æ¦‚å¿µ.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Reduxç®¡ç†ä»»ä½•appçš„state,åªè¦æˆ‘ä»¬ç´§æ‰£ä¸‹é¢çš„æŒ‡å¯¼ï¼š</p>
<ol>
<li>æˆ‘ä»¬çš„stateä¿æŒåœ¨ä¸€ä¸ªå•ä¸€çš„storeä¸­</li>
<li>stateçš„æ”¹å˜åªä¼šæ¥è‡ªäºactions</li>
</ol>
<p>Reduxçš„æ ¸å¿ƒ storeæ˜¯ä¸€ä¸ªå‡½æ•°,å®ƒæ¥æ”¶å½“å‰çš„applicationçš„stateå’Œä¸€ä¸ªaction,åˆå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„application state,è¿™ä¸ªå‡½æ•°å«åšReducer.</p>
<p>æˆ‘ä»¬çš„Reactç»„ä»¶è´Ÿè´£å‘é€actionsåˆ°æˆ‘ä»¬çš„store,åè¿‡æ¥,å¦‚æœç»„ä»¶éœ€è¦æ¸²æŸ“çš„æ—¶å€™,storeä¼šé€šçŸ¥ä»–.</p>
<h2 id="ImmutableJS"><a href="#ImmutableJS" class="headerlink" title="ImmutableJS"></a>ImmutableJS</h2><p>å› ä¸ºReduxä¸å…è®¸æˆ‘ä»¬mutateç¨‹åºçš„state,å¦‚æœå€ŸåŠ©immutableæ•°æ®ç»“æ„æ¨¡å‹åŒ–åº”ç”¨ç¨‹åºçš„stateå°†ä¼šéå¸¸çš„æœ‰ç”¨.<br><code>Immutable.js</code>ä½¿ç”¨çªå˜ç•Œé¢(mutative interfaces)æä¾›ä¸€äº›immutableæ•°æ®ç»“æ„,è¿™äº›ç•Œé¢å®æ–½æ—¶éå¸¸çš„é«˜æ•ˆ,çµæ„Ÿæ¥è‡ªäºClojureå’ŒScala.</p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>æˆ‘ä»¬å°†ä¼šä½¿ç”¨React,Reduxå’ŒImmutableJSå»æ„å»ºä¸€ä¸ªç®€å•çš„todo list,å…è®¸æˆ‘ä»¬æ·»åŠ todos,åœ¨å®Œæˆå’Œæœªå®Œæˆä¹‹é—´åˆ‡æ¢.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<hr>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">//css</div><div class="line"> html, body, input, button &#123;</div><div class="line">  font-family: Sawasdee;</div><div class="line">  font-size: 20px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__list &#123;</div><div class="line">  margin: 0;</div><div class="line">  padding: 0;</div><div class="line">  list-style-type: none;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__item &#123;</div><div class="line">  padding: .5em .25em;</div><div class="line">  border-bottom: solid 1px #eee;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__item:hover &#123;</div><div class="line">  background: #f7f7f7;</div><div class="line">  cursor: pointer;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__entry &#123;</div><div class="line">  border: solid 1px #ccc;</div><div class="line">  padding: .25em .5em;</div><div class="line">  border-radius: .2em;</div><div class="line">  background: #f3f3f3;</div><div class="line">  width: 100%;</div><div class="line">  box-sizing: border-box;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__button &#123;</div><div class="line">  border: 0;</div><div class="line">  border-radius: .2em;</div><div class="line">  background: #71B7FF;  </div><div class="line">  color: #fff;</div><div class="line">  padding: .25em .5em;</div><div class="line">  margin: .5em 0;</div><div class="line">  margin-right: .25em;</div><div class="line">  cursor: pointer;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.todo__button:hover &#123;</div><div class="line">  background: #B2D8FF;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//js</span></div><div class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, List &#125; = Immutable;</div><div class="line"><span class="keyword">const</span> &#123; createStore &#125; = Redux;</div><div class="line"><span class="keyword">const</span> &#123; Provider, connect &#125; = reactRedux;</div><div class="line"></div><div class="line"><span class="keyword">const</span> components = &#123;</div><div class="line">  Todo(&#123; todo &#125;) &#123;</div><div class="line">    <span class="keyword">if</span>(todo.isDone) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">strike</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">strike</span>&gt;</span></span>;  </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  TodoList(&#123; todos, toggleTodo, addTodo &#125;) &#123;</div><div class="line">    <span class="keyword">const</span> onSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> text = e.target.value;</div><div class="line">      <span class="keyword">if</span>(e.which === <span class="number">13</span> &amp;&amp; text.length &gt; <span class="number">0</span>) &#123;</div><div class="line">        addTodo(text);</div><div class="line">        e.target.value = <span class="string">''</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> toggleClick = <span class="function">(<span class="params">id</span>) =&gt;</span> () =&gt; toggleTodo(id);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> &#123; Todo &#125; = components;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div className='todo'&gt;</div><div class="line">        &lt;input type='text'</div><div class="line">               className='todo__entry'</div><div class="line">               placeholder='Add todo'</div><div class="line">               onKeyDown=&#123;onSubmit&#125; /&gt;</div><div class="line">        &lt;ul className='todo__list'&gt;</div><div class="line">          &#123;todos.map(t =&gt; (</div><div class="line">            &lt;li</div><div class="line">              key=&#123;t.get('id')&#125;</div><div class="line">              className='todo__item'</div><div class="line">              onClick=&#123;toggleClick(t.get('id'))&#125;&gt;</div><div class="line">              &lt;Todo todo=&#123;t.toJS()&#125; /&gt;</div><div class="line">            &lt;/li&gt;</div><div class="line">          ))&#125; </div><div class="line">        &lt;/ul&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const actions = &#123;</div><div class="line">  addTodo(text) &#123;</div><div class="line">    return &#123;</div><div class="line">      type: 'ADD_TODO',</div><div class="line">      payload: &#123;</div><div class="line">        id: Math.random().toString(34).slice(2),</div><div class="line">        isDone: false,</div><div class="line">        text</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line">  toggleTodo(id) &#123;</div><div class="line">    return &#123;</div><div class="line">      type: 'TOGGLE_TODO',</div><div class="line">      payload: id</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const init = List();</div><div class="line"></div><div class="line">const reducer = function(state=init, action) &#123;</div><div class="line">  switch(action.type) &#123;</div><div class="line">    case 'ADD_TODO':</div><div class="line">      return state.push(</div><div class="line">        Map(action.payload)</div><div class="line">      );</div><div class="line">    case 'TOGGLE_TODO':</div><div class="line">      return state.map(t =&gt; &#123;</div><div class="line">        if(t.get('id') == action.payload) &#123;</div><div class="line">          return t.update('isDone', isDone =&gt; !isDone);</div><div class="line">        &#125; else &#123;</div><div class="line">          return t;</div><div class="line">        &#125;</div><div class="line">      &#125;);</div><div class="line">    default:</div><div class="line">      return state;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const containers = &#123;</div><div class="line">  TodoList: connect(</div><div class="line">    function mapStateToProps(state) &#123;</div><div class="line">      return &#123;</div><div class="line">        todos: state</div><div class="line">      &#125;;</div><div class="line">    &#125;,</div><div class="line">    function mapDispatchToProps(dispatch) &#123;</div><div class="line">      return &#123;</div><div class="line">        toggleTodo: (id) =&gt; dispatch(actions.toggleTodo(id)),</div><div class="line">        addTodo: (text) =&gt; dispatch(actions.addTodo(text))</div><div class="line">      &#125;;</div><div class="line">    &#125;</div><div class="line">  )(components.TodoList)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const &#123; TodoList &#125; = containers;</div><div class="line">const store = createStore(reducer);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">    &lt;TodoList /&gt;</div><div class="line">  &lt;/Provider&gt;,</div><div class="line">  document.getElementById('app')</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<p>ä»£ç åœ¨ <a href="https://github.com/sitepoint-editors/immutable-redux-todo" target="_blank" rel="external">Github</a></p>
<blockquote>
<p>å¯èƒ½æç¤ºbuildå¤±è´¥,<code>npm install babel-core</code>è¯•è¯•</p>
</blockquote>
<h2 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h2><p>ä»åˆ›å»ºé¡¹ç›®ğŸ“‚å¼€å§‹,å»ºç«‹ä¸€ä¸ªpackage.jsonæ–‡ä»¶.ç„¶åå®‰è£…éœ€è¦çš„ä¾èµ–åŒ….</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> npm install --save react react-dom redux react-redux immutable</div><div class="line">npm install --save-dev webpack babel-loader babel-preset-es2015 babel-preset-react</div></pre></td></tr></table></figure>
<hr>
<p>ä½¿ç”¨JSXå’ŒES2015,ç”¨Babelç¼–è¯‘ä»£ç ,ä½¿ç”¨Webpackæ¥å®Œæˆè¿™ä¸ªæ¨¡å—ç»‘å®šè¿‡ç¨‹.</p>
<p>åœ¨<code>webpack.config.js</code>æ–‡ä»¶ä¸­åˆ›å»ºWebpacké…ç½®æ–‡ä»¶.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./src/app.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: __dirname,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">        <span class="attr">query</span>: &#123; <span class="attr">presets</span>: [ <span class="string">'es2015'</span>, <span class="string">'react'</span> ] &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<hr>
<p>æœ€åæ‰©å±•ä¸€ä¸‹<code>package.json</code>,æ·»åŠ ä¸€ä¸ªnpm scriptä½¿ç”¨source mapsç¼–è¯‘æˆ‘ä»¬çš„ä»£ç .</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> "scripts": &#123;</div><div class="line">  "build": "webpack --debug"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ¯æ¬¡ç¼–è¯‘ä»£ç çš„æ—¶å€™,è¿è¡Œ<code>npm run build</code>.</p>
<h2 id="React-amp-Components"><a href="#React-amp-Components" class="headerlink" title="React&amp;Components"></a>React&amp;Components</h2><p>åœ¨å®æ–½é¡¹ç›®ä¹‹å‰,å…ˆåˆ›å»ºä¸€äº›å‚»ç“œæ•°æ®æœ‰å¾ˆå¤§çš„ç”¨å¤„,ä½†æˆ‘ä»¬æ„æ€éœ€è¦æ¸²æŸ“çš„ç»„ä»¶çš„æ—¶å€™,æœ‰ä¸€ç‚¹ç‚¹åˆæ­¥çš„æ„Ÿè§‰.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> dummyTodos = [</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">isDone</span>: <span class="literal">true</span>,  <span class="attr">text</span>: <span class="string">'make components'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'design actions'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'implement reducer'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'connect components'</span> &#125;</div><div class="line">];</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªReactç»„ä»¶<code>&lt;Todo/&gt;</code>å’Œ<code>&lt;TodoList&gt;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// src/components.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">Todo</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> &#123; todo &#125; = props;</div><div class="line">  <span class="keyword">if</span>(todo.isDone) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">strike</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">strike</span>&gt;</span></span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;todo.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoList</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> &#123; todos &#125; = props;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;div className='todo'&gt;</div><div class="line">      &lt;input type='text' placeholder='Add todo' /&gt;</div><div class="line">      &lt;ul className='todo__list'&gt;</div><div class="line">        &#123;todos.map(t =&gt; (</div><div class="line">          &lt;li key=&#123;t.id&#125; className='todo__item'&gt;</div><div class="line">            &lt;Todo todo=&#123;t&#125; /&gt;</div><div class="line">          &lt;/li&gt;</div><div class="line">        ))&#125;</div><div class="line">      &lt;/ul&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>åˆ°äº†è¿™ä¸€æ­¥,å¯ä»¥åˆ›å»º<code>index.html</code>æ–‡ä»¶æ¥æµ‹è¯•è¿™äº›ç»„ä»·,æ·»åŠ ä¸‹é¢çš„æ ‡è®°</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Immutable Todo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<hr>
<p>è¿˜æœ‰ä¸€ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶<code>src/app.js</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// src/app.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> &#123; TodoList &#125; <span class="keyword">from</span> <span class="string">'./components'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> dummyTodos = [</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">isDone</span>: <span class="literal">true</span>,  <span class="attr">text</span>: <span class="string">'make components'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'design actions'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'implement reducer'</span> &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'connect components'</span> &#125;</div><div class="line">];</div><div class="line"></div><div class="line">render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">TodoList</span> <span class="attr">todos</span>=<span class="string">&#123;dummyTodos&#125;</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('app')</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<p>ä½¿ç”¨<code>npm run build</code>ç¼–è¯‘æ–‡ä»¶,ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€index.htmlæ–‡ä»¶,ç¡®ä¿è¿è¡Œ.</p>
<h2 id="Redux-amp-ImmutableJS"><a href="#Redux-amp-ImmutableJS" class="headerlink" title="Redux&amp;ImmutableJS"></a>Redux&amp;ImmutableJS</h2><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†å¾ˆå¥½çš„UI,å¯ä»¥å¼€å§‹è€ƒè™‘ç»„ä»¶æœ€åçš„state.å¼€å§‹åˆ›å»ºçš„å‚»ç“œæ•°æ®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€ç«¯,æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è½¬åŒ–ä¸ºImmutableJSé›†åˆ.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123; List, <span class="built_in">Map</span> &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> dummyTodos = List([</div><div class="line">  <span class="built_in">Map</span>(&#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">isDone</span>: <span class="literal">true</span>,  <span class="attr">text</span>: <span class="string">'make components'</span> &#125;),</div><div class="line">  <span class="built_in">Map</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'design actions'</span> &#125;),</div><div class="line">  <span class="built_in">Map</span>(&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'implement reducer'</span> &#125;),</div><div class="line">  <span class="built_in">Map</span>(&#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">isDone</span>: <span class="literal">false</span>, <span class="attr">text</span>: <span class="string">'connect components'</span> &#125;)</div><div class="line">]);</div></pre></td></tr></table></figure>
<hr>
<p>ImmutableJS mapå’ŒJavascriptçš„å¯¹è±¡å·¥ä½œæ–¹å¼ä¸åŒ,æ‰€ä»¥æˆ‘ä»¬è¦å¯¹ç»„ä»¶åšä¸€ç‚¹è½»å¾®çš„æ”¹å˜.propertyæ¥å…¥çš„åœ°æ–¹(ä¾‹å¦‚ï¼štodo.id)éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•è°ƒç”¨æ¥ä»£æ›¿(ä¾‹å¦‚:<code>todo.get(â€˜idâ€™)</code>).</p>
<h2 id="è®¾è®¡Actions"><a href="#è®¾è®¡Actions" class="headerlink" title="è®¾è®¡Actions"></a>è®¾è®¡Actions</h2><p>ç°åœ¨æˆ‘ä»¬è·å¾—äº†æ•°æ®çš„ç‰¹å¾,å¯ä»¥è€ƒè™‘ä¸€ä¸‹actionsçš„æ›´æ–°.è¿™ä¸ªå®ä¾‹ä¸­,æˆ‘ä»¬ä»…ä»…éœ€è¦ä¸¤ä¸ªacions,ä¸€ä¸ªæ˜¯æ·»åŠ æ–°çš„todo,å¦ä¸€ä¸ªè½¬æ¢todoçš„çŠ¶æ€.</p>
<p>è®©æˆ‘ä»¬å®šä¹‰å‡ ä¸ªå‡½æ•°åˆ›å»ºè¿™äº›actions</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// src/actions.js</span></div><div class="line"></div><div class="line"><span class="comment">// succinct hack for generating passable unique ids</span></div><div class="line"><span class="keyword">const</span> uid = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random().toString(<span class="number">34</span>).slice(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD_TODO'</span>,</div><div class="line">    <span class="attr">payload</span>: &#123;</div><div class="line">      <span class="attr">id</span>: uid(),</div><div class="line">      <span class="attr">isDone</span>: <span class="literal">false</span>,</div><div class="line">      <span class="attr">text</span>: text</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">toggleTodo</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'TOGGLE_TODO'</span>,</div><div class="line">    <span class="attr">payload</span>: id</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ¯ä¸€ä¸ªactionä»…ä»…æ˜¯ä¸€ä¸ªæœ‰typeå’Œpayloadçš„å±æ€§å¯¹è±¡.åœ¨æˆ‘ä»¬è§¦å‘actionå,typeå±æ€§å¸®åŠ©æˆ‘ä»¬ç”¨payloadæ¥ä½œä»€ä¹ˆ.</p>
<h2 id="è®¾è®¡ä¸€ä¸ªReducer"><a href="#è®¾è®¡ä¸€ä¸ªReducer" class="headerlink" title="è®¾è®¡ä¸€ä¸ªReducer"></a>è®¾è®¡ä¸€ä¸ªReducer</h2><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†stateçš„ç‰¹æ€§å’Œæ›´æ–°stateçš„action,æˆ‘ä»¬å¯ä»¥åˆ›å»ºreduceräº†.ä»…ä»…æé†’ä¸€ä¸‹,reduceræ˜¯ä¸€ä¸ªæ¥æ”¶stateå’Œactionçš„å‡½æ•°,ç„¶åç”¨æ¥è®¡ç®—æ›´æ–°state.</p>
<p>è¿™é‡Œæ˜¯æˆ‘ä»¬reducerçš„åˆå§‹ç»“æ„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// src/reducer.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; List, <span class="built_in">Map</span> &#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> init = List([]);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">todos=init, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span>(action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> todos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ“ä½œ<code>ADD_TODO</code>actionéå¸¸ç®€å•,å¯æ˜¯ä½¿ç”¨<code>.push()</code>æ–¹æ³•,è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨,æ·»åŠ todoåˆ°æœ«å°¾.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> <span class="string">'ADD_TODO'</span>:</div><div class="line"> <span class="keyword">return</span> todos.push(<span class="built_in">Map</span>(action.payload));</div></pre></td></tr></table></figure>
<hr>
<p>è®°ä½è¦pushåˆ°åˆ—è¡¨ä¹‹å‰,è¦æŠŠtodoå¯¹è±¡è½¬å˜ä¸ºimmutable map.</p>
<p>æˆ‘ä»¬éœ€è¦å¤„ç†çš„ç¨å¾®å¤æ‚çš„actionæ˜¯<code>TOOGLE_TODO</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> <span class="string">'TOGGLE_TODO'</span>:</div><div class="line"> <span class="keyword">return</span> todos.map(<span class="function"><span class="params">t</span> =&gt;</span> &#123;</div><div class="line">   <span class="keyword">if</span>(t.get(<span class="string">'id'</span>) === action.payload) &#123;</div><div class="line">     <span class="keyword">return</span> t.update(<span class="string">'isDone'</span>, isDone =&gt; !isDone);</div><div class="line">   &#125; <span class="keyword">else</span> &#123;</div><div class="line">     <span class="keyword">return</span> t;</div><div class="line">   &#125;</div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬ä½¿ç”¨<code>.map()</code>éå†åˆ—è¡¨,æ‰¾åˆ°ä¸aciton<code>id</code>åŒ¹é…çš„todoé¡¹ç›®.ä¹‹åæˆ‘ä»¬è°ƒç”¨<code>.update()</code>æ–¹æ³•,æ¥æ”¶ä¸€ä¸ªé”®å’Œå‡½æ•°,ç„¶åè¿”å›ä¸€ä¸ªmapçš„æ–°æ‹·è´åˆ°updataå‡½æ•°,æ–°æ‹·è´ä¸­æ–°å€¼æ›¿æ¢äº†åˆå§‹å€¼.</p>
<p>å­—é¢é‡ç‰ˆæœ¬<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">const</span> todo = <span class="built_in">Map</span>(&#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">text</span>: <span class="string">'foo'</span>, <span class="attr">isDone</span>: <span class="literal">false</span> &#125;);</div><div class="line">todo.update(<span class="string">'isDone'</span>, isDone =&gt; !isDone);</div><div class="line"><span class="comment">// =&gt; &#123; id: 0, text: 'foo', isDone: true &#125;</span></div></pre></td></tr></table></figure></p>
<hr>
<h2 id="æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¿ç³»åˆ°ä¸€èµ·"><a href="#æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¿ç³»åˆ°ä¸€èµ·" class="headerlink" title="æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¿ç³»åˆ°ä¸€èµ·"></a>æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½è¿ç³»åˆ°ä¸€èµ·</h2><p>actionså’Œreducerå‡†å¤‡å¥½äº†,å¯ä»¥åˆ›å»ºä¸€ä¸ªstore,è¿æ¥åˆ°æˆ‘ä»¬çš„Reactç»„ä»¶ä¸­.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// src/app.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123; TodoList &#125; <span class="keyword">from</span> <span class="string">'./components'</span>;</div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(reducer);</div><div class="line"></div><div class="line">render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">TodoList</span> <span class="attr">todos</span>=<span class="string">&#123;store.getState()&#125;</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('app')</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<p>ä¸ºäº†ä¿æŒç»„ä»¶å’Œstoreçš„ç‹¬ç«‹,æˆ‘ä»¬ä½¿ç”¨<code>react-redux</code>å¸®åŠ©ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹.å®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºç‹¬ç«‹äºstoreçš„å®¹å™¨,åŒ…è£…æ‰€æœ‰çš„ç»„ä»¶,æˆ‘ä»¬ä¸éœ€è¦æ”¹å˜å…ˆå‰çš„è®¾è®¡.</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¹å™¨åŒ…è£…<code>&lt;TodoList/&gt;</code>ç»„ä»¶,çœ‹çœ‹ä¸‹é¢çš„å†…å®¹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// src/containers.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> components <span class="keyword">from</span> <span class="string">'./components'</span>;</div><div class="line"><span class="keyword">import</span> &#123; addTodo, toggleTodo &#125; <span class="keyword">from</span> <span class="string">'./actions'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> TodoList = connect(</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;,</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">mapDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">)(components.TodoList);</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬ä½¿ç”¨<code>connect</code>å‡½æ•°åˆ›å»ºå®¹å™¨.å½“æˆ‘ä»¬è°ƒç”¨<code>connect()</code>å‡½æ•°,ä¼ é€’ä¸¤ä¸ªå‡½æ•°,<code>mapStateToProps()</code>å’Œ<code>mapDispatchToProps()</code>.</p>
<p><code>mapStateToProps()</code>å‡½æ•°æ¥æ”¶å½“å‰storeçš„stateä½œä¸ºå‚æ•°,æœŸå¾…è¿”å›ä¸€ä¸ªæˆ‘ä»¬åŒ…è£…ç»„ä»¶éœ€è¦çš„å¯¹è±¡æ˜ å°„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123; <span class="attr">todos</span>: state &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢ä»£ç æ˜¯ä¸€ä¸ªåŒ…è£…ç»„ä»¶æ ¹æ®æ˜ å°„mapå¯è§†åŒ–çš„ç»“æœ.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;TodoList todos=&#123;state&#125; /&gt;</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬ä¹Ÿéœ€è¦æä¾›<code>mapDispatchProps</code>å‡½æ•°,ä¼ é€’storeçš„<code>dispatch</code>æ–¹æ³•,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨action creatrosæ¥dispatch actions.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">mapDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">addTodo</span>: <span class="function"><span class="params">text</span> =&gt;</span> dispatch(addTodo(text)),</div><div class="line">    <span class="attr">toggleTodo</span>: <span class="function"><span class="params">id</span> =&gt;</span> dispatch(toggleTodo(id))</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>å†ä¸€æ¬¡å®ä¾‹åŒ–ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;TodoList todos=&#123;state&#125;</div><div class="line">         addTodo=&#123;text =&gt; dispatch(addTodo(text))&#125;</div><div class="line">         toggleTodo=&#123;id =&gt; dispatch(toggleTodo(id))&#125; /&gt;</div></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠaction creatorsæ˜ å°„åˆ°ç»„ä»¶,å¯ä»¥ä»äº‹ä»¶ç›‘å¬ä¸­è°ƒç”¨.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoList</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> &#123; todos, toggleTodo, addTodo &#125; = props;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> onSubmit = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> input = event.target;</div><div class="line">    <span class="keyword">const</span> text = input.value;</div><div class="line">    <span class="keyword">const</span> isEnterKey = (event.which == <span class="number">13</span>);</div><div class="line">    <span class="keyword">const</span> isLongEnough = text.length &gt; <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(isEnterKey &amp;&amp; isLongEnough) &#123;</div><div class="line">      input.value = <span class="string">''</span>;</div><div class="line">      addTodo(text);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> toggleClick = <span class="function"><span class="params">id</span> =&gt;</span> event =&gt; toggleTodo(id);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;div className='todo'&gt;</div><div class="line">      &lt;input type='text'</div><div class="line">             className='todo__entry'</div><div class="line">             placeholder='Add todo'</div><div class="line">             onKeyDown=&#123;onSubmit&#125; /&gt;</div><div class="line">      &lt;ul className='todo__list'&gt;</div><div class="line">        &#123;todos.map(t =&gt; (</div><div class="line">          &lt;li key=&#123;t.get('id')&#125;</div><div class="line">              className='todo__item'</div><div class="line">              onClick=&#123;toggleClick(t.get('id'))&#125;&gt;</div><div class="line">            &lt;Todo todo=&#123;t.toJS()&#125; /&gt;</div><div class="line">          &lt;/li&gt;</div><div class="line">        ))&#125;</div><div class="line">      &lt;/ul&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>containerå®¹å™¨è‡ªåŠ¨è®¢é˜…storeçš„å˜åŒ–,åªè¦çš„æ˜ å°„çš„propså˜åŒ–çš„æ—¶å€™,å®¹å™¨åŒ…è£…çš„ç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“.</p>
<p>æœ€å,éœ€è¦ä½¿å®¹å™¨ç»„ä»¶ç‹¬ç«‹äºstore,ä½¿ç”¨<code>&lt;Provider/&gt;</code>ç»„ä»¶.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// src/app.js</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;</div><div class="line"><span class="keyword">import</span> &#123; TodoList &#125; <span class="keyword">from</span> <span class="string">'./containers'</span>;</div><div class="line"><span class="comment">//                          ^^^^^^^^^^</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(reducer);</div><div class="line"></div><div class="line">render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">TodoList</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>ä¸å¯å¦è®¤,å¯¹äºåˆå­¦è€…æ¥è¯´,Reactå’ŒReduxçš„ç”Ÿæ€ç³»ç»Ÿæ˜¯ç›¸å½“å¤æ‚å’Œä»¤äººè¿·æƒ‘çš„.<br>ä½†æ˜¯å¥½æ¶ˆæ¯æ˜¯è¿™äº›æ¦‚å¿µæ˜¯å¯ä»¥å¯ä»¥è½¬ç§»çš„.æˆ‘ä»¬ä»…ä»…ç²—ç•¥çš„æ¥è§¦äº†Reduxçš„åŸºç¡€æ„æ¶,ä½†æ˜¯å·²ç»è¶³å¤Ÿæˆ‘ä»¬å­¦ä¹ <code>Elm æ„æ¶</code>,æˆ–è€…é€‰å–ClojureScriptåº“ä¾‹å¦‚ï¼š<code>Om</code>,<code>Re-frame</code>.ç±»ä¼¼çš„,æˆ‘ä»¬ä»…ä»…çœ‹åˆ°immutableæ•°æ®ç»“æ„çš„åªè¨€ç‰‡è¯­,ä½†æ˜¯å·²ç»è¶³å¤Ÿæˆ‘ä»¬å­¦ä¹ <code>Clojure</code>æˆ–è€…<code>Haskell</code>.</p>
<p>ä¸ç®¡ä½ æ˜¯åˆšå¼€å§‹æ¢ç´¢æœ‰å…³stateçš„webç¼–ç¨‹å¼€å‘è€…,è¿˜æ˜¯ä½¿ç”¨javascriptå¾ˆé•¿æ—¶é—´çš„å¼€å‘è€…,åŸºäºactionæ„æ¶çš„åŠæˆå’Œimmutableæ•°æ®ç»“æ„å˜å¾—è‡³è§‚é‡è¦çš„æŠ€èƒ½.æ‰€ä»¥ç°åœ¨æ˜¯å­¦ä¹ è¿™äº›å†…å®¹çš„æ—¶é—´äº†.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Immutable-collections]]></title>
      <url>http://yoursite.com/2017/03/22/Immutable%20collections%20for%20JavaScript/</url>
      <content type="html"><![CDATA[<h1 id="Immutable-collections-for-JavaScript"><a href="#Immutable-collections-for-JavaScript" class="headerlink" title="Immutable collections for JavaScript"></a>Immutable collections for JavaScript</h1><p><a href="https://travis-ci.org/facebook/immutable-js" target="_blank" rel="external"><img src="https://travis-ci.org/facebook/immutable-js.svg?branch=master" alt="Build Status"></a></p>
<p><a href="http://en.wikipedia.org/wiki/Immutable_object" target="_blank" rel="external">Immutable</a> data cannot be changed once created, leading to much simpler<br>application development, no defensive copying, and enabling advanced memoization<br>and change detection techniques with simple logic. <a href="http://en.wikipedia.org/wiki/Persistent_data_structure" target="_blank" rel="external">Persistent</a> data presents<br>a mutative API which does not update the data in-place, but instead always<br>yields new updated data.</p>
<p>Immutable.js provides many Persistent Immutable data structures including:<br><code>List</code>, <code>Stack</code>, <code>Map</code>, <code>OrderedMap</code>, <code>Set</code>, <code>OrderedSet</code> and <code>Record</code>.</p>
<p>These data structures are highly efficient on modern JavaScript VMs by using<br>structural sharing via <a href="http://en.wikipedia.org/wiki/Hash_array_mapped_trie" target="_blank" rel="external">hash maps tries</a> and <a href="http://hypirion.com/musings/understanding-persistent-vector-pt-1" target="_blank" rel="external">vector tries</a> as popularized<br>by Clojure and Scala, minimizing the need to copy or cache data.</p>
<p><code>Immutable</code> also provides a lazy <code>Seq</code>, allowing efficient<br>chaining of collection methods like <code>map</code> and <code>filter</code> without creating<br>intermediate representations. Create some <code>Seq</code> with <code>Range</code> and <code>Repeat</code>.</p>
<p>Want to hear more? Watch the presentation about Immutable.js:</p>
<p><a href="https://youtu.be/I7IdS-PbEgI" target="_blank" alt="Immutable Data and React"><img src="https://img.youtube.com/vi/I7IdS-PbEgI/0.jpg"></a></p>
<h2 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h2><p>Install <code>immutable</code> using npm.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install immutable</div></pre></td></tr></table></figure>
<p>Then require it into any module.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Immutable = <span class="built_in">require</span>(<span class="string">'immutable'</span>);</div><div class="line"><span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div></pre></td></tr></table></figure>
<h3 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h3><p>To use <code>immutable</code> from a browser, download <a href="https://github.com/facebook/immutable-js/blob/master/dist/immutable.min.js" target="_blank" rel="external">dist/immutable.min.js</a><br>or use a CDN such as <a href="https://cdnjs.com/libraries/immutable" target="_blank" rel="external">CDNJS</a><br>or <a href="http://www.jsdelivr.com/#!immutable.js" target="_blank" rel="external">jsDelivr</a>.</p>
<p>Then, add it as a script tag to your page:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"immutable.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line">    <span class="keyword">var</span> map1 = Immutable.Map(&#123;a:<span class="number">1</span>, b:<span class="number">2</span>, c:<span class="number">3</span>&#125;);</div><div class="line">    <span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">    map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">    map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Or use an AMD loader (such as <a href="http://requirejs.org/" target="_blank" rel="external">RequireJS</a>):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'./immutable.min.js'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">Immutable</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line">    <span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">    map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">    map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>If youâ€™re using <a href="http://browserify.org/" target="_blank" rel="external">browserify</a>, the <code>immutable</code> npm module<br>also works from the browser.</p>
<h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>Use these Immutable collections and sequences as you would use native<br>collections in your <a href="http://typescriptlang.org" target="_blank" rel="external">TypeScript</a> programs while still taking<br>advantage of type generics, error detection, and auto-complete in your IDE.</p>
<p>Just add a reference with a relative path to the type declarations at the top<br>of your file.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">///&lt;reference path='./node_modules/immutable/dist/immutable.d.ts'/&gt;</span></div><div class="line"><span class="keyword">import</span> Immutable = <span class="built_in">require</span>(<span class="string">'immutable'</span>);</div><div class="line"><span class="keyword">var</span> map1: Immutable.Map&lt;string, number&gt;;</div><div class="line">map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">map1.get(<span class="string">'b'</span>); <span class="comment">// 2</span></div><div class="line">map2.get(<span class="string">'b'</span>); <span class="comment">// 50</span></div></pre></td></tr></table></figure>
<h2 id="The-case-for-Immutability"><a href="#The-case-for-Immutability" class="headerlink" title="The case for Immutability"></a>The case for Immutability</h2><p>Much of what makes application development difficult is tracking mutation and<br>maintaining state. Developing with immutable data encourages you to think<br>differently about how data flows through your application.</p>
<p>Subscribing to data events throughout your application creates a huge overhead of<br>book-keeping which can hurt performance, sometimes dramatically, and creates<br>opportunities for areas of your application to get out of sync with each other<br>due to easy to make programmer error. Since immutable data never changes,<br>subscribing to changes throughout the model is a dead-end and new data can only<br>ever be passed from above.</p>
<p>This model of data flow aligns well with the architecture of <a href="http://facebook.github.io/react/" target="_blank" rel="external">React</a><br>and especially well with an application designed using the ideas of <a href="http://facebook.github.io/flux/docs/overview.html" target="_blank" rel="external">Flux</a>.</p>
<p>When data is passed from above rather than being subscribed to, and youâ€™re only<br>interested in doing work when something has changed, you can use equality.</p>
<p>Immutable collections should be treated as <em>values</em> rather than <em>objects</em>. While<br>objects represent some thing which could change over time, a value represents<br>the state of that thing at a particular instance of time. This principle is most<br>important to understanding the appropriate use of immutable data. In order to<br>treat Immutable.js collections as values, itâ€™s important to use the<br><code>Immutable.is()</code> function or <code>.equals()</code> method to determine value equality<br>instead of the <code>===</code> operator which determines object reference identity.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = map1.set(<span class="string">'b'</span>, <span class="number">2</span>);</div><div class="line">assert(map1.equals(map2) === <span class="literal">true</span>);</div><div class="line"><span class="keyword">var</span> map3 = map1.set(<span class="string">'b'</span>, <span class="number">50</span>);</div><div class="line">assert(map1.equals(map3) === <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>Note: As a performance optimization <code>Immutable</code> attempts to return the existing<br>collection when an operation would result in an identical collection, allowing<br>for using <code>===</code> reference equality to determine if something definitely has not<br>changed. This can be extremely useful when used within a memoization function<br>which would prefer to re-run the function if a deeper equality check could<br>potentially be more costly. The <code>===</code> equality check is also used internally by<br><code>Immutable.is</code> and <code>.equals()</code> as a performance optimization.</p>
<p>If an object is immutable, it can be â€œcopiedâ€ simply by making another reference<br>to it instead of copying the entire object. Because a reference is much smaller<br>than the object itself, this results in memory savings and a potential boost in<br>execution speed for programs which rely on copies (such as an undo-stack).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;);</div><div class="line"><span class="keyword">var</span> clone = map1;</div></pre></td></tr></table></figure>
<h2 id="JavaScript-first-API"><a href="#JavaScript-first-API" class="headerlink" title="JavaScript-first API"></a>JavaScript-first API</h2><p>While <code>immutable</code> is inspired by Clojure, Scala, Haskell and other functional<br>programming environments, itâ€™s designed to bring these powerful concepts to<br>JavaScript, and therefore has an Object-Oriented API that closely mirrors that<br>of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla" target="_blank" rel="external">ES6</a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a>.</p>
<p>The difference for the immutable collections is that methods which would mutate<br>the collection, like <code>push</code>, <code>set</code>, <code>unshift</code> or <code>splice</code> instead return a new<br>immutable collection. Methods which return new arrays like <code>slice</code> or <code>concat</code><br>instead return new immutable collections.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> list1 = Immutable.List.of(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line"><span class="keyword">var</span> list2 = list1.push(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">var</span> list3 = list2.unshift(<span class="number">0</span>);</div><div class="line"><span class="keyword">var</span> list4 = list1.concat(list2, list3);</div><div class="line">assert(list1.size === <span class="number">2</span>);</div><div class="line">assert(list2.size === <span class="number">5</span>);</div><div class="line">assert(list3.size === <span class="number">6</span>);</div><div class="line">assert(list4.size === <span class="number">13</span>);</div><div class="line">assert(list4.get(<span class="number">0</span>) === <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>Almost all of the methods on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a> will be found in similar form on<br><code>Immutable.List</code>, those of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a> found on <code>Immutable.Map</code>, and those of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a><br>found on <code>Immutable.Set</code>, including collection operations like <code>forEach()</code><br>and <code>map()</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> alpha = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>, <span class="attr">d</span>:<span class="number">4</span>&#125;);</div><div class="line">alpha.map(<span class="function">(<span class="params">v, k</span>) =&gt;</span> k.toUpperCase()).join();</div><div class="line"><span class="comment">// 'A,B,C,D'</span></div></pre></td></tr></table></figure>
<h3 id="Accepts-raw-JavaScript-objects"><a href="#Accepts-raw-JavaScript-objects" class="headerlink" title="Accepts raw JavaScript objects."></a>Accepts raw JavaScript objects.</h3><p>Designed to inter-operate with your existing JavaScript, <code>immutable</code><br>accepts plain JavaScript Arrays and Objects anywhere a method expects an<br><code>Iterable</code> with no performance penalty.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>, <span class="attr">d</span>:<span class="number">4</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = Immutable.Map(&#123;<span class="attr">c</span>:<span class="number">10</span>, <span class="attr">a</span>:<span class="number">20</span>, <span class="attr">t</span>:<span class="number">30</span>&#125;);</div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">d</span>:<span class="number">100</span>, <span class="attr">o</span>:<span class="number">200</span>, <span class="attr">g</span>:<span class="number">300</span>&#125;;</div><div class="line"><span class="keyword">var</span> map3 = map1.merge(map2, obj);</div><div class="line"><span class="comment">// Map &#123; a: 20, b: 2, c: 10, d: 100, t: 30, o: 200, g: 300 &#125;</span></div></pre></td></tr></table></figure>
<p>This is possible because <code>immutable</code> can treat any JavaScript Array or Object<br>as an Iterable. You can take advantage of this in order to get sophisticated<br>collection methods on JavaScript Objects, which otherwise have a very sparse<br>native API. Because Seq evaluates lazily and does not cache intermediate<br>results, these operations can be extremely efficient.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myObject = &#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;;</div><div class="line">Immutable.Seq(myObject).map(<span class="function"><span class="params">x</span> =&gt;</span> x * x).toObject();</div><div class="line"><span class="comment">// &#123; a: 1, b: 4, c: 9 &#125;</span></div></pre></td></tr></table></figure>
<p>Keep in mind, when using JS objects to construct Immutable Maps, that<br>JavaScript Object properties are always strings, even if written in a quote-less<br>shorthand, while Immutable Maps accept keys of any type.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123; <span class="number">1</span>: <span class="string">"one"</span> &#125;;</div><div class="line"><span class="built_in">Object</span>.keys(obj); <span class="comment">// [ "1" ]</span></div><div class="line">obj[<span class="string">"1"</span>]; <span class="comment">// "one"</span></div><div class="line">obj[<span class="number">1</span>];   <span class="comment">// "one"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> map = Immutable.fromJS(obj);</div><div class="line">map.get(<span class="string">"1"</span>); <span class="comment">// "one"</span></div><div class="line">map.get(<span class="number">1</span>);   <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<p>Property access for JavaScript Objects first converts the key to a string, but<br>since Immutable Map keys can be of any type the argument to <code>get()</code> is<br>not altered.</p>
<h3 id="Converts-back-to-raw-JavaScript-objects"><a href="#Converts-back-to-raw-JavaScript-objects" class="headerlink" title="Converts back to raw JavaScript objects."></a>Converts back to raw JavaScript objects.</h3><p>All <code>immutable</code> Iterables can be converted to plain JavaScript Arrays and<br>Objects shallowly with <code>toArray()</code> and <code>toObject()</code> or deeply with <code>toJS()</code>.<br>All Immutable Iterables also implement <code>toJSON()</code> allowing them to be passed to<br><code>JSON.stringify</code> directly.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deep = Immutable.Map(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: Immutable.List.of(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) &#125;);</div><div class="line">deep.toObject() <span class="comment">// &#123; a: 1, b: 2, c: List [ 3, 4, 5 ] &#125;</span></div><div class="line">deep.toArray() <span class="comment">// [ 1, 2, List [ 3, 4, 5 ] ]</span></div><div class="line">deep.toJS() <span class="comment">// &#123; a: 1, b: 2, c: [ 3, 4, 5 ] &#125;</span></div><div class="line"><span class="built_in">JSON</span>.stringify(deep) <span class="comment">// '&#123;"a":1,"b":2,"c":[3,4,5]&#125;'</span></div></pre></td></tr></table></figure>
<h3 id="Embraces-ES6"><a href="#Embraces-ES6" class="headerlink" title="Embraces ES6"></a>Embraces ES6</h3><p><code>Immutable</code> takes advantage of features added to JavaScript in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla" target="_blank" rel="external">ES6</a>,<br>the latest standard version of ECMAScript (JavaScript), including <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol" target="_blank" rel="external">Iterators</a>,<br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="external">Arrow Functions</a>, <a href="http://wiki.ecmascript.org/doku.php?id=strawman:maximally_minimal_classes" target="_blank" rel="external">Classes</a>, and <a href="http://www.2ality.com/2014/09/es6-modules-final.html" target="_blank" rel="external">Modules</a>. Itâ€™s also inspired by the<br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a> collections added to ES6. The library is â€œtranspiledâ€ to ES3<br>in order to support all modern browsers.</p>
<p>All examples are presented in ES6. To run in all browsers, they need to be<br>translated to ES3.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ES6</span></div><div class="line">foo.map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</div><div class="line"><span class="comment">// ES3</span></div><div class="line">foo.map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x; &#125;);</div></pre></td></tr></table></figure>
<h2 id="Nested-Structures"><a href="#Nested-Structures" class="headerlink" title="Nested Structures"></a>Nested Structures</h2><p>The collections in <code>immutable</code> are intended to be nested, allowing for deep<br>trees of data, similar to JSON.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nested = Immutable.fromJS(&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:&#123;<span class="attr">c</span>:[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]&#125;&#125;&#125;);</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ] &#125; &#125; &#125;</span></div></pre></td></tr></table></figure>
<p>A few power-tools allow for reading and operating on nested data. The<br>most useful are <code>mergeDeep</code>, <code>getIn</code>, <code>setIn</code>, and <code>updateIn</code>, found on <code>List</code>,<br><code>Map</code> and <code>OrderedMap</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nested2 = nested.mergeDeep(&#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:&#123;<span class="attr">d</span>:<span class="number">6</span>&#125;&#125;&#125;);</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ], d: 6 &#125; &#125; &#125;</span></div><div class="line"></div><div class="line">nested2.getIn([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>]); <span class="comment">// 6</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> nested3 = nested2.updateIn([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>], value =&gt; value + <span class="number">1</span>);</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5 ], d: 7 &#125; &#125; &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> nested4 = nested3.updateIn([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], list =&gt; list.push(<span class="number">6</span>));</div><div class="line"><span class="comment">// Map &#123; a: Map &#123; b: Map &#123; c: List [ 3, 4, 5, 6 ], d: 7 &#125; &#125; &#125;</span></div></pre></td></tr></table></figure>
<h2 id="Lazy-Seq"><a href="#Lazy-Seq" class="headerlink" title="Lazy Seq"></a>Lazy Seq</h2><p><code>Seq</code> describes a lazy operation, allowing them to efficiently chain<br>use of all the Iterable methods (such as <code>map</code> and <code>filter</code>).</p>
<p><strong>Seq is immutable</strong> â€” Once a Seq is created, it cannot be<br>changed, appended to, rearranged or otherwise modified. Instead, any mutative<br>method called on a Seq will return a new Seq.</p>
<p><strong>Seq is lazy</strong> â€” Seq does as little work as necessary to respond to any<br>method call.</p>
<p>For example, the following does not perform any work, because the resulting<br>Seq is never used:</p>
<pre><code>var oddSquares = Immutable.Seq.of(1,2,3,4,5,6,7,8)
  .filter(x =&gt; x % 2).map(x =&gt; x * x);
</code></pre><p>Once the Seq is used, it performs only the work necessary. In this<br>example, no intermediate arrays are ever created, filter is called three times,<br>and map is only called once:</p>
<pre><code>console.log(oddSquares.get(1)); // 9
</code></pre><p>Any collection can be converted to a lazy Seq with <code>.toSeq()</code>.</p>
<pre><code>var seq = Immutable.Map({a:1, b:1, c:1}).toSeq();
</code></pre><p>Seq allows for the efficient chaining of sequence operations, especially when<br>converting to a different concrete type (such as to a JS object):</p>
<pre><code>seq.flip().map(key =&gt; key.toUpperCase()).flip().toObject();
// { A: 1, B: 1, C: 1 }
</code></pre><p>As well as expressing logic that would otherwise seem memory-limited:</p>
<pre><code>Immutable.Range(1, Infinity)
  .skip(1000)
  .map(n =&gt; -n)
  .filter(n =&gt; n % 2 === 0)
  .take(2)
  .reduce((r, n) =&gt; r * n, 1);
// 1006008
</code></pre><p>Note: An iterable is always iterated in the same order, however that order may<br>not always be well defined, as is the case for the <code>Map</code>.</p>
<h2 id="Equality-treats-Collections-as-Data"><a href="#Equality-treats-Collections-as-Data" class="headerlink" title="Equality treats Collections as Data"></a>Equality treats Collections as Data</h2><p><code>Immutable</code> provides equality which treats immutable data structures as pure<br>data, performing a deep equality check if necessary.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> map1 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">1</span>, <span class="attr">c</span>:<span class="number">1</span>&#125;);</div><div class="line"><span class="keyword">var</span> map2 = Immutable.Map(&#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">1</span>, <span class="attr">c</span>:<span class="number">1</span>&#125;);</div><div class="line">assert(map1 !== map2); <span class="comment">// two different instances</span></div><div class="line">assert(Immutable.is(map1, map2)); <span class="comment">// have equivalent values</span></div><div class="line">assert(map1.equals(map2)); <span class="comment">// alternatively use the equals method</span></div></pre></td></tr></table></figure>
<p><code>Immutable.is()</code> uses the same measure of equality as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank" rel="external">Object.is</a><br>including if both are immutable and all keys and values are equal<br>using the same measure of equality.</p>
<h2 id="Batching-Mutations"><a href="#Batching-Mutations" class="headerlink" title="Batching Mutations"></a>Batching Mutations</h2><blockquote>
<p>If a tree falls in the woods, does it make a sound?</p>
<p>If a pure function mutates some local data in order to produce an immutable<br>return value, is that ok?</p>
<p>â€” Rich Hickey, Clojure</p>
</blockquote>
<p>Applying a mutation to create a new immutable object results in some overhead,<br>which can add up to a minor performance penalty. If you need to apply a series<br>of mutations locally before returning, <code>Immutable</code> gives you the ability to<br>create a temporary mutable (transient) copy of a collection and apply a batch of<br>mutations in a performant manner by using <code>withMutations</code>. In fact, this is<br>exactly how  <code>Immutable</code> applies complex mutations itself.</p>
<p>As an example, building <code>list2</code> results in the creation of 1, not 3, new<br>immutable Lists.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> list1 = Immutable.List.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</div><div class="line"><span class="keyword">var</span> list2 = list1.withMutations(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line">  list.push(<span class="number">4</span>).push(<span class="number">5</span>).push(<span class="number">6</span>);</div><div class="line">&#125;);</div><div class="line">assert(list1.size === <span class="number">3</span>);</div><div class="line">assert(list2.size === <span class="number">6</span>);</div></pre></td></tr></table></figure>
<p>Note: <code>immutable</code> also provides <code>asMutable</code> and <code>asImmutable</code>, but only<br>encourages their use when <code>withMutations</code> will not suffice. Use caution to not<br>return a mutable copy, which could result in undesired behavior.</p>
<p><em>Important!</em>: Only a select few methods can be used in <code>withMutations</code> including<br><code>set</code>, <code>push</code> and <code>pop</code>. These methods can be applied directly against a<br>persistent data-structure where other methods like <code>map</code>, <code>filter</code>, <code>sort</code>,<br>and <code>splice</code> will always return new immutable data-structures and never mutate<br>a mutable collection.</p>
<h2 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2><p><a href="http://facebook.github.io/immutable-js/docs/" target="_blank" rel="external">Read the docs</a> and eat your vegetables.</p>
<p>Docs are automatically generated from <a href="https://github.com/facebook/immutable-js/blob/master/type-definitions/Immutable.d.ts" target="_blank" rel="external">Immutable.d.ts</a>.<br>Please contribute!</p>
<p>Also, donâ€™t miss the <a href="https://github.com/facebook/immutable-js/wiki" target="_blank" rel="external">Wiki</a> which<br>contains articles on specific topics. Canâ€™t find something? Open an <a href="https://github.com/facebook/immutable-js/issues" target="_blank" rel="external">issue</a>.</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>If you are using the <a href="http://chaijs.com/" target="_blank" rel="external">Chai Assertion Library</a>, <a href="https://github.com/astorije/chai-immutable" target="_blank" rel="external">Chai Immutable</a> provides a set of assertions to use against <code>Immutable</code> collections.</p>
<h2 id="Contribution"><a href="#Contribution" class="headerlink" title="Contribution"></a>Contribution</h2><p>Use <a href="https://github.com/facebook/immutable-js/issues" target="_blank" rel="external">Github issues</a> for requests.</p>
<p>We actively welcome pull requests, learn how to <a href="./CONTRIBUTING.md">contribute</a>.</p>
<h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><p>Changes are tracked as <a href="https://github.com/facebook/immutable-js/releases" target="_blank" rel="external">Github releases</a>.</p>
<h2 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h2><p><a href="https://www.youtube.com/watch?v=K2NYwP90bNs" target="_blank" rel="external">Phil Bagwell</a>, for his inspiration<br>and research in persistent data structures.</p>
<p><a href="https://github.com/hughfdjackson/" target="_blank" rel="external">Hugh Jackson</a>, for providing the npm package<br>name. If youâ€™re looking for his unsupported package, see <a href="https://github.com/hughfdjackson/immutable" target="_blank" rel="external">this repository</a>.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><code>Immutable</code> is <a href="https://github.com/facebook/immutable-js/blob/master/LICENSE" target="_blank" rel="external">BSD-licensed</a>. We also provide an additional <a href="https://github.com/facebook/immutable-js/blob/master/PATENTS" target="_blank" rel="external">patent grant</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-è®©æˆ‘ä»¬æŠŠReact-Containerç»„åˆèµ·æ¥]]></title>
      <url>http://yoursite.com/2017/03/21/%E7%BF%BB%E8%AF%91-%E8%AE%A9%E6%88%91%E4%BB%AC%E6%8A%8AReact-Container%E7%BB%84%E5%90%88%E8%B5%B7%E6%9D%A5/</url>
      <content type="html"><![CDATA[<blockquote>
<p><em>Arunoda Susiripala</em>  <a href="https://voice.kadira.io/let-s-compose-some-react-containers-3b91b6d9b7c8#.92sjwgug1" target="_blank" rel="external">è¯·å‚çœ‹åŸæ–‡</a></p>
</blockquote>
<p>è¿‘æ¥(Jan,2016),è‡ªç»™è‡ªè¶³çš„container(Reduxçš„å®¹å™¨)æ–¹æ³•åœ¨Reactçš„ç¤¾åŒºä¸­éå¸¸çš„æµè¡Œ.ä»–ä»¬åœ¨Realy,Reduxç”šè‡³æ˜¯åœ¨Meteorä¸­å¹¿æ³›ä½¿ç”¨.è¿™ç¯‡æ–‡ç« é‡Œæˆ‘ä»¬æ·±å…¥containerå†…éƒ¨,äº†è§£ä¸€ä¸‹æ€ä¹ˆç®€ä¾¿çš„ç»„åˆcontainers.</p>
<h2 id="ä»€ä¹ˆæ˜¯Container"><a href="#ä»€ä¹ˆæ˜¯Container" class="headerlink" title="ä»€ä¹ˆæ˜¯Container?"></a>ä»€ä¹ˆæ˜¯Container?</h2><p>åœ¨Reactä¸­,æˆ‘ä»¬æœ‰propså’Œstatesæ¥ç®¡ç†ç»„ä»¶çš„æ•°æ®éœ€æ±‚.æœ€è¿‘æœ‰ä¸€ä¸ªè¶‹åŠ¿,åœ¨ç»„ä»¶ä¸­ä»…ä»…åªé€šè¿‡propsæ¥æ¥æ”¶æ•°æ®å’Œaction.æˆ‘ä»¬ä»…ä»…åœ¨ç»„ä»¶å†…éƒ¨ä¿ç•™state.</p>
<p>æˆ‘ä»¬æœ‰æ—¶å€™å«è¿™äº›ç»„ä»¶ä¸ºâ€œå•çº¯å±•ç¤ºç»„ä»¶â€.<br>æˆ‘ä¹Ÿä¸å¤ªç¡®å®šè°å‘æ˜çš„è¿™ä¸ªæœ¯è¯­.ä½†æ˜¯æˆ‘æ‰å¯èƒ½æ˜¯<a href="https://medium.com/@dan_abramov" target="_blank" rel="external">Dan Abramov</a>.<br>æŸ¥çœ‹ä¸€ä¸‹ä»–çš„æ–‡ç« â€œSmart and Dumb Componentsâ€.</p>
<p>ä½†æ˜¯æˆ‘è®¤ä¸ºå«åš<strong><code>UIç»„ä»¶</code></strong>æ›´å¥½ä¸€ç‚¹(æˆ–è€…ä»…ä»…å«åšç»„ä»¶).<br>æ¥ç€åˆå¦ä¸€å¥—ç»„ä»¶å®é™…ç®¡ç†æœ¬åœ°æ•°æ®å’Œè·å–è¿œç¨‹æ•°æ®.è¿™äº›ç»„ä»¶è¢«ç§°ä¸º<strong><code>containerç»„ä»¶</code></strong>.Relayå’ŒReduxçš„Reactç»‘å®šæ˜¯ä»–ä»¬æ›´æµè¡Œäº†.</p>
<p>ä¸‹é¢æ˜¯æ€ä¹ˆä½¿ç”¨Reat Devtoolsæ¥æŸ¥çœ‹ç»„ä»¶çš„è§†å›¾.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-f461d4894bfc06de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="1*QhMLf9dhu-cbAxN9Gc9dtg-2.png"></p>
<p>Container(BlogPost)æ¥æ”¶postId Props.ç„¶åä»–å°†ä¼šè·å–æ•°æ®ä¼ é€’åˆ°å®é™…UIç»„ä»¶ä¸­.</p>
<h2 id="Containerçš„å¸¸è§„ä»»åŠ¡"><a href="#Containerçš„å¸¸è§„ä»»åŠ¡" class="headerlink" title="Containerçš„å¸¸è§„ä»»åŠ¡"></a>Containerçš„å¸¸è§„ä»»åŠ¡</h2><p>containerçš„ä¸»è¦ä»»åŠ¡æ˜¯è·å–æ•°æ®,è¿™é‡Œé¢æœ‰ä¸€äº›äº‹æƒ…è¦åš,è®©æˆ‘ä»¬çœ‹çœ‹:</p>
<ul>
<li>è¯·æ±‚æ•°æ®(è°ƒç”¨è®¢é˜…æˆ–è€…ä»…ä»…è·å–æ•°æ®)</li>
<li>å½“æ•°æ®åŠ è½½çš„æ—¶å€™å±•ç¤ºåŠ è½½å›¾ç‰‡</li>
<li>ä¸€æ—¦æ•°æ®è¿”å›,æŠŠå®ƒä¼ é€’åˆ°UIç»„ä»¶ä¸­</li>
<li>å¦‚æœæœ‰é”™è¯¯,å±•ç¤ºç»™ç”¨æˆ·</li>
<li>å½“propsæ”¹å˜äº†,éœ€è¦é‡æ–°è·å–æˆ–è€…é‡æ–°è®¢é˜…</li>
<li>å½“containerå¸è½½çš„æ—¶å€™,éœ€è¦æ¸…é™¤èµ„æº.</li>
</ul>
<p>è¿™é‡Œcontaineræœ‰å¾ˆå¤šçš„ä»»åŠ¡è¦å®Œæˆ.å¦‚æœä½ æƒ³è‡ªå·±åšè¿™äº›ä»»åŠ¡,ä½ å°±ä¸å¾—ä¸åšä¸€äº›é‡å¤çš„å·¥ä½œ,å‘ç”Ÿé”™è¯¯çš„æ¥æºå°±ç”±æ­¤è¯ç”Ÿäº†.</p>
<h2 id="React-Komposerçš„ä»‹ç»"><a href="#React-Komposerçš„ä»‹ç»" class="headerlink" title="React Komposerçš„ä»‹ç»"></a>React Komposerçš„ä»‹ç»</h2><p>React Komposerè¯•å›¾å¸®åŠ©æˆ‘ä»¬æ›´å®¹æ˜“çš„åˆå¹¶containers.æœ‰äº†å®ƒ,ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æ•°æ®èµ„æº,ä¸ç®¡ä½ çš„æ•°æ®æ˜¯æ¥è‡ªäºPromise,Observableç”šè‡³æ˜¯Meteorâ€˜s Tracker.</p>
<h3 id="è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­"><a href="#è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­" class="headerlink" title="è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­"></a>è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3><p>åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€ä¸ª<em>æ•°å­—æ—¶é’Ÿ</em>:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-10d84673aea28707.gif?imageMogr2/auto-orient/strip" alt="Digital clock"></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¥½çš„å®ä¾‹,å› ä¸ºæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸ªcontainerçš„å‡ ä¹æ‰€æœ‰çš„åŠŸèƒ½.å¼€å§‹</p>
<p>é¦–å…ˆå®‰è£…react-komposer:</p>
<p><code>npm i â€” save react-komposer</code></p>
<p>ç„¶åè¾“å…¥composeå‡½æ•°ï¼š<br><code>import {compose} from â€˜react-komposerâ€™;</code></p>
<p>ç°åœ¨éœ€è¦ä¸€ä¸ªUIç»„ä»¶å»æ¸²æŸ“æ—¶é—´:</p>
<p><code>const Time = ({time}) =&gt; (&lt;div&gt;{time}&lt;/div&gt;);</code></p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„ç»„åˆå‡½æ•°:</p>
<p>è·å–æ—¶é—´çš„æ—¶å€™éœ€è¦è°ƒç”¨<code>onData</code>å›è°ƒå‡½æ•°(è¿™é‡Œæ²¡æœ‰å®é™…åšä»€ä¹ˆ.)</p>
<p>éœ€è¦è°ƒç”¨<code>onData</code>å‡½æ•°å¤šå°‘æ¬¡å¯ä»¥,åªè¦ç¨‹åºéœ€è¦.å¦‚æœæœ‰é”™è¯¯,å¯ä»¥æŠŠé”™è¯¯ä¿¡æ¯ä½œä¸º<code>onData</code>çš„ç¬¬ä¸€ä¸ªå€¼.</p>
<p>æœ€å,æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªæ¸…é™¤èµ„æºçš„é¢å‡½æ•°.åœ¨è¿™ä¸ªå®ä¾‹ä¸­ç”¨ä»–æ¥æ¸…é™¤setIntervaçš„å¥æŸ„.</p>
<p>å¥½äº†,ç°åœ¨æ¥åˆå¹¶ä¸€ä¸‹composer:<br><code>const Clock = compose(composerFunction)(Time);</code></p>
<p>ç„¶åæ¸²æŸ“åˆ°DOMä¸­:<br><code>ReactDOM.render(&lt;Clock /&gt;, document.body);</code></p>
<p>ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè‡ªæˆ‘ç®¡ç†(state)çš„æ—¶é’Ÿ.<a href="https://jsfiddle.net/arunoda/jxse2yw8/" target="_blank" rel="external">çœ‹çœ‹å®é™…æ¼”ç¤º</a>.</p>
<p>è¿™é‡Œæœ‰ä¸ª<a href="https://jsfiddle.net/arunoda/7qy1mxc7/" target="_blank" rel="external">æ›´å¤æ‚çš„ç‰ˆæœ¬</a>,ä½¿ç”¨props,å¤„ç†é”™è¯¯ä¿¡æ¯.</p>
<p>ä½ ä¹Ÿå¯ä»¥æ”¹å˜é»˜è®¤åŠ è½½å’Œé”™è¯¯ç»„ä»¶.æŸ¥çœ‹ä¸€ä¸‹<a href="https://github.com/kadirahq/react-komposer#api" target="_blank" rel="external">react-komposer æ–‡æ¡£</a>.</p>
<p>è·å¾—å¥½å¤„:æ›´å®¹æ˜“æµ‹è¯•</p>
<p>ä½œä¸ºè¿™ä¸ªç»„ä»¶çš„é™„åŠ æ•ˆæœ,æˆ‘ä»¬ç°åœ¨å¯ä»¥å¾ˆå®¹æ˜“æµ‹è¯•UIä»£ç .</p>
<ul>
<li>å› ä¸ºUIç»„ä»¶ä»…ä»…é€šè¿‡propsæ¥æ”¶æ•°æ®(å’Œaction),æ˜¯çš„æµ‹è¯•å¾ˆå®¹æ˜“.</li>
<li>ä¹Ÿå¯ä»¥æµ‹è¯•ç»„åˆå‡½æ•°çš„æ•°æ®è·å–é€»è¾‘.</li>
</ul>
<h2 id="å¯¹äºå¤šç§æ•°æ®æºçš„æ”¯æŒ"><a href="#å¯¹äºå¤šç§æ•°æ®æºçš„æ”¯æŒ" class="headerlink" title="å¯¹äºå¤šç§æ•°æ®æºçš„æ”¯æŒ"></a>å¯¹äºå¤šç§æ•°æ®æºçš„æ”¯æŒ</h2><p>æˆ‘å·²ç»æåˆ°è¿‡,å¯ä»¥ä½¿ç”¨è¿™ä¸ªç»„ä»¶å’Œä»»ä½•æ•°æ®æºä¸€èµ·å·¥ä½œ,å› ä¸ºç»„åˆçš„APIæ˜¯é€šç”¨çš„.æˆ‘ä»¬æœ‰å¤„ç†æµè¡Œæ•°æ®æºçš„ç‰¹å®šAPIS.<br> è¿™é‡Œæ˜¯:</p>
<ul>
<li><em>composeWithPromise</em>ç”¨äºPromise-baseed æ•°æ®æº</li>
<li><em>composeWithObservable</em>ç”¨äºRx.js Observalbe-basedæ•°æ®æº</li>
<li><em>composeWithTracker</em>å‡ºäº‹ç‰¹æ®Šçš„ä¸€äº›æ•°æ®æº.</li>
</ul>
<p>æœ‰äº†è¿™äº›API,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨react-komposerå»åˆå¹¶ä»»ä½•æ•°æ®æºçš„container.</p>
<p>çœ‹çœ‹<a href="https://github.com/kadirahq/react-komposer#using-with-xxx" target="_blank" rel="external">repo</a>,æœ‰æ›´å¤šçš„ä¾‹å­.</p>
<p>åœ¨ä½ çš„appä¸­ä½¿ç”¨ä¸€ä¸‹react-komposer,ä½ ä¼šå–œæ¬¢ä¸Šä»–çš„.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptåŠ¨æ€ç±»å‹ï¼Œé¸­å­ç»ˆäºç…®ç†Ÿäº†]]></title>
      <url>http://yoursite.com/2017/03/20/javascript%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B%EF%BC%8C%E9%B8%AD%E5%AD%90%E7%BB%88%E4%BA%8E%E7%85%AE%E7%86%9F%E4%BA%86/</url>
      <content type="html"><![CDATA[<p>å†¬è‡³æ¥äº†ï¼Œåˆšå»åƒäº†ä¸€ç¢—èåœé¥ºå­ï¼Œæµ‘èº«å‘çƒ­ã€‚çªç„¶è§‰å¾—é¸­å­å·²ç»ç†Ÿäº†ã€‚</p>
<p>å¼€ä¸ªç©ç¬‘ã€‚è¿™é‡Œè¦è¯´çš„æ˜¯åŠ¨æ€è¯­è¨€çš„é¸­å­ç±»å‹(ducking type)ã€‚ <code>è¿™ä¸ªè¯é¢˜åº”è¯¥æ˜¯æ•´ä¸ªjavascripté¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³</code>.ä¸çŸ¥é“ä¸‹è¿™ä¸ªç»“è®ºå¯¹ä¸å¯¹ï¼Ÿå¯æ˜¯åœ¨å‰é¢è¿˜ä¸å¤ªäº†è§£åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚çœ‹ä»£ç çš„æ—¶å€™æ€»æœ‰ç§æ„Ÿè§‰ï¼Œå°±æ˜¯javascriptå¤ªçµæ´»äº†ï¼Œæ€ä¹ˆä»€ä¹ˆå¯¹è±¡çš„æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥é€šè¿‡å‚æ•°ä¼ é€’çš„æ–¹å¼æ¥åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨ã€‚åœ¨æ¨¡å¼å­¦ä¹ æ—¶å¸¸çœ‹åˆ°è¿™ç§ä»£ç ã€‚<br>åˆšæ‰åˆé‡æ–°çœ‹è¿™éƒ¨åˆ†å†…å®¹æ—¶çªç„¶æ˜ç™½äº†ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹é‡Œçš„é¸­å­æ¨¡å‹ã€‚</p>
<p>ä»€ä¹ˆæ˜¯é¸­å­ç±»å‹å‘¢ï¼Ÿæˆ‘æ€»ç»“ä¸€å¥è¯ï¼Œè‹±é›„ä¸é—®å‡ºå¤„ï¼Œåªè¦èƒ½å¹²æ´»å°±è¡Œã€‚javascripté‡Œé¢å¯¹è±¡éƒ½æ˜¯è“é¢†ï¼Œåªå¹²æ´»ï¼Œè‡³äºæ˜¯å°å­¦æ°´å¹³è¿˜æ˜¯åšå£«æ°´å¹³ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒï¼Œèƒ½å¹²æ´»å°±è¡Œã€‚ javaè¯­è¨€å°±ä¸æ˜¯ï¼Œjavaåœ¨ä½ å¹²æ´»ä¹‹å‰æƒ³è¦æŠŠä½ çš„ç¥–å®—åå…«ä»£éƒ½æŸ¥ä¸€éï¼Œæ ¹æ­£è‹—çº¢çš„æ‰èƒ½æ¥å¹²æ´»ã€‚æ‰€ä»¥javascriptå°±å¾ˆçµæ´»å•¦ã€‚</p>
<p>è¿™å°±æ˜¯é¸­å­ç±»å‹ã€‚<code>å¦‚æœå®ƒèµ°èµ·è·¯æ¥åƒé¸­å­ï¼Œå«èµ·æ¥å˜å˜çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­</code>ã€‚</p>
<p>é¸­å­ç±»å‹èµ‹äºˆäº†javascriptæå¤§çš„çµæ´»æ€§ï¼ŒåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æ—¶å€™éå¸¸è‡ªç”±ã€‚ </p>
<p>å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ ç¬¬ä¸€ç« </p>
<p>çœ‹ä¸‹é¢ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> duck = &#123;  <span class="comment">//é¸­å­å¯¹è±¡</span></div><div class="line">		duckSinging: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'å˜å˜å˜'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> chicken = &#123;  <span class="comment">//é¸¡å¯¹è±¡</span></div><div class="line">		duckSinging: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'å˜å˜å˜'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> choir = []; <span class="comment">// åˆå”±å›¢</span></div><div class="line">	<span class="keyword">var</span> joinChoir = <span class="function"><span class="keyword">function</span>(<span class="params"> animal </span>)</span>&#123; <span class="comment">//å®ä¾‹åŒ–åŠ¨ç‰©å¯¹è±¡</span></div><div class="line">		<span class="keyword">if</span> ( animal &amp;&amp; <span class="keyword">typeof</span> animal.duckSinging === <span class="string">'function'</span> )&#123; </div><div class="line">       <span class="comment">//ç¨ä½œæ£€æµ‹ï¼Œåªè¦æœ‰å”±æ­Œçš„æ–¹æ³•å°±å¯ä»¥ç”¨ã€‚</span></div><div class="line">			choir.push( animal );</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'æ­å–œåŠ å…¥åˆå”±å›¢'</span> );</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'åˆå”±å›¢å·²æœ‰æˆå‘˜æ•°é‡:'</span> + choir.length );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	joinChoir( duck ); <span class="comment">// æ­å–œåŠ å…¥åˆå”±å›¢</span></div><div class="line">	joinChoir( chicken ); <span class="comment">// æ­å–œåŠ å…¥åˆå”±å›¢</span></div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªé¸­å­ç±»å‹çš„ä»£ç ï¼Œ é¸¡ä¹Ÿæ··å…¥åˆå”±å›¢äº†ï¼Œä½†æ˜¯æ²¡æœ‰å…³ç³»ï¼Œè‹±é›„ä¸é—®å‡ºå¤„ï¼Œåªè¦ä½ èƒ½å”±æ­Œå°±è¡Œäº†ã€‚<br>å¾ˆæ–¹ä¾¿å¯¹è±¡æ–¹æ³•çš„è°ƒç”¨ã€‚ javascriptä»£ç ä¸­éå¸ƒè¿™æ ·çš„ä¾‹å­ï¼Œä½†æ˜¯ç°åœ¨çœ‹æ¥ä¸€ç‚¹ä¹Ÿä¸å¥‡æ€ªäº†ã€‚å› ä¸ºè¿™é¸­å­ç±»å‹å°±æ˜¯åŠ¨æ€è¯­è¨€çš„ä¼˜åŠ¿ã€‚è€Œjavascriptå°±æ˜¯åŠ¨æ€è¯­è¨€ä¹‹ä¸€ï¼Œåªæ˜¯å®ç°äº†è¿™ç§æ¨¡å¼è€Œå·²ã€‚</p>
<p>å¯¹äºè¿™ä¸ªé—®é¢˜çš„è®¤è¯†ä¹Ÿç ´è´¹å‘¨æŠ˜ï¼Œä½†æ˜¯ç°åœ¨çœ‹æ¥æ˜¯å€¼å¾—çš„ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œå¯¹javascriptçš„åº”ç”¨èƒ½åŠ›å°±æ›´åŠ æ·±äº†ä¸€æ­¥ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptçš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/19/javascript%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æ¨¡æ¿æ–¹æ³•æ˜¯ä¸€ç§åªéœ€è¦ä½¿ç”¨ç»§æ‰¿å°±å¯ä»¥å®ç°çš„éå¸¸ç®€å•çš„æ¨¡å¼<br> æ¨¡æ¿æ–¹æ³•ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€æ˜¯æŠ½è±¡çš„çˆ¶ç±»ï¼ŒäºŒæ˜¯å…·ä½“å®ç°çš„å­ç±»ã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•ä»¥åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚</p>
</blockquote>
<p>å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ç¬¬11ç« </p>
<p>è¿™ä¸ªæ¨¡å¼æ–¹æ³•å¾ˆæœ‰æ„æ€,åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦æœ‰ä¸€ä¸ªæŠ½è±¡çš„é¢è¿‡ç¨‹ï¼Œæ˜¯å¯¹ç±»ä¼¼çš„ç”Ÿäº§è¿‡ç¨‹çš„å…·ä½“ç»†èŠ‚çš„ç†è§£ï¼Œæ‰¾å‡ºæµç¨‹ä¸­çš„å…±åŒç‚¹ä½œä¸ºæŠ½è±¡çš„çˆ¶ç±»ã€‚<br>å’–å•¡å’ŒèŒ¶çš„å†²æ³¡è¿‡ç¨‹</p>
<table>
<thead>
<tr>
<th style="text-align:left">æ³¡<code>å’–å•¡</code></th>
<th style="text-align:left">æ³¡<code>èŒ¶</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">æŠŠæ°´ç…®æ²¸</td>
<td style="text-align:left">æŠŠæ°´ç…®æ²¸</td>
</tr>
<tr>
<td style="text-align:left">ç”¨æ²¸æ°´<code>æ³¡å’–å•¡</code></td>
<td style="text-align:left">ç”¨æ²¸æ°´<code>æµ¸æ³¡èŒ¶å¶</code></td>
</tr>
<tr>
<td style="text-align:left">æŠŠ<code>å’–å•¡</code>å€’è¿›æ¯å­</td>
<td style="text-align:left">æŠŠ<code>èŒ¶æ°´</code>å€’è¿›æ¯å­</td>
</tr>
<tr>
<td style="text-align:left">åŠ <code>ç³–å’Œç‰›å¥¶</code></td>
<td style="text-align:left">åŠ <code>æŸ æª¬</code></td>
</tr>
</tbody>
</table>
<p>æŠŠæ³¡å’–å•¡å’Œæ³¡èŒ¶çš„ä¸åŒç‚¹æ ‡ç¤ºå‡ºæ¥ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯å…±åŒçš„éƒ¨åˆ†</p>
<ul>
<li>[ ] åŸæ–™ä¸åŒï¼Œä¸€ä¸ªæ˜¯å’–å•¡ï¼Œä¸€ä¸ªæ˜¯èŒ¶ã€‚æŠ½è±¡ä¸ºé¥®æ–™</li>
<li>[ ] æ³¡çš„æ–¹å¼ä¸åŒï¼Œä¸€ä¸ªæ˜¯æ³¡ï¼Œä¸€ä¸ªæ˜¯æµ¸æ³¡ã€‚ç»Ÿä¸€æŠ½è±¡ä¸ºæ³¡</li>
<li>[ ] åŠ å…¥çš„è°ƒå‘³å“ä¸åŒï¼Œä¸€ä¸ªæ˜¯ç³–å’Œç‰›å¥¶ï¼Œä¸€ä¸ªæ˜¯æŸ æª¬ã€‚æŠ½è±¡ä¸ºè°ƒæ–™<br>æ•´ä¸ªå†²æ³¡é¥®æ–™çš„è¿‡ç¨‹å°±æŠ½è±¡ä¸ºä¸‹é¢çš„æµç¨‹</li>
</ul>
<ol>
<li>æŠŠæ°´ç…®æ²¸</li>
<li>ç”¨æ²¸æ°´å†²æ³¡é¥®æ–™</li>
<li>æŠŠé¥®æ–™å€’è¿›è¢«å­</li>
<li>åŠ è°ƒæ–™</li>
</ol>
<p>æŠ½è±¡çš„çˆ¶ç±»çš„ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Beverage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; </div><div class="line">Beverage.prototype.boilWater = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log( <span class="string">'æŠŠæ°´ç…®æ²¸'</span> );</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Beverage.prototype.brew = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// ç©ºæ–¹æ³•ï¼Œåº”è¯¥ç”±å­ç±»é‡å†™</span></div><div class="line">Beverage.prototype.pourInCup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// ç©ºæ–¹æ³•ï¼Œåº”è¯¥ç”±å­ç±»é‡å†™</span></div><div class="line">Beverage.prototype.addCondiments = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="comment">// ç©ºæ–¹æ³•ï¼Œåº”è¯¥ç”±å­ç±»é‡å†™</span></div><div class="line">Beverage.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//å®šä¹‰å­ç±»çš„å‡½æ•°æ‰§è¡Œé¡ºåº</span></div><div class="line">	<span class="keyword">this</span>.boilWater();</div><div class="line">	<span class="keyword">this</span>.brew();</div><div class="line">	<span class="keyword">this</span>.pourInCup();</div><div class="line">	<span class="keyword">this</span>.addCondiments();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æœ‰äº†çˆ¶ç±»çš„æ¨¡æ¿ï¼Œåœ¨ç…®èŒ¶æ˜¯å°±ä¾ç…§çˆ¶ç±»çš„æ¨¡æ¿æ¥ä½¿ç”¨ï¼Œé€šç”¨éƒ¨åˆ†ä¸åŠ¨ï¼Œç‰¹æ®Šçš„åœ°æ–¹é‡å†™çˆ¶ç±»çš„æ–¹æ³•</p>
<p>èŒ¶å¶å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ¨¡æ¿</p>
<pre><code>var Tea = function(){}; //å®šä¹‰ç…®èŒ¶å­ç±»
Tea.prototype = new Beverage(); //ç»§æ‰¿çˆ¶ç±»
Tea.prototype.brew = function(){ //é‡å†™çˆ¶ç±»æ–¹æ³•
    console.log( &apos;ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶&apos; );
};
Tea.prototype.pourInCup = function(){ é‡å†™çˆ¶ç±»æ–¹æ³•
    console.log( &apos;æŠŠèŒ¶å€’è¿›æ¯å­&apos; );
};
Tea.prototype.addCondiments = function(){ é‡å†™çˆ¶ç±»æ–¹æ³•
    console.log( &apos;åŠ æŸ æª¬&apos; );
};
var tea = new Tea(); //å®ä¾‹åŒ–å­ç±»
tea.init(); //ä¾ç…§çˆ¶ç±»çš„æ–¹æ³•æ‰§è¡Œé¡ºåºæ¥æ‰§è¡Œ

//ç”±äºjavascriptçš„å¯¹è±¡åŸå‹ç»§æ‰¿é“¾çš„æ–¹å¼å’Œjavaçš„ç»§æ‰¿æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œè¿™é‡Œä»£ç ç»“æ„å’Œjavaç±»ä¼¼ï¼Œä½†æ˜¯é‡Œé¢çš„æœºåˆ¶æ˜¯ä¸åŒçš„

<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">	</div><div class="line">	</div><div class="line">	</div><div class="line">	</div><div class="line"></div><div class="line"><span class="clean">#####é’©å­æ–¹æ³•</span></div><div class="line"></div><div class="line"><span class="number">1.</span> æŠŠæ°´ç…®æ²¸</div><div class="line"><span class="number">2.</span> ç”¨æ²¸æ°´å†²æ³¡é¥®æ–™</div><div class="line"><span class="number">3.</span> æŠŠé¥®æ–™å€’è¿›è¢«å­</div><div class="line"><span class="number">4.</span> åŠ è°ƒæ–™</div><div class="line"></div><div class="line">ä¸Šé¢æ˜¯ä¸€èˆ¬çš„å†²è°ƒé¥®æ–™çš„æµç¨‹ï¼Œä½†æ˜¯å¯èƒ½ä¼šæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚æœ‰çš„äººå¯èƒ½ä¸ä¼šåŠ è°ƒæ–™ã€‚é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦ä½¿ç”¨`é’©å­æ–¹æ³•`æ¥åœ¨éš”ç¦»æœ‰å˜åŒ–çš„æ­¥éª¤</div></pre></td></tr></table></figure>
</code></pre><p>var Beverage = function(){};<br>    Beverage.prototype.boilWater = function(){<br>        console.log( â€˜æŠŠæ°´ç…®æ²¸â€™ );<br>    };<br>    Beverage.prototype.brew = function(){<br>        throw new Error( â€˜å­ç±»å¿…é¡»é‡å†™brew æ–¹æ³•â€™ );<br>    };<br>    Beverage.prototype.pourInCup = function(){<br>        throw new Error( â€˜å­ç±»å¿…é¡»é‡å†™pourInCup æ–¹æ³•â€™ );<br>    };<br>    Beverage.prototype.addCondiments = function(){<br>        throw new Error( â€˜å­ç±»å¿…é¡»é‡å†™addCondiments æ–¹æ³•â€™ );<br>    };<br>    Beverage.prototype.customerWantsCondiments = function(){<br>        return true; // é»˜è®¤éœ€è¦è°ƒæ–™<br>    };<br>    Beverage.prototype.init = function(){<br>        this.boilWater();<br>        this.brew();<br>        this.pourInCup();<br>    if ( this.customerWantsCondiments() ){ // å¦‚æœæŒ‚é’©è¿”å›trueï¼Œåˆ™éœ€è¦è°ƒæ–™<br>        this.addCondiments(); //ç¬¬å››æ­¥å°±å˜ä¸ºå¯é€‰çš„æ–¹æ³•äº†<br>    }<br>};<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">å®ä¾‹åŒ–å†²æ³¡å’–å•¡çš„å®ä¾‹</div></pre></td></tr></table></figure></p>
<p> var CoffeeWithHook = function(){};<br> CoffeeWithHook.prototype = new Beverage();<br>CoffeeWithHook.prototype.brew = function(){<br>    console.log( â€˜ç”¨æ²¸æ°´å†²æ³¡å’–å•¡â€™ );<br>};<br>CoffeeWithHook.prototype.pourInCup = function(){<br>    console.log( â€˜æŠŠå’–å•¡å€’è¿›æ¯å­â€™ );<br>};<br>CoffeeWithHook.prototype.addCondiments = function(){<br>    console.log( â€˜åŠ ç³–å’Œç‰›å¥¶â€™ );<br>};<br>CoffeeWithHook.prototype.customerWantsCondiments = function(){<br>    return window.confirm( â€˜è¯·é—®éœ€è¦è°ƒæ–™å—ï¼Ÿâ€™ );//å¯¹é¡¾å®¢é€‰æ‹©çš„åˆ¤æ–­æ¡ä»¶<br>};<br>var coffeeWithHook = new CoffeeWithHook();</p>
<p>```</p>
<p>æ¨¡æ¿æ–¹æ³•é€šè¿‡å°è£…å˜åŒ–æé«˜ç³»ç»Ÿæ‰©å±•èƒ½åŠ›ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptç»„åˆæ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/18/javascript%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œç»„åˆæ¨¡å¼å°±æ˜¯ç”¨å°çš„å­å¯¹è±¡æ¥æ„å»ºæ›´å¤§çš„å¯¹è±¡ï¼Œè€Œè¿™äº›å°çš„å­å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯ç”±æ›´å°çš„å¯¹è±¡ç»„æˆçš„ã€‚è¿™é‡Œåªæ˜¯ç»„åˆï¼Œå¹¶æ²¡æœ‰ä»å±å…³ç³»ã€‚å‚è€ƒã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ç¬¬åç« </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å®å‘½ä»¤çš„ä»£ç </span></div><div class="line"><span class="keyword">var</span> closeDoorCommand = &#123;<span class="comment">//ä½œä¸ºå¶å¯¹è±¡</span></div><div class="line">		execute: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'å…³é—¨'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> openPcCommand = &#123; <span class="comment">//ä½œä¸ºå¶å¯¹è±¡</span></div><div class="line">		execute: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'å¼€ç”µè„‘'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> openQQCommand = &#123;<span class="comment">//ä½œä¸ºå¶å¯¹è±¡</span></div><div class="line">		execute: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'ç™»å½•QQ'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="comment">//ç»„åˆæ¨¡å¼çš„æ ¹å¯¹è±¡</span></div><div class="line">	<span class="keyword">var</span> MacroCommand = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> &#123;</div><div class="line">			<span class="attr">commandsList</span>: [],</div><div class="line">			<span class="attr">add</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> command </span>)</span>&#123;<span class="comment">//å¶å¯¹è±¡ä½œä¸ºæ•°ç»„çš„å…ƒç´ ä¼ é€’åˆ°</span></div><div class="line">			<span class="comment">//æ•°ç»„ä¸­</span></div><div class="line">				<span class="keyword">this</span>.commandsList.push( command );</div><div class="line">			&#125;,</div><div class="line">			<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ‰§è¡Œç»„åˆå‘½ä»¤</span></div><div class="line">				<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, command; command = <span class="keyword">this</span>.commandsList[ i++ ]; )&#123;</div><div class="line">					command.execute(); <span class="comment">//å¶å¯¹è±¡éƒ½æœ‰executeæ–¹æ³•</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> macroCommand = MacroCommand();</div><div class="line">	macroCommand.add( closeDoorCommand );<span class="comment">//æ·»åŠ åˆ°æ ¹å¯¹è±¡æ•°ç»„ä¸­</span></div><div class="line">	macroCommand.add( openPcCommand );<span class="comment">//åŒä¸Š</span></div><div class="line">	macroCommand.add( openQQCommand );<span class="comment">//åŒä¸Š</span></div><div class="line">	macroCommand.execute();<span class="comment">//æ‰§è¡Œæ ¹å‘½ä»¤</span></div></pre></td></tr></table></figure>
<p><em>ä¸¤ä¸ªè¦ç‚¹</em>:1.jså¯¹è±¡å¼•ç”¨å¯ä»¥ä½œä¸ºæ•°ç»„å…ƒç´ åŠ å…¥åˆ°æ•°ç»„ä¸­ã€‚2. å¶å¯¹è±¡éƒ½æœ‰ä¸€æ ·çš„executeæ–¹æ³•ã€‚åœ¨æ ¹å¯¹è±¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨leaf.executeçš„æ¨¡å¼æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>åœ¨å¶å¯¹è±¡ä¸­è¿˜å¯ä»¥ç»§ç»­æ‰©å±•ä¹Ÿå¯¹è±¡ï¼Œç»„åˆçš„æ·±åº¦ç»§ç»­åŠ æ·±ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MacroCommand = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ ¹å¯¹è±¡çš„æ–¹æ³•ä¿æŒä¸å˜</span></div><div class="line">		<span class="keyword">return</span> &#123;</div><div class="line">			<span class="attr">commandsList</span>: [],</div><div class="line">			<span class="attr">add</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> command </span>)</span>&#123;</div><div class="line">				<span class="keyword">this</span>.commandsList.push( command );</div><div class="line">			&#125;,</div><div class="line">			<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, command; command = <span class="keyword">this</span>.commandsList[ i++ ]; )&#123;</div><div class="line">					command.execute();</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> openAcCommand = &#123;</div><div class="line">		<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'æ‰“å¼€ç©ºè°ƒ'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"><span class="comment">/**********å®¶é‡Œçš„ç”µè§†å’ŒéŸ³å“æ˜¯è¿æ¥åœ¨ä¸€èµ·çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¸€ä¸ªå®å‘½ä»¤æ¥ç»„åˆæ‰“å¼€ç”µè§†å’Œæ‰“å¼€éŸ³å“çš„å‘½ä»¤</span></div><div class="line">*********/</div><div class="line"><span class="keyword">var</span> openTvCommand = &#123;</div><div class="line">	<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'æ‰“å¼€ç”µè§†'</span> );</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> openSoundCommand = &#123;</div><div class="line">	<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'æ‰“å¼€éŸ³å“'</span> );</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> macroCommand1 = MacroCommand(); <span class="comment">//ç¬¬ä¸€ä¸ªå¶å¯¹è±¡</span></div><div class="line">macroCommand1.add( openTvCommand ); <span class="comment">//æ·»åŠ ä¸‹ä¸€çº§å¶å¯¹è±¡</span></div><div class="line">macroCommand1.add( openSoundCommand );<span class="comment">//åŒä¸Š</span></div><div class="line"><span class="comment">/*********å…³é—¨ã€æ‰“å¼€ç”µè„‘å’Œæ‰“ç™»å½•QQ çš„å‘½ä»¤****************/</span></div><div class="line"><span class="keyword">var</span> closeDoorCommand = &#123;</div><div class="line">	<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å…³é—¨'</span> );</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> openPcCommand = &#123;</div><div class="line">	<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å¼€ç”µè„‘'</span> );</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> openQQCommand = &#123;</div><div class="line">	<span class="attr">execute</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'ç™»å½•QQ'</span> );</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> macroCommand2 = MacroCommand();<span class="comment">//ç¬¬äºŒä¸ªå¶å¯¹è±¡</span></div><div class="line">macroCommand2.add( closeDoorCommand );<span class="comment">//æ·»åŠ ä¸‹ä¸€çº§å¶å¯¹è±¡</span></div><div class="line">macroCommand2.add( openPcCommand );<span class="comment">//åŒä¸Š</span></div><div class="line">macroCommand2.add( openQQCommand );</div><div class="line"><span class="comment">/*********ç°åœ¨æŠŠæ‰€æœ‰çš„å‘½ä»¤ç»„åˆæˆä¸€ä¸ªâ€œè¶…çº§å‘½ä»¤â€**********/</span></div><div class="line"><span class="keyword">var</span> macroCommand = MacroCommand(); <span class="comment">//é¡¶çº§æ ¹å¯¹è±¡</span></div><div class="line">macroCommand.add( openAcCommand ); <span class="comment">//ä¸€ä¸ªå¶å¯¹è±¡</span></div><div class="line">macroCommand.add( macroCommand1 ); <span class="comment">//å¦ä¸€ä¸ª</span></div><div class="line">macroCommand.add( macroCommand2 ); <span class="comment">//å¦ä¸€ä¸ª</span></div><div class="line"><span class="comment">/*********æœ€åç»™é¥æ§å™¨ç»‘å®šâ€œè¶…çº§å‘½ä»¤â€**********/</span></div><div class="line"><span class="keyword">var</span> setCommand = (<span class="function"><span class="keyword">function</span>(<span class="params"> command </span>)</span>&#123;</div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'button'</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		command.execute();</div><div class="line">	&#125;</div><div class="line">&#125;)( macroCommand );</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//æœ€ç»ˆæ‰€æœ‰çš„å¶å¯¹è±¡çš„å¼•ç”¨éƒ½æ·»åŠ åˆ°commandlistæ•°ç»„ä¸­ï¼Œåœ¨æ ¹å¯¹è±¡ä¸Šæ‰§è¡Œ</span></div><div class="line"><span class="comment">//executeæ–¹æ³•æ—¶ï¼Œä¼šéå†æ‰€æœ‰çš„å¶å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œleaf.execute()æ–¹æ³•ã€‚</span></div><div class="line"><span class="comment">//å¾—åˆ°ç»“æœ</span></div></pre></td></tr></table></figure>
<p>#####æœ€ç»ˆè¿˜æ˜¯ä½¿ç”¨äº†javascriptçš„æ•°ç»„æ“ä½œå’Œå¯¹è±¡æ“ä½œçš„ä¾¿åˆ©æ€§ã€‚åœ¨javascriptçš„æ¨¡å¼è®¾è®¡ä¸­ï¼ŒåŸºæœ¬éƒ½æ˜¯åœ¨æ“ä½œæ•°ç»„å’Œå¯¹è±¡ã€‚æ‰€æœ‰æœ‰å¿…è¦è¿˜å¥½åœ¨æ·±åˆ»ç†è§£ä¸€ä¸‹æ•°ç»„å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>è¿™ä¸ªç³»åˆ—å†™äº†å¥½å‡ ç¯‡æ–‡ç« äº†ã€‚å…¶å®å†™çš„æ—¶å€™å¥½å¤šåœ°æ–¹è¿˜ä¸å¤ªæ‡‚ï¼Œå†™ç€å†™ç€æœ‰äº›åœ°æ–¹å°±æ˜ç™½äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦åšæŒå†™ä¸‹å»ã€‚ç°åœ¨è§‰å¾—å†™çš„è¿˜ä¸é”™ï¼Œè¿‡åŠå¹´å¯èƒ½è§‰å¾—å°±å¾ˆå‚»äº†ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptæ¡¥æ¥æ¨¡å¼(2)]]></title>
      <url>http://yoursite.com/2017/03/17/javascript%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F(2)/</url>
      <content type="html"><![CDATA[<ol>
<li>äº‹ä»¶ç›‘å¬å™¨</li>
<li>æ¡¥æ¥æ¨¡å¼çš„å…¶ä»–ä¾‹å­<br>è¿™å®é™…å°±æ˜¯ä¸€ä¸ªé—­åŒ…çš„ä¾‹å­ï¼Œé€šè¿‡é—­åŒ…å‡½æ•°è·å–å¤–å±‚å‡½æ•°ä½œç”¨åŸŸå†…å®šä¹‰çš„ç§æœ‰å˜é‡ã€‚è¿™ä¸ªå‡½æ•°åˆå¯ä»¥å«åšç‰¹æƒå‡½æ•°ï¼Œgetterå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åªgetä¸set.       </li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> <span class="keyword">Public</span> = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> secret = <span class="number">3</span>;</div><div class="line">  this.privilegedGetter = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> secret;</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="keyword">Public</span>;</div><div class="line"><span class="keyword">var</span> data = o.privilegedGetter();</div></pre></td></tr></table></figure>
<p>3 .  ç”¨æ¡¥æ¥æ¨¡å¼è”ç»“å¤šä¸ªç±».é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼Œå¦‚æœä»£ç ä»ä¸Šå¾€ä¸‹çœ‹æ˜¯èšåˆäº†è¿ä¸ªç±»ã€‚åœ¨æ¡¥æ¥ç±»ä¸­ç»Ÿä¸€è¿”å›ã€‚å¦‚æœæ˜¯ä»ä¸‹å¾€ä¸Šçœ‹ä»£ç ï¼Œå®é™…æ˜¯æŠŠä¸€ä¸ªå®Œæ•´çš„ä»£ç æ‹†æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„ç±»ï¼Œè¿™æ ·ä¸¤ä¸ªç‹¬ç«‹çš„ç±»å¯ä»¥ä¿®æ”¹è‡ªå·±çš„é€»è¾‘ï¼Œä¸ä¼šå½±å“åˆ°å¦ä¸€ç±»çš„å·¥ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">var</span> Class1 = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.a = a;</div><div class="line">  <span class="keyword">this</span>.b = b;</div><div class="line">  <span class="keyword">this</span>.c = c;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> Class2 = <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.d = d;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> BridgeClass = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c, d</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.one = <span class="keyword">new</span> Class1(a, b, c);</div><div class="line">  <span class="keyword">this</span>.two = <span class="keyword">new</span> Class2(d);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>4 . æ„å»ºXHRè¿æ¥é˜Ÿåˆ—</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptå•ä¾‹æ¨¡å¼(1)]]></title>
      <url>http://yoursite.com/2017/03/16/javascript%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F(1)/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å•ä¾‹(singleton).è¿™ç§æ¨¡å¼æä¾›äº†ä¸€ç§å°†ä»£ç ç»„ç»‡ä¸ºä¸€ä¸ªé€»è¾‘å•å…ƒçš„æ‰‹æ®µï¼Œå¯ä»¥é€šè¿‡å•ä¸€å˜é‡æ¥è®¿é—®ã€‚é€šè¿‡ç¡®ä¿å•ä¾‹å¯¹è±¡åªæœ‰ä¸€ä¸ªæ‹·è´ï¼Œå¯ä»¥ç¡®ä¿ä»£ä¹°ä½¿ç”¨ç«¥é¢œçš„å…¨å±€èµ„æºã€‚å•ä¾‹å¯ä»¥ç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´ï¼Œå¯ä»¥å€ŸåŠ©å•ä¾‹æŠŠä»£ç ç»„ç»‡çš„æ›´ä¸ºä¸€è‡´ï¼Œä»è€Œæ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ã€‚</p>
</blockquote>
<pre><code>æœ¬æ–‡å‚ç…§è¿™æœ¬ä¹¦ç¬¬äº”ç« ï¼Œä»‹ç»çš„é‡ç‚¹å’Œå¦ä¸€æœ¬ä¹¦å¥½åƒæ˜¯ä¸åŒçš„ã€‚ç»“åˆç€çœ‹çœ‹    
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/2044710-c97bcd5773f19459.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/320" alt="s3398900.jpg"></p>
<p>####å•ä¾‹çš„åŸºæœ¬ç»“æ„<br>æœ€åŸºæœ¬çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å¯¹è±¡å­—é¢é‡ä½œä¸ºå•ä½“</span></div><div class="line"><span class="keyword">var</span> Singleton = &#123;</div><div class="line">  <span class="attr">attribute1</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">attribute2</span>: <span class="number">10</span>,</div><div class="line"></div><div class="line">  <span class="attr">method1</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">method2</span>: <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Singleton.attribute1 = <span class="literal">false</span>; <span class="comment">//ä¿®æ”¹</span></div><div class="line"><span class="keyword">var</span> total = Singleton.attribute2 + <span class="number">5</span>; <span class="comment">//ä½¿ç”¨å•ä¾‹</span></div><div class="line"><span class="keyword">var</span> result = Singleton.method1();</div></pre></td></tr></table></figure>
<p><code>æ–¹æ³•ä½äºå¯¹è±¡å­—é¢é‡ä¸­å°±æœ‰äº†å‘½åç©ºé—´ï¼Œå’Œå…¶ä»–åŒåçš„å‡½æ•°å°±ä¸ä¼šå†²çªäº†ã€‚å¯¹è±¡å­—é¢é‡é‡Œçš„æ–¹æ³•ç»Ÿä¸€ç”¨  nameSpace.methodçš„æ ¼å¼è°ƒç”¨</code><br>å¯¹è±¡å­—é¢é‡çš„å‘½åç©ºé—´è¿˜å¯ä»¥ç»§ç»­åˆ’åˆ†ä¾‹å¦‚parent.children.methodã€‚<br>è¿™æ ·ä¸ä»…å˜é‡å‘ç”Ÿå†²çªçš„æœºä¼šå¤§å¤§å‡å°‘ï¼Œè€Œä¸”å½’å±æ›´æ˜ç¡®äº†ã€‚</p>
<p>ä¸Šé¢çš„å¯¹è±¡å­—é¢é‡çš„å•ä¾‹æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Ÿ åœ¨nodeç¨‹åºä¸­çš„é…ç½®æ–‡ä»¶config.jsé‡Œé¢æ˜¯ä¸æ˜¯éƒ½æ˜¯è¿™ç§ä»£ç ï¼Ÿ é…ç½®é¡¹éƒ½æ˜¯å…¨å±€å”¯ä¸€çš„ã€‚</p>
<p>#####æƒ°æ€§å®ä¾‹åŒ–<br>æœ¬æ¥å•ä¾‹æ˜¯æƒ³å†™è¿™ä¸ªå†…å®¹çš„ï¼Œä½†æ˜¯ä»Šå¤©ä¸€çœ‹ï¼Œè¿˜æ˜¯æ²¡çœ‹å…¨ã€‚æ›¾æ¢çš„jsæ¨¡å¼ä¹¦é‡Œçš„å•ä¾‹å…¶å®éƒ½æ˜¯è¿™ä¸ªéƒ¨åˆ†ã€‚<code>å®é™…çš„å•ä¾‹ä»£ç æ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå˜é‡æ¥ç¼“å­˜å®ä¾‹åŒ–çš„ä»£ç ï¼Œå¦‚æœå·²ç»å®ä¾‹åŒ–å°±ç›´æ¥è¿”å›ç¼“å­˜çš„ä»£ç ã€‚</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">  MyNamespace.Singleton = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  </div><div class="line">  <span class="keyword">var</span> uniqueInstance; <span class="comment">// ç§æœ‰å˜é‡ç¼“å­˜å®ä¾‹åŒ–å•ä¾‹</span></div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">constructor</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å…·ä½“éœ€è¦æŒ‰éœ€åŠ è½½çš„ä»£ç .</span></div><div class="line">    <span class="keyword">var</span> privateAttribute1 = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">var</span> privateAttribute2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateMethod1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      ...</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateMethod2</span>(<span class="params">args</span>) </span>&#123;</div><div class="line">      ...</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123; <span class="comment">// Public members.</span></div><div class="line">      publicAttribute1: <span class="literal">true</span>,</div><div class="line">      <span class="attr">publicAttribute2</span>: <span class="number">10</span>,</div><div class="line">    </div><div class="line">      <span class="attr">publicMethod1</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        ...</div><div class="line">      &#125;,</div><div class="line">      <span class="attr">publicMethod2</span>: <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;</div><div class="line">        ...</div><div class="line">      &#125;</div><div class="line">    &#125;  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">getInstance</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span>(!uniqueInstance) &#123; <span class="comment">// å•ä¾‹è‹¥ä¸å­˜åœ¨ï¼Œè°ƒç”¨constructorå‡½æ•°</span></div><div class="line">        uniqueInstance = <span class="keyword">constructor</span>(); //è°ƒç”¨<span class="keyword">constructor</span>å‡½æ•°åï¼Œç¼“å­˜è¿”å›å€¼</div><div class="line">      &#125;</div><div class="line">      return uniqueInstance;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-ä½¿ç”¨Reactæ„å»ºä½ çš„App]]></title>
      <url>http://yoursite.com/2017/03/12/%E7%BF%BB%E8%AF%91-%E4%BD%BF%E7%94%A8React%E6%9E%84%E5%BB%BA%E4%BD%A0%E7%9A%84App/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è¿™ç¯‡æ–‡ç« æ—¶é—´æœ‰ç‚¹ä¹…è¿œ,ç¿»è¯‘è¯•è¯•çœ‹.ä½†æ˜¯æœ¬ç¯‡æ–‡ç« å¯¹äºReactçš„æ¸²æŸ“å·¥ä½œåŸç†è®²çš„æ¯”è¾ƒå¥½,ä½¿ç”¨ä¸€ä¸ªæ¸¸æˆå¼•æ“çš„æ¸²æŸ“æ–¹å¼æ¥ç±»æ¯”è§£é‡ŠReactçš„æ•°æ®æµç¨‹,å€¼å¾—å­¦ä¹ . <a href="http://konkle.us/architecting-your-app-react-part-1/" target="_blank" rel="external">åŸæ–‡åœ¨è¿™é‡Œ</a></p>
</blockquote>
<p>å»å¹´äº”æœˆ(2013å¹´5æœˆ),Facebookå‘å¸ƒäº†æ„å»ºå‰ç«¯ç»„ä»¶åº“çš„å¼€æºè½¯ä»¶-React.Reactå¯¹äºæµè§ˆå™¨å’Œappçš„ç»“æ„æ¥è¯´æœ‰ç‚¹å¼‚ç±».ä½†æ˜¯ç»è¿‡è¿™æ®µæ—¶é—´,å¼€å‘è€…é€æ¸çœ‹åˆ°äº†ä¸€äº›ä¼˜åŠ¿,Reactä¹Ÿå› æ­¤è·å–äº†å¾ˆå¤šçš„äººæ°”.Reactæœ€ä¸ºç›¸åŠ©çš„é¢ç‰¹å¾æ˜¯å¼•å…¥äº†virtual-DOMæ–¹æ³•,virtual-DOMä½¿å®é™…çš„æµè§ˆå™¨çš„DOMå˜åŒ–å‡åˆ°æœ€ä½,DOMçš„æ¸²æŸ“æ€§èƒ½å¤§å¹…æé«˜.</p>
<p>Reactå¹¶ä¸æ˜¯å®Œæ•´çš„MVCæ¡†æ¶,Reactå®é™…æ˜¯MVCçš„åŠ å¼ºç‰ˆ(è¿™ç‚¹,çœŸæ˜¯é›ªä¸­é€ç‚­,ä¸€ç›´éƒ½å¯¹è¿™ä¸ªæ¡†æ¶åˆ°åº•æ˜¯ä¸æ˜¯MVCè€Œå¿ƒå­˜ç–‘è™‘).å¾ˆå¤šå¼€å‘è€…é€‰æ‹©Reactä½œä¸ºMVCæ¡†æ¶çš„å»¶ä¼¸,ä¾‹å¦‚Backbone.Reactæœ¬èº«å¹¶æ²¡æœ‰è·¯ç”±å’Œæ•°æ®åŒæ­¥çš„å†…å®¹,æ‰€ä»¥ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨å–œæ¬¢çš„å·¥å…·æ¥å®Œæˆç±»ä¼¼çš„åŠŸèƒ½.Reactä¹Ÿå¯ä»¥åœ¨å…¶ä»–çš„åº”ç”¨ä¸­ç®¡ç†ä¸€éƒ¨åˆ†ç‰¹å®šçš„ç»„ä»¶.ä½†æ˜¯å¦‚æœåœ¨åº”ç”¨çš„ç•Œé¢ä¸Šå…¨é¢ä½¿ç”¨React,å‘æŒ¥çš„åŠŸèƒ½ä¼šæ›´å¤§.</p>
<p>#####å°½å¯èƒ½çš„é¿å…DOM<br>Reactä½œä¸ºjavascriptçš„ä¸€ä¸ªç±»,æä¾›virtual-DOMå®æ–½æ–¹æ¡ˆ.è¿™æ„å‘³ç€ä½ å¯ä»¥é¢‘ç¹çš„æ›´æ–°ä½ çš„åº”ç”¨ç¨‹åºçš„å…ƒç´ æ ‘,ä½†æ˜¯å®é™…ä¸Šæ²¡æœ‰å‘ç”Ÿæµè§ˆå™¨çš„DOMæ“ä½œ.ç”±äºä½¿ç”¨äº†ç°ä»£çš„å¼•æ“,Javascriptçš„é€Ÿåº¦ç›¸å½“å¿«.å®é™…ç”±äºå¼•æ“çš„é€Ÿåº¦å¾ˆå¿«,å½“æ¯ä¸€æ¬¡æ•°æ®æ›´æ–°çš„æ—¶å€™,æ¸²æŸ“åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯ä»¥çš„,å‡å°‘äº†å®æ—¶å…ƒç´ æ“ä½œå’ŒåŒå‘æ•°æ®ç»‘å®šçš„éœ€æ±‚.Reactå‘¨æœŸæ€§çš„æ¯”è¾ƒvirtual-DOMå’Œæµè§ˆå™¨DOM,ä»…ä»…åšå‡ºæœ€æœ‰å¿…è¦çš„DOMåŒæ­¥.</p>
<p>#####å•å‘æ•°æ®æµ<br>å½“HTMLå…ƒç´ çš„æ¸²æŸ“èŠ±é”€å¤§å¹…åº¦é™ä½ä»¥å,ä½ ç°åœ¨éœ€è¦èŠ±è´¹æ›´å¤šçš„çš„æ–¹æ³•æ¥ç®¡ç†ä½ çš„ç•Œé¢.æ”¾å¼ƒé”™ç»¼å¤æ‚çš„å°±åœ°æ›´æ–°å…ƒç´ æ“ä½œå’Œæ•°æ®å˜åŒ–ä¸­çš„çš„å¤šä¸ªstateçš„åŒæ­¥,ä½ å¯ä»¥æŠŠçŠ¶æ€æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹,åŸºäºé›†ä¸­çš„stateæ¥æè¿°ä½ çš„ç•Œé¢.åªè¦çŠ¶æ€ä»¥æ”¹å˜,Reactçš„ç»„ä»¶å°±å¯ä»¥è¿›è¡Œæ›´æ–°æ“ä½œ.<br>å½“ä½ çš„æ•´ä¸ªåº”ç”¨éƒ½åŸºäºè¿™ä¸ªæ€æƒ³æ¥è®¾è®¡,ä½ å¯ä»¥æŠŠimmutable æ•°æ®ä»é¡¶å±‚ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶,ç„¶åæ‰§è¡Œè‡ªé¡¶å‘ä¸‹çš„åº”ç”¨æ›´æ–°.Reactä»æ ¹æœ¬ä¸Šæ”¹å˜äº†ä½ å¯¹åº”ç”¨çš„æ€è·¯,è€Œä¸”ç»å¸¸ä¼šç®€åŒ–åº”ç”¨çš„è®¾è®¡.</p>
<p>#####æµè§ˆå™¨ä½œä¸ºæ¸²æŸ“å¼•æ“<br>è¿™ä¸€ç‚¹æ˜¯å¯¹MVCæ¡†æ¶éå¸¸æ¿€è¿›çš„æ”¹å˜,å®ƒå¼ºè°ƒä½¿ç”¨åŒå‘æ•°æ®ç»‘å®š,å°½å¯èƒ½å¤šè‡ªåŠ¨å°±åœ°é‡æ–°æ¸²æŸ“.å½“æˆ‘åˆšå¼€å§‹äº†è§£Reactçš„æ—¶å€™,æˆ‘è¿˜ä¸æ˜¯å¤ªç¡®å®š.è½¬æŠ˜ç‚¹æ˜¯æˆ‘çœ‹äº†ä¸€ä¸ªPete Huntçš„è§†é¢‘:æ¯”è¾ƒReactå’ŒDoom3æ¸²æŸ“å¼•æ“.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-a1553d287e86aebb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="doom3çš„æ¸²æŸ“ç¤ºæ„å›¾"><br>åœ¨å›¾è¡¨ä¸­,æ¸¸æˆçš„sateç»è¿‡åº•å±‚çš„å›¾å½¢ä»£ç å¯¼å…¥å‰ç«¯é€»è¾‘å’ŒæŠ½è±¡å±‚.è¿™ä¸ªæ“ä½œä¼šåˆ›å»ºä¸€ä¸ªâ€œåœºæ™¯ä¸­é—´è¡¨ç¤ºå±‚â€(scene intermediate representation),è¿™ä¸ªè¡¨ç¤ºå±‚è¡¨ç°å‡ºç”¨æˆ·åº”è¯¥çœ‹åˆ°çš„å†…å®¹.è¿™ä¸ªè¡¨ç¤ºå±‚ä¼šä¼ é€’ç»™â€backendâ€(åç«¯),åç«¯æ¥æ”¶è¡¨ç¤ºå±‚å†…å®¹,éšä¹‹è½¬æ¢ä¸ºOpenGLæ“ä½œ,OpenGLä½¿ç”¨å›¾å½¢å¡(ç”µè„‘æ˜¾å¡)æ¸²æŸ“å‡ºå†…å®¹.Reactçš„å·¥ä½œåŸç†å’ŒDoom3çš„æ¸²æŸ“æ–¹å¼æ˜¯ä¸€æ ·çš„.(doom3æ˜¯æ—©æœŸä¸€æ¬¾æ¯”è¾ƒè‘—åçš„ç¬¬ä¸€äººç§°å°„å‡»æ¸¸æˆ,è¿™é‡Œä½¿ç”¨doom3çš„å›¾å½¢æ¸²æŸ“æ–¹å¼æ¥è¯´æ˜Reactçš„å·¥ä½œæ–¹å¼).</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-73a98731bc9d6411.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="Reactç»„ä»¶æ¸²æŸ“"></p>
<p>å½“ç¨‹åºçš„stateç”±äºæµè§ˆå™¨æˆ–è€…å®æ—¶äº‹ä»¶å‘ç”Ÿå˜åŒ–,Reactç¨‹åºæ¥æ”¶è¿™äº›å˜åŒ–,å¹¶ä¸”ä¼ é€’ç»™ç»„ä»¶ä»¬,æ¥ç€ä½¿ç”¨virtual-DOMæ–¹å¼ç”Ÿæˆä¸­é—´è¡¨ç¤ºå±‚.æµè§ˆå™¨çš„DOMå¹¶ä¸ä¼šå‘ç”Ÿç«‹å³çš„å˜åŒ–.ç„¶è€ŒReactä¼šå‘¨æœŸæ€§çš„æ¥æ”¶virtual DOM,è®¡ç®—å‡ºå¿…è¦çš„DOMæ“ä½œ.è¿™ä¸€ç‚¹å’Œæ¸¸æˆå¼•æ“æ¥å—åœºæ™¯ä¸­é—´è¡¨ç¤ºå±‚,å†³å®šæ˜¯å¦ä½¿ç”¨OpenGLæ¸²æŸ“åœºæ™¯ç±»ä¼¼.Reactæ˜¯æ¥æ”¶DOM,æŠŠå®ƒæ¸²æŸ“åˆ°ç”¨æˆ·å±å¹•ä¸Š.(å¯è§ä¸¤è€…æ¸²æŸ“çš„æ€è·¯æ˜¯ä¸€æ ·çš„,Reactä½¿ç”¨äº†æµè§ˆå™¨æ¥åšè¿™ä¸ªå·¥ä½œ).</p>
<p>æµè§ˆå™¨å’Œæ¸¸æˆå¼•æ“ä¸€æ ·,æœ€æ…¢çš„éƒ¨åˆ†å®é™…æ˜¯ä¸­é—´è¡¨ç¤ºå±‚åˆ°å±å¹•çš„æ¸²æŸ“éƒ¨åˆ†.ä½ å¯ä»¥å¯¹virtual-DOMåšå‡ºè®¸å¤šç»†å°çš„æ”¹å˜,Reactä¼˜åŒ–äº†è¿™ä¸ªéƒ¨åˆ†,æ‰€ä»¥ä¸ä¼šå› æ­¤è€Œç‰ºç‰²æ¸²æŸ“çš„æ€§èƒ½.</p>
<p>#####æ›´å¤šçš„èµ„æº<br>åœ¨ç¬¬äºŒéƒ¨åˆ†,æˆ‘å°†ä¼šæ¼”ç¤ºæ€ä¹ˆæŠŠReactçš„è®¾è®¡å“²å­¦ä»˜è¯¸å®è·µ.æˆ‘ä¼šåˆ†äº«æ€ä¹ˆæ›´å…·ä¸åŒçš„åŠŸèƒ½è´£ä»»,æ¸²æŸ“ä¸€ä¸ªç”±å°ç»„ä»¶ç»„æˆçš„é¡¶çº§ç»„ä»¶çš„ç•Œé¢.æˆ‘ä¹Ÿä¼šæ¼”ç¤ºæ€ä¹ˆåœ¨Reactåº”ç”¨ä¸­æ•´åˆè·¯ç”±åŠŸèƒ½å’Œæ•°æ®åŒæ­¥åŠŸèƒ½.</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šçš„Reactå†…å®¹,æƒ³çŸ¥é“å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„,çœ‹çœ‹ä¸‹é¢çš„èµ„æºåˆ—è¡¨.</p>
<ul>
<li><a href="http://facebook.github.io/react/" target="_blank" rel="external">Reactä¸»é¡µ</a></li>
<li><a href="http://facebook.github.io/react/docs/videos.html" target="_blank" rel="external">è§†é¢‘</a></li>
<li><a href="http://facebook.github.io/react/docs/examples.html" target="_blank" rel="external">å®ä¾‹</a></li>
<li><a href="https://groups.google.com/forum/#!forum/reactjs" target="_blank" rel="external">React Google Group</a></li>
<li>#reactjs on Freenode-å®˜æ–¹ IRCé¢‘é“,æ¯”è¾ƒæ´»è·ƒ</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptä»£ç†æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/12/javascript%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ä»£ç†æ¨¡å¼æ˜¯ç»™å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®<br>   å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹</p>
</blockquote>
<p><code>ç¼“å­˜ä»£ç†</code></p>
<p>  ç¼“å­˜ä»£ç†å¯ä»¥ä¸ºä¸€äº›å¼€é”€æ¯”è¾ƒå¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ï¼Œä¸‹ä¸€æ¬¡è¿ç®—æ—¶å¦‚æœä¼ é€’å‚æ•°å’Œç¼“å­˜çš„å‚æ•°ä¸€è‡´ï¼Œåˆ™å¯æ˜¯ç›´æ¥è¿”å›å‰é¢å­˜å‚¨çš„è¿ç®—ç»“æœ</p>
<p>è®¡ç®—ä¹˜ç§¯çš„å®ä¾‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mult = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//é»˜è®¤ä¼ é€’çš„argumentså‚æ•°åˆ—è¡¨</span></div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å¼€å§‹è®¡ç®—ä¹˜ç§¯'</span> );</div><div class="line">		<span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, l = <span class="built_in">arguments</span>.length; i &lt; l; i++ )&#123;</div><div class="line">			a = a * <span class="built_in">arguments</span>[i];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	&#125;;</div><div class="line">	mult( <span class="number">2</span>, <span class="number">3</span> ); <span class="comment">// è¾“å‡ºï¼š6</span></div><div class="line">	mult( <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ); <span class="comment">// è¾“å‡ºï¼š24</span></div><div class="line">	<span class="comment">//ç°åœ¨åŠ å…¥ç¼“å­˜ä»£ç†å‡½æ•°ï¼š</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> proxyMult = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> cache = &#123;&#125;;  <span class="comment">//ç¼“å­˜å¯¹è±¡</span></div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.join.call( <span class="built_in">arguments</span>, <span class="string">','</span> ); </div><div class="line">			<span class="keyword">if</span> ( args <span class="keyword">in</span> cache )&#123; <span class="comment">//å¦‚æœåˆå¹¶çš„å‚æ•°åœ¨ç¼“å­˜ä¸­</span></div><div class="line">				<span class="keyword">return</span> cache[ args ]; <span class="comment">//ç›´æ¥åˆ†ä¼šç¼“å­˜æ•°æ®</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">return</span> cache[ args ] = mult.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ); </div><div class="line">                        <span class="comment">//è°ƒç”¨å‡½æ•°ä¹‹åå­˜å‚¨åˆ°ç¼“å­˜å¯¹è±¡ä¸­</span></div><div class="line">		&#125;</div><div class="line">	&#125;)();</div><div class="line"></div><div class="line">	proxyMult( <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ); <span class="comment">// è¾“å‡ºï¼š24  //ç¬¬ä¸€æ¬¡è®¡ç®—</span></div><div class="line">	proxyMult( <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ); <span class="comment">// è¾“å‡ºï¼š24 //ç¬¬äºŒæ¬¡è®¡ç®—ï¼Œç›´æ¥å­˜ç¼“å­˜ä¸­è·å–</span></div><div class="line"></div><div class="line"><span class="comment">//è¿™é‡Œçš„ä¸¤ä¸ªå‡½æ•°ï¼Œmultiè´Ÿè´£è®¡ç®—ï¼ŒproxyMultiè´Ÿè´£ç¼“å­˜çš„å­˜å‚¨å’Œè¯»å–ã€‚</span></div><div class="line"><span class="comment">//ä¸¤ä¸ªå‡½æ•°åˆ†åŠŸèƒ½å®Œæˆå¯¹åº”çš„åŠŸèƒ½</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptå¼€æ”¾-å°é—­åŸåˆ™-NBAå¸¸è§„èµ›ç»“æŸ]]></title>
      <url>http://yoursite.com/2017/03/11/javascript%E5%BC%80%E6%94%BE-%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99-NBA%E5%B8%B8%E8%A7%84%E8%B5%9B%E7%BB%93%E6%9D%9F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨é¢å‘å¯¹è±¡ç¨‹åº(OOP)è®¾è®¡ä¸­ï¼Œå¼€æ”¾-å°é—­åŸåˆ™(OCP)æ˜¯æœ€é‡è¦çš„åŸåˆ™ï¼Œä¸€ä¸ªoopçš„ç¨‹åºå…·æœ‰è‰¯å¥½çš„è®¾è®¡ï¼Œå¾€å¾€è¯´æ˜å®ƒæ˜¯ç¬¦åˆå¼€æ”¾-å°é—­åŸåˆ™çš„.<br>å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ç¬¬20ç« <br>é¦–å…ˆçœ‹ä¸€ä¸ªä»£ç .å¼€æ”¾å°é—­æ˜¯ç›¸äº’å…³è”çš„åœ¨ä¸€æ®µä»£ç ä¸­æ—¢è¦ä½“ç°å°é—­åˆè¦ä½“ç°å¼€æ”¾ã€‚å°é—­ä¸ç ´åæ—§åŠŸèƒ½ï¼Œå¼€æ”¾æœ‰å¯ä»¥æ·»åŠ æ–°åŠŸèƒ½ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ä¸‹é¢è¿™ä¸ªå‡½æ•°æ˜¯ä¿®é¥°æ¨¡å¼ï¼Œåœ¨å‡½æ•°è¿è¡Œåæ·»åŠ åŠŸèƒ½</span></div><div class="line"><span class="comment">//é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæ·»åŠ çš„åŠŸèƒ½ä¸å½±å“åŸå‡½æ•°çš„åŠŸèƒ½</span></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">			afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">			<span class="keyword">return</span> ret;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	<span class="comment">//å¦‚æœå¤šäººå¼€å‘ï¼Œéƒ½è¦åœ¨window.onloadä¸‹æŒ‚è½½å‡½æ•°åŠŸèƒ½(åŸç”Ÿçš„jsä»£ç </span></div><div class="line">	<span class="comment">//åªèƒ½åŠ è½½ä¸€æ¬¡window.loadå‡½æ•°)ã€‚å¾ˆæœ‰å¯èƒ½åˆ«äººä¹Ÿåœ¨ä½¿ç”¨.</span></div><div class="line">	<span class="comment">//è¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ç»“åˆafterå‡½æ•°å’Œå‡½æ•°å¼•ç”¨èµ‹å€¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜</span></div><div class="line">	<span class="comment">//å¦‚æœwindoW.loadå·²ç»æŒ‚è½½æœ‰å†…å®¹ï¼Œå°±å¼•ç”¨èµ‹å€¼ï¼Œç„¶åä½¿ç”¨after</span></div><div class="line">	<span class="comment">//å¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ™ç›´æ¥å¼•ç”¨ç©ºå‡½æ•°å¯¹è±¡ï¼Œç„¶åæŒ‚è½½afterå‡½æ•°</span></div><div class="line">	<span class="comment">//æ— è®ºå“ªç§æƒ…å†µï¼Œé€šè¿‡afterå‡½æ•°çš„</span></div><div class="line">	<span class="built_in">window</span>.onload = ( <span class="built_in">window</span>.onload || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; ).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="built_in">document</span>.getElementsByTagName( <span class="string">'*'</span> ).length );</div><div class="line">	&#125;);</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨å¼€æ”¾-å°é—­åŸåˆ™å¾ˆå›°éš¾ï¼Œå…³é”®æ˜¯è¦æ‰¾åˆ°ç¨‹åºåœ¨å“ªé‡Œå‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¸æ˜¯ä¸€æœä¸€å¤•ä¹‹åŠŸã€‚æ‰€ä»¥é“ç†å¾ˆç®€å•ï¼Œä½†æ˜¯åº”ç”¨èµ·æ¥å¯èƒ½å¾ˆå›°éš¾ã€‚é•¿è·¯æ¼«æ¼«å•Šã€‚</p>
<p>è‡³æ­¤æœ¬äººåŸºæœ¬æŠŠjavascriptçš„æ¨¡å¼è®¾è®¡çš„å†…å®¹è¿‡äº†ä¸€éã€‚å¯ä»¥è¯´æ”¶è·è‰¯å¤šï¼Œå­¦åˆ°å¾ˆå¤šä¸œè¥¿ã€‚é˜…è¯»ä»£ç å’Œåˆ†æä»£ç çš„èƒ½åŠ›æœ‰äº†æé«˜ï¼Œå¥½åƒæ˜¯åœ¨NBAçš„èµ›åœºä¸Šï¼Œé€šè¿‡è§£è¯´å‘˜çš„ä¸€äº›æˆ˜æœ¯åˆ†æï¼Œæ…¢æ…¢çœ‹æ˜ç™½äº†ä¸€äº›è·‘ä½å’Œæˆ˜æœ¯ï¼Œå¯¹äºä¸€ä¸ªçƒè¿·æ¥è¯´åœ¨è¿™ç§æƒ…å†µä¸‹çœ‹æ¯”èµ›å°±ä¸å…‰å…‰æ˜¯çœ‹çƒ­é—¹äº†ï¼Œæ¯”èµ›æœ‰äº†æ›´æ·±å±‚æ¬¡çš„æ„ä¹‰ï¼Œæ­¤æ—¶çš„å¿ƒæƒ…å°±æ˜¯æœ‰æƒ³çœ‹æ›´å¤šæ¯”èµ›æ¥éªŒè¯ä¸‹ä¸€åœºæ¯”èµ›æ˜¯å¦ä¹Ÿä¼šå‡ºç°åŒæ ·çš„æˆ˜æœ¯ã€‚<br>ä½†è¿™ä¹Ÿåªæ˜¯ä¸€ä¸ªèµ·ç‚¹è€Œå·²ï¼Œè¿‡ä¸€å¹´è‚¯èƒ½ä¼šè§‰å¾—ç°åœ¨å†™çš„è¿™äº›æ–‡ç« å¾ˆå¹¼ç¨šå¾ˆå‚»æ¯”ã€‚å°±æ‹¿è¿™äº›å­¦ä¹ ç¬”è®°è®°å½•è¿™ä¸ªå‚»é€¼çš„è¿‡ç¨‹å§.</p>
<p>NBAå¸¸è§„èµ›ç»“æŸäº†ï¼Œè¿˜æœ‰å­£åèµ›å’Œä¸‹ä¸€èµ›å­£ç­‰ç€å‘¢ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptå·¥å‚æ¨¡å¼-XHRå·¥å‚]]></title>
      <url>http://yoursite.com/2017/03/11/javascript%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-XHR%E5%B7%A5%E5%8E%82/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/2044710-f56a2c10764090f7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/320" alt="s3398900.jpg"></p>
<blockquote>
<p>ä¸€ä¸ªç±»æˆ–å¯¹è±¡ä¸­å¾€å¾€åŒ…æ‹¬åˆ«çš„å¯¹è±¡ã€‚åœ¨åˆ›å»ºè¿™ç§æˆå‘˜å¯¹è±¡æ—¶ï¼Œä½ å¯èƒ½ä¹ æƒ¯äºä½¿ç”¨å¸¸è§„æ–¹å¼ï¼Œå³ç”¨newå…³é”®å­—å’Œç±»æ„é€ å‡½æ•°ã€‚é—®é¢˜æ˜¯è¿™æ ·ä¼šå¯¼è‡´ä¸¤ä¸ªç±»ä¹‹é—´äº§ç”Ÿä¾èµ–æ€§ã€‚é€šè¿‡å·¥å‚æ¨¡å¼å¯ä»¥æ¶ˆé™¤ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»–ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•æ¥å†³å®šç©¶ç«Ÿè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å‚ç…§ä¸Šå›¾é‚£æœ¬ä¹¦ï¼Œç¬¬7ç« å†…å®¹</p>
</blockquote>
<p>#####XHRå·¥å‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> AjaxHandler = <span class="keyword">new</span> Interface(<span class="string">'AjaxHandler'</span>, [<span class="string">'request'</span>, <span class="string">'createXhrObject'</span>]);</div><div class="line"></div><div class="line"><span class="comment">/* SimpleHandler class. */</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> SimpleHandler = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// implements AjaxHandler</span></div><div class="line">SimpleHandler.prototype = &#123;</div><div class="line">  <span class="comment">//requestå‡½æ•°è´Ÿè´£æ‰§è¡Œå‘å‡ºçš„è¯·æ±‚å’Œå¤„ç†ç›¸åº”ç»“æœæ‰€éœ€çš„ä¸€ç³»åˆ—æ“ä½œ</span></div><div class="line">  <span class="comment">//ä»–å…ˆä½¿ç”¨createXhrObject()å‡½æ•°å¹¶å¯¹å…¶è¿›è¡Œé…ç½®ï¼Œç„¶åå‘é€è¯·æ±‚</span></div><div class="line">  request: <span class="function"><span class="keyword">function</span>(<span class="params">method, url, callback, postVars</span>) </span>&#123;</div><div class="line">    <span class="comment">//é¦–æ¬¡è¿è¡Œæˆ–è€…æ˜¯æ²¡æœ‰è·å¾—XHRå¯¹è±¡æ—¶æ‰§è¡Œå…·ä½“çš„æ–¹æ³•ã€‚</span></div><div class="line">    <span class="comment">//ä¸€æ—¦è·å–äº†XHRå¯¹è±¡ï¼Œå°±ä¼šç¼“å­˜èµ·æ¥ï¼Œåç»­æ‰§è¡Œç›´æ¥ä»å˜é‡å¼•ç”¨ä¸­è·å–XHRå¯¹è±¡</span></div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">this</span>.createXhrObject();</div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span>(xhr.readyState !== <span class="number">4</span>) <span class="keyword">return</span>;</div><div class="line">      (xhr.status === <span class="number">200</span>) ? </div><div class="line">        callback.success(xhr.responseText, xhr.responseXML) : </div><div class="line">        callback.failure(xhr.status);</div><div class="line">    &#125;;</div><div class="line">    xhr.open(method, url, <span class="literal">true</span>);</div><div class="line">    <span class="keyword">if</span>(method !== <span class="string">'POST'</span>) postVars = <span class="literal">null</span>;</div><div class="line">    xhr.send(postVars);</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//createXhrObject()è¿™ä¸ªå·¥å‚æ–¹æ³•æ ¹æ®å½“å‰å…·ä½“ç¯å¢ƒè¿”å›ä¸€ä¸ªXHRå¯¹è±¡</span></div><div class="line">  <span class="comment">//é¦–æ¬¡æ‰§è¡Œæ—¶ï¼Œä»–ä¼šä¾æ¬¡å°è¯•æ‰§è¡Œä¸‰ç§ç”¨äºåˆ›å»ºXHRå¯¹è±¡çš„æ–¹æ³•ï¼Œä¸€æ—¦é‡åˆ°</span></div><div class="line">  <span class="comment">//ç®¡ç”¨çš„ï¼Œä»–å°±ä¼šè¿”å›æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼ŒåŒæ—¶æŠŠè‡ªå·±ä¹Ÿæ”¹ä¸ºè¿”å›çš„é‚£ä¸ªå¯¹è±¡</span></div><div class="line">  createXhrObject: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//å·¥å‚æ–¹æ³•.</span></div><div class="line">    <span class="keyword">var</span> methods = [<span class="comment">//ä¸‰ç§åˆ›å»ºXHRå¯¹è±¡çš„æ–¹æ³•ç»„æˆæ•°ç»„</span></div><div class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest(); &#125;,</div><div class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">'Msxml2.XMLHTTP'</span>); &#125;,</div><div class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>); &#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//ä¸‹é¢éå†æ•°ç»„æ–¹æ³•ï¼Œå°è¯•è·å¾—XHRå¯¹è±¡</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = methods.length; i &lt; len; i++) &#123;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        methods[i](); <span class="comment">//å°è¯•è·å¾—XHRå¯¹è±¡</span></div><div class="line">      &#125;</div><div class="line">      <span class="keyword">catch</span>(e) &#123;</div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// If we reach this point, method[i] worked.</span></div><div class="line">      <span class="comment">//å¦‚æœè¿è¡Œåˆ°è¿™é‡Œï¼Œæ•°ç»„ä¸­æœ‰æ–¹æ³•å¯ä»¥åˆ›å»ºXHRå¯¹è±¡</span></div><div class="line">      <span class="keyword">this</span>.createXhrObject = methods[i]; <span class="comment">//ç›´æ¥æŠŠå¯¹è±¡ç»™ç¬¬ä¸€ç§å¯ä»¥è·å–</span></div><div class="line"><span class="comment">//å¯¹è±¡çš„æ–¹æ³•ï¼Œç¼“å­˜èµ·æ¥      </span></div><div class="line">        <span class="keyword">return</span> methods[i];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// If we reach this point, none of the methods worked.</span></div><div class="line">    <span class="comment">//å¦‚æœè¿è¡Œåˆ°è¿™é‡Œï¼Œè¡¨ç¤ºæ²¡æœ‰æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼ŒæŠ›å‡ºé”™è¯¯</span></div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'SimpleHandler: Could not create an XHR object.'</span>);</div><div class="line">  &#125; </div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/* Usage. å…·ä½“çš„ä½¿ç”¨æ–¹æ³•*/</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> myHandler = <span class="keyword">new</span> SimpleHandler(); <span class="comment">//çœ‹ä¸åˆ°å·¥å‚åŒ–çš„è¿‡ç¨‹</span></div><div class="line"><span class="keyword">var</span> callback = &#123; </div><div class="line">  <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">responseText</span>) </span>&#123; alert(<span class="string">'Success: '</span> + responseText); &#125;, </div><div class="line">  <span class="attr">failure</span>: <span class="function"><span class="keyword">function</span>(<span class="params">statusCode</span>) </span>&#123; alert(<span class="string">'Failure: '</span> + statusCode); &#125; </div><div class="line">&#125;;</div><div class="line">myHandler.request(<span class="string">'GET'</span>, <span class="string">'script.php'</span>, callback);</div></pre></td></tr></table></figure>
<p>createXhrObject()è¿™ä¸ªå‡½æ•°å°±æ˜¯å¯¹è±¡å·¥å‚æ–¹æ³•ï¼Œç”±äºéœ€è¦è€ƒè™‘åˆ°ä¸åŒæµè§ˆå™¨å¯¹äºajaxå¯¹è±¡çš„å·®å¼‚æ€§ï¼Œåœ¨è·å–XHRå¯¹è±¡æ˜¯æœ‰æ ¹æ®ä¸åŒçš„æ¡ä»¶æ¥è¿›è¡Œã€‚ä½†æ˜¯è¿™ä¸ª<code>æ ¹æ®ä¸åŒæ¡ä»¶å®ä¾‹åŒ–XHRå¯¹è±¡çš„æ–¹æ³•</code>å’Œå®é™…çš„<code>ajaxè¯·æ±‚æ–¹æ³•</code>æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿‡ç¨‹ã€‚æ‰€ä»¥åœ¨è¿™é‡ŒæŠŠå®ä¾‹åŒ–XHRå¯¹è±¡çš„è¿‡ç¨‹å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡å·¥å‚é‡Œã€‚åœ¨ajaxæ–¹æ³•ä¸­åªéœ€è¦ä½¿ç”¨XHRå¯¹è±¡å°±å¯ä»¥äº†ã€‚ </p>
<p>ä¸¤ä¸ªç‹¬ç«‹çš„å¯¹è±¡ä¹‹é—´å®ç°äº†è§£è€¦å’Œã€‚å…¶å®åœ¨jsæ¨¡å¼è®¾è®¡ä¸­æ¯ç§æ¨¡å¼åŸºæœ¬éƒ½æ˜¯å›´ç»•åŠŸèƒ½çš„è§£è€¦å’Œæ¥å±•å¼€ã€‚è¦è§£å†³é—®é¢˜é¦–å…ˆè¦ç®€åŒ–é—®é¢˜ï¼Œåœ¨ç®€åŒ–è¿‡ç¨‹ä¸­æ‰èƒ½è¯†åˆ«å‡ºæ¨¡å¼ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptä¸­ä»‹è€…æ¨¡å¼-å’¸é±¼ç½‘çš„æ€è€ƒ]]></title>
      <url>http://yoursite.com/2017/03/11/javascript%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F-%E5%92%B8%E9%B1%BC%E7%BD%91%E7%9A%84%E6%80%9D%E8%80%83/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨å­—å…¸é‡Œï¼Œä¸­ä»‹è€…æ˜¯æŒ‡â€œååŠ©è°ˆåˆ¤å’Œè§£å†³å†²çªçš„ä¸­ç«‹æ–¹â€ã€‚åœ¨æ¨¡å¼è®¾è®¡é‡Œï¼Œä¸­ä»‹è€…æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬å…¬å¼€ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç³»ç»Ÿä¸åŒéƒ¨åˆ†å¯ä»¥é€šè¿‡è¯¥æ¥å£è¿›è¡Œé€šè®¯ã€‚<br>ä¹Ÿè®¸ä¸€ä¸ªå¯¹è±¡å¯ä»¥å’Œåä¸ªå¯¹è±¡ä¹‹é—´å‘ç”Ÿè”ç³»ï¼Œåä¸ªå¯¹è±¡ä¹‹é—´æœ‰å¯ä»¥å‘ç”Ÿç›¸äº’è”ç³»ï¼Œä»è€Œå½¢æˆä¸€å¼ å·¨å¤§çš„å…³ç³»ç½‘ï¼Œè¦æƒ³åœ¨è¿™ä¹ˆå¤æ‚çš„å…³ç³»ç½‘ä¸­ç†æ¸…å…³ç³»ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚<br>ä¸­ä»‹è€…æ¨¡å¼å°±æ˜¯è¦æŠŠå¯¹è±¡ä¹‹é—´çš„ç›¸äº’è€¦åˆå…³ç³»è§£é™¤ã€‚é€šè¿‡å¢åŠ ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å’Œä¸­ä»‹è€…å¯¹è±¡é€šè®¯ï¼Œå¯¹è±¡ä¹‹é—´ä¸ç›´æ¥å‘ç”Ÿè”ç³»ã€‚<br>ä¸­ä»‹è€…å¯¹è±¡æ˜¯çš„å¯¹è±¡ä¹‹é—´çš„ç½‘çŠ¶ç»“æ„å˜ä¸ºä¸€å¯¹å¤šçš„å…³ç³»ã€‚</p>
</blockquote>
<p>æ‹¿å’¸é±¼ç½‘æ¥è¯´ã€‚ä»¥å‰å¦‚æœæˆ‘ä»¬æœ‰é—²ç½®çš„ä¸œè¥¿ï¼Œå¯ä»¥åœ¨å°åŒºçš„è·¯ä¸Šæ‘†ä¸ªæ‘Šå­ï¼Œè¿™æ ·çœ‹åˆ°ä¸œè¥¿çš„é‚»å±…å¯èƒ½ä¼šæ¥ä¹°ã€‚å¯æ˜¯è¿™ç§å…³ç³»æ˜¯ååˆ†ä¸ç¨³å®šå’Œå¤æ‚çš„ï¼Œäº¤æ˜“å‘ç”Ÿéƒ½æœ‰å¶ç„¶æ€§ã€‚<br>å¦‚æœæˆ‘ä»¬æŠŠé—²ç½®å‘å¸ƒåˆ°å’¸é±¼ï¼Œé‚£ä¹ˆå‘å¸ƒè€…å’Œè´­ä¹°è€…ä¸ä¼šç›´æ¥å‘ç”Ÿè”ç³»ã€‚ä¹‹é—´çš„å…³ç³»éƒ½æ˜¯é€šè¿‡å’¸é±¼æ¥å®Œæˆçš„ã€‚è¿™æ ·çš„æ¨¡å¼å°±æ¯”ç›´æ¥äº¤æ˜“ä¾¿åˆ©çš„å¤šã€‚</p>
<p>å‚è€ƒã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ç¬¬14ç« ã€‚ã€Šjavascriptè®¾è®¡æ¨¡å¼ã€‹åŠ¨ç‰©ä¹¦ ç¬¬9ç« ã€‚9.6</p>
<p>çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­<br>è¿™æ˜¯ä¸€ä¸ªæ‰å¯¹å®æ€çš„æ¸¸æˆã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Player</span>(<span class="params"> name </span>)</span>&#123; <span class="comment">//ç©å®¶æ„é€ å‡½æ•°</span></div><div class="line">		<span class="keyword">this</span>.name = name <span class="comment">//ç©å®¶åå­—</span></div><div class="line">		<span class="keyword">this</span>.enemy = <span class="literal">null</span>; <span class="comment">// æ•Œäºº</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Player.prototype.win = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//è·èƒœå‡½æ•°</span></div><div class="line">		<span class="built_in">console</span>.log( <span class="keyword">this</span>.name + <span class="string">' won '</span> );</div><div class="line">	&#125;;</div><div class="line">	Player.prototype.lose = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//å¤±è´¥å‡½æ•°</span></div><div class="line">		<span class="built_in">console</span>.log( <span class="keyword">this</span>.name +<span class="string">' lost'</span> );</div><div class="line">	&#125;;</div><div class="line">	Player.prototype.die = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//å¤±è´¥å‡½æ•°</span></div><div class="line">		<span class="keyword">this</span>.lose();</div><div class="line">		<span class="keyword">this</span>.enemy.win();</div><div class="line">	&#125;;</div><div class="line">	<span class="comment">//æ¥ä¸‹æ¥åˆ›å»º2 ä¸ªç©å®¶å¯¹è±¡ï¼š</span></div><div class="line">	<span class="keyword">var</span> player1 = <span class="keyword">new</span> Player( <span class="string">'çš®è›‹'</span> );</div><div class="line">	<span class="keyword">var</span> player2 = <span class="keyword">new</span> Player( <span class="string">'å°ä¹–'</span> );</div><div class="line">	<span class="comment">//ç»™ç©å®¶ç›¸äº’è®¾ç½®æ•Œäººï¼š</span></div><div class="line">	player1.enemy = player2;</div><div class="line">	player2.enemy = player1;</div><div class="line"></div><div class="line">	player1.die();<span class="comment">// è¾“å‡ºï¼šçš®è›‹ lostã€å°ä¹– won</span></div></pre></td></tr></table></figure></p>
<p>è¿™æ ·ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„ç›¸äº’ä½œç”¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚<br>å½“å¢åŠ ç©å®¶ç»„é˜Ÿçš„æ—¶å€™ï¼Œå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œçœ‹çœ‹ä¾ç…§ä¸Šé¢çš„æ€è·¯çš„ä»£ç <br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> players = []; <span class="comment">//ç©å®¶çš„æ•°ç»„ï¼Œä½¿ç”¨çš„æ—¶å€™æ˜¯äºŒç»´æ•°ç»„ï¼Œä¸€ç»´æ˜¯é˜Ÿé¢œè‰²</span></div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">Player</span></span>( name, teamColor )&#123;<span class="comment">//æ„é€ å‡½æ•°</span></div><div class="line">		<span class="built_in">this</span>.partners = []; <span class="comment">// é˜Ÿå‹åˆ—è¡¨</span></div><div class="line">		<span class="built_in">this</span>.enemies = []; <span class="comment">// æ•Œäººåˆ—è¡¨</span></div><div class="line">		<span class="built_in">this</span>.state = <span class="string">'live'</span>; <span class="comment">// ç©å®¶çŠ¶æ€</span></div><div class="line">		<span class="built_in">this</span>.name = name; <span class="comment">// è§’è‰²åå­—</span></div><div class="line">		<span class="built_in">this</span>.teamColor = teamColor; <span class="comment">// é˜Ÿä¼é¢œè‰²</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Player.prototype.win = <span class="function"><span class="keyword">function</span></span>()&#123; <span class="comment">// ç©å®¶å›¢é˜Ÿèƒœåˆ©</span></div><div class="line">		console.log( <span class="string">'winner: '</span> + <span class="built_in">this</span>.name );</div><div class="line">	&#125;;</div><div class="line">	Player.prototype.lose = <span class="function"><span class="keyword">function</span></span>()&#123; <span class="comment">// ç©å®¶å›¢é˜Ÿå¤±è´¥</span></div><div class="line">		console.log( <span class="string">'loser: '</span> + <span class="built_in">this</span>.name );</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Player.prototype.die = <span class="function"><span class="keyword">function</span></span>()&#123; <span class="comment">// ç©å®¶æ­»äº¡</span></div><div class="line">		<span class="keyword">var</span> all_dead = <span class="literal">true</span>;</div><div class="line"></div><div class="line">		<span class="built_in">this</span>.state = <span class="string">'dead'</span>; <span class="comment">// è®¾ç½®ç©å®¶çŠ¶æ€ä¸ºæ­»äº¡ï¼Œæ ‡è®°å˜é‡</span></div><div class="line">		<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, partner; partner = <span class="built_in">this</span>.partners[ i++ ]; )&#123; </div><div class="line">      <span class="comment">// éå†é˜Ÿå‹åˆ—è¡¨</span></div><div class="line">			<span class="keyword">if</span> ( partner.state !== <span class="string">'dead'</span> )&#123; </div><div class="line">    <span class="comment">// å¦‚æœè¿˜æœ‰ä¸€ä¸ªé˜Ÿå‹æ²¡æœ‰æ­»äº¡ï¼Œåˆ™æ¸¸æˆè¿˜æœªå¤±è´¥</span></div><div class="line">				all_dead = <span class="literal">false</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> ( all_dead === <span class="literal">true</span> )&#123; <span class="comment">// å¦‚æœé˜Ÿå‹å…¨éƒ¨æ­»äº¡</span></div><div class="line">			<span class="built_in">this</span>.lose(); <span class="comment">// é€šçŸ¥è‡ªå·±æ¸¸æˆå¤±è´¥</span></div><div class="line">			<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, partner; partner = <span class="built_in">this</span>.partners[ i++ ]; )&#123;</div><div class="line"> <span class="comment">// é€šçŸ¥æ‰€æœ‰é˜Ÿå‹ç©å®¶æ¸¸æˆå¤±è´¥</span></div><div class="line">				partner.lose();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, enemy; enemy = <span class="built_in">this</span>.enemies[ i++ ]; )&#123;</div><div class="line"> <span class="comment">// é€šçŸ¥æ‰€æœ‰æ•Œäººæ¸¸æˆèƒœåˆ©</span></div><div class="line">				enemy.win();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line"></div><div class="line">	<span class="keyword">var</span> playerFactory = <span class="function"><span class="keyword">function</span></span>( name, teamColor )&#123;<span class="comment">//ç©å®¶å¯¹è±¡å·¥å‚</span></div><div class="line">		<span class="keyword">var</span> <span class="keyword">new</span><span class="type">Player</span> = <span class="keyword">new</span> <span class="type">Player</span>( name, teamColor ); </div><div class="line"><span class="comment">// åˆ›å»ºæ–°ç©å®¶</span></div><div class="line">		<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, player; player = players[ i++ ]; )&#123;</div><div class="line"> <span class="comment">// é€šçŸ¥æ‰€æœ‰çš„ç©å®¶ï¼Œæœ‰æ–°è§’è‰²åŠ å…¥</span></div><div class="line">			<span class="keyword">if</span> ( player.teamColor === <span class="keyword">new</span><span class="type">Player</span>.teamColor )&#123; </div><div class="line"><span class="comment">// å¦‚æœæ˜¯åŒä¸€é˜Ÿçš„ç©å®¶</span></div><div class="line">				player.partners.push( <span class="keyword">new</span><span class="type">Player</span> ); </div><div class="line"><span class="comment">// ç›¸äº’æ·»åŠ åˆ°é˜Ÿå‹åˆ—è¡¨</span></div><div class="line">				<span class="keyword">new</span><span class="type">Player</span>.partners.push( player );</div><div class="line">			&#125;<span class="keyword">else</span>&#123;</div><div class="line">				player.enemies.push( <span class="keyword">new</span><span class="type">Player</span> ); </div><div class="line"><span class="comment">// ç›¸äº’æ·»åŠ åˆ°æ•Œäººåˆ—è¡¨</span></div><div class="line">				<span class="keyword">new</span><span class="type">Player</span>.enemies.push( player );</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		players.push( <span class="keyword">new</span><span class="type">Player</span> );</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span><span class="type">Player</span>;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="comment">//çº¢é˜Ÿï¼š4ä¸ªç©å®¶</span></div><div class="line">	<span class="keyword">var</span> player1 = playerFactory( <span class="string">'çš®è›‹'</span>, <span class="string">'red'</span> ),</div><div class="line">	player2 = playerFactory( <span class="string">'å°ä¹–'</span>, <span class="string">'red'</span> ),</div><div class="line">	player3 = playerFactory( <span class="string">'å®å®'</span>, <span class="string">'red'</span> ),</div><div class="line">	player4 = playerFactory( <span class="string">'å°å¼º'</span>, <span class="string">'red'</span> );</div><div class="line">	<span class="comment">//è“é˜Ÿï¼š4ä¸ªç©å®¶</span></div><div class="line">	<span class="keyword">var</span> player5 = playerFactory( <span class="string">'é»‘å¦'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player6 = playerFactory( <span class="string">'è‘±å¤´'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player7 = playerFactory( <span class="string">'èƒ–å¢©'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player8 = playerFactory( <span class="string">'æµ·ç›—'</span>, <span class="string">'blue'</span> );</div><div class="line"></div><div class="line">	player1.die();</div><div class="line">	player2.die();</div><div class="line">	player4.die();</div><div class="line">	player3.die();</div></pre></td></tr></table></figure></p>
<blockquote>
<p>ä»¥ä¸Šçš„ä»£ç å°±æœ‰ç‚¹å¤æ‚äº†ã€‚å½“ç©å®¶å¤±è´¥(æ­»äº¡)ä»¥åè¦éå†å…¶ä»–é˜Ÿå‹ç­‰ç­‰ã€‚åŠ å…¥é˜Ÿä¼çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œè¦ç›¸äº’ç¡®è®¤ã€‚é˜Ÿå‹ä¹‹é—´çš„ç›¸äº’äº¤å‰å˜åŒ–å¾ˆéº»çƒ¦ã€‚</p>
</blockquote>
<p>ä¸‹é¢çœ‹çœ‹ä¸­ä»‹è€…æ¨¡å¼æ”¹é€ çš„ä»£ç ã€‚<br>é‡è¦çš„æ˜¯æ·»åŠ äº†playerDirectorè¿™ä¸ªä¸­ä»‹è€…å¯¹è±¡ã€‚<br>playerDirectorä¸­ä»‹è€…å¯¹è±¡ä¸­æ·»åŠ æ¥å£ï¼ŒreceiveMessage()é€šçŸ¥ä¸­ä»‹è€…æ¥è¿›è¡Œç›¸å…³æ“ä½œã€‚å¯ä»¥å…ˆåœ¨ä¸­ä»‹è€…å¯¹è±¡ä¸­çœ‹çœ‹è¿™ä¸ªæ–¹æ³•<br>reciveMessage( â€˜playerDeadâ€™, this )ï¼›ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é€šçŸ¥ä¸­ä»‹è€…çš„æ–¹æ³•ã€‚ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åˆ›å»ºçš„ç©å®¶å¯¹è±¡ã€‚<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line">  <span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>ä¸­ä»‹è€…æ¨¡å¼<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>/</span></span></div><div class="line"> function Player( name, teamColor )&#123;<span class="comment">//æ„é€ å‡½æ•°</span></div><div class="line">		<span class="keyword">this</span>.name = name; <span class="comment">// è§’è‰²åå­—</span></div><div class="line">		<span class="keyword">this</span>.teamColor = teamColor; <span class="comment">// é˜Ÿä¼é¢œè‰²ï¼Œç©å®¶æ•°ç»„çš„ç¬¬ä¸€ç»´</span></div><div class="line">		<span class="keyword">this</span>.state = <span class="string">'alive'</span>; <span class="comment">// ç©å®¶ç”Ÿå­˜çŠ¶æ€</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Player.prototype.win = function()&#123;<span class="comment">//èƒœåˆ©</span></div><div class="line">		console.log( <span class="keyword">this</span>.name + <span class="string">' won '</span> );</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Player.prototype.lose = function()&#123; <span class="comment">//å¤±è´¥</span></div><div class="line">		console.log( <span class="keyword">this</span>.name +<span class="string">' lost'</span> );</div><div class="line">	&#125;;</div><div class="line">	<span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">****ç©å®¶æ­»äº¡**</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>/</span></span></div><div class="line">	Player.prototype.die = function()&#123;</div><div class="line">		<span class="keyword">this</span>.state = <span class="string">'dead'</span>;</div><div class="line">		playerDirector.reciveMessage( <span class="string">'playerDead'</span>, <span class="keyword">this</span> ); </div><div class="line">              <span class="comment">// ç»™ä¸­ä»‹è€…å‘é€æ¶ˆæ¯ï¼Œç©å®¶æ­»äº¡</span></div><div class="line">	&#125;;</div><div class="line">	<span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">****ç§»é™¤ç©å®¶**</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>/</span></span></div><div class="line">	Player.prototype.remove = function()&#123;</div><div class="line">		playerDirector.reciveMessage( <span class="string">'removePlayer'</span>, <span class="keyword">this</span> );     </div><div class="line">               <span class="comment">// ç»™ä¸­ä»‹è€…å‘é€æ¶ˆæ¯ï¼Œç§»é™¤ä¸€ä¸ªç©å®¶</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">****ç©å®¶æ¢é˜Ÿ**</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>/</span></span></div><div class="line">	Player.prototype.changeTeam = function( color )&#123;</div><div class="line">		playerDirector.reciveMessage( <span class="string">'changeTeam'</span>, <span class="keyword">this</span>, color );     </div><div class="line">          <span class="comment">// ç»™ä¸­ä»‹è€…å‘é€æ¶ˆæ¯ï¼Œç©å®¶æ¢é˜Ÿ</span></div><div class="line">	&#125;;</div><div class="line">       </div><div class="line">	<span class="keyword">var</span> playerDirector= ( function()&#123; <span class="comment">//ä¸­ä»‹è€…æ„é€ å‡½æ•°</span></div><div class="line">		<span class="keyword">var</span> players = &#123;&#125;, <span class="comment">// ä¿å­˜æ‰€æœ‰ç©å®¶</span></div><div class="line">			operations = &#123;&#125;; <span class="comment">// ä¸­ä»‹è€…å¯ä»¥æ‰§è¡Œçš„æ“ä½œ</span></div><div class="line">		<span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">*æ–°å¢ä¸€ä¸ªç©å®¶*</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*/</span></span></div><div class="line">		operations.addPlayer = function( player )&#123;</div><div class="line">			<span class="keyword">var</span> teamColor = player.teamColor; <span class="comment">// ç©å®¶çš„é˜Ÿä¼é¢œè‰²</span></div><div class="line">			players[ teamColor ] = players[ teamColor ] || []; </div><div class="line">                   <span class="comment">// å¦‚æœè¯¥é¢œè‰²çš„ç©å®¶è¿˜æ²¡æœ‰æˆç«‹é˜Ÿä¼ï¼Œåˆ™åˆ›å»º</span></div><div class="line"></div><div class="line">			players[ teamColor ].push( player ); <span class="comment">// æ·»åŠ ç©å®¶è¿›é˜Ÿä¼</span></div><div class="line">		&#125;;</div><div class="line"><span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">*ç§»é™¤ä¸€ä¸ªç©å®¶*</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*/</span></span></div><div class="line">	operations.removePlayer = function( player )&#123;</div><div class="line">		<span class="keyword">var</span> teamColor = player.teamColor, <span class="comment">// ç©å®¶çš„é˜Ÿä¼é¢œè‰²</span></div><div class="line">		teamPlayers = players[ teamColor ] || []; <span class="comment">// è¯¥é˜Ÿä¼æ‰€æœ‰æˆå‘˜</span></div><div class="line">		<span class="keyword">for</span> ( <span class="keyword">var</span> i = teamPlayers.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- )&#123; <span class="comment">// éå†åˆ é™¤</span></div><div class="line">			<span class="keyword">if</span> ( teamPlayers[ i ] === player )&#123;</div><div class="line">				teamPlayers.splice( i, <span class="number">1</span> );</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"><span class="comment"><span class="markdown">/<span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">*ç©å®¶æ¢é˜Ÿ*</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*/</span></span></div><div class="line">	operations.changeTeam = function( player, newTeamColor )&#123; <span class="comment">// ç©å®¶æ¢é˜Ÿ</span></div><div class="line">		operations.removePlayer( player ); <span class="comment">// ä»åŸé˜Ÿä¼ä¸­åˆ é™¤</span></div><div class="line">		player.teamColor = newTeamColor; <span class="comment">// æ”¹å˜é˜Ÿä¼é¢œè‰²</span></div><div class="line">		operations.addPlayer( player ); <span class="comment">// å¢åŠ åˆ°æ–°é˜Ÿä¼ä¸­</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	operations.playerDead = function( player )&#123; <span class="comment">// ç©å®¶æ­»äº¡</span></div><div class="line">		<span class="keyword">var</span> teamColor = player.teamColor,</div><div class="line">		teamPlayers = players[ teamColor ]; <span class="comment">// ç©å®¶æ‰€åœ¨é˜Ÿä¼</span></div><div class="line">		<span class="keyword">var</span> all_dead = <span class="keyword">true</span>;</div><div class="line">		<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, player; player = teamPlayers[ i++ ]; )&#123;</div><div class="line">			<span class="keyword">if</span> ( player.state !== <span class="string">'dead'</span> )&#123;</div><div class="line">				all_dead = <span class="keyword">false</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> ( all_dead === <span class="keyword">true</span> )&#123; <span class="comment">// å…¨éƒ¨æ­»äº¡</span></div><div class="line">			<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, player; player = teamPlayers[ i++ ]; )&#123;</div><div class="line">				player.lose(); <span class="comment">// æœ¬é˜Ÿæ‰€æœ‰ç©å®¶lose</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">for</span> ( <span class="keyword">var</span> color <span class="keyword">in</span> players )&#123;</div><div class="line">				<span class="keyword">if</span> ( color !== teamColor )&#123;</div><div class="line">					<span class="keyword">var</span> teamPlayers = players[ color ]; </div><div class="line">                                         <span class="comment">// å…¶ä»–é˜Ÿä¼çš„ç©å®¶</span></div><div class="line">					<span class="keyword">for</span> ( <span class="keyword">var</span> i = <span class="number">0</span>, player; player = teamPlayers[ i++ ]; )&#123;</div><div class="line">						player.win(); <span class="comment">// å…¶ä»–é˜Ÿä¼æ‰€æœ‰ç©å®¶win</span></div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">         </div><div class="line">	   <span class="keyword">var</span> reciveMessage = function()&#123;</div><div class="line">            <span class="comment">//è¢«ä¸­ä»‹è€…ä¸­ä½¿ç”¨é€šçŸ¥ä¸­ä»‹è€…çš„æ–¹æ³•</span></div><div class="line">		<span class="keyword">var</span> message = Array.prototype.shift.call( arguments ); <span class="comment">// arguments çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¶ˆæ¯åç§°</span></div><div class="line">		operations[ message ].apply( <span class="keyword">this</span>, arguments );</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		reciveMessage: reciveMessage<span class="comment">//æ­ç¤ºæ¨¡å¼çš„æ–¹æ³•</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;)();</div><div class="line"></div><div class="line">	<span class="comment">// çº¢é˜Ÿï¼š</span></div><div class="line">	<span class="keyword">var</span> player1 = playerFactory( <span class="string">'çš®è›‹'</span>, <span class="string">'red'</span> ),</div><div class="line">	player2 = playerFactory( <span class="string">'å°ä¹–'</span>, <span class="string">'red'</span> ),</div><div class="line">	player3 = playerFactory( <span class="string">'å®å®'</span>, <span class="string">'red'</span> ),</div><div class="line">	player4 = playerFactory( <span class="string">'å°å¼º'</span>, <span class="string">'red'</span> );</div><div class="line">	<span class="comment">// è“é˜Ÿï¼š</span></div><div class="line">	<span class="keyword">var</span> player5 = playerFactory( <span class="string">'é»‘å¦'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player6 = playerFactory( <span class="string">'è‘±å¤´'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player7 = playerFactory( <span class="string">'èƒ–å¢©'</span>, <span class="string">'blue'</span> ),</div><div class="line">	player8 = playerFactory( <span class="string">'æµ·ç›—'</span>, <span class="string">'blue'</span> );</div><div class="line">	player1.die();</div><div class="line">	player2.die();</div><div class="line">	player3.die();</div><div class="line">	player4.die();</div><div class="line"></div><div class="line">	player1.remove();</div><div class="line">	player2.remove();</div><div class="line">	player3.die();</div><div class="line">	player4.die();</div><div class="line"></div><div class="line">	player1.changeTeam( <span class="string">'blue'</span> );</div><div class="line">	player2.die();</div><div class="line">	player3.die();</div><div class="line">	player4.die();</div></pre></td></tr></table></figure></p>
<p>ä¸­ä»‹è€…æ¨¡å¼ä¸­ï¼Œä½¿ç”¨è€…ä¹‹é—´æ˜¯ä¸å‘ç”Ÿä»»ä½•å…³ç³»çš„ã€‚å‘ç”Ÿä»»ä½•çš„æ“ä½œéƒ½æ˜¯é€šçŸ¥ä¸­ä»‹è€…ã€‚ä¸­ä»‹è€…å†é€šçŸ¥å…¶ä»–ä½¿ç”¨è€…ã€‚<br>ä½¿ç”¨è€…ä¹‹é—´çš„è€¦åˆè§£é™¤äº†ã€‚</p>
<p>æ•°ç»„çš„ä½¿ç”¨ä¸Šçµæ´»åº¦å¾ˆå¤§è¦æ³¨æ„ï¼Œå…¶ä»–çš„åœ°æ–¹è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p>
<p>æˆ‘æ„Ÿè§‰reactç»„ä»¶å’Œreduxæ¨¡å—çš„ç›¸äº’å…³ç³»å°±æ˜¯ä¸­ä»‹è€…æ¨¡å¼ï¼Œæ‚¨è§‰å¾—å‘¢ï¼Ÿ</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptå‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/10/javascript%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è¿™ä¸ªæ¨¡å¼çœ‹äº†å¾ˆé•¿æ—¶é—´ï¼Œå¡åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œå…¶ä»–çš„æ¨¡å¼ä¸ºäº†ç®€åŒ–ç¼–ç¨‹çš„å¤æ‚æ€§ï¼Œéƒ½æ˜¯é¼“åŠ±å‡½æ•°æˆ–è€…å¯¹è±¡é—´<code>è§£è€¦å’Œ</code>çš„ï¼Œä½†æ˜¯å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼è™½ç„¶å‘å¸ƒè€…å’Œè®¢é˜…è€…å¯¹è±¡åˆ†å¼€äº†ï¼Œä½†æ˜¯ä¹‹é—´çš„ä¾èµ–å…³ç³»åè€Œæ›´å¼ºäº†ã€‚ </p>
</blockquote>
<p><em>å…³é”®ç‚¹</em>ï¼š1.è®¢é˜…è€…åœ¨è®¢é˜…äº‹ä»¶çš„æ—¶å€™å®é™…æ˜¯åœ¨å‘å¸ƒè€…å¯¹è±¡çš„æ•°ç»„ä¸­å†™å…¥è¦è®¢é˜…çš„äº‹ä»¶ã€‚ 2.å‘å¸ƒè€…åœ¨å‘å¸ƒæˆ–è€…å«triggeräº‹ä»¶çš„æ—¶å€™ï¼Œå®é™…æ˜¯åœ¨å‘å¸ƒè€…ä¸­éå†æ•°ç»„ä¸­è®¢é˜…è€…çš„äº‹ä»¶æ–¹æ³•ã€‚<code>æ¶‰åŠçš„æ˜¯æ¶ˆæ¯æ•°ç»„çš„å†™å…¥å’Œéå†è¯»å‡ºè¿‡ç¨‹</code>ã€‚</p>
<p>å¦å¤–ä¸€ç‚¹å°±æ˜¯ï¼Œç”±äºjavascriptçš„å‡½æ•°ä¸€ç±»å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ•°ç»„ï¼Œè¿™æ ·å’‹å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ä¸­æ“ä½œèµ·æ¥ç›¸å½“çš„æ–¹ä¾¿ï¼ŒjsçœŸæ˜¯å‰å®³ã€‚</p>
<p>å…³äºå‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«æˆ‘æ²¡ææ‡‚ã€‚è¿™é‡Œçš„ä¾‹å­æˆ–è®¸æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ–è®¸æ˜¯å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ã€‚</p>
<blockquote>
<p>å‚è€ƒ ã€Šjavascriptè®¾è®¡æ¨¡å¼ã€‹<code>pro javascript design patterns</code> ç¬¬åäº”ç« </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//å‘å¸ƒè€…æ„é€ å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Publisher</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.subscribers = []; <span class="comment">//è®¢é˜…å’Œå‘å¸ƒéƒ½æ˜¯å›´ç»•è¿™ä¸ªæ•°ç»„è¿›é¡¹</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//æ‰§è¡Œå‘å¸ƒçš„æ–¹æ³•ï¼Œéå†è®¢é˜…è€…å¯¹æ–¹æ³•</span></div><div class="line">Publisher.prototype.deliver = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.subscribers.forEach(</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">      fn(data);</div><div class="line">    &#125;</div><div class="line">  );</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//è®¢é˜…çš„æ–¹æ³•ï¼Œè®¢é˜…è€…å¯¹è±¡å†™å…¥subscribersæ•°ç»„</span></div><div class="line"><span class="comment">//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•æŒ‚è½½åœ¨FunctionåŸå‹ä¸Š</span></div><div class="line"><span class="built_in">Function</span>.prototype.subscribe = <span class="function"><span class="keyword">function</span>(<span class="params">publisher</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">  <span class="keyword">var</span> alreadyExists = publisher.subscribers.some(</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> ( el === that ) &#123; <span class="comment">//å¦‚æœå·²ç»è®¢é˜…çš„è¯ï¼Œç«‹å³è¿”å›</span></div><div class="line">        <span class="keyword">return</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  );</div><div class="line">  <span class="keyword">if</span> ( !alreadyExists ) &#123; <span class="comment">//è®¢é˜…è€…çš„è®¢é˜…å¯¹è±¡æ’å…¥æ•°ç»„</span></div><div class="line">    publisher.subscribers.push(<span class="keyword">this</span>);<span class="comment">//æ³¨æ„å‘½åç©ºé—´</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//å–æ¶ˆè®¢é˜…çš„æ–¹æ³•</span></div><div class="line"><span class="built_in">Function</span>.prototype.unsubscribe = <span class="function"><span class="keyword">function</span>(<span class="params">publisher</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">  publisher.subscribers = publisher.subscribers.filter(</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> ( el !== that ) &#123; <span class="comment">//å¦‚æœæ˜¯è®¢é˜…å¯¹è±¡å°±è¿‡æ»¤æ‰</span></div><div class="line">        <span class="keyword">return</span> el;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  );</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> publisherObject = <span class="keyword">new</span> Publisher;<span class="comment">//å‘å¸ƒè€…å¯¹è±¡</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> observerObject = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;<span class="comment">//è®¢é˜…è€…å¯¹è±¡ </span></div><div class="line">  <span class="comment">// process data</span></div><div class="line">  <span class="built_in">console</span>.log(data);</div><div class="line">  <span class="comment">// unsubscribe from this publisher</span></div><div class="line">  <span class="built_in">arguments</span>.callee.unsubscribe(publisherObject);</div><div class="line">  <span class="comment">//åœ¨è®¢é˜…å¯¹è±¡ä¸­å–æ¶ˆè®¢é˜…ï¼Œå…¶å®å°±æ˜¯åªæ‰§è¡Œä¸€æ¬¡å‘å¸ƒæ“ä½œ</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">observerObject.subscribe(publisherObject);  </div><div class="line"><span class="comment">//æ‰§è¡Œè®¢é˜…ï¼Œæ³¨æ„è¿™ä¸ªè®¢é˜…æ–¹æ³•æŒ‚è½½çš„åŸå‹ï¼Œæˆ‘å¼€å§‹ææ··äº†ï¼Œä»¥ä¸ºä»£ç æœ‰é”™</span></div></pre></td></tr></table></figure>
<blockquote>
<p>jsçš„æ•°ç»„æ“ä½œå’Œé«˜é˜¶å‡½æ•°çš„ç‰¹æ€§ä½¿å¾—å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼å¾ˆå¥½å®ç°ã€‚<br>  è¿™ä¸ªæ¨¡å¼æˆ‘åœ¨react/reduxçš„æ•°æ®æµç¨‹ä¸­è§‰å¾—æ˜¯æœ‰çš„ï¼Œä½†æ˜¯åè€Œåœ¨æ¨¡å¼å­¦ä¹ ä¸­æ˜¯æœ€éš¾çš„ã€‚è§£è€¦å’Œä¹Ÿä¸æ˜¯ç»å¯¹çš„ä¸€ç‚¹è”ç³»éƒ½æ²¡æœ‰ï¼Œå…³ç³»æ˜¯<code>è—•æ–­ä¸è¿</code>ï¼Œè¦çœ‹åˆ°æ–­å¼€çš„<code>ä¸¤èŠ‚è—•</code>ï¼Œè¿˜è¦çœ‹åˆ°ä¹‹é—´çš„çš„<code>ä¸</code>.react/reduxçš„å­¦ä¹ ä¸­å°±è¦æ‰¾åˆ°è¿™å±‚å…³ç³»ã€‚</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascripté€‚é…å™¨æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/10/javascript%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸ºäº†è§£å†³è½¯ä»¶å®ä½“é—´çš„æ¥å£ä¸å…¼å®¹æ€§ã€‚ä½¿ç”¨é€‚é…å™¨ä»¥ååŸæœ¬ä¸å…¼å®¹çš„ä¸¤ä¸ªè½¯ä»¶çš„æ¥å£å¯ä»¥å·¥ä½œåœ¨ä¸€èµ·äº†ã€‚<br>å®—æ—¨æ˜¯ä¸è¦æ”¹å˜åŸè½¯ä»¶æ¥å£çš„ç¨‹åºä»£ç ï¼Œåœ¨å¤–éƒ¨ä½¿ç”¨é€‚é…å™¨å¯¹æ•°æ®ç»“æ„åšè°ƒæ•´ã€‚<br>å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ç¬¬17ç« </p>
</blockquote>
<p>ç¬¬ä¸€æ®µä»£ç ï¼Œä¸¤ä¸ªåœ°å›¾æ¥å£ä¹‹é—´çš„é€‚é…</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> googleMap = &#123;</div><div class="line">		<span class="attr">show</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)æ–¹æ³•æ˜¯<span class="title">show</span></span></div><div class="line">			<span class="title">console</span>.<span class="title">log</span>(<span class="params"> <span class="string">'å¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾'</span> </span>);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="title">var</span> <span class="title">baiduMap</span> = &#123;</div><div class="line">		display: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ–¹æ³•æ˜¯display</span></div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'å¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> baiduMapAdapter = &#123;</div><div class="line">		<span class="attr">show</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//é€‚é…å™¨ä¹Ÿæ”¹ä¸ºshow,è¿”å›çš„æ˜¯display</span></div><div class="line">			<span class="keyword">return</span> baiduMap.display();</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="comment">//ä¸‹é¢æ˜¯æ¸²æŸ“åœ°å›¾çš„æ–¹æ³•ï¼Œä¼ å…¥åœ°å›¾å¯¹è±¡</span></div><div class="line">	<span class="keyword">var</span> renderMap = <span class="function"><span class="keyword">function</span>(<span class="params"> map </span>)</span>&#123;<span class="comment">//ä¼ å…¥åœ°å›¾å¯¹è±¡</span></div><div class="line">		<span class="keyword">if</span> ( map.show <span class="keyword">instanceof</span> <span class="built_in">Function</span> )&#123; <span class="comment">//åˆ¤æ–­</span></div><div class="line">			map.show();  <span class="comment">//åœ°å›¾å¯¹è±¡çš„showæ–¹æ³•</span></div><div class="line">			<span class="comment">//åœ¨ä¼ å…¥baiduMapAdapterå¯¹è±¡çš„æ—¶å€™ï¼Œè°ƒç”¨showæ–¹æ³•ï¼Œè¿”å›çš„</span></div><div class="line">			<span class="comment">//å®é™…æ˜¯baiduMapçš„displayæ–¹æ³•ã€‚</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	renderMap( googleMap ); <span class="comment">// è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾</span></div><div class="line">	renderMap( baiduMapAdapter ); <span class="comment">// è¾“å‡ºï¼šå¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾ </span></div><div class="line"> </div><div class="line"> <span class="string">``</span><span class="string">`   </span></div><div class="line">	</div><div class="line">	</div><div class="line">	</div><div class="line">æ•°æ®ç»“æ„å¦‚æœä¸åŒï¼Œä¹Ÿå¯ä»¥ä¸è¦æ”¹åŠ¨APIçš„è¾“å‡ºä»£ç ï¼Œåªæ”¹åŠ¨è¾“å‡ºä»¥åçš„æ•°æ®å‘ˆç°ç»“æ„</div></pre></td></tr></table></figure>
<p> //å…¶ä¸­ä¸€ä¸ªAPIè¿”å›çš„æ•°æ®<br> var getGuangdongCity = function(){<br>        var guangdongCity = [<br>        {<br>            name: â€˜shenzhenâ€™,<br>            id: 11,<br>        }, {<br>            name: â€˜guangzhouâ€™,<br>            id: 12,<br>        }<br>        ];<br>        return guangdongCity;<br>    };<br>    var render = function( fn ){<br>        console.log( â€˜å¼€å§‹æ¸²æŸ“å¹¿ä¸œçœåœ°å›¾â€™ );<br>        document.write( JSON.stringify( fn() ) );<br>    };<br>    render( getGuangdongCity );</p>
<pre><code>//å¦ä¸€ä¸ªapiè·å¾—çš„æ•°æ®
var guangdongCity = {
    shenzhen: 11,
    guangzhou: 12,
    zhuhai: 13
};

//è¿™ä¸¤ä¸ªAPIè¿”å›çš„æ•°æ®ä¸åŒï¼Œä¸éœ€è¦æ”¹åŠ¨APIçš„è¾“å‡ºä»£ç ï¼Œè¦åœ¨è¾“
</code></pre><p>//å‡ºä»¥ååšé€‚é…ã€‚ æˆ‘ä»¬è‡ªå·±çš„APIå¯ä»¥æ”¹åŠ¨ï¼Œä½†æ˜¯å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹çš„APIå°±<br>//æ²¡æœ‰åŠæ³•è¦æ±‚æ”¹åŠ¨è¾“å‡ºç»“æ„ã€‚æ‰€ä»¥æœ€å¥½æ˜¯åšé€‚é…ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½å¾ˆå¤æ‚ï¼Œè¿™é‡Œåªæ˜¯è¯´æ˜æœ‰è¿™ä¸ªæ€è·¯ã€‚</p>
<pre><code><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//new data</span></div><div class="line">  <span class="built_in">var</span> guangdongCity = &#123;</div><div class="line">	<span class="attribute">shenzhen</span>: <span class="number">11</span>,</div><div class="line">	<span class="attribute">guangzhou</span>: <span class="number">12</span>,</div><div class="line">	<span class="attribute">zhuhai</span>: <span class="number">13</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//æŒ‰ç…§éœ€è¦æŠŠä¸‹é¢çš„è¾“å‡ºæ ¼å¼æ”¹ä¸ºä¸Šé¢ä»£ç é‡Œçš„æ ¼å¼</span></div><div class="line"><span class="comment">//old data</span></div><div class="line"><span class="built_in">var</span> getGuangdongCity = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">var</span> guangdongCity = [</div><div class="line">	&#123;</div><div class="line">		<span class="attribute">name</span>: <span class="string">'shenzhen'</span>,</div><div class="line">		<span class="attribute">id:</span><span class="string"> 11,</span></div><div class="line">	&#125;, &#123;</div><div class="line">		name: <span class="string">'guangzhou'</span>,</div><div class="line">		<span class="attribute">id:</span><span class="string"> 12,</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	];</div><div class="line">	return guangdongCity;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//æ–°æ—§æ•°æ®ç»Ÿä¸€çš„æ¸²æŸ“æ–¹æ³•</span></div><div class="line"><span class="built_in">var</span> render = <span class="function"><span class="keyword">function</span>(<span class="params"> fn </span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log( <span class="string">'å¼€å§‹æ¸²æŸ“å¹¿ä¸œçœåœ°å›¾'</span> );</div><div class="line">	<span class="built_in">document</span>.write( <span class="built_in">JSON</span>.stringify( fn() ) );</div><div class="line">&#125;;</div><div class="line"> <span class="comment">//è¾“å‡ºæ•°æ®ç»“æ„çš„é€‚é…å™¨ï¼ŒæŠŠæ—§æ•°æ®æŒ‰ç…§æ–°æ•°æ®ç»“æ„çš„æ ¼å¼åšé€‚é…</span></div><div class="line"><span class="built_in">var</span> addressAdapter = <span class="function"><span class="keyword">function</span>(<span class="params"> oldAddressfn </span>)</span>&#123;</div><div class="line">	<span class="built_in">var</span> address = &#123;&#125;,</div><div class="line">	oldAddress = oldAddressfn();<span class="comment">//è·å–å°±æ•°æ®</span></div><div class="line">	<span class="comment">//é€‚é…çš„å…·ä½“ä»£ç </span></div><div class="line">	<span class="keyword">for</span> ( <span class="built_in">var</span> i = <span class="number">0</span>, c; c = oldAddress[ i++ ]; )&#123;</div><div class="line">		address[ c.name ] = c.id;ç”±æ•°ç»„å¯¹è±¡æ”¹ä¸ºå¯¹è±¡å­˜å‚¨</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> address;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//é€šè¿‡é€‚é…å™¨æ¸²æŸ“æ—§æ•°æ®ï¼Œè¾“å‡ºçš„æ˜¯æ–°æ•°æ®çš„ç»“æ„</span></div><div class="line">render( addressAdapter( getGuangdongCity ) );</div></pre></td></tr></table></figure>
</code></pre><p>  å°±æˆ‘ä¸ªäººæ¥çœ‹ï¼Œ é€‚é…å™¨çš„æ€è·¯æ˜¯æœ€ç®€å•çš„ï¼Œä½†æ˜¯å®é™…æ“ä½œèµ·æ¥å¯èƒ½æ˜¯æœ€å¤æ‚çš„ï¼Œæ•°æ®ä¹‹é—´çš„é€‚é…å¯èƒ½æ¯”æƒ³è±¡ä¸­çš„éº»çƒ¦å¾ˆå¤šã€‚ä½†æ˜¯äº†è§£åˆ°è¿™ä¸ªæ€è·¯å¯¹äºç¼–ç¨‹çš„çµæ´»æ€§æœ‰äº†è®¤è¯†ï¼Œå¦‚æœæ˜¯ä»¥å‰å¯èƒ½é‡åˆ°è¿™æ ·çš„é—®é¢˜çš„æ—¶å€™ï¼Œé¦–å…ˆè€ƒè™‘åˆ°çš„æ˜¯æ€ä¹ˆå»ä¿®æ”¹åŸæ¥çš„çš„ä»£ç ã€‚ä¸€ä¸ªå°æ€è·¯ï¼Œæ–¹æ³•å®Œå…¨ä¸åŒäº†ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-Reduxçš„ä¸­é—´ä»¶-Reselect]]></title>
      <url>http://yoursite.com/2017/03/09/%E7%BF%BB%E8%AF%91-Redux%E7%9A%84%E4%B8%AD%E9%97%B4%E4%BB%B6-Reselect/</url>
      <content type="html"><![CDATA[<blockquote>
<p><strong>æœ¬æ–‡æ˜¯ç¿»è¯‘Reduxçš„ä¸€ä¸ªä¸­é—´ä»¶æ–‡æ¡£.Reduxæ˜¯Reactçš„ä¸€ä¸ªæ•°æ®å±‚,Reactç»„ä»¶çš„stateæœ‰å…³é€»è¾‘å¤„ç†éƒ½è¢«å•ç‹¬æ”¾åˆ°Reduxä¸­æ¥è¿›è¡Œ,åœ¨stateçš„æ“ä½œæµç¨‹ä¸­è¡ç”Ÿäº†å¾ˆå¤šä¸­é—´ä»¶,Reselectè¿™ä¸ªä¸­é—´ä»¶è¦è§£å†³çš„é—®é¢˜æ˜¯:`åœ¨ç»„ä»¶äº¤äº’æ“ä½œçš„æ—¶å€™,stateå‘ç”Ÿå˜åŒ–çš„æ—¶å€™å¦‚ä½•å‡å°‘æ¸²æŸ“çš„å‹åŠ›.åœ¨Reselectä¸­é—´ä¸­ä½¿ç”¨äº†ç¼“å­˜æœºåˆ¶,è¿™ä¸ªæœºåˆ¶å¯ä»¥åœ¨javascriptçš„æ¨¡å¼è®¾è®¡ä¸­åˆšçœ‹åˆ°ä»‹ç»,è¿™é‡Œå°±ä¸è¯¦ç»†è¯´äº†.</strong>ä»…ä¾›å‚è€ƒ,ä»¥åŸæ–‡ä¸ºå‡†.</p>
<hr>
<p>ä¸€æ—¦reduxä»reactçš„æ•°æ®å±‚æ¥ç†è§£ï¼Œå¾ˆå¤šé—®é¢˜éƒ½ä¼¼ä¹æ‰¾åˆ°äº†ç†è®ºä¾æ®ï¼Œæ‰€è°“åæ­£è¨€é¡ºã€‚åœ¨webæ¡†æ¶ä¸­éƒ½ä¼šç”¨æ•°æ®åº“åšæ•°æ®æŒä¹…å±‚ï¼Œåœ¨æŸ¥è¡¨çš„æ—¶å€™ä¼šä¸ºäº†æ•ˆç‡åšç¼“å­˜ï¼Œreselectæ˜¯åŒæ ·çš„ç›®çš„ã€‚Reactçš„ç»„ä»¶æœ‰è‡ªå·±çš„ç‰¹æ®Šæ€§ï¼Œé‡åˆ°ç‰¹æ®Šçš„ç‰¹æ€§çš„æ—¶å€™éœ€è¦æœ‰ç‰¹æ®Šçš„å¤„ç†<br>æ–¹æ³•.</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯è¯‘æ–‡å†…å®¹,<a href="https://github.com/reactjs/reselect" target="_blank" rel="external">åŸæ–‡è¯·å‚è§</a></p>
<hr>
<blockquote>
<p>â€œselectorâ€æ˜¯ä¸€ä¸ªç®€å•çš„Reduxåº“,çµæ„Ÿæ¥æºäº<code>NuclearJS</code>.</p>
<ul>
<li>Selectorå¯ä»¥è®¡ç®—è¡ç”Ÿçš„æ•°æ®,å¯ä»¥è®©Reduxåšåˆ°å­˜å‚¨å°½å¯èƒ½å°‘çš„stateã€‚</li>
<li>Selectoræ¯”è¾ƒé«˜æ•ˆ,åªæœ‰åœ¨æŸä¸ªå‚æ•°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰å‘ç”Ÿè®¡ç®—è¿‡ç¨‹.</li>
<li>Selectoræ˜¯å¯ä»¥ç»„åˆçš„,ä»–ä»¬å¯ä»¥ä½œä¸ºè¾“å…¥,ä¼ é€’åˆ°å…¶ä»–çš„selector.</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¿™ä¸ªä¾‹å­ä¸å¿…å¤ªåœ¨æ„,åé¢ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»</span></div><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</div><div class="line"><span class="keyword">const</span> taxPercentSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.taxPercent</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  shopItemsSelector,</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> taxSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxPercentSelector,</div><div class="line">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class="number">100</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxSelector,</div><div class="line">  (subtotal, tax) =&gt; (&#123; <span class="attr">total</span>: subtotal + tax &#125;)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">let</span> exampleState = &#123;</div><div class="line">  <span class="attr">shop</span>: &#123;</div><div class="line">    <span class="attr">taxPercent</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">items</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">value</span>: <span class="number">1.20</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">value</span>: <span class="number">0.95</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(subtotalSelector(exampleState)) <span class="comment">// 2.15</span></div><div class="line"><span class="built_in">console</span>.log(taxSelector(exampleState))      <span class="comment">// 0.172</span></div><div class="line"><span class="built_in">console</span>.log(totalSelector(exampleState))    <span class="comment">// &#123; total: 2.322 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#å®‰è£…">Installation</a></li>
<li><a href="#å®ä¾‹">å®ä¾‹</a><ul>
<li><a href="#motivation-for-memoized-selectors">Motivation for Memoized Selectors</a></li>
<li><a href="#creating-a-memoized-selector">Creating a Memoized Selector</a></li>
<li><a href="#composing-selectors">Composing Selectors</a></li>
<li><a href="#connecting-a-selector-to-the-redux-store">Connecting a Selector to the Redux Store</a></li>
<li><a href="#accessing-react-props-in-selectors">Accessing React Props in Selectors</a></li>
<li><a href="#sharing-selectors-with-props-across-multiple-components">Sharing Selectors with Props Across Multiple Components</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#createselectorinputselectors--inputselectors-resultfunc"><code>createSelector</code></a></li>
<li><a href="#defaultmemoizefunc-equalitycheck--defaultequalitycheck"><code>defaultMemoize</code></a></li>
<li><a href="#createselectorcreatormemoize-memoizeoptions"><code>createSelectorCreator</code></a></li>
<li><a href="#createstructuredselectorinputselectors-selectorcreator--createselector"><code>createStructuredSelector</code></a></li>
</ul>
</li>
<li><p><a href="#faq">FAQ</a></p>
<ul>
<li><a href="#q-why-isnt-my-selector-recomputing-when-the-input-state-changes">Why isnâ€™t my selector recomputing when the input state changes?</a></li>
<li><a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">Why is my selector recomputing when the input state stays the same?</a></li>
<li><a href="#q-can-i-use-reselect-without-redux">Can I use Reselect without Redux?</a></li>
<li><a href="#q-the-default-memoization-function-is-no-good-can-i-use-a-different-one">The default memoization function is no good, can I use a different one?</a></li>
<li><a href="#q-how-do-i-test-a-selector">How do I test a selector?</a></li>
<li><a href="#q-how-do-i-create-a-selector-that-takes-an-argument">How do I create a selector that takes an argument? </a></li>
<li><a href="#q-how-do-i-use-reselect-with-immutablejs">How do I use Reselect with Immutable.js?</a></li>
<li><a href="#q-can-i-share-a-selector-across-multiple-components">Can I share a selector across multiple components?</a></li>
<li><a href="#q-are-there-typescript-typings">Are there TypeScript typings?</a></li>
<li><a href="#q-how-can-i-make-a-curried-selector">How can I make a curried selector?</a></li>
</ul>
</li>
<li><p><a href="#related-projects">Related Projects</a></p>
</li>
<li><a href="#license">License</a><br>##å®‰è£…<br><code>npm install reselect</code></li>
</ul>
<p>##å®ä¾‹</p>
<p>###ç¼“å­˜Selcectosçš„åŠ¨æœº</p>
<blockquote>
<p>å®ä¾‹æ˜¯åŸºäº <a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux Todos List example</a>.</p>
</blockquote>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"></div><div class="line"><span class="comment">//ä¸‹é¢è¿™æ®µä»£ç æ˜¯æ ¹æ®è¿‡æ»¤å™¨çš„stateæ¥æ”¹å˜æ—¥ç¨‹stateçš„å‡½æ•°</span></div><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (filter) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">      <span class="keyword">return</span> todos</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">//todosæ˜¯æ ¹æ®è¿‡æ»¤å‡½æ•°è¿”å›çš„stateï¼Œä¼ å…¥ä¸¤ä¸ªå®å‚</span></div><div class="line">    todos: getVisibleTodos(state.todos, state.visibilityFilter)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//mapDispatchToPropsæ¥ä¼ é€’dispatchçš„æ–¹æ³•</span></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//ä½¿ç”¨Reduxçš„connectå‡½æ•°æ³¨å…¥state,åˆ°TodoListç»„ä»¶</span></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,<code>mapStateToProps</code>è°ƒç”¨<code>getVisibleTodos</code>å»è®¡ç®—<code>todos</code>.è¿™ä¸ªå‡½æ•°è®¾è®¡çš„æ˜¯ç›¸å½“å¥½çš„,ä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹ï¼š<code>todos</code>åœ¨æ¯ä¸€æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™éƒ½ä¼šé‡æ–°è®¡ç®—.å¦‚æœstateæ ‘çš„ç»“æ„æ¯”è¾ƒå¤§,æˆ–è€…è®¡ç®—æ¯”è¾ƒæ˜‚è´µ,æ¯ä¸€æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™éƒ½è¿›è¡Œè®¡ç®—çš„è¯,å°†ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜.<code>Reselect</code>èƒ½å¤Ÿå¸®åŠ©reduxæ¥é¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—è¿‡ç¨‹.</p>
<p>###åˆ›å»ºä¸€ä¸ªç¼“å­˜Selector<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®°å¿†ç¼“å­˜selectorä»£æ›¿<code>getVisibleTodos</code>,å¦‚æœ<code>state.todos</code>å’Œ<code>state.visibilityFilter</code>å‘ç”Ÿå˜åŒ–,ä»–ä¼šé‡æ–°è®¡ç®—<code>state</code>,ä½†æ˜¯å‘ç”Ÿåœ¨å…¶ä»–éƒ¨åˆ†çš„stateå˜åŒ–,å°±ä¸ä¼šé‡æ–°è®¡ç®—.</p>
<p>Reslectæä¾›ä¸€ä¸ªå‡½æ•°<code>createSelector</code>æ¥åˆ›å»ºä¸€ä¸ªè®°å¿†selectors.<code>createSelector</code>æ¥å—ä¸€ä¸ª<code>input-selectors</code>å’Œä¸€ä¸ªå˜æ¢å‡½æ•°ä½œä¸ºå‚æ•°.å¦‚æœReduxçš„stateå‘ç”Ÿæ”¹å˜é€ æˆ<code>input-selector</code>çš„å€¼å‘ç”Ÿæ”¹å˜,selectorä¼šè°ƒç”¨å˜æ¢å‡½æ•°,ä¾æ®<code>input-selector</code>åšå‚æ•°,è¿”å›ä¸€ä¸ªç»“æœ.å¦‚æœ<code>input-selector</code>è¿”å›çš„ç»“æœå’Œå‰é¢çš„ä¸€æ ·,é‚£ä¹ˆå°±ä¼šç›´æ¥è¿”å›æœ‰å…³state,ä¼šçœç•¥å˜æ¢å‡½æ•°çš„è°ƒç”¨.</p>
<p>ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè®°å¿†selector<code>getVisibleTodos</code>æ›¿ä»£éè®°å¿†çš„ç‰ˆæœ¬</p>
<h4 id="selectors-index-js"><a href="#selectors-index-js" class="headerlink" title="selectors/index.js"></a><code>selectors/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state</span>) =&gt;</span> state.visibilityFilter</div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state</span>) =&gt;</span> state.todos</div><div class="line"><span class="comment">//ä¸‹é¢çš„å‡½æ•°æ˜¯ç»è¿‡åŒ…è£…çš„</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>ä¸Šé¢çš„çš„å®ä¾‹ä¸­,<code>getVisibilityfilter</code>å’Œ<code>getTodos</code>æ˜¯input-selectors.è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯æ™®é€šçš„éè®°å¿†selectorå‡½æ•°,å› ä¸ºä»–ä»¬æ²¡æœ‰å˜æ¢ä»–ä»¬selectçš„æ•°æ®.<code>getVisibleTodos</code>å¦ä¸€æ–¹é¢æ˜¯ä¸€ä¸ªè®°å¿†selector.ä»–æ¥æ”¶<code>getVisibilityfilter</code>å’Œ<code>getTodos</code>ä½œä¸ºinput-selectors,å¹¶ä¸”ä½œä¸ºä¸€ä¸ªå˜æ¢å‡½æ•°è®¡ç®—ç­›é€‰çš„todo list.</p>
<p>###èšåˆselectors</p>
<p>ä¸€ä¸ªè®°å¿†æ€§selectoræœ¬èº«ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªè®°å¿†æ€§selectorçš„input-selector.è¿™é‡Œ<code>getVisibleTodos</code>å¯ä»¥ä½œä¸ºinput-selectorä½œä¸ºå…³é”®å­—ç­›é€‰çš„input-selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getKeyword = <span class="function">(<span class="params">state</span>) =&gt;</span> state.keyword</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodosFilteredByKeyword = createSelector(</div><div class="line">  [ getVisibleTodos, getKeyword ],</div><div class="line">  (visibleTodos, keyword) =&gt; visibleTodos.filter(</div><div class="line">    <span class="function"><span class="params">todo</span> =&gt;</span> todo.text.indexOf(keyword) &gt; <span class="number">-1</span></div><div class="line">  )</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###è¿æ¥ä¸€ä¸ªSelectoråˆ°Redux Store<br>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <a href="https://github.com/reactjs/react-redux" target="_blank" rel="external">React Redux</a>, ä½ å¯ä»¥ç›´æ¥ä¼ é€’selectoråˆ° <code>mapStateToProps()</code>:</p>
<h4 id="containers-VisibleTodoList-js-1"><a href="#containers-VisibleTodoList-js-1" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>###åœ¨React Propsä¸­æ¥å…¥Selectors</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å‡è®¾ç¨‹åºå°†ä¼šæœ‰ä¸€ä¸ªæ‰©å±•,æˆ‘ä»¬å…è®¸selectoræ”¯æŒå¤štodo List.è¯·æ³¨æ„å¦‚æœè¦å®Œå…¨å®æ–½è¿™ä¸ªæ‰©å±•,reducers,components,actionsç­‰ç­‰éƒ½éœ€è¦ä½œå‡ºæ”¹å˜.è¿™äº›å†…å®¹å’Œä¸»é¢˜ä¸æ˜¯å¤ªç›¸å…³,æ‰€ä»¥è¿™é‡Œå°±çœç•¥æ‰äº†.</p>
</blockquote>
<p>ç›®å‰ä¸ºæ­¢,æˆ‘ä»¬ä»…ä»…çœ‹åˆ°selectorsæ¥æ”¶storeçš„stateä½œä¸ºä¸€ä¸ªå‚æ•°,å…¶å®ä¸€ä¸ªselectorå¶å¯ä»¥æ¥å—props.</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ª<code>App</code>ç»„ä»¶,æ¸²æŸ“å‡ºä¸‰ä¸ª<code>VisibleTodoList</code>ç»„ä»¶,æ¯ä¸€ä¸ªç»„ä»¶æœ‰<code>ListId</code>å±æ€§.</p>
<h4 id="components-App-js"><a href="#components-App-js" class="headerlink" title="components/App.js"></a><code>components/App.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></div><div class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../containers/AddTodo'</span></div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../containers/VisibleTodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;VisibleTodoList listId="1" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="2" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="3" /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ¯ä¸€ä¸ª<code>VisibleTodoList</code>containeråº”è¯¥æ ¹æ®å„è‡ªçš„<code>listId</code>å±æ€§è·å–stateçš„ä¸åŒéƒ¨åˆ†.æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹<code>getVisibilityFilter</code>å’Œ<code>getTodos</code>,ä¾¿äºæ¥å—ä¸€ä¸ªå±æ€§å‚æ•°</p>
<h4 id="selectors-todoSelectors-js"><a href="#selectors-todoSelectors-js" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos <span class="comment">//è¿™é‡Œæ˜¯ä¸ºäºŒç»´æ•°ç»„äº†</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">      <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p><code>props</code>å¯ä»¥ä»<code>mapStateToProps</code>ä¼ é€’åˆ°<code>getVisibleTodos</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨<code>getVisibleTodos</code>å¯ä»¥è·å–<code>props</code>,æ¯ä¸€éƒ¨åˆ†ä¼¼ä¹éƒ½å·¥ä½œçš„ä¸é”™.</p>
<p><em>**ä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜</em><br>å½“<code>getVisibleTodos</code>selectorå’Œ<code>VisibleTodoList</code>containerçš„å¤šä¸ªå®ä¾‹ä¸€èµ·å·¥ä½œçš„æ—¶å€™,è®°å¿†åŠŸèƒ½å°±ä¸èƒ½æ­£å¸¸çš„è¿è¡Œ:</p>
<h4 id="containers-VisibleTodoList-js-2"><a href="#containers-VisibleTodoList-js-2" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// WARNING: THE FOLLOWING SELECTOR DOES NOT CORRECTLY MEMOIZE</span></div><div class="line">    <span class="comment">//âš ï¸ä¸‹é¢çš„selectorä¸èƒ½æ­£ç¡®çš„è®°å¿†</span></div><div class="line">    todos: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectoræ—¶å€™,å¦‚æœä»–çš„å‚æ•°é›†åˆå’Œä¸Šä¸€æ¬¡çš„å‚æ•°æœºä¼šæ˜¯ä¸€æ ·çš„,ä»…ä»…è¿”å›ç¼“å­˜çš„å€¼.å¦‚æœæˆ‘ä»¬äº¤æ›¿æ¸²æŸ“<code>&lt;VisibleTodoList listId=&quot;1&quot; /&gt;</code> å’Œ<code>&lt;VisibleTodoList listId=&quot;2&quot; /&gt;</code>æ—¶,å…±äº«çš„selectorå°†ä¼šäº¤æ›¿æ¥å—<code>{listIdï¼š1}</code>å’Œ<code>{listId:2}</code>ä½œä¸ºä»–çš„propsçš„å‚æ•°.è¿™å°†ä¼šå¯¼è‡´æ¯ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™çš„å‚æ•°éƒ½ä¸åŒ,å› æ­¤selectoræ¯æ¬¡éƒ½ä¼šé‡æ–°æ¥è®¡ç®—è€Œä¸æ˜¯è¿”å›ç¼“å­˜çš„å€¼.ä¸‹ä¸€éƒ¨åˆ†æˆ‘ä»¬å°†ä¼šä»‹ç»æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜.</p>
<p>###è·¨è¶Šå¤šä¸ªç»„ä»¶ä½¿ç”¨selectorså…±æ€§props</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†çš„å®ä¾‹éœ€è¦React Redux v4.3.0æˆ–è€…æ›´é«˜ç‰ˆæœ¬çš„æ”¯æŒ.</p>
</blockquote>
<p>åœ¨å¤šä¸ª<code>VisibleTodoList</code>ç»„ä»¶ä¸­å…±äº«selector,åŒæ—¶è¿˜è¦<strong>ä¿æŒ</strong>è®°å¿†æ€§,æ¯ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹éœ€è¦ä»–ä»¬è‡ªå·±çš„selectorå¤‡ä»½.</p>
<p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°<code>makeGetVisibleTodos</code>,è¿™ä¸ªå‡½æ•°æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™è¿”å›ä¸€ä¸ªæ–°çš„<code>getVisibleTodos</code>çš„æ‹·è´:</p>
<h4 id="selectors-todoSelectors-js-1"><a href="#selectors-todoSelectors-js-1" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> makeGetVisibleTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    [ getVisibilityFilter, getTodos ],</div><div class="line">    (visibilityFilter, todos) =&gt; &#123;</div><div class="line">      <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">          <span class="keyword">return</span> todos</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeGetVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬ä¹Ÿéœ€è¦è®¾ç½®ç»™æ¯ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹ä»–ä»¬å„è‡ªè·å–ç§æœ‰çš„selectoræ–¹æ³•.<code>mapStateToProps</code>çš„<code>connect</code>å‡½æ•°å¯ä»¥å¸®åŠ©å®Œæˆè¿™ä¸ªåŠŸèƒ½.</p>
<p><em>**å¦‚æœ<code>mapStateToProps</code>æä¾›ç»™<code>connect</code>ä¸è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œæ˜¯ä¸€ä¸ªå‡½æ•°,ä»–å°±å¯ä»¥è¢«ç”¨æ¥ä¸ºæ¯ä¸ªç»„ä»¶containeråˆ›å»ºä¸€ä¸ªç§æœ‰çš„<code>mapStateProps</code>å‡½æ•°.</em></p>
<p>åœ¨ä¸‹é¢çš„å®ä¾‹ä¸­,<code>mapStateProps</code>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>getVisibleTodos</code>selector,ä»–è¿”å›ä¸€ä¸ª<code>mapStateToProps</code>å‡½æ•°,è¿™ä¸ªå‡½æ•°èƒ½å¤Ÿæ¥å…¥æ–°çš„selector.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœæˆ‘ä»¬æŠŠ<code>makeMapStateToprops</code>ä¼ é€’åˆ°<code>connect</code>,æ¯ä¸€ä¸ª<code>visibleTodoList</code>containerå°†ä¼šè·å¾—å„è‡ªçš„å«æœ‰ç§æœ‰<code>getVisibleTodos</code>selectorçš„<code>mapStateToProps</code>çš„å‡½æ•°.è¿™æ ·ä¸€æ¥è®°å¿†å°±æ­£å¸¸äº†,ä¸ç®¡<code>VisibleTodoList</code>containersçš„æ¸²æŸ“é¡ºåºæ€ä¹ˆæ ·.</p>
<h4 id="containers-VisibleTodoList-js-3"><a href="#containers-VisibleTodoList-js-3" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; makeGetVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  makeMapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>##API</p>
<p>###createSelector(â€¦inputSelectors|[inputSelectors],resultFunc)</p>
<p>æ¥å—ä¸€ä¸ªæˆ–è€…å¤šä¸ªselectors,æˆ–è€…ä¸€ä¸ªselectorsæ•°ç»„,è®¡ç®—ä»–ä»¬çš„å€¼å¹¶ä¸”ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>resultFunc</code>.</p>
<p><code>createSelector</code>é€šè¿‡åˆ¤æ–­input-selectorä¹‹å‰è°ƒç”¨å’Œä¹‹åè°ƒç”¨çš„è¿”å›å€¼çš„å…¨ç­‰äº(===,è¿™ä¸ªåœ°æ–¹è‹±æ–‡æ–‡çŒ®å«reference equality,å¼•ç”¨ç­‰äº,è¿™ä¸ªå•è¯æ˜¯æœ¬è´¨,ä¸­æ–‡æ²¡æœ‰ç¿»è¯‘å‡ºæ¥).ç»è¿‡<code>createSelector</code>åˆ›å»ºçš„selectoråº”è¯¥æ˜¯immutable(ä¸å˜çš„).</p>
<p>ç»è¿‡<code>createSelector</code>åˆ›å»ºçš„Selectorsæœ‰ä¸€ä¸ªç¼“å­˜,å¤§å°æ˜¯1.è¿™æ„å‘³ç€å½“ä¸€ä¸ªinput-selectorå˜åŒ–çš„æ—¶å€™,ä»–ä»¬æ€»æ˜¯ä¼šé‡æ–°è®¡ç®—state,å› ä¸ºSelectorä»…ä»…å­˜å‚¨æ¯ä¸€ä¸ªinput-selectorå‰ä¸€ä¸ªå€¼.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">  state =&gt; state.values.value2,</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// You can also pass an array of selectors</span></div><div class="line"><span class="comment">//å¯ä»¥å‡ºä¼ é€’ä¸€ä¸ªselectoræ•°ç»„</span></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  [</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">    state =&gt; state.values.value2</div><div class="line">  ],</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨selectorå†…éƒ¨è·å–ä¸€ä¸ªç»„ä»¶çš„propséå¸¸æœ‰ç”¨.å½“ä¸€ä¸ªselectoré€šè¿‡<code>connect</code>å‡½æ•°è¿æ¥åˆ°ä¸€ä¸ªç»„ä»¶ä¸Š,ç»„ä»¶çš„å±æ€§ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> abSelector = <span class="function">(<span class="params">state, props</span>) =&gt;</span> state.a * props.b</div><div class="line"></div><div class="line"><span class="comment">// props only (ignoring state argument)</span></div><div class="line"><span class="keyword">const</span> cSelector =  <span class="function">(<span class="params">_, props</span>) =&gt;</span> props.c</div><div class="line"></div><div class="line"><span class="comment">// state only (props argument omitted as not required)</span></div><div class="line"><span class="keyword">const</span> dSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  abSelector,</div><div class="line">  cSelector,</div><div class="line">  dSelector,</div><div class="line">  (ab, c, d) =&gt; (&#123;</div><div class="line">    <span class="attr">total</span>: ab + c + d</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###defaultMemoize(func, equalityCheck = defaultEqualityCheck)</p>
<p><code>defaultMemoize</code>èƒ½è®°ä½é€šè¿‡funcä¼ é€’çš„å‚æ•°.è¿™æ˜¯<code>createSelector</code>ä½¿ç”¨çš„è®°å¿†å‡½æ•°.</p>
<p><code>defaultMemoize</code> é€šè¿‡è°ƒç”¨<code>equalityCheck</code>å‡½æ•°æ¥å†³å®šä¸€ä¸ªå‚æ•°æ˜¯å¦å·²ç»å‘ç”Ÿæ”¹å˜.å› ä¸º<code>defaultMemoize</code>è®¾è®¡å‡ºæ¥å°±æ˜¯å’Œimmutableæ•°æ®ä¸€èµ·ä½¿ç”¨,é»˜è®¤çš„<code>equalityCheck</code>ä½¿ç”¨å¼•ç”¨å…¨ç­‰äºæ¥åˆ¤æ–­å˜åŒ–:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultEqualityCheck</span>(<span class="params">currentVal, previousVal</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> currentVal === previousVal</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>defaultMemoize</code>å’Œ<code>createSelectorCreator</code>å»<a href="#é…ç½®-equalitycheck-for-defaultmemoize">é…ç½®<code>equalityCheck</code>å‡½æ•°</a>.</p>
<p>###createSelectorCreator(memoize,â€¦memoizeOptions)</p>
<p><code>createSelectorCreator</code>ç”¨æ¥é…ç½®å®šåˆ¶ç‰ˆæœ¬çš„<code>createSelector</code>.</p>
<p><code>memoize</code>å‚æ•°æ˜¯ä¸€ä¸ªæœ‰è®°å¿†åŠŸèƒ½çš„å‡½æ•°,æ¥ä»£æ›¿<code>defaultMemoize</code>.<br><code>â€¦memoizeOption</code>å±•å¼€çš„å‚æ•°æ˜¯0æˆ–è€…æ›´å¤šçš„é…ç½®é€‰é¡¹,è¿™äº›å‚æ•°ä¼ é€’ç»™<code>memoizeFunc</code>.selectors<code>resultFunc</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<code>memoize</code>,<code>memoizeOptions</code>ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(</div><div class="line">  customMemoize, <span class="comment">// function to be used to memoize resultFunc,è®°å¿†resultFunc</span></div><div class="line">  option1, <span class="comment">// option1 will be passed as second argument to customMemoize ç¬¬äºŒä¸ªæƒ¨å‘¼</span></div><div class="line">  option2, <span class="comment">// option2 will be passed as third argument to customMemoize ç¬¬ä¸‰ä¸ªå‚æ•°</span></div><div class="line">  option3 <span class="comment">// option3 will be passed as fourth argument to customMemoize   ç¬¬å››ä¸ªå‚æ•°</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> customSelector = customSelectorCreator(</div><div class="line">  input1,</div><div class="line">  input2,</div><div class="line">  resultFunc <span class="comment">// resultFunc will be passed as first argument to customMemoize  ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™customMomize</span></div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨<code>customSelecotr</code>å†…éƒ¨æ»´å•Šç”¨memoizeçš„å‡½æ•°çš„ä»£ç å¦‚ä¸‹:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">customMemoize(resultFunc, option1, option2, option3)</div></pre></td></tr></table></figure></p>
<hr>
<p>ä¸‹é¢æ˜¯å‡ ä¸ªå¯èƒ½ä¼šç”¨åˆ°çš„<code>createSelectorCreator</code>çš„å®ä¾‹:</p>
<p>####ä¸º<code>defaultMemoize</code>é…ç½®<code>equalityCheck</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.filter(<span class="function"><span class="params">val</span> =&gt;</span> val &lt; <span class="number">5</span>),</div><div class="line">  values =&gt; values.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>####ä½¿ç”¨loadshçš„memoizeå‡½æ•°æ¥ç¼“å­˜æœªç»‘å®šçš„ç¼“å­˜.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> called = <span class="number">0</span></div><div class="line"><span class="keyword">const</span> hashFn = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(</div><div class="line">  <span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + <span class="string">'-'</span> + <span class="built_in">JSON</span>.stringify(val),</div><div class="line">  <span class="string">''</span></div><div class="line">)</div><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(memoize, hashFn)</div><div class="line"><span class="keyword">const</span> selector = customSelectorCreator(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; &#123;</div><div class="line">    called++</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<h3 id="createStructuredSelector-inputSelectors-selectorCreator-createSelector"><a href="#createStructuredSelector-inputSelectors-selectorCreator-createSelector" class="headerlink" title="createStructuredSelector({inputSelectors}, selectorCreator = createSelector)"></a>createStructuredSelector({inputSelectors}, selectorCreator = createSelector)</h3><p>å¦‚æœåœ¨æ™®é€šçš„æ¨¡å¼ä¸‹ä½¿ç”¨<code>createStructuredSelector</code>å‡½æ•°å¯ä»¥æå‡ä¾¿åˆ©æ€§.ä¼ é€’åˆ°<code>connect</code>çš„selectorè£…é¥°è€…(è¿™æ˜¯jsè®¾è®¡æ¨¡å¼çš„æ¦‚å¿µ,å¯ä»¥å‚è€ƒç›¸å…³çš„ä¹¦ç±)æ¥å—ä»–çš„input-selectors,å¹¶ä¸”åœ¨ä¸€ä¸ªå¯¹è±¡å†…æ˜ å°„åˆ°ä¸€ä¸ªé”®ä¸Š.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="comment">// The result function in the following selector</span></div><div class="line"><span class="comment">// is simply building an object from the input selectors ç”±selectorsæ„å»ºçš„ä¸€ä¸ªå¯¹è±¡</span></div><div class="line"><span class="keyword">const</span> structuredSelector = createSelector(</div><div class="line">   mySelectorA,</div><div class="line">   mySelectorB,</div><div class="line">   mySelectorC,</div><div class="line">   (a, b, c) =&gt; (&#123;</div><div class="line">     a,</div><div class="line">     b,</div><div class="line">     c</div><div class="line">   &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p><code>createStructuredSelector</code>æ¥å—ä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯input-selectors,å‡½æ•°è¿”å›ä¸€ä¸ªç»“æ„æ€§çš„selector.è¿™ä¸ªç»“æ„æ€§çš„selectorè¿”å›ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡çš„é”®å’Œ<code>inputSelectors</code>çš„å‚æ•°æ˜¯ç›¸åŒçš„,ä½†æ˜¯ä½¿ç”¨selectorsä»£æ›¿äº†å…¶ä¸­çš„å€¼.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="keyword">const</span> structuredSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">x</span>: mySelectorA,</div><div class="line">  <span class="attr">y</span>: mySelectorB</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = structuredSelector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;) <span class="comment">// will produce &#123; x: 1, y: 2 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<p>ç»“æ„æ€§çš„selectorså¯ä»¥æ˜¯åµŒå¥—å¼çš„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nestedSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">subA</span>: createStructuredSelector(&#123;</div><div class="line">    selectorA,</div><div class="line">    selectorB</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">subB</span>: createStructuredSelector(&#123;</div><div class="line">    selectorC,</div><div class="line">    selectorD</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>##FAQ</p>
<h3 id="Q-ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™-selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ"><a href="#Q-ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™-selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ" class="headerlink" title="Q:ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™,selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ"></a>Q:ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™,selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ</h3><p>A:æ£€æŸ¥ä¸€ä¸‹ä½ çš„è®°å¿†éŸ©å¼æ˜¯ä¸æ˜¯å’Œä½ çš„stateæ›´æ–°å‡½æ•°ç›¸å…¼å®¹(ä¾‹å¦‚:å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Redux).ä¾‹å¦‚:ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectoræ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡,åŸæ¥æœŸå¾…çš„æ˜¯æ›´æ–°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡.<code>createSelector</code>ä½¿ç”¨(===)æ£€æµ‹è¾“å…¥æ˜¯å¦æ”¹å˜,å› æ­¤å¦‚æœæ”¹å˜ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡æ²¡æœ‰è§¦å‘selectoré‡æ–°è®¡ç®—çš„åŸå› æ˜¯æ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æ²¡æœ‰è§¦å‘ç›¸å…³çš„æ£€æµ‹.æç¤ºï¼šå¦‚æœä½ æ­£åœ¨ä½¿ç”¨Redux,æ”¹å˜ä¸€ä¸ªstateå¯¹è±¡çš„<a href="http://redux.js.org/docs/Troubleshooting.html" target="_blank" rel="external">é”™è¯¯å¯èƒ½æœ‰</a>.</p>
<p>ä¸‹é¢çš„å®ä¾‹å®šä¹‰äº†ä¸€ä¸ªselectorå¯ä»¥å†³å®šæ•°ç»„çš„ç¬¬ä¸€ä¸ªtodoé¡¹ç›®æ˜¯ä¸æ˜¯å·²ç»è¢«å®Œæˆ:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isFirstTodoCompleteSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.todos[<span class="number">0</span>],</div><div class="line">  todo =&gt; todo &amp;&amp; todo.completed</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>ä¸‹é¢çš„stateæ›´æ–°å‡½æ•°å’Œ<code>isFirstTodoCompleteSelector</code><strong>å°†ä¸ä¼š</strong>æ­£å¸¸å·¥ä½œå·¥ä½œ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// BAD: mutating an existing object</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      todo.completed = !areAllMarked</div><div class="line">      <span class="keyword">return</span> todo</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢çš„stateæ›´æ–°å‡½æ•°å’Œ<code>isFirstTodoComplete</code>ä¸€èµ·<strong>å¯ä»¥</strong>æ­£å¸¸å·¥ä½œ.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// GOOD: returning a new object each time with Object.assign</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, todo, &#123;</div><div class="line">      <span class="attr">completed</span>: !areAllMarked</div><div class="line">    &#125;))</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨Redux,ä½†æ˜¯æœ‰ä½¿ç”¨mutableæ•°æ®çš„éœ€æ±‚,ä½ å¯ä»¥ä½¿ç”¨<code>createSelectorCreator</code>ä»£æ›¿é»˜è®¤çš„è®°å¿†å‡½æ•°,å¹¶ä¸”ä½¿ç”¨ä¸åŒçš„ç­‰å€¼æ£€æµ‹å‡½æ•°.è¯·å‚çœ‹<a href="#use-memoize-function-from-lodash-for-an-unbounded-cache">è¿™é‡Œ</a> å’Œ <a href="#customize-equalitycheck-for-defaultmemoize">è¿™é‡Œ</a>ä½œä¸ºå‚è€ƒ.</p>
<p>###Q:ä¸ºä»€ä¹ˆinput stateæ²¡æœ‰æ”¹å˜çš„æ—¶å€™,selectorè¿˜æ˜¯ä¼šé‡æ–°è®¡ç®—?</p>
<p>A: æ£€æŸ¥ä¸€ä¸‹ä½ çš„è®°å¿†å‡½æ•°å’Œä½ ä½ çš„stateæ›´æ–°å‡½æ•°æ˜¯ä¸æ˜¯å…¼å®¹(å¦‚æœæ˜¯ä½¿ç”¨Reduxçš„æ—¶å€™,çœ‹çœ‹reducer).ä¾‹å¦‚:ä½¿ç”¨æ¯ä¸€æ¬¡æ›´æ–°çš„æ—¶å€™,ä¸ç®¡å€¼æ˜¯ä¸æ˜¯å‘ç”Ÿæ”¹å˜,<code>createSelector</code>åˆ›å»ºçš„selectoræ€»æ˜¯ä¼šæ”¶åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡.<code>createSelector</code>å‡½æ•°ä½¿ç”¨(<code>===</code>)æ£€æµ‹inputçš„å˜åŒ–,ç”±æ­¤å¯çŸ¥å¦‚æœæ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,è¡¨ç¤ºselectoræ€»æ˜¯åœ¨æ¯æ¬¡æ›´æ–°çš„æ—¶å€™é‡æ–°è®¡ç®—.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">return</span> state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢çš„selectoråœ¨æ¯ä¸€æ¬¡REMOVE_OLDè°ƒç”¨çš„æ—¶å€™,éƒ½ä¼šé‡æ–°è®¡ç®—,å› ä¸ºArray.filteræ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡.ä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹,REMOVE_OLD actionéƒ½ä¸ä¼šæ”¹å˜todoåˆ—è¡¨,æ‰€ä»¥é‡æ–°è®¡ç®—æ˜¯ä¸å¿…è¦çš„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> visibleTodosSelector = createSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>ä½ å¯ä»¥é€šè¿‡stateæ›´æ–°å‡½æ•°è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡æ¥å‡å°‘ä¸å¿…è¦çš„é‡è®¡ç®—æ“ä½œ,è¿™ä¸ªå¯¹è±¡æ‰§è¡Œæ·±åº¦ç­‰å€¼æ£€æµ‹,åªæœ‰æ·±åº¦ä¸ç›¸åŒçš„æ—¶å€™æ‰è¿”å›æ–°å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">const</span> updatedState =  state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> isEqual(updatedState, state) ? state : updatedState</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ›¿ä»£çš„æ–¹æ³•æ˜¯,åœ¨selectorä¸­ä½¿ç”¨æ·±åº¦æ£€æµ‹æ–¹æ³•æ›¿ä»£é»˜è®¤çš„<code>equalityCheck</code>å‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ£€æŸ¥<code>equalityCheck</code>å‡½æ•°çš„æ›´æ›¿æˆ–è€…åœ¨stateæ›´æ–°å‡½æ•°ä¸­åšæ·±åº¦æ£€æµ‹å¹¶ä¸æ€»æ˜¯æ¯”é‡è®¡ç®—çš„èŠ±é”€å°.å¦‚æœæ¯æ¬¡é‡è®¡ç®—çš„èŠ±é”€æ€»æ˜¯æ¯”è¾ƒå°,å¯èƒ½çš„åŸå› æ˜¯Reselectæ²¡æœ‰é€šè¿‡<code>connect</code>å‡½æ•°ä¼ é€’<code>mapStateProps</code>å•çº¯å¯¹è±¡çš„åŸå› .</p>
<h3 id="Q-æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ"><a href="#Q-æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ" class="headerlink" title="Q:æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ"></a>Q:æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ</h3><p>A:å¯ä»¥.Reselectæ²¡æœ‰å…¶ä»–ä»»ä½•çš„ä¾èµ–åŒ…,å› æ­¤å°½ç®¡ä»–è®¾è®¡çš„å’ŒReduxæ¯”è¾ƒæ­é…,ä½†æ˜¯ç‹¬ç«‹ä½¿ç”¨ä¹Ÿæ˜¯å¯ä»¥çš„.ç›®å‰çš„ç‰ˆæœ¬åœ¨ä¼ ç»Ÿçš„Flux APPä¸‹ä½¿ç”¨æ˜¯æ¯”è¾ƒæˆåŠŸçš„.</p>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectors,éœ€è¦ç¡®ä¿ä»–çš„å‚æ•°æ˜¯immutableçš„.</p>
<p>çœ‹<a href="#createselectorinputselectors--inputselectors-resultfunc">è¿™é‡Œ</a></p>
</blockquote>
<h3 id="Q-æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector"><a href="#Q-æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector" class="headerlink" title="Q:æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector."></a>Q:æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector.</h3><p>A:Reselectæ²¡æœ‰æ”¯æŒåˆ›å»ºæ¥æ”¶å‚æ•°çš„selectors,ä½†æ˜¯è¿™é‡Œæœ‰ä¸€äº›å®ç°ç±»ä¼¼å‡½æ•°åŠŸèƒ½çš„å»ºè®®.</p>
<p>å¦‚æœå‚æ•°ä¸æ˜¯åŠ¨æ€çš„,ä½ å¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> expensiveItemSelectorFactory = <span class="function"><span class="params">minValue</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    shopItemsSelector,</div><div class="line">    items =&gt; items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  expensiveItemSelectorFactory(<span class="number">200</span>),</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ€»çš„è¾¾æˆå…±è¯†<a href="https://github.com/reactjs/reselect/issues/38" target="_blank" rel="external">çœ‹è¿™é‡Œ</a>å’Œ<a href="https://github.com/optimizely/nuclear-js/issues/14" target="_blank" rel="external">è¶…è¶Š neclear-js</a>æ˜¯:å¦‚æœä¸€ä¸ªselectoréœ€è¦åŠ¨æ€çš„å‚æ•°,é‚£ä¹ˆå‚æ•°åº”è¯¥æ˜¯storeä¸­çš„state.å¦‚æœä½ å†³å®šå¥½äº†åœ¨åº”ç”¨ä¸­ä½¿ç”¨åŠ¨æ€å‚æ•°,åƒä¸‹é¢è¿™æ ·è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°æ˜¯æ¯”è¾ƒåˆé€‚çš„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.items,</div><div class="line">  items =&gt; memoize(</div><div class="line">    <span class="function"><span class="params">minValue</span> =&gt;</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveFilter = expensiveSelector(state)</div><div class="line"></div><div class="line"><span class="keyword">const</span> slightlyExpensive = expensiveFilter(<span class="number">100</span>)</div><div class="line"><span class="keyword">const</span> veryExpensive = expensiveFilter(<span class="number">1000000</span>)</div></pre></td></tr></table></figure>
<hr>
<h3 id="Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½-æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ"><a href="#Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½-æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ" class="headerlink" title="Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½,æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ"></a>Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½,æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ</h3><p>A: æˆ‘è®¤ä¸ºè¿™ä¸ªè®°å¿†éŸ©å¼å·¥ä½œçš„è¿˜å¯ä»¥,ä½†æ˜¯å¦‚æœä½ éœ€è¦ä¸€ä¸ªå…¶ä»–çš„éŸ©å¼ä¹Ÿæ˜¯å¯ä»¥çš„.<br>å¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="#customize-equalitycheck-for-defaultmemoize">ä¾‹å­</a></p>
<h3 id="Q-æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector"><a href="#Q-æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector" class="headerlink" title="Q:æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector?"></a>Q:æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector?</h3><p>A:å¯¹äºä¸€ä¸ªç»™å®šçš„input,ä¸€ä¸ªselectoræ€»æ˜¯äº§å‡ºç›¸åŒçš„ç»“æœ.åŸºäºè¿™ä¸ªåŸå› ,åšå•å…ƒæµ‹è¯•æ˜¯éå¸¸ç®€å•çš„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> selector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; (&#123;</div><div class="line">    <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">    <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">  &#125;)</div><div class="line">)</div><div class="line"></div><div class="line">test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">2</span>, <span class="attr">d</span>: <span class="number">6</span> &#125;)</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨stateæ›´æ–°å‡½æ•°è°ƒç”¨çš„æ—¶å€™åŒæ—¶æ£€æµ‹selectorçš„è®°å¿†å‡½æ•°çš„åŠŸèƒ½ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„(ä¾‹å¦‚ ä½¿ç”¨Reduxçš„æ—¶å€™æ£€æŸ¥reducer).æ¯ä¸€ä¸ªselectoréƒ½æœ‰ä¸€ä¸ª<code>recomputations</code>æ–¹æ³•è¿”å›é‡æ–°è®¡ç®—çš„æ¬¡æ•°:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">suite(<span class="string">'selector'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">let</span> state = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">a</span>: action(state.a),</div><div class="line">      <span class="attr">b</span>: action(state.b)</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> selector = createSelector(</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">    state =&gt; state.b,</div><div class="line">    (a, b) =&gt; (&#123;</div><div class="line">      <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">      <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> plusOne = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line">  <span class="keyword">const</span> id = <span class="function"><span class="params">x</span> =&gt;</span> x</div><div class="line"></div><div class="line">  test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    state = reducer(state, id)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">1</span>)</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">6</span>, <span class="attr">d</span>: <span class="number">12</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">2</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<hr>
<p>å¦å¤–,selectorsä¿ç•™äº†æœ€åä¸€ä¸ªå‡½æ•°è°ƒç”¨ç»“æœçš„å¼•ç”¨,è¿™ä¸ªå¼•ç”¨ä½œä¸º<code>.resultFunc</code>.å¦‚æœä½ å·²ç»èšåˆäº†å…¶ä»–çš„selectors,è¿™ä¸ªå‡½æ•°å¼•ç”¨å¯ä»¥å¸®åŠ©ä½ æµ‹è¯•æ¯ä¸€ä¸ªselector,ä¸éœ€è¦ä»stateä¸­è§£è€¦æµ‹è¯•.</p>
<p>ä¾‹å¦‚å¦‚æœä½ çš„selectorsé›†åˆåƒä¸‹é¢è¿™æ ·:<br><strong>selectors.js</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> firstSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> thirdSelector = createSelector( ... )</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> myComposedSelector = createSelector(</div><div class="line">  firstSelector,</div><div class="line">  secondSelector,</div><div class="line">  thirdSelector,</div><div class="line">  (first, second, third) =&gt; first * second &lt; third</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>å•å…ƒæµ‹è¯•å°±åƒä¸‹é¢è¿™æ ·:<br><strong>test/selectors.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// tests for the first three selectors...</span></div><div class="line">test(<span class="string">"firstSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"secondSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"thirdSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line"></div><div class="line"><span class="comment">// We have already tested the previous</span></div><div class="line"><span class="comment">// three selector outputs so we can just call `.resultFunc`</span></div><div class="line"><span class="comment">// with the values we want to test directly:</span></div><div class="line">test(<span class="string">"myComposedSelector unit test"</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// here instead of calling selector()</span></div><div class="line">  <span class="comment">// we just call selector.resultFunc()</span></div><div class="line">  assert(selector.resultFunc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="literal">true</span>)</div><div class="line">  assert(selector.resultFunc(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>æœ€å,æ¯ä¸€ä¸ªselectoræœ‰ä¸€ä¸ª<code>resetRecomputations</code>æ–¹æ³•,é‡ç½®recomputationsæ–¹æ³•ä¸º0,è¿™ä¸ªå‚æ•°çš„æ„å›¾æ˜¯åœ¨é¢å¯¹å¤æ‚çš„selectorçš„æ—¶å€™,éœ€è¦å¾ˆå¤šç‹¬ç«‹çš„æµ‹è¯•,ä½ ä¸éœ€è¦ç®¡ç†å¤æ‚çš„æ‰‹å·¥è®¡ç®—,æˆ–è€…ä¸ºæ¯ä¸€ä¸ªæµ‹è¯•åˆ›å»ºâ€å‚»ç“œâ€selector.</p>
<h3 id="Q-Reselectæ€ä¹ˆå’ŒImmutble-jsä¸€èµ·ä½¿ç”¨"><a href="#Q-Reselectæ€ä¹ˆå’ŒImmutble-jsä¸€èµ·ä½¿ç”¨" class="headerlink" title="Q:Reselectæ€ä¹ˆå’ŒImmutble.jsä¸€èµ·ä½¿ç”¨?"></a>Q:Reselectæ€ä¹ˆå’ŒImmutble.jsä¸€èµ·ä½¿ç”¨?</h3><p>A:<code>creatSelector</code>åˆ›å»ºçš„Selectorsåº”è¯¥å¯ä»¥å’ŒImmutable.jsæ•°æ®ç»“æ„ä¸€èµ·å®Œç¾çš„å·¥ä½œ.<br>å¦‚æœä½ çš„selectoræ­£åœ¨é‡è®¡ç®—,å¹¶ä¸”ä½ è®¤ä¸ºstateæ²¡æœ‰å‘ç”Ÿå˜åŒ–,ä¸€å®šè¦ç¡®ä¿çŸ¥é“å“ªä¸€ä¸ªImmutable.jsæ›´æ–°æ–¹æ³•,è¿™ä¸ªæ–¹æ³•åªè¦ä¸€æ›´æ–°<strong>æ€»æ˜¯</strong>è¿”å›æ–°å¯¹è±¡.å“ªä¸€ä¸ªæ–¹æ³•åªæœ‰<strong>é›†åˆå®é™…å‘ç”Ÿå˜åŒ–çš„æ—¶å€™</strong>æ‰è¿”å›æ–°å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'immutable'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myMap = Immutable.Map(&#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"> <span class="comment">// set, merge and others only return a new obj when update changes collection</span></div><div class="line"><span class="keyword">let</span> newMap = myMap.set(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line">newMap = myMap.merge(&#123; <span class="string">'a'</span>, <span class="number">1</span> &#125;)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line"><span class="comment">// map, reduce, filter and others always return a new obj</span></div><div class="line">newMap = myMap.map(<span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">1</span>)</div><div class="line">assert.notEqual(myMap, newMap)</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœä¸€ä¸ªæ“ä½œå¯¼è‡´çš„selectoræ›´æ–°æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,å¯èƒ½ä¼šå‘ç”Ÿä¸å¿…è¦çš„é‡è®¡ç®—.<a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">çœ‹è¿™é‡Œ</a>.è¿™æ˜¯ä¸€ä¸ªå…³äºprosçš„è®¨è®º,ä½¿ç”¨æ·±å…¨ç­‰äºæ¥æ£€æµ‹ä¾‹å¦‚<code>immutable.js</code>æ¥å‡å°‘ä¸å¿…è¦çš„é‡è®¡ç®—è¿‡ç¨‹.</p>
<h3 id="Q-å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ"><a href="#Q-å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ" class="headerlink" title="Q:å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ"></a>Q:å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ</h3><p>A: ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„Selectorçš„ç¼“å­˜çš„å¤§å°åªæœ‰1.è¿™ä¸ªè®¾å®šä½¿å¾—å¤šä¸ªç»„ä»¶çš„å®ä¾‹ä¹‹é—´çš„å‚æ•°ä¸åŒ,è·¨ç»„ä»¶å…±äº«selectorå˜å¾—ä¸åˆé€‚.è¿™é‡Œä¹Ÿæœ‰å‡ ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>
<ul>
<li>ä½¿ç”¨å·¥ç¨‹å‡½æ•°æ–¹æ³•,ä¸ºæ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„selector.è¿™é‡Œæœ‰ä¸€ä¸ªå†…å»ºçš„å·¥å‚æ–¹æ³•,React Redux v4.3æˆ–è€…æ›´é«˜ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨. <a href="#sharing-selectors-with-props-across-multiple-components">çœ‹è¿™é‡Œ</a></li>
<li>åˆ›å»ºä¸€ä¸ªç¼“å­˜å°ºå¯¸å¤§äº1çš„å®šåˆ¶selector.</li>
</ul>
<h3 id="Q-æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ"><a href="#Q-æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ" class="headerlink" title="Q:æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ"></a>Q:æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ</h3><p>A: æ˜¯çš„ï¼ä»–ä»¬åŒ…å«åœ¨<code>package.json</code>é‡Œ.å¯ä»¥å¾ˆå¥½çš„å·¥ä½œ.</p>
<h3 id="Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector"><a href="#Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector" class="headerlink" title="Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector?"></a>Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ª<a href="https://github.com/hemanth/functional-programming-jargon#currying" target="_blank" rel="external">æŸ¯é‡ŒåŒ–</a>selector?</h3><p>Aï¼šå°è¯•ä¸€äº›è¿™é‡Œ<a href="https://github.com/reactjs/reselect/issues/159#issuecomment-238724788" target="_blank" rel="external">åŠ©æ‰‹å‡½æ•°</a>,ç”±<a href="https://github.com/MattSPalmer" target="_blank" rel="external">MattSPalmer</a>æä¾›</p>
<h2 id="æœ‰å…³çš„é¡¹ç›®"><a href="#æœ‰å…³çš„é¡¹ç›®" class="headerlink" title="æœ‰å…³çš„é¡¹ç›®"></a>æœ‰å…³çš„é¡¹ç›®</h2><h3 id="reselect-map"><a href="#reselect-map" class="headerlink" title="reselect-map"></a><a href="https://github.com/HeyImAlex/reselect-map" target="_blank" rel="external">reselect-map</a></h3><p>å› ä¸ºReselectä¸å¯èƒ½ä¿è¯ç¼“å­˜ä½ æ‰€æœ‰çš„éœ€æ±‚,åœ¨åš<strong>éå¸¸æ˜‚è´µçš„è®¡ç®—</strong>çš„æ—¶å€™,è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæœ‰ç”¨.æŸ¥çœ‹ä¸€ä¸‹reselect-maps readme</p>
<p><strong>reselect-mapçš„ä¼˜åŒ–æªæ–½ä»…ä»…ä½¿ç”¨åœ¨ä¸€äº›å°çš„æ¡ˆä¾‹ä¸­,å¦‚æœä½ ä¸ç¡®å®šæ˜¯ä¸æ˜¯éœ€è¦ä»–,å°±ä¸è¦ä½¿ç”¨å®ƒ</strong>.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptè®¾è®¡åŸåˆ™-å•ä¸€èŒè´£]]></title>
      <url>http://yoursite.com/2017/03/09/javascript%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99-%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3/</url>
      <content type="html"><![CDATA[<p>å‰é¢æŠŠjavascriptçš„è®¾è®¡æ¨¡å¼åŸºæœ¬è¿‡äº†ä¸€éï¼Œå¯ä»¥è¯´æ˜¯æ„Ÿæ…¨å¾ˆå¤šï¼Œè®¸å¤šçš„æ€æƒ³éƒ½æ˜¯ä»æœªæ¥è§¦è¿‡çš„ï¼Œå­¦èµ·æ¥éš¾åº¦ä¹Ÿä¸å°ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ˆå€¼å¾—çš„ã€‚å¦‚æœä»¥å‰æ˜¯åœ¨è¶³çƒåœºä¸Šè¸¢é‡çƒçš„è¯ï¼Œç°åœ¨æ€»ç®—æ‰¾åˆ°ä¸€ä¸ªåƒæ¨¡åƒæ ·çš„æ•™ç»ƒåœ¨æŒ‡å¯¼äº†ï¼Œä¸ä¸€å®šä¼šæˆä¸ºä¸€ä¸ªä¸–ç•Œçº§çš„çƒæ˜Ÿï¼Œä½†æ˜¯æ°´å¹³è‡³å°‘ä¹Ÿä¼šæ¯”ä»¥å‰æé«˜å¾ˆå¤šã€‚<br>æ¥ä¸‹æ¥ä¼šçœ‹çœ‹ä¸€äº›è®¾è®¡åŸåˆ™ï¼Œè®¾è®¡åŸåˆ™æ˜¯æ¯”æ¨¡å¼æ›´é«˜ä¸€çº§çš„æ–¹æ³•ï¼Œæ˜¯çº²é¢†æ€§çš„å†…å®¹ã€‚</p>
<blockquote>
<p>å•ä¸€èŒè´£(single responsable princple)è¢«å®šä¸ºä¸ºâ€œå¼•èµ·å˜åŒ–çš„åŸå› â€ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼Œé‚£ä¹ˆåœ¨éœ€æ±‚å‘ç”Ÿå˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚<br>å› æ­¤SRPåŸåˆ™ä½“ç°ä¸ºï¼šä¸€ä¸ªå¯¹è±¡(æ–¹æ³•)åªåšä¸€ä»¶äº‹æƒ…ã€‚<br>å‚è€ƒã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹ç¬¬18ç« </p>
</blockquote>
<p>#####è®¾è®¡æ¨¡å¼ä¸­çš„SRPåŸåˆ™</p>
<p>ä»£ç†æ¨¡å¼<br>ä¸‹é¢è¿™ä¸ªä¾‹å­æ˜¯è¦åœ¨æ–‡æ¡£ä¸­åˆ›å»ºä¸€ä¸ªimgæ ‡ç­¾ï¼Œå¹¶ä¸”è¦æ’å…¥å›¾ç‰‡<br>åœ¨åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œç”±äºç½‘é€Ÿçš„é™åˆ¶éœ€è¦é¢„å…ˆåŠ è½½ä¸€å¼ æœ¬åœ°å›¾ç‰‡ï¼Œç¨åä¼šåŠ è½½ç½‘ç»œå›¾ç‰‡ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­<code>åˆ›å»ºimgæ ‡ç­¾</code>å’Œ<code>æ›´æ¢å›¾ç‰‡æº</code>æ˜¯<code>æ²¡æœ‰å…³ç³»</code>çš„ã€‚æ‰€ä»¥æœ€å¥½æ˜¯æŠŠè¿™ä¸¤ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªå¯¹è±¡æ¥å¤„ç†ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åˆ›å»ºimgæ ‡ç­¾çš„å¯¹è±¡</span></div><div class="line"><span class="keyword">var</span> myImage = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> imgNode = <span class="built_in">document</span>.createElement( <span class="string">'img'</span> );</div><div class="line">		<span class="built_in">document</span>.body.appendChild( imgNode );</div><div class="line">		<span class="keyword">return</span> &#123;</div><div class="line">			<span class="attr">setSrc</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> src </span>)</span>&#123;</div><div class="line"></div><div class="line">				imgNode.src = src;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;)();</div><div class="line">  <span class="comment">//æ·»åŠ å›¾ç‰‡è·¯å¾„çš„å¯¹è±¡</span></div><div class="line">	<span class="keyword">var</span> proxyImage = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> img = <span class="keyword">new</span> Image; <span class="comment">//å®ä¾‹åŒ–æ ‡ç­¾å¯¹è±¡</span></div><div class="line">		img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			myImage.setSrc( <span class="keyword">this</span>.src ); <span class="comment">//åŠ è½½é»˜è®¤å›¾ç‰‡</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> &#123;</div><div class="line">			<span class="attr">setSrc</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> src </span>)</span>&#123;</div><div class="line">				myImage.setSrc( <span class="string">'file:// /C:/Users/svenzeng/Desktop/loading.gif'</span> );</div><div class="line">				img.src = src;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;)();</div><div class="line">	<span class="comment">//æ›´æ”¹å›¾ç‰‡çš„è·¯å¾„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å’Œimgæ ‡ç­¾çš„åˆ›å»ºå¯¹è±¡æ²¡æœ‰å…³ç³»äº†ã€‚</span></div><div class="line">	proxyImage.setSrc( <span class="string">'http:// imgcache.qq.com/music/photo/000GGDys0yA0Nk.jpg'</span> );</div></pre></td></tr></table></figure></p>
<p>è¿­ä»£å™¨æ¨¡å¼<br>çœ‹ä¸‹é¢æ®µä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¿™æ®µä»£ç å¾€æ–‡æ¡£ä¸­æ·»åŠ divå…ƒç´ ï¼Œä½†æ˜¯æœ‰é™åˆ¶ï¼Œè¿™é‡Œå°±åªèƒ½æ·»åŠ æ•°ç»„</span></div><div class="line"><span class="comment">//æœ‰ä¸¤ä¸ªèŒè´£ä¸€ä¸ªæ˜¯æ·»åŠ å…ƒç´ ï¼Œä¸€ä¸ªæ˜¯éå†æ•°æ®ï¼Œæ‰€æœ‰æœ‰å¿…è¦åˆ†å¼€</span></div><div class="line"> <span class="keyword">var</span> appendDiv=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;l=data.length;i&lt;l;i++)&#123;</div><div class="line">   <span class="keyword">var</span> div=<span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">   div.innerHTML=data[i];</div><div class="line">   <span class="built_in">document</span>.body.appendChild(div);</div><div class="line">  &#125;</div><div class="line"> &#125;;</div><div class="line"> </div><div class="line"> appenDiv([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨å•ä¸€èŒè´£åŸåˆ™æ”¹å˜ä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> each = <span class="function"><span class="keyword">function</span>(<span class="params"> obj, callback </span>) </span>&#123;<span class="comment">//éå†çš„æ–¹æ³•</span></div><div class="line"><span class="comment">//å¯¹è±¡å’Œæ•°ç»„éƒ½å¯ä»¥è¾“å…¥ï¼Œçµæ´»æ€§åŠ å¤§ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ä¿®æ”¹</span></div><div class="line">		<span class="keyword">var</span> value,</div><div class="line">		i = <span class="number">0</span>,</div><div class="line">		length = obj.length,</div><div class="line">		isArray = isArraylike( obj ); <span class="comment">// isArraylike å‡½æ•°æœªå®ç°ï¼Œå¯ä»¥ç¿»é˜…jQuery æºä»£ç </span></div><div class="line">		<span class="keyword">if</span> ( isArray ) &#123; <span class="comment">// è¿­ä»£ç±»æ•°ç»„</span></div><div class="line">			<span class="keyword">for</span> ( ; i &lt; length; i++ ) &#123;</div><div class="line">				callback.call( obj[ i ], i, obj[ i ] );</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">for</span> ( i <span class="keyword">in</span> obj ) &#123; <span class="comment">// è¿­ä»£object å¯¹è±¡</span></div><div class="line">				value = callback.call( obj[ i ], i, obj[ i ] );</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> obj;</div><div class="line">	&#125;;</div><div class="line"> <span class="comment">//æ ¹æ®è¾“å…¥æ•°æ®çš„å…ƒç´ æ·»åŠ æ–¹æ³•</span></div><div class="line">	<span class="keyword">var</span> appendDiv = <span class="function"><span class="keyword">function</span>(<span class="params"> data </span>)</span>&#123;</div><div class="line">		each( data, <span class="function"><span class="keyword">function</span>(<span class="params"> i, n </span>)</span>&#123; <span class="comment">//ä½¿ç”¨eachæ–¹æ³•æ¥æ‰§è¡Œéå†</span></div><div class="line">		<span class="comment">//åœ¨å›è°ƒå‡½æ•°ä¸­æ ¹æ®éå†æ•°æ®æ·»åŠ å…ƒç´ è‡³æ–‡æ¡£ä¸­</span></div><div class="line">			<span class="keyword">var</span> div = <span class="built_in">document</span>.createElement( <span class="string">'div'</span> );</div><div class="line">			div.innerHTML = n;</div><div class="line">			<span class="built_in">document</span>.body.appendChild( div );</div><div class="line">		&#125;);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	appendDiv( [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> ] );<span class="comment">//æ•°ç»„æ•°æ®</span></div><div class="line">	appendDiv(&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>,<span class="attr">d</span>:<span class="number">4</span>&#125; ); <span class="comment">//å¯¹è±¡æ•°æ®</span></div></pre></td></tr></table></figure></p>
<p>å•ä¾‹æ¨¡å¼</p>
<p>åœ¨å‰é¢å·²ç»æœ‰ç¬”è®°äº†ã€‚å®é™…æ˜¯æŠŠå®é™…æ“ä½œå’Œåˆ›å»ºå•ä¾‹çš„æ–¹æ³•åˆ†åˆ«å°è£…åœ¨ä¸¤ä¸ªæ–¹æ³•é‡Œã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> createLoginLayer = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//åˆ›å»ºå…ƒç´ çš„æ–¹æ³•</span></div><div class="line">		<span class="keyword">var</span> div;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">if</span> ( !div )&#123;</div><div class="line">				div = <span class="built_in">document</span>.createElement( <span class="string">'div'</span> );</div><div class="line">				div.innerHTML = <span class="string">'æˆ‘æ˜¯ç™»å½•æµ®çª—'</span>;</div><div class="line">				div.style.display = <span class="string">'none'</span>;</div><div class="line">				<span class="built_in">document</span>.body.appendChild( div );</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">return</span> div; <span class="comment">//å•ä¾‹çš„åˆ¤æ–­ä¾æ®</span></div><div class="line">		&#125;</div><div class="line">	&#125;)();</div><div class="line">  </div><div class="line">        <span class="comment">//åˆ›å»ºå’Œæ£€æµ‹å•ä¾‹çš„æ–¹æ³•ï¼Œå‚æ•°ä¸ºåˆ›å»ºå…ƒç´ çš„æ–¹æ³•</span></div><div class="line">	<span class="keyword">var</span> getSingle = <span class="function"><span class="keyword">function</span>(<span class="params"> fn </span>)</span>&#123; <span class="comment">// è·å–å•ä¾‹</span></div><div class="line">		<span class="keyword">var</span> result;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> result || ( result = fn .apply(<span class="keyword">this</span>, <span class="built_in">arguments</span> ) ); </div><div class="line">                        <span class="comment">//è¿™ä¸ªåœ°æ–¹è¦æ³¨æ„applyå’Œargumentsçš„åº”ç”¨</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> createLoginLayer = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// åˆ›å»ºç™»å½•æµ®çª—</span></div><div class="line">		<span class="keyword">var</span> div = <span class="built_in">document</span>.createElement( <span class="string">'div'</span> );</div><div class="line">		div.innerHTML = <span class="string">'æˆ‘æ˜¯ç™»å½•æµ®çª—'</span>;</div><div class="line">		<span class="built_in">document</span>.body.appendChild( div );</div><div class="line">		<span class="keyword">return</span> div;</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	<span class="keyword">var</span> createSingleLoginLayer = getSingle( createLoginLayer );</div><div class="line">	<span class="keyword">var</span> loginLayer1 = createSingleLoginLayer();</div><div class="line">	<span class="keyword">var</span> loginLayer2 = createSingleLoginLayer();</div><div class="line">	alert ( loginLayer1 === loginLayer2 ); <span class="comment">// è¾“å‡ºï¼š true  //ä¸ºåŒä¸€å¯¹è±¡</span></div></pre></td></tr></table></figure></p>
<p>è£…é¥°è€…æ¨¡å¼<br>å‰é¢çš„è®¾è®¡æ¨¡å¼é‡Œä¹Ÿæœ‰ä»‹ç»<br>è£…é¥°è€…æ¨¡å¼å¯ä»¥åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³•æˆ–æŒ‡è´£ã€‚ä»è€Œä¹Ÿä½¿çš„å¯¹è±¡çš„åŠŸèƒ½å•ä¸€åŒ–ã€‚<br>ä¸‹é¢ä¸¤ä¸ªå‡½æ•°è°ƒç”¨çš„æ—¶å€™æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">			 <span class="comment">//æ‰§è¡ŒåŸå‡½æ•°</span></div><div class="line">			afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );<span class="comment">//æ‰§è¡Œafterå‡½æ•°</span></div><div class="line">			<span class="keyword">return</span> ret;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> showLogin = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'æ‰“å¼€ç™»å½•æµ®å±‚'</span> );</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'ä¸ŠæŠ¥æ ‡ç­¾ä¸º: '</span> + <span class="keyword">this</span>.getAttribute( <span class="string">'tag'</span> ) );</div><div class="line"></div><div class="line">	&#125;;</div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'button'</span> ).onclick = showLogin.after( log );</div><div class="line"><span class="comment">// æ‰“å¼€ç™»å½•æµ®å±‚ä¹‹åä¸ŠæŠ¥æ•°æ®</span></div></pre></td></tr></table></figure></p>
<p>#####å•ä¸€èŒè´£åŸåˆ™å‡ä½äº†å•ä¸ªç±»æˆ–è€…å¯¹è±¡çš„å¤æ‚åº¦ï¼ŒæŒ‰ç…§æŒ‡è´£æŠŠå¯¹è±¡åˆ†è§£æˆæ›´å°çš„ç²’åº¦ã€‚æœ‰åŠ©äºä»£ç çš„å¤ç”¨ï¼Œä¿®æ”¹å’Œæµ‹è¯•ã€‚ä½†æ˜¯ä»£ç å¤æ‚åº¦æ˜¯æé«˜äº†ã€‚æ€ä¹ˆå¹³è¡¡å‘¢ï¼Ÿè¿™æ˜¯ä¸ªé—®é¢˜ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptæœ€å°‘çŸ¥è¯†åŸåˆ™]]></title>
      <url>http://yoursite.com/2017/03/09/javascript%E6%9C%80%E5%B0%91%E7%9F%A5%E8%AF%86%E5%8E%9F%E5%88%99/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€å°‘çŸ¥è¯†åŸåˆ™è¯´çš„æ˜¯ä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“å°½å¯èƒ½çš„ä¸å…¶ä»–å®ä½“å‡å°‘ç›¸äº’ä½œç”¨ã€‚<br>è¿™é‡Œçš„è½¯ä»¶å®ä½“æ˜¯ä¸€ä¸ªå¹¿ä¹‰æ¦‚å¿µï¼Œä¸ä»…åŒ…æ‹¬å¯¹è±¡ï¼Œè¿˜åŒ…æ‹¬ç³»ç»Ÿï¼Œç±»ï¼Œæ¨¡å—ï¼Œå‡½æ•°ï¼Œå˜é‡ç¯ã€‚è¿™æ ·æ¥è¯´æœ€å°‘çŸ¥è¯†åŸåˆ™æ¶µç›–çš„èŒƒå›´å°±å¾ˆå¤§äº†ã€‚ä¸‹é¢çœ‹çœ‹å’Œjavascriptç›¸å…³çš„å†…å®¹<br>å‚è€ƒã€Šjavascirptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ç¬¬19ç« </p>
</blockquote>
<ol>
<li><p>å‡å°‘å¯¹è±¡ä¹‹é—´çš„è”ç³»<br>æœ€å°‘çŸ¥è¯†åŸåˆ™æŒ‡å¯¼æˆ‘ä»¬ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¸å¿…å½¼æ­¤é€šè®¯ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å°±ä¸è¦å‘ç”Ÿç›´æ¥è”ç³»ã€‚å¸¸è§çš„åšæ³•æ˜¯å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰è€…æ¥æ‰¿æ‹…å½¼æ­¤çš„é€šä¿¡ä»»åŠ¡ã€‚</p>
</li>
<li><p>javascriptè®¾è®¡æ¨¡å¼ä¸­çš„æœ€å°‘çŸ¥è¯†åŸåˆ™</p>
</li>
</ol>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼</strong><br>è¿™ä¸ªæ¨¡å¼æ˜¯ä½¿ç”¨è€…ä»¬æ˜¯ä¸å‘ç”Ÿä»»ä½•è”ç³»çš„ï¼Œæ‰€æœ‰çš„ä¿¡æ¯éƒ½æ˜¯ç”±ä¸­ä»‹è€…æ¥å®Œæˆã€‚<br>reacté€šè¿‡å¼•å…¥reduxåº”è¯¥å°±æ˜¯è¿™ç§æ¨¡å¼ã€‚reactç»„ä»¶ä¹‹é—´ä¸å†å‘ç”Ÿä»»ä½•çš„è”ç³»ï¼Œæ‰€æœ‰ä¸ç»„ä»¶stateå˜åŒ–çš„é€šè®¯è¯·æ±‚éƒ½æ˜¯é€šè¿‡reduxæ¥å®Œæˆçš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œç»„ä»¶å¯ä»¥åº”å¯¹å¤æ‚çš„stateå˜åŒ–ã€‚</p>
<p><strong>å¤–è§‚æ¨¡å¼</strong><br>è¿™æ˜¯é’ˆå¯¹ä½¿ç”¨è€…è€Œè¨€çš„ã€‚å¤–è§‚æ¨¡å¼ä½œç”¨æ˜¯å¯¹äº¤äº’ä½¿ç”¨è€…éšè—å­ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p>
<ul>
<li>[ ] å¤–è§‚æ¨¡å¼ä¸ºä¸€ç»„ç³»ç»Ÿæä¾›ä¸€ä¸ªä¾¿åˆ©çš„å…¥å£ã€‚åœ¨jqueryä¸­å…¼å®¹äº†æµè§ˆå™¨çš„å·®å¼‚ï¼Œä½†æ˜¯ä½¿ç”¨è€…ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªapiæ¥å£ï¼Œå°±æ˜¯ä¸€ä¸ªä½“ç°</li>
<li>[ ] éš”ç¦»ä½¿ç”¨è€…å’Œå¤æ‚ç³»ç»Ÿçš„è”ç³»ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å»äº†è§£å…·ä½“çš„å·®å¼‚</li>
</ul>
<p>javascriptçš„å‡½æ•°å°è£…</p>
<p>javascriptå‡½æ•°æœ‰ç€è‡³é«˜æ— ä¸Šçš„æƒåˆ©ï¼Œçµæ´»æ€§å¾ˆå¤§ã€‚é€šè¿‡ä½¿ç”¨é—­åŒ…éšè—å˜é‡ï¼Œé€šè¿‡å•ä¾‹æ¨¡å¼ï¼Œæ­ç¤ºæ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼.javascriptä½¿ç”¨å‡½æ•°å’Œå¯¹è±¡å­—é¢é‡çš„æ–¹æ³•éšè—å…·ä½“çš„å®ç°é€»è¾‘ã€‚åªæš´éœ²ç›¸å…³çš„æ–¹æ³•ã€‚</p>
<p>è¿™å°±æ˜¯æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚è¿™ä¹Ÿæ˜¯åŸºç¡€åŸåˆ™åœ¨javascriptç¨‹åºè®¾è®¡ä¸­åº”è¯¥æ˜¯æ—¶åˆ»éƒ½è¦ä½“ç°è¿™ç§åŸåˆ™ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/08/javascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å•ä¾‹æ¨¡å¼çš„å®šä¹‰ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®ä»–çš„å…¨å±€è®¿é—®ç‚¹<br>å‚è€ƒä¹¦ç±ã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹<br>æœ‰ä¸€äº›å¯¹è±¡æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªï¼Œä¾‹å¦‚çº¿ç¨‹æ± ï¼Œå…¨å±€ç¼“å­˜ç­‰ã€‚</p>
</blockquote>
<ol>
<li>å®ä¾‹å•ä¾‹æ¨¡å¼</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Singleton = <span class="function"><span class="keyword">function</span>(<span class="params"> name </span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.instance = <span class="literal">null</span>;</div><div class="line">	&#125;;</div><div class="line">	Singleton.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		alert ( <span class="keyword">this</span>.name );</div><div class="line">	&#125;;</div><div class="line">	Singleton.getInstance = <span class="function"><span class="keyword">function</span>(<span class="params"> name </span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span> ( !<span class="keyword">this</span>.instance )&#123;  <span class="comment">//å¯¹å®ä¾‹è¿›è¡Œæ£€æµ‹</span></div><div class="line">			<span class="keyword">this</span>.instance = <span class="keyword">new</span> Singleton( name ); <span class="comment">//å…¨å±€ç¼“å­˜new å¯¹è±¡</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.instance;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> a = Singleton.getInstance( <span class="string">'sven1'</span> );  <span class="comment">//ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–ï¼Œæ£€æµ‹æ²¡æœ‰å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œè‡ªå·±å®ä¾‹åŒ–ä¸€ä¸ªï¼Œç„¶åç¼“å­˜</span></div><div class="line">	<span class="keyword">var</span> b = Singleton.getInstance( <span class="string">'sven2'</span> );<span class="comment">//ç¬¬äºŒæ¬¡å®ä¾‹åŒ–ï¼Œæ£€æµ‹å·²ç»æœ‰å…¨å±€çš„å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œç›´æ¥è¿”å›ï¼Œä¸è¿›è¡Œå…·ä½“å®ä¾‹åŒ–</span></div><div class="line">	alert ( a === b ); <span class="comment">// true    //ç»Ÿä¸€å®ä¾‹å¯¹è±¡</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[redux-logic]]></title>
      <url>http://yoursite.com/2017/03/08/redux-logic/</url>
      <content type="html"><![CDATA[<h1 id="redux-logic"><a href="#redux-logic" class="headerlink" title="redux-logic"></a>redux-logic</h1><blockquote>
<p>â€œOne place for all your business logic and action side effectsâ€</p>
</blockquote>
<p>Redux middleware that can:</p>
<ul>
<li><strong>intercept</strong> (validate/transform/augment) actions AND</li>
<li><strong>perform async processing</strong> (fetching, I/O, side effects)</li>
</ul>
<p><a href="http://travis-ci.org/jeffbski/redux-logic" target="_blank" rel="external"><img src="https://secure.travis-ci.org/jeffbski/redux-logic.png?branch=master" alt="Build Status"></a> <a href="https://www.codacy.com/app/jeff-barczewski/redux-logic" target="_blank" rel="external"><img src="https://img.shields.io/codacy/grade/3687e7267e6d466b9d226c22b24f0061.svg" alt="Codacy Grade Badge"></a> <a href="https://www.codacy.com/app/jeff-barczewski/redux-logic" target="_blank" rel="external"><img src="https://img.shields.io/codacy/coverage/3687e7267e6d466b9d226c22b24f0061.svg" alt="Codacy Coverage Badge"></a> <a href="https://snyk.io/test/github/jeffbski/redux-logic" target="_blank" rel="external"><img src="https://snyk.io/test/github/jeffbski/redux-logic/badge.svg" alt="Known Vulnerabilities"></a> <a href="https://www.npmjs.com/package/redux-logic" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/redux-logic.svg" alt="NPM Version Badge"></a></p>
<h2 id="tl-dr"><a href="#tl-dr" class="headerlink" title="tl;dr"></a>tl;dr</h2><p>With redux-logic, you have the <strong>freedom</strong> to write your logic in <strong>your favorite JS style</strong>:</p>
<ul>
<li>plain <strong>callback</strong> code - <code>dispatch(resultAction)</code></li>
<li><strong>promises</strong> - <code>return axios.get(url).then(...)</code></li>
<li><strong>async/await</strong> - <code>result = await fetch(url)</code></li>
<li><strong>observables</strong> - <code>ob$.next(action1)</code></li>
</ul>
<blockquote>
<p>Use the type of code you and your team are comfortable and experienced with.</p>
</blockquote>
<p>Leverage powerful <strong>declarative</strong> features by simply setting properties:</p>
<ul>
<li><strong>filtering</strong> for action type(s) or with regular expression(s)</li>
<li><strong>cancellation</strong> on receiving action type(s)</li>
<li>use only response for the <strong>latest</strong> request</li>
<li><strong>debouncing</strong></li>
<li><strong>throttling</strong></li>
<li>dispatch actions - auto <strong>decoration</strong> of payloads</li>
</ul>
<p>Testing your logic is straight forward and simple.</p>
<p>With simple code your logic can:</p>
<ul>
<li><strong>intercept</strong> actions before they hit the reducer<ul>
<li><strong>validate</strong>, verify, auth check actions and allow/reject or modify actions</li>
<li><strong>transform</strong> - augment/enhance/modify actions</li>
</ul>
</li>
<li><strong>process</strong> - <strong>async processing</strong> and dispatching, orchestration, I/O (ajax, REST, subscriptions, GraphQL, web sockets, â€¦)</li>
</ul>
<p>Redux-logic makes it easy to use code that is split into bundles, so you can dynamically load logic right along with your split UI.</p>
<p>Server rendering is simplified with redux-logic since it lets you know when all your async fetching is complete without manual tracking.</p>
<p>Inspired by redux-observable epics, redux-saga, and custom redux middleware, redux-logic combines ideas of each into a simple easy to use API.</p>
<h2 id="Quick-Example"><a href="#Quick-Example" class="headerlink" title="Quick Example"></a>Quick Example</h2><p>This is an example of logic which will listen for actions of type FETCH_POLLS and it will perform ajax request to fetch data for which it dispatches the results (or error) on completion. It supports cancellation by allowing anything to send an action of type CANCEL_FETCH_POLLS. It also uses <code>take latest</code> feature that if additional FETCH_POLLS actions come in before this completes, it will ignore the outdated requests.</p>
<p>The developer can just declare the type filtering, cancellation, and take latest behavior, no code needs to be written for that. That leaves the developer to focus on the real business requirements which are invoked in the process hook.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fetchPollsLogic = createLogic(&#123;</div><div class="line"></div><div class="line">  <span class="comment">// declarative built-in functionality wraps your code</span></div><div class="line">  type: FETCH_POLLS, <span class="comment">// only apply this logic to this type</span></div><div class="line">  cancelType: CANCEL_FETCH_POLLS, <span class="comment">// cancel on this type</span></div><div class="line">  latest: <span class="literal">true</span>, <span class="comment">// only take latest</span></div><div class="line"></div><div class="line">  <span class="comment">// your code here, hook into one or more of these execution</span></div><div class="line">  <span class="comment">// phases: validate, transform, and/or process</span></div><div class="line">  process(&#123; getState, action &#125;, dispatch, done) &#123;</div><div class="line">    axios.get(<span class="string">'https://survey.codewinds.com/polls'</span>)</div><div class="line">      .then(<span class="function"><span class="params">resp</span> =&gt;</span> resp.data.polls)</div><div class="line">      .then(<span class="function"><span class="params">polls</span> =&gt;</span> dispatch(&#123; <span class="attr">type</span>: FETCH_POLLS_SUCCESS,</div><div class="line">                                <span class="attr">payload</span>: polls &#125;))</div><div class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">             <span class="built_in">console</span>.error(err); <span class="comment">// log since could be render err</span></div><div class="line">             dispatch(&#123; <span class="attr">type</span>: FETCH_POLLS_FAILED, <span class="attr">payload</span>: err,</div><div class="line">                        <span class="attr">error</span>: <span class="literal">true</span> &#125;)</div><div class="line">      &#125;)</div><div class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> done()); <span class="comment">// call done when finished dispatching</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Since redux-logic gives you the freedom to use your favorite style of JS code (callbacks, promises, async/await, observables), it supports many features to make that easier, <a href="/jeffbski/redux-logic/blob/master/docs/api.md#dispatch---multi-dispatching-and-process-variable-signature">explained in more detail</a>.</p>
<h2 id="Table-of-contents"><a href="#Table-of-contents" class="headerlink" title="Table of contents"></a>Table of contents</h2><ul>
<li><a href="#goals">Goals</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="./docs/api.md">Full API</a></li>
<li><a href="#examples">Examples</a> - <a href="#jsfiddle-live-examples">JSFiddle</a> and <a href="#full-examples">full examples</a></li>
<li><a href="#comparison-summaries">Comparison summaries</a> to <a href="#compared-to-fat-action-creators">fat action creators</a>, <a href="#compared-to-redux-thunk">thunks</a>, <a href="#compared-to-redux-observable">redux-observable</a>, <a href="#compared-to-redux-saga">redux-saga</a>, <a href="#compared-to-custom-redux-middleware">custom middleware</a></li>
<li><a href="#implementing-sampal-pattern">SAM/PAL pattern</a></li>
<li><a href="#other">Other</a> - todo, inspiration, license</li>
</ul>
<h2 id="Goals"><a href="#Goals" class="headerlink" title="Goals"></a>Goals</h2><ul>
<li>organize business logic keeping action creators and reducers clean<ul>
<li>action creators are light and just post action objects</li>
<li>reducers just focus on updating state</li>
<li>intercept and perform validations, verifications, authentication</li>
<li>intercept and transform actions</li>
<li>perform async processing, orchestration, dispatch actions</li>
</ul>
</li>
<li>wrap your core business logic code with declarative behavior<ul>
<li>filtered - apply to one or many action types or even all actions</li>
<li>cancellable - async work can be cancelled</li>
<li>limiting (like taking only the latest, throttling, and debouncing)</li>
</ul>
</li>
<li>features to support business logic and large apps<ul>
<li>have access to full state to make decisions</li>
<li>easily composable to support large applications</li>
<li>inject dependencies into your logic, so you have everything needed in your logic code</li>
<li>dynamic loading of logic for splitting bundles in your app</li>
<li>your core logic code stays focussed and simple, donâ€™t use generators or observables unless you want to.</li>
<li>create subscriptions - streaming updates</li>
<li>easy testing - since your code is just a function itâ€™s easy to isolate and test</li>
</ul>
</li>
</ul>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install rxjs --save</div><div class="line">npm install redux-logic --save</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// in configureStore.js</span></div><div class="line"><span class="keyword">import</span> &#123; createLogic, createLogicMiddleware &#125; <span class="keyword">from</span> <span class="string">'redux-logic'</span>;</div><div class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">'./rootReducer'</span>;</div><div class="line"><span class="keyword">import</span> arrLogic <span class="keyword">from</span> <span class="string">'./logic'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> deps = &#123; <span class="comment">// optional injected dependencies for logic</span></div><div class="line">  <span class="comment">// anything you need to have available in your logic</span></div><div class="line">  A_SECRET_KEY: <span class="string">'dsfjsdkfjsdlfjls'</span>,</div><div class="line">  <span class="attr">firebase</span>: firebaseInstance</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> logicMiddleware = createLogicMiddleware(arrLogic, deps);</div><div class="line"></div><div class="line"><span class="keyword">const</span> middleware = applyMiddleware(</div><div class="line">  logicMiddleware</div><div class="line">);</div><div class="line"></div><div class="line"><span class="keyword">const</span> enhancer = middleware; <span class="comment">// could compose in dev tools too</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">configureStore</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> store = createStore(rootReducer, enhancer);</div><div class="line">  <span class="keyword">return</span> store;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// in logic.js - combines logic from across many files, just</span></div><div class="line"><span class="comment">// a simple array of logic to be used for this app</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</div><div class="line"> ...todoLogic,</div><div class="line"> ...pollsLogic</div><div class="line">];</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// in polls/logic.js</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> validationLogic = createLogic(&#123;</div><div class="line">  <span class="attr">type</span>: ADD_USER,</div><div class="line">  validate(&#123; getState, action &#125;, allow, reject) &#123;</div><div class="line">    <span class="keyword">const</span> user = action.payload;</div><div class="line">    <span class="keyword">if</span> (!getState().users[user.id]) &#123; <span class="comment">// can also hit server to check</span></div><div class="line">      allow(action);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      reject(&#123; <span class="attr">type</span>: USER_EXISTS_ERROR, <span class="attr">payload</span>: user, <span class="attr">error</span>: <span class="literal">true</span> &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> addUniqueId = createLogic(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'*'</span>,</div><div class="line">  transform(&#123; getState, action &#125;, next) &#123;</div><div class="line">    <span class="comment">// add unique tid to action.meta of every action</span></div><div class="line">    <span class="keyword">const</span> existingMeta = action.meta || &#123;&#125;;</div><div class="line">    <span class="keyword">const</span> meta = &#123;</div><div class="line">      ...existingMeta,</div><div class="line">      <span class="attr">tid</span>: shortid.generate()</div><div class="line">    &#125;,</div><div class="line">    next(&#123;</div><div class="line">      ...action,</div><div class="line">      meta</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> fetchPollsLogic = createLogic(&#123;</div><div class="line">  <span class="attr">type</span>: FETCH_POLLS, <span class="comment">// only apply this logic to this type</span></div><div class="line">  cancelType: CANCEL_FETCH_POLLS, <span class="comment">// cancel on this type</span></div><div class="line">  latest: <span class="literal">true</span>, <span class="comment">// only take latest</span></div><div class="line">  process(&#123; getState, action &#125;, dispatch, done) &#123;</div><div class="line">    axios.get(<span class="string">'https://survey.codewinds.com/polls'</span>)</div><div class="line">      .then(<span class="function"><span class="params">resp</span> =&gt;</span> resp.data.polls)</div><div class="line">      .then(<span class="function"><span class="params">polls</span> =&gt;</span> dispatch(&#123; <span class="attr">type</span>: FETCH_POLLS_SUCCESS,</div><div class="line">                                <span class="attr">payload</span>: polls &#125;))</div><div class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">             <span class="built_in">console</span>.error(err); <span class="comment">// log since could be render err</span></div><div class="line">             dispatch(&#123; <span class="attr">type</span>: FETCH_POLLS_FAILED, <span class="attr">payload</span>: err,</div><div class="line">                        <span class="attr">error</span>: <span class="literal">true</span> &#125;)</div><div class="line">      &#125;)</div><div class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> done());</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// pollsLogic</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</div><div class="line">  validationLogic,</div><div class="line">  addUniqueId,</div><div class="line">  fetchPollsLogic</div><div class="line">];</div></pre></td></tr></table></figure>
<h3 id="processOptions-introduced-for-redux-logic-0-8-2-allowing-for-even-more-streamlined-code"><a href="#processOptions-introduced-for-redux-logic-0-8-2-allowing-for-even-more-streamlined-code" class="headerlink" title="processOptions introduced for redux-logic@0.8.2 allowing for even more streamlined code"></a>processOptions introduced for redux-logic@0.8.2 allowing for even more streamlined code</h3><p><code>processOptions</code> has these new properties which affect the process hook behavior:</p>
<ul>
<li><p><code>dispatchReturn</code> - the returned value of the process function will be dispatched or if it is a promise or observable then the resolve, reject, or observable values will be dispatched applying any successType or failType logic if defined. Default is determined by arity of process fn, <code>true</code> if dispatch not provided, <code>false</code> otherwise. <a href="https://github.com/jeffbski/redux-logic/blob/master/docs/api.md#dispatch---multi-dispatching-and-process-variable-signature" target="_blank" rel="external">Details</a></p>
</li>
<li><p><code>successType</code> - dispatch this action type using contents of dispatch as the payload (also would work with with promise or observable). You may alternatively provide an action creator function to use instead and it will receive the value as only parameter. Default: <code>undefined</code>.</p>
<ul>
<li><p>if successType is a string action type</p>
<ul>
<li>create action using successType and provide value as payload. ex: with <code>successType:&#39;FOO&#39;</code>, result would be <code>{ type: &#39;FOO&#39;, payload: value }</code></li>
</ul>
</li>
<li><p>if successType is an action creator fn receiving the value as only parameter</p>
<ul>
<li>use the return value from the action creator fn for dispatching ex: <code>successType: x =&gt; ({ type: &#39;FOO&#39;, payload: x })</code></li>
<li>if the action creator fn returns a falsey value like <code>undefined</code> then nothing will be dispatched. This allows your action creator to control whether something is actually dispatched based on the value provided to it.</li>
</ul>
</li>
</ul>
</li>
<li><p><code>failType</code> - dispatch this action type using contents of error as the payload, sets error: true (would also work for rejects of promises or error from observable). You may alternatively provide an action creator function to use instead which will receive the error as the only parameter. Default: <code>undefined</code>.</p>
<ul>
<li><p>if failType is a string action type</p>
<ul>
<li>create action using failType, provide value as the payload, and set error to true. ex: with <code>failType:&#39;BAR&#39;</code>, result would be <code>{ type: &#39;BAR&#39;, payload: errorValue, error: true }</code></li>
</ul>
</li>
<li><p>if failType is an action creator function receiving the error value as its only parameter</p>
<ul>
<li>use the return value from the action creator fn for dispatching. ex: <code>failType: x =&gt; ({ type: &#39;BAR&#39;, payload: x, error: true })</code></li>
<li>if the action creator fn returns a falsey value like <code>undefined</code> then nothing will be dispatched. This allows your action creator to control whether something is actually dispatched based on teh value provided to it.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The successType and failType would enable clean code, where you can simply return a promise or observable that resolves to the payload and rejects on error. The resulting code doesnâ€™t have to deal with dispatch and actions directly.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fetchPollsLogic = createLogic(&#123;</div><div class="line"></div><div class="line">  <span class="comment">// declarative built-in functionality wraps your code</span></div><div class="line">  type: FETCH_POLLS, <span class="comment">// only apply this logic to this type</span></div><div class="line">  cancelType: CANCEL_FETCH_POLLS, <span class="comment">// cancel on this type</span></div><div class="line">  latest: <span class="literal">true</span>, <span class="comment">// only take latest</span></div><div class="line"></div><div class="line">  processOptions: &#123;</div><div class="line">    <span class="comment">// optional since the default is true when dispatch is omitted from</span></div><div class="line">    <span class="comment">// the process fn signature</span></div><div class="line">    dispatchReturn: <span class="literal">true</span>, <span class="comment">// use returned/resolved value(s) for dispatching</span></div><div class="line">    <span class="comment">// provide action types or action creator functions to be used</span></div><div class="line">    <span class="comment">// with the resolved/rejected values from promise/observable returned</span></div><div class="line">    successType: FETCH_POLLS_SUCCESS, <span class="comment">// dispatch this success act type</span></div><div class="line">    failType: FETCH_POLLS_FAILED, <span class="comment">// dispatch this failed action type</span></div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="comment">// Omitting dispatch from the signature below makes the default for</span></div><div class="line">  <span class="comment">// dispatchReturn true allowing you to simply return obj, promise, obs</span></div><div class="line">  <span class="comment">// not needing to use dispatch directly</span></div><div class="line">  process(&#123; getState, action &#125;) &#123;</div><div class="line">    <span class="keyword">return</span> axios.get(<span class="string">'https://survey.codewinds.com/polls'</span>)</div><div class="line">      .then(<span class="function"><span class="params">resp</span> =&gt;</span> resp.data.polls);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>This is pretty nice leaving us with mainly our business logic code that could be easily extracted and called from here.</p>
<h2 id="Full-API"><a href="#Full-API" class="headerlink" title="Full API"></a>Full API</h2><p>See the <a href="./docs/api.md">docs for the full api</a></p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><h3 id="JSFiddle-live-examples"><a href="#JSFiddle-live-examples" class="headerlink" title="JSFiddle live examples"></a>JSFiddle live examples</h3><ul>
<li><a href="https://jsfiddle.net/jeffbski/78vpf92k/" target="_blank" rel="external">search async axios fetch</a> - live search using debounce and take latest functionality with axios fetch</li>
<li><a href="https://jsfiddle.net/jeffbski/uLh2add5/" target="_blank" rel="external">search rxjs ajax fetch</a> - live search using debounce and take latest functionality with rxjs ajax fetch</li>
<li><a href="https://jsfiddle.net/jeffbski/rLz44jk9/" target="_blank" rel="external">search rxjs ajax fetch - using processOptions</a> - live search using debounce and take latest with rxjs ajax fetch using processOptions to streamline the code</li>
<li><a href="https://jsfiddle.net/jeffbski/954g5n7h/" target="_blank" rel="external">async axios fetch - single page</a> - displayed using React</li>
<li><a href="https://jsfiddle.net/jeffbski/0fu407na/" target="_blank" rel="external">async rxjs-ajax fetch</a> - async fetching using RxJS ajax which supports XHR abort for cancels</li>
<li><a href="https://jsfiddle.net/jeffbski/yzy8w4ve/" target="_blank" rel="external">async axios fetch - single page redux only</a> - just the redux and redux-logic code</li>
<li><a href="https://jsfiddle.net/jeffbski/oL6jmp52/" target="_blank" rel="external">async axios fetch - using processOptions</a> - using processOptions to streamline your code further with React</li>
<li><a href="https://jsfiddle.net/jeffbski/d4p6oo0d/" target="_blank" rel="external">async rxjs-ajax fetch - using processOptions</a> - async fetch using RxJS ajax (supporting XHR abort on cancel) and processOptions for clean code.</li>
<li><a href="https://jsfiddle.net/jeffbski/rfc7oz9p/" target="_blank" rel="external">async await - react</a> - using ES7 async functions (async/await) displaying with React</li>
<li><a href="https://jsfiddle.net/jeffbski/h485f6h5/" target="_blank" rel="external">async await - redux only</a> - using ES7 async functions (async/await) - just redux and redux-logic code</li>
<li><a href="https://jsfiddle.net/jeffbski/0rodyekn/" target="_blank" rel="external">async await - react processOptions</a> - using ES7 async functions (async/await) with processOptions, displayed with React</li>
</ul>
<h3 id="Full-examples"><a href="#Full-examples" class="headerlink" title="Full examples"></a>Full examples</h3><ul>
<li><a href="./examples/search-async-fetch">search-async-fetch</a> - search async fetch example using axios uses debouncing and take latest features</li>
<li><a href="./examples/async-fetch-vanilla">async-fetch-vanilla</a> - async fetch example using axios</li>
<li><a href="./examples/async-rxjs-ajax-fetch">async-rxjs-ajax-fetch</a> - async fetch example using RxJS ajax (supporting XHR abort on cancel) and redux-actions</li>
<li><a href="./examples/async-fetch-proc-options">async-fetch-proc-options</a> - async fetch example using axios and the new processOptions feature</li>
<li><a href="./examples/async-rxjs-ajax-proc-options">async-rxjs-ajax-proc-options</a> - async RxJS ajax (with XHR abort on cancel) fetch example using axios and the new processOptions feature</li>
<li><a href="./examples/async-await">async-await - ES7 async functions</a> - async fetch example using axios and ES7 async functions (async/await)</li>
<li><a href="./examples/async-await-proc-options">async-await - ES7 async functions with processOptions</a> - async fetch example using axios and ES7 async functions (async/await) and using the new processOptions feature</li>
<li><a href="./examples/countdown">countdown</a> - a countdown timer implemented with setInterval</li>
<li><a href="./examples/countdown-obs">countdown-obs</a> - a countdown timer implemented with Rx.Observable.interval</li>
<li><a href="./examples/form-validation">form-validation</a> - form validation and async post to server using axios, displays updated user list</li>
<li><a href="./examples/notification">notification</a> - notification message example showing at most N messages for X amount of time, rotating queued messages in as others expire</li>
<li><a href="./examples/single-file">search-single-file</a> - search async fetch example with all code in a single file and displayed with React</li>
<li><a href="./examples/single-file-redux">single-file-redux</a> - async fetch example with all code in a single file and appended to the container div. Only redux and redux-logic code.</li>
</ul>
<h2 id="Comparison-summaries"><a href="#Comparison-summaries" class="headerlink" title="Comparison summaries"></a>Comparison summaries</h2><p>Following are just short summaries to compare redux-logic to other approaches.</p>
<p>For a more detailed comparison with examples, see by article in docs, <a href="./docs/where-business-logic.md">Where do I put my business logic in a React-Redux application?</a>.</p>
<h3 id="Compared-to-fat-action-creators"><a href="#Compared-to-fat-action-creators" class="headerlink" title="Compared to fat action creators"></a>Compared to fat action creators</h3><ul>
<li>no easy way to cancel or do limiting like take latest with fat action creators</li>
<li>action creators would not have access to the full global state so you might have to pass down lots of extra data that isnâ€™t needed for rendering. Every time business logic changes might require new data to be made available</li>
<li>no global interception using just action creators - applying logic or transformations across all or many actions</li>
<li>Testing components and fat action creators may require running the code (possibly mocked API calls).</li>
</ul>
<h3 id="Compared-to-redux-thunk"><a href="#Compared-to-redux-thunk" class="headerlink" title="Compared to redux-thunk"></a>Compared to redux-thunk</h3><ul>
<li>With thunks business logic is spread over action creators</li>
<li>With thunks there is not an easy way to cancel async work nor to perform (take latest) limiting</li>
<li>no global interception with thunks - applying logic or transformations across all or many actions</li>
<li>Testing components and thunked action creators may require running the code (possibly mocked API calls). When you have a thunk (function or promise) you donâ€™t know what it does unless you execute it.</li>
</ul>
<h3 id="Compared-to-redux-observable"><a href="#Compared-to-redux-observable" class="headerlink" title="Compared to redux-observable"></a>Compared to redux-observable</h3><ul>
<li>redux-logic doesnâ€™t require the developer to use rxjs observables. It uses observables under the covers to provide cancellation, throttling, etc. You simply configure these parameters to get this functionality. You can still use rxjs in your code if you want, but not a requirement.</li>
<li>redux-logic hooks in before the reducer stack like middleware allowing validation, verification, auth, tranformations. Allow, reject, tranform actions before they hit your reducers to update your state as well as accessing state after reducers have run. redux-observable hooks in after the reducers have updated state so they have no opportuntity to prevent the updates.</li>
</ul>
<h3 id="Compared-to-redux-saga"><a href="#Compared-to-redux-saga" class="headerlink" title="Compared to redux-saga"></a>Compared to redux-saga</h3><ul>
<li>redux-logic doesnâ€™t require you to code with generators</li>
<li>redux-saga relies on pulling data (usually in a never ending loop) while redux-logic and logic are reactive, responding to data as it is available</li>
<li>redux-saga runs after reducers have been run, redux-logic can intercept and allow/reject/modify before reducers run also as well as after</li>
</ul>
<h3 id="Compared-to-custom-redux-middleware"><a href="#Compared-to-custom-redux-middleware" class="headerlink" title="Compared to custom redux middleware"></a>Compared to custom redux middleware</h3><ul>
<li>Both are fully featured to do any type of business logic (validations, tranformations, processing)</li>
<li>redux-logic already has built-in capabilities for some of the hard stuff like cancellation, limiting, dynamic loading of code. With custom middleware you have to implement all functionality.</li>
<li>No safety net, if things break it could stop all of your future actions</li>
<li>Testing requires some mocking or setup</li>
</ul>
<h3 id="Implementing-SAM-PAL-Pattern"><a href="#Implementing-SAM-PAL-Pattern" class="headerlink" title="Implementing SAM/PAL Pattern"></a>Implementing SAM/PAL Pattern</h3><p>The <a href="http://sam.js.org" target="_blank" rel="external">SAM (State-Action-Model) pattern</a> is a pattern introduced by Jean-Jacques Dubray. Also known as the PAL (proposer, acceptor, learner) pattern based on Paxos terminology.</p>
<p>A few of the challenging parts of implementing this with a React-Redux application are:</p>
<ol>
<li>where to perform the <code>accept</code> (interception) of the proposed action performing validation, verification, authentication against the current model state. Based on the current state, it might be appropriate to modify the action, dispatch a different action, or simply suppress the action.</li>
<li>how to trigger actions based on the state after the model has finished updating, referred to as the <code>NAP</code> (next-action-predicate).</li>
</ol>
<p>Custom Redux middleware can be introduced to perform this logic, but youâ€™ll be implementing most everything on your own.</p>
<p>With <code>redux-logic</code> you can implement the SAM / PAL pattern easily in your React/Redux apps.</p>
<p>Namely you can separate out your business logic from your action creators and reducers keeping them thin. redux-logic provides a nice place to accept, reject, and transform actions before your reducers are run. You have access to the full state to make decisions and you can trigger actions based on the updated state as well.</p>
<p>Solving those SAM challenges previously identified using redux-logic:</p>
<ol>
<li>perform acceptance in redux-logic <code>validate</code> hooks, you have access to the full state (model) of the app to make decisions. You can perform synchronous or asynchronous logic to determine whether to accept the action and you may augment, modify, substitute actions, or suppress as desired.</li>
<li>Perform NAP processing in redux-logic <code>process</code> hooks. The process hook runs after the actions have been sent down to the reducers so you have access to the full model (state) after the updates where you can make decisions and dispatch additional actions based on the updated state.</li>
</ol>
<p><a name="other"></a></p>
<h2 id="Inspiration"><a href="#Inspiration" class="headerlink" title="Inspiration"></a>Inspiration</h2><p>redux-logic was inspired from these projects:</p>
<ul>
<li><a href="https://redux-observable.js.org" target="_blank" rel="external">redux-observable epics</a></li>
<li><a href="http://yelouafi.github.io/redux-saga/" target="_blank" rel="external">redux-saga</a></li>
<li><a href="http://redux.js.org/docs/advanced/Middleware.html" target="_blank" rel="external">redux middleware</a></li>
</ul>
<h2 id="Minimized-gzipped-size-with-all-deps"><a href="#Minimized-gzipped-size-with-all-deps" class="headerlink" title="Minimized/gzipped size with all deps"></a>Minimized/gzipped size with all deps</h2><p>(redux-logic only includes the modules of RxJS 5 that it uses)<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">redux-logic<span class="selector-class">.min</span><span class="selector-class">.js</span><span class="selector-class">.gz</span> <span class="number">11</span>KB</div></pre></td></tr></table></figure></p>
<p>Note: If you are already including RxJS 5 into your project then the resulting delta will be much smaller.</p>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul>
<li>add typescript support</li>
<li>more docs</li>
<li>more examples</li>
<li>evaulate additional features as outlined above</li>
</ul>
<h2 id="Get-involved"><a href="#Get-involved" class="headerlink" title="Get involved"></a>Get involved</h2><p>If you have input or ideas or would like to get involved, you may:</p>
<ul>
<li>contact me via twitter @jeffbski  - <a href="http://twitter.com/jeffbski" target="_blank" rel="external">http://twitter.com/jeffbski</a></li>
<li>open an issue on github to begin a discussion - <a href="https://github.com/jeffbski/redux-logic/issues" target="_blank" rel="external">https://github.com/jeffbski/redux-logic/issues</a></li>
<li>fork the repo and send a pull request (ideally with tests) - <a href="https://github.com/jeffbski/redux-logic" target="_blank" rel="external">https://github.com/jeffbski/redux-logic</a></li>
<li>See the <a href="http://github.com/jeffbski/redux-logic/raw/master/CONTRIBUTING.md" target="_blank" rel="external">contributing guide</a></li>
</ul>
<h2 id="Supporters"><a href="#Supporters" class="headerlink" title="Supporters"></a>Supporters</h2><p>This project is supported by <a href="https://codewinds.com/" target="_blank" rel="external">CodeWinds Training</a></p>
<p><a name="license"></a></p>
<h2 id="License-MIT"><a href="#License-MIT" class="headerlink" title="License - MIT"></a>License - MIT</h2><ul>
<li><a href="http://github.com/jeffbski/redux-logic/raw/master/LICENSE.md" target="_blank" rel="external">MIT license</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-ä½¿ç”¨Reselectæ”¹è¿›Reactå’ŒReduxç¨‹åºæ€§èƒ½]]></title>
      <url>http://yoursite.com/2017/03/08/%E7%BF%BB%E8%AF%91-%E4%BD%BF%E7%94%A8Reselect%E6%94%B9%E8%BF%9BReact%E5%92%8CRedux%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%83%BD/</url>
      <content type="html"><![CDATA[<blockquote>
<p><em>Written by Neil Fenton16 June 2016</em><br>  <a href="http://blog.rangle.io/react-and-redux-performance-with-reselect/" target="_blank" rel="external">åŸæ–‡è¯·è§</a></p>
</blockquote>
<p> <img src="https://ww2.sinaimg.cn/large/006tKfTcly1fdnldaaddyg31040g4747.gif" alt="å›¾1"></p>
<p>Reactå’ŒReduxç»„åˆæ˜¯éå¸¸æ£’çš„,å½“ä»–ä»¬ä¸¤ä¸ªä¸€èµ·ä½¿ç”¨æ—¶,å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¨‹åºç»“æ„ä¸­åˆ†ç¦»å…³æ³¨ç‚¹.å³ä½¿Reactæ˜“ç”¨æ€§éå¸¸å¼º,ä½†æ˜¯æ€»ä¼šé‡åˆ°é«˜æ€§èƒ½éœ€æ±‚çš„æ—¶é—´.</p>
<p>åœ¨Reactä¸­æœ€æ˜‚è´µçš„æ“ä½œå°±æ˜¯æ¸²æŸ“å›è·¯.å½“ç»„ä»¶æ£€æµ‹åˆ°è¾“å…¥çš„å˜åŒ–,æ¸²æŸ“å›è·¯å°±ä¼šè¢«è§¦å‘(è¯‘æ³¨ï¼šè¿™é‡Œçš„æ„æ€çš„ç»„ä»¶çš„actionä¼šæ”¹å˜reduxçš„state,å˜å›æœ€ç»ˆåˆå›åˆ°ç»„ä»¶äº†).</p>
<p>å½“æˆ‘ä»¬åˆæ¬¡å¼€å§‹Reactç¨‹åºçš„æ—¶å€™,æˆ‘ä»¬ä¸ä¼šæ‹…å¿ƒæ¸²æŸ“å›è·¯çš„èŠ±é”€é—®é¢˜.ä½†æ˜¯å½“æˆ‘ä»¬çš„UIå˜å¾—å¤æ‚çš„æ—¶å€™,æˆ‘ä»¬éœ€è¦è€ƒè™‘è¿™ä¸€ç‚¹.Reactæä¾›äº†ä¸€äº›å·¥å…·è®©æˆ‘ä»¬èƒ½åŠ«æŒæ¸²æŸ“å›è·¯,å¦‚æœæ¸²æŸ“çœ‹ä¸Šå»ä¸å¿…è¦,æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å·¥å…·æ¥é˜»æ­¢é‡æ¸²æŸ“çš„å‘ç”Ÿ.ä¸ºäº†è¿™ä¹ˆåš,æˆ‘ä»¬è¦æ•²å…¥<code>componentShouldUpdate</code>ç”Ÿå‘½å‘¨æœŸäº‹ä»¶,è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼,é€šçŸ¥ç»„ä»¶æ˜¯å¦åº”è¯¥è¿›è¡Œæ›´æ–°.è¿™æ˜¯ä»¥<code>PureRenderMixin</code>ä½œä¸ºåŸºç¡€,å®ƒæ¯”è¾ƒè¾“å…¥çš„propså’Œstateå’Œå…ˆå‰çš„propså’Œstate,å¦‚æœä¸¤è€…ç›¸ç­‰å°±è¿”å›false.</p>
<p> è¿™ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶å’ŒImmutableé›†åˆä¸€èµ·å¯ä»¥å®å®åœ¨åœ¨çš„æ”¹è¿›æ€§èƒ½,å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å†³å®šæ˜¯æ¸²æŸ“è¿˜æ˜¯ä¸æ¸²æŸ“ç»„ä»¶.<br> ä¸å¹¸çš„æ˜¯,ä»…æ­¤è€Œå·².</p>
<p> è€ƒè™‘åˆ°ç´§æ¥ç€çš„é—®é¢˜:æˆ‘ä»¬æ„å»ºä¸€ä¸ªè´­ç‰©è½¦,æœ‰ä¸‰ä¸ªè¾“å…¥ç±»å‹ï¼š</p>
<ul>
<li>è´­ç‰©è½¦é‡Œçš„è´§ç‰©</li>
<li>è´§ç‰©çš„æ•°é‡</li>
<li>ç›¸åº”çš„ç¨ç‡(åŸºäºå·æˆ–è€…çœ)</li>
</ul>
<p>é—®é¢˜æ˜¯æ— è®ºåªè¦è¾“å…¥çš„çŠ¶æ€ä¸€æ”¹å˜(æ–°è´§ç‰©åŠ å…¥,æ•°é‡çš„å˜åŒ–,é€‰æ‹©å·çš„å˜å“ˆ),æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½è¦è¢«é‡æ–°è®¡ç®—å’Œæ¸²æŸ“.å¦‚æœæˆ‘ä»¬çš„è´­ç‰©è½¦é‡Œæœ‰å‡ ç™¾ä¸ªä¸œè¥¿,ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹è¿™å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½é—®é¢˜.æ”¹å˜ç¨ç‡è‚¯èƒ½ä¼šè§¦å‘è´­ç‰©è½¦çš„é‡æ–°è®¡ç®—,ä½†æ˜¯æ˜¯ä¸åº”è¯¥å‘ç”Ÿçš„.ç¨ç‡çš„å˜åŒ–ä»…ä»…ä¼šå½±å“è¡ç”Ÿçš„æ•°æ®.ä»…ä»…æ€»æ•°,ç¨çš„æ€»æ•°åº”è¯¥å‘ç”Ÿå˜åŒ–,å¹¶ä¸”å‘ç”Ÿåç»§çš„æ›´æ–°.æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆä¿®å¤è¿™ä¸ªé—®é¢˜.(è¯‘æ³¨ï¼šè¿™æ®µçš„æ„æ€æ˜¯å¦‚æœç¨ç‡å˜åŒ–,åœ¨UIç»„ä»¶ä¸­æ˜¯ä¸åº”è¯¥å‘ç”Ÿæ¸²æŸ“çš„,åªæœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦å‘ç”Ÿå˜åŒ–)</p>
<h2 id="Reselectå‰æ¥æ•‘æ´"><a href="#Reselectå‰æ¥æ•‘æ´" class="headerlink" title="Reselectå‰æ¥æ•‘æ´"></a>Reselectå‰æ¥æ•‘æ´</h2><p>Reselectç”¨æ¥è®°å¿†selectorsçš„åº“.æˆ‘ä»¬å®šä¹‰çš„selectorsæ˜¯ä½œä¸ºå‡½æ•°è·å–Redux stateçš„æŸä¸€éƒ¨åˆ†.ä½¿ç”¨è®°å¿†èƒ½åŠ›,æˆ‘ä»¬å¯ä»¥ç»„ç»‡ä¸å¿…è¦çš„è¡ç”Ÿæ•°æ®çš„é‡æ¸²æŸ“å’Œè®¡ç®—è¿‡ç¨‹,ç”±æ­¤åŠ é€Ÿäº†æˆ‘ä»¬çš„app.</p>
<p>è€ƒè™‘ä¸‹é¢è¿™ä¸ªç¤ºä¾‹:<br><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fdnmmp9vlrj30nr0we75c.jpg" alt=""></p>
<p>å¦‚æœæˆ‘ä»¬æœ‰å‡ ç™¾ç”šè‡³ä¸Šåƒä¸ªæ¡ç›®,æ¸²æŸ“è´­ç‰©è½¦ä¸­çš„æ‰€æœ‰é¡¹ç›®èŠ±è´¹ä¼šéå¸¸çš„å¤§,å³ä½¿æ˜¯ç¨ç‡çš„å˜åŒ–.ç”¨æˆ·æ¯ä¸€æ¬¡æœç´¢çš„ä»–çš„è´­ç‰©è½¦çš„æ—¶å€™,æˆ‘ä»¬æ˜¯å¦åº”è¯¥ä¸€éä¸€éçš„é‡è®¡ç®—ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®°å¿†æ€§çš„selectorsæ¥é˜»æ­¢æ˜‚è´µçš„è®¡ç®—è¿‡ç¨‹.ä½¿ç”¨è®°å¿†selectors,å¦‚æœReduxä¸­çš„stateçš„æ ‘å¾ˆå¤§,æˆ‘ä»¬ä¹Ÿä¸ç”¨æ‹…å¿ƒæ²¡åƒstateå˜åŒ–çš„è®¡ç®—é—®é¢˜.æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‰ç«¯å¢åŠ é¢å¤–çš„çµæ´»æ€§,æŠŠè¿™äº›selectorsåˆ†æ•£åˆ°å•ä¸ªçš„ç»„ä»¶ä¸­.</p>
<p>ç°åœ¨çœ‹çœ‹ä¸€ä¸ªä½¿ç”¨Reselectçš„ç®€å•selector:<br><img src="https://ww4.sinaimg.cn/large/006tKfTcly1fdnrzja9zgj30nk080q31.jpg" alt="selector using Reselect"></p>
<p> åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­,æˆ‘ä»¬æŠŠitemçš„è·å–å‡½æ•°åˆ†æˆä¸¤ä¸ªå‡½æ•°,ç¬¬ä¸€ä¸ªå‡½æ•°(ç¬¬3è¡Œ)ç®€å•çš„é¢è·å–è´­ç‰©è½¦ä¸­æ‰€æœ‰çš„items,ç¬¬äºŒä¸ªå‡½æ•°ä»£è¡¨ä¸€ä¸ªè®°å¿†æ€§selector.Reselectæš´éœ²äº†<code>createSelector</code>API,æˆ‘ä»¬å¯ä»¥å€Ÿæ­¤åˆ›å»ºä¸€ä¸ªè®°å¿†æ€§çš„selector.è¿™ä¸ªæ„æ€æ˜¯<code>getItemWithTotals</code>åœ¨ç¬¬ä¸€æ¬¡å‡½æ•°è¿è¡Œçš„æ—¶å€™å°†ä¼šè¿›è¡Œè¿ç®—.å¦‚æœåŒä¸€ä¸ªå‡½æ•°å†æ¬¡è¢«è°ƒç”¨,ä½†æ˜¯è¾“å…¥å€¼(<code>getItems</code>çš„å€¼)æ²¡æœ‰å˜åŒ–,å‡½æ•°å°†ä¼šè¿”å›ä¸€ä¸ªç¼“å­˜(cached)çš„è®¡ç®—ç»“æœ.å¦‚æœitemsè¢«ä¿®æ”¹äº†(ä¾‹å¦‚ï¼šitemæ·»åŠ ,æ•°é‡çš„å˜åŒ–,ä»»ä½•äº‹æƒ…æ“ä½œäº†<code>getItems</code>çš„ç»“æœ),å‡½æ•°å°†ä¼šå†æ¬¡æ‰§è¡Œ.</p>
<p> è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰åŠ›çš„æ¦‚å¿µ,å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶çš„stateéœ€è¦é‡è®¡ç®—çš„æ—¶å€™,å®Œå…¨çš„ä¼˜åŒ–åº”è¯¥è¢«æ¸²æŸ“çš„ç»„ä»¶.è¿™æ„å‘³ç€æˆ‘ä»¬ä¸åœ¨æ‹…å¿ƒ<code>getItems</code>å’Œåç»§çš„æ¯ä¸€æ¬¡ä¸­ä»·æ ¼çš„è®¡ç®—,ä½†æ“ä½œçš„æ—¶å€™,ä¸ä¼šå½±å“stateçš„æ‰§è¡Œ.</p>
<p> æˆ‘ä»¬ç»§ç»­è¿™ä¸ªæ–¹å¼æ¥åˆ›å»ºå››ä¸ªè¡ç”Ÿæ•°æ®çš„selectors.åŒ…æ‹¬å°è®¡,ç¨é¢æ€»è®¡å’Œæ€»ä»·æ ¼.<br> <img src="https://ww3.sinaimg.cn/large/006tKfTcly1fdnshe7qxtj30ng0es0t4.jpg" alt="å››ä¸ªselectors"></p>
<h2 id="ä½¿ç”¨selector"><a href="#ä½¿ç”¨selector" class="headerlink" title="ä½¿ç”¨selector"></a>ä½¿ç”¨selector</h2><p>  selectorsä»£ç å®Œæˆä»¥å,è®©æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåœ¨ç»„ä»¶ä¸­ä½¿ç”¨<code>getItemWithTitals</code>selector:</p>
<p>  <img src="https://ww3.sinaimg.cn/large/006tKfTcly1fdnskl1pn9j30s8106gms.jpg" alt=""></p>
<p>   ç°åœ¨æˆ‘ä»¬æœ‰äº†æœ‰äº†ä¸€ä¸ªç»„ä»¶,ä»…ä»…æ„ŸçŸ¥è´­ç‰©è½¦ä¸­çš„items.è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å¼å› ä¸ºå®ƒå’Œæ€»è®¡å’Œå°è®¡æ²¡æœ‰ä»»ä½•å…³è”.ä»–ä¸æ˜¯å¯ä»¥é‡ç”¨çš„ç»„ä»¶,ä½†æ˜¯æ˜¯æ€§èƒ½éå¸¸å¥½çš„ç»„ä»¶.å’Œè¿™ä¸ªç»„ä»¶æ— å…³çš„å˜åŒ–ä¸ä¼šå¼•èµ·é¢å¤–çš„é‡æ¸²æŸ“.</p>
<p>   è¿™ä¸ªæ–¹å¼åº”ç”¨åˆ°å…¶ä»–çš„è´­ç‰©è½¦ä¸Šæ„å‘³ç€æˆ‘ä»¬å°†ä¼šæœ‰ä¸€ä¸ªç»„ä»¶è´Ÿè´£æ˜¾ç¤ºå°è®¡,æ€»è®¡å’Œç¨é¢è®¡ç®—.</p>
<p>   æ—©ä¸€ç‚¹åœ¨åº”ç”¨ä¸­ä½¿ç”¨è¿™äº›ä¼˜åŒ–æªæ–½æ„å‘³ç€æœªæ¥éœ€è¦ä¿®æ­£æ€§èƒ½é—®é¢˜çš„æ—¶å€™åšçš„å·¥ä½œå°±æ¯”è¾ƒå°‘.æˆ‘å»ºè®®å°½å¯èƒ½æ—©çš„ä½¿ç”¨reselect.åœ¨ç»„ä»¶ä¹‹å¤–ä½¿ç”¨Selectorsæ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®¹æ˜“çš„æµ‹è¯•è¿™äº›æ•°æ®è¡ç”Ÿè®¡ç®—.åœ¨Reduxä¸­ä½¿ç”¨ç®€å•çš„æ¨¡æ‹Ÿæ•°æ®,åŸºäºæä¾›çš„æ•°æ®æµ‹è¯•æœŸå¾…çš„è¾“å‡ºç»“æœ.</p>
<p> è¿›ä¸€æ­¥äº†è§£è¿™äº›æ¦‚å¿µ,å‚è€ƒ<a href="https://github.com/neilff/react-redux-performance" target="_blank" rel="external">demo</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascript-Thiså…¨é¢è§£æ]]></title>
      <url>http://yoursite.com/2017/03/08/javascript-This%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/2044710-9f870a42dbc62877.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="cover.jpg"><br>ã€Šä½ ä¸çŸ¥é“çš„javascriptã€‹è¿™æœ¬ä¹¦è¯»äº†æœ‰å¥½å‡ éäº†ï¼Œä¼¼ä¹æ¯ä¸€æ¬¡è¯»éƒ½æœ‰æ–°å‘ç°ï¼Œæœ‰äº›å†…å®¹å¹¶ä¸æ˜¯ä¸€ä¸‹å­å¯ä»¥å¼„æ‡‚çš„ï¼Œæ¯æ¬¡è¯»ä¼¼ä¹éƒ½èƒ½æ˜ç™½ä¸€äº›æ¦‚å¿µã€‚<br>å†é‡è¯»ä¸€ä¸‹<code>this</code>å…³é”®å­—ã€‚è¿™ä¸ªæ¦‚å¿µéå¸¸çµæ´»ï¼Œä¹Ÿéå¸¸éš¾æŒæ¡ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—ç»å¸¸è¯»è¯»æ²¡æœ‰åå¤„ã€‚æœŸå¾…javascriptä¸€æ¡¶æ±Ÿæ¹–ï¼Œè¿™æ ·å­¦ä¹ çš„æˆæœ¬å°±ä½å•¦ï¼<br>å‚è€ƒæœ¬ä¹¦çš„ç¬¬äºŒéƒ¨åˆ†çš„ç¬¬ä¸€ç« ï¼Œç¬¬äºŒç« ã€‚</p>
<blockquote>
<p>thiså…³é”®å­—æ˜¯jsä¸­æœ€æœ€å¤æ‚çš„æœºåˆ¶ä¹‹ä¸€ã€‚ä»–è¢«è‡ªåŠ¨å®šä¹‰åˆ°æ‰€æœ‰å‡½æ•°çš„ä½œç”¨åŸŸä¸­ã€‚</p>
</blockquote>
<p>åœ¨å­¦ä¹ è¿™ä¸ªå…³é”®å­—çš„è¿‡ç¨‹ä¸­ä¼¼ä¹ä¹Ÿèµ°äº†å¾ˆé•¿æ—¶é—´çš„å¼¯è·¯ã€‚ä½ è¦é—®æˆ‘ä¸ºä»€ä¹ˆèµ°äº†å¾ˆé•¿æ—¶é—´çš„å¼¯è·¯ï¼Œå…³é”®çš„åœ°æ–¹è¿˜æ˜¯æ²¡æœ‰å¯¹æ ¸å¿ƒçš„æ¦‚å¿µå½»åº•å­¦ä¹ å’Œé¢†ä¼šï¼Œè¿™ä¸€ç‚¹å’Œå°å­¦ç”Ÿå­¦ä¹ æ–°çŸ¥è¯†æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚è¦æƒ³æŒæ¡thisè¿™ä¸ªå…³é”®å­—ï¼Œéœ€è¦ç´§æ‰£å…³é”®æ¦‚å¿µï¼Œä¸è¦å‡­ç©ºæƒ³è±¡è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚</p>
<p><strong>å…³é”®æ¦‚å¿µï¼šjsä¸­çš„å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¸€å®šï¼Œä¸€å®šï¼Œä¸€å®šä¼šç»‘å®šåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œåœ¨åˆ†æthiså…³é”®å­—çš„æ—¶å€™ï¼Œä¸€å®šè¦çŸ¥é“å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™è¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯è°ï¼Ÿ</strong>ã€‚<br><strong>åˆ‡è®°ï¼šjsä¸­å‡½æ•°çš„è°ƒç”¨å’Œå®šä¹‰æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ï¼Œå‡½æ•°æ‰€ç»‘å®šçš„å¯¹è±¡ç›´åˆ°ä»–è¢«è°ƒç”¨çš„æ—¶å€™æ‰èƒ½çŸ¥é“ã€‚</strong></p>
<p>thiså…³é”®å­—çš„ä¸ç¡®å®šå®šæ˜¯æŠŠåŒåˆƒå‰‘ï¼Œä¸€æ˜¯å‡½æ•°è°ƒç”¨æ—¶çš„å¯¹è±¡ä¸ç¡®å®šæ€§ï¼Œæ˜¯jsä¸­å‡½æ•°çš„ä½¿ç”¨å…·æœ‰å¾ˆå¤§çµæ´»æ€§ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥å€Ÿç”¨å…¶ä»–å‡½æ•°æ¥å®ŒæˆåŠŸèƒ½ã€‚äºŒæ˜¯è¿™ä¹Ÿé€ æˆäº†thiså­¦ä¹ çš„ä¸€äº›å›°æ‰°ã€‚æ‰€ä»¥åœ¨å­¦ä¹ çš„æ—¶å€™å…ˆè¦ç†è§£thiså…³é”®å­—çš„ä¼˜ç‚¹ï¼Œç„¶åå†å»å­¦ä¹ é€ æˆå›°æ‰°çš„åœ°æ–¹</p>
<p>é¦–å…ˆçœ‹çœ‹ç¬¬ä¸€æ®µä»£ç <br>page 75<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ³¨æ„åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æœªè°ƒç”¨ï¼Œè¿™æ—¶å€™å‡½æ•°æ˜¯æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">identify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.name.toUpperCase();</div><div class="line">&#125;</div><div class="line"><span class="comment">//åŒä¸Šé¢çš„å‡½æ•°,ä½†æ˜¯è¿™ä¸ªå‡½æ•°å†…éƒ¨æœ‰ç‚¹å¤æ‚ï¼Œå¦‚æœä¸‹é¢çš„ä»£ç çœ‹ä¸æ‡‚</span></div><div class="line"><span class="comment">//å¯ä»¥åªçœ‹ä¸Šé¢çš„å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> greeting = <span class="string">"Hello, I'm "</span> + identify.call( <span class="keyword">this</span> );</div><div class="line">	<span class="built_in">console</span>.log( greeting );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> me = &#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå­—é¢é‡å¯¹è±¡</span></div><div class="line">	name: <span class="string">"Kyle"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> you = &#123;<span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå­—é¢é‡å¯¹è±¡</span></div><div class="line">	name: <span class="string">"Reader"</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//é€šè¿‡callæ–¹å¼æŠŠå‡½æ•°identifyåˆ†åˆ«ç»‘å®šåˆ°ä¸¤ä¸ªå¯¹è±¡ä¸Š</span></div><div class="line"><span class="comment">//è¿™æ—¶çš„thisæ˜¯æŒ‡å‘meå¯¹è±¡ï¼Œå’Œyouå¯¹è±¡</span></div><div class="line">identify.call( me ); <span class="comment">// KYLE  </span></div><div class="line">identify.call( you ); <span class="comment">// READER</span></div><div class="line"></div><div class="line"><span class="comment">//é€šè¿‡callæ–¹å¼æŠŠå‡½æ•°callåˆ†åˆ«ç»‘å®šåˆ°ä¸¤ä¸ªå¯¹è±¡ä¸Š</span></div><div class="line"><span class="comment">//è¿™æ—¶çš„thisæ˜¯æŒ‡å‘meå¯¹è±¡ï¼Œå’Œyouå¯¹è±¡</span></div><div class="line">speak.call( me ); <span class="comment">// Hello, I'm KYLE</span></div><div class="line">speak.call( you ); <span class="comment">// Hello, I'm READER</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>åœ¨javascriptä¸­å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°æ˜¯ä¸å±äºä»»ä½•å¯¹è±¡çš„ã€‚è¿™ä¸€ç‚¹éå¸¸çš„å…³é”®ï¼Œéå¸¸çš„å…³é”®ï¼Œéå¸¸çš„å…³é”®ã€‚è¿™æ˜¯ç†è§£thiså…³é”®å­—çš„ç¬¬ä¸€ä¸ªéšœç¢ã€‚</p>
</blockquote>
<p>thiså…³é”®å­—åœ¨jså‡½æ•°å®šä¹‰çš„æ—¶å€™çš„ä¸ç¡®å®šæ€§ä½¿å¾—jså‡½æ•°ä½¿ç”¨æœ‰æå¤§çš„çµæ´»æ€§ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨ä»–ã€‚</p>
<p>###thisåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>thisçš„ç»‘å®šå’Œå‡½æ•°å®šä¹‰çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåª<code>å–å†³äºå‡½æ•°è°ƒç”¨çš„æ–¹å¼</code>.<br>javascriptä¸­å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ´»åŠ¨è®°å½•(æœ‰æ—¶ä¹Ÿç§°ä¸Šä¸‹æ–‡)ã€‚è¿™ä¸ªè®°å½•åŒ…æ‹¬å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°ã€‚thiså°±æ˜¯è®°å½•ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚</p>
<p>è¿™æ ·åœ¨å­¦ä¹ javascriptå…³é”®å­—çš„<code>é¦–è¦é—®é¢˜æ˜¯è¦è§£å†³æ€ä¹ˆçŸ¥é“åˆ°å‡½æ•°çš„è°ƒç”¨ä½ç½®</code>.</p>
<p>###jså¯¹è±¡ç»‘å®šè§„åˆ™</p>
<p>æ¯ä¸ªjså‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ä¸€å®šè¦æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>ç»‘å®š</code>ä»¥åæ‰èƒ½ä½¿ç”¨ã€‚ è¿™é‡Œæ˜¯ç†è§£äº†jså‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨çš„åŒºåˆ«ä»¥åéœ€è¦æŒæ¡çš„ä¸€ä¸ªè§„æ¨¡æœ€åºå¤§çš„æ¦‚å¿µï¼Œåœ¨jsä¸­ä¸€å…±æœ‰å››ç§ç»‘å®šæ–¹å¼.å°±æˆ‘ä¸ªäººæ¥çœ‹ï¼Œç»‘å®šè§„åˆ™å¹¶ä¸éš¾ï¼Œ<code>éš¾ç‚¹è¿˜æ˜¯åœ¨jsçš„å‡½æ•°ä½œç”¨åŸŸçš„ç†è§£</code>. å°¤å…¶æ˜¯<code>é»˜è®¤ç»‘å®š</code>.è¿™ä¸ªç»‘å®šæ–¹å¼æœ‰æå¤§çš„è¿·æƒ‘æ€§ã€‚</p>
<p>####é»˜è®¤ç»‘å®š<br>è¿™ä¸ªæ˜¯å‡½æ•°çš„ç‹¬ç«‹è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°ç›´æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œä¼¼ä¹æ˜¯æ²¡æœ‰ç»‘å®šåˆ°å¯¹è±¡ä¸Šçš„ï¼Œä½†æ˜¯æ ¹æ®å‰é¢çš„ä»‹ç»ï¼Œjsä¸­å‡½æ•°è°ƒç”¨æ—¶å¿…é¡»è¦ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šã€‚<br>çœ‹ä¸‹é¢ä»£ç  page 83<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//è¿™æ˜¯å‡½æ•°çš„å®šä¹‰ä½ç½®</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;<span class="comment">//è¿™ä¸ªå˜é‡å®šä¹‰çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»…ä»…æ˜¯èµ‹å€¼ç»™aå—ï¼Ÿ</span></div><div class="line"></div><div class="line">  foo(); <span class="comment">// 2  //è¿™æ˜¯å‡½æ•°çš„è°ƒç”¨ä½ç½®ã€‚ä¸ºä»€ä¹ˆä¼šæ‰“å°å‡º2å‘¢ï¼Ÿ</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>å¾ˆå¤šå‡½æ•°éƒ½æ˜¯è¿™ä¹ˆè°ƒç”¨çš„ï¼Œç…§çŒ«ç”»è™ä¹Ÿå¯ä»¥å†™å‡ºæ¥ï¼Œä½†æ˜¯ç†è§£äº†å…·ä½“çš„å«ä¹‰å°±ä¸ä¸€æ ·äº†ã€‚<br>fooè¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­(windowä½œç”¨åŸŸä¸­)ï¼Œå·§åˆçš„æ˜¯ä»–çš„è°ƒç”¨ä¹Ÿæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œæ³¨æ„è¿™ä»…ä»…æ˜¯å·§åˆï¼Œå·§åˆã€‚ é‚£ä¹ˆfoo()è°ƒç”¨çš„æ—¶å€™ä¸ºä»€ä¹ˆä¼šæ‰“å°å‡ºå˜é‡ açš„å€¼å‘¢ï¼Ÿå°½ç®¡ä½¿ç”¨äº†varè¿™ä¸ªå…³é”®å­—ï¼Œä½†æ˜¯åˆ†æä½œç”¨åŸŸå¯ä»¥çŸ¥é“ï¼Œaè¿™ä¸ªå˜é‡å®é™…æ˜¯å…¨å±€å˜é‡ï¼Œè¯´çš„å†æ˜ç™½ä¸€ç‚¹ï¼Œaå®é™…æ˜¯windowè¿™ä¸ªå…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œ2æ˜¯è¿™ä¸ªå±æ€§çš„å±æ€§å€¼ã€‚<br>foo()è°ƒç”¨çš„æ—¶å€™æ˜¯ä¸€ä¸ä¸æŒ‚çš„å…¨è£¸çŠ¶æ€ï¼Œä»…ä»…æ˜¯å‡½æ•°æœ¬èº«ï¼Œæ²¡æœ‰ä»»ä½•ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™ä»–ä¹Ÿæ²¡æœ‰ä»»ä½•å‡½æ•°åŒ…è£¹ï¼Œå¤„åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹é¢ï¼Œæ‰€ä»¥foo()é‡Œé¢çš„thisæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œå½“è¦æ‰“å°this.açš„æ—¶å€™ï¼Œå¯»æ‰¾foo()è°ƒç”¨ä½ç½®ä¼šæ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œæ‰¾å…¨å±€ä½œç”¨åŸŸçš„å±æ€§this.açš„æ—¶å€™ä¼šæ‰“å°å‡º2è¿™ä¸ªå±æ€§å€¼ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨setTimeout,setIntervalå‡½æ•°çš„æ—¶å€™ï¼Œå®é™…è¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ä¸æŒ‚çš„ï¼ŒåŒæ ·ç»‘å®šåœ¨windowå¯¹è±¡ä¸Šã€‚</p>
<p>####éšå¼ç»‘å®š</p>
<p>å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ·»åŠ äº†ä¿®é¥°ç¬¦ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä»£ç <br>page 85<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//å®šä¹‰åœ¨å…¨å±€ä½œç”¨ä¸‹çš„å‡½æ•°ï¼Œä»…ä»…æ˜¯å®šä¹‰ï¼Œä¸æ˜¯è°ƒç”¨ä½ç½®</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.foo(); <span class="comment">// 2  ç»™foo()å‡½æ•°æ‰¾äº†ä¸€ä¸ªå¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªå¯¹è±¡äº†</span></div></pre></td></tr></table></figure></p>
<p>è¿™æ˜¯æœ€å¸¸è§çš„æ–¹å¼äº†ï¼Œå¦‚æœä¸å†™å‰é¢çš„objæ˜¯ä¸æ˜¯å°±æ˜¯ä¸Šé¢çš„é»˜è®¤ç»‘å®šäº†ï¼Ÿ</p>
<p><code>éšå¼ä¸¢å¤±</code><br>ç»å¸¸åœ¨jsä»£ç çš„åµŒå¥—å›è°ƒå‡½æ•°ä¸­çœ‹åˆ°åœ¨å¤–å±‚å‡½æ•°å¼€å§‹çš„ä¸€å¥ </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  that=<span class="keyword">this</span>; <span class="comment">//è¿™æ˜¯ä»€ä¹ˆå«ä¹‰</span></div></pre></td></tr></table></figure>
<p>æˆ–è®¸ä½ å·²ç»ä¼šç”¨äº†ï¼Œä½†æ˜¯ç†è§£äº†å…¶ä¸­æ„ä¹‰ç”¨èµ·æ¥ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹å•Š</p>
<p>çœ‹ä¸‹é¢æ®µä»£ç .è¿™æ®µä»£ç å…¶å®ä»¥å‰æˆ‘ä¹Ÿä¸å¤ªç†è§£ï¼Œé—®é¢˜è¿˜æ˜¯æ²¡æœ‰å½»åº•é¢†æ‚Ÿjså‡½æ•°å®šä¹‰å’Œè°ƒç”¨ä¹‹é—´æ˜¯æ²¡æœ‰å…³ç³»çš„è¿™ä¸€ç‚¹ã€‚<br>page 86</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å­—é¢é‡</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo  <span class="comment">//å‡½æ•°ä½œä¸ºå¯¹å¯¹è±¡çš„å±æ€§</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = obj.foo; <span class="comment">//æŠŠobjå¯¹è±¡çš„å‡½æ•°fooå±æ€§èµ‹å€¼ç»™barå˜é‡</span></div><div class="line"><span class="comment">//è¿™é‡Œå°±æ˜¯ç†è§£è¿™ä¸ªé—®é¢˜çš„å…³é”®ï¼Œå¦‚æœä½ ç°åœ¨è®¤ä¸ºè°ƒç”¨bar()çš„æ—¶å€™ç»‘å®šçš„å¯¹è±¡</span></div><div class="line"><span class="comment">//æ˜¯objé‚£å°±å®Œå…¨æé”™äº†ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…æ˜¯æŠŠå‡½æ•°fooèµ‹å€¼ç»™äº†varå˜é‡ï¼Œ</span></div><div class="line"><span class="comment">//å¹¶æ²¡æœ‰æŠŠå¯¹è±¡ä¹Ÿç»™barå˜é‡ï¼Œå› ä¸ºè¿™é‡Œè¿˜ä¸æ˜¯foo()å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œç°åœ¨</span></div><div class="line"><span class="comment">//fooå‡½æ•°è¿˜æ²¡æœ‰ç»‘å®šå¯¹è±¡ï¼Œé‚£ä¹ˆè°ƒç”¨bar()çš„æ—¶å€™å¯¹è±¡åˆ°åº•æ˜¯è°ï¼Ÿä¸çŸ¥é“ã€‚</span></div><div class="line"><span class="comment">//è°ƒç”¨çš„æ—¶å€™æ‰çŸ¥é“ã€‚</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"oops, global"</span>; <span class="comment">// ä»»ç„¶æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span></div><div class="line">bar(); <span class="comment">// "oops, global" è¿™é‡Œæ‰§è¡Œçš„æ˜¯é»˜è®¤ç»‘å®šï¼Œthiså°±æ˜¯å»å…¨å±€å¯¹è±¡å•¦</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢è¿™æ®µä»£ç å°±æ˜¯ä½¿ç”¨var that=thisçš„åœºæ™¯<br>åœ¨ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ—¶å€™è¦ç•™å¿ƒã€‚jsä¸­å‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ å…¥å‡½æ•°ã€‚ é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ï¼Œå‡½æ•°ä¸€æ—¦ä½œä¸ºå®å‚ä»£æ›¿å½¢å‚çš„æ—¶å€™ï¼Œå®é™…ä¹Ÿæ‰§è¡Œäº†å’Œä¸Šé¢ä»£ç ä¸€æ ·çš„èµ‹å€¼è¿‡ç¨‹ï¼Œå®é™…åªæ˜¯ä¼ é€’äº†å‡½æ•°æœ¬èº«ï¼ŒåŸå…ˆçš„å¯¹è±¡å°±æ²¡æœ‰äº†ã€‚</p>
<p>page 86</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//å®šä¹‰ä¸€ä¸ªå‡½æ•°</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doFoo</span>(<span class="params">fn</span>) </span>&#123; <span class="comment">//fnæ˜¯å½¢å‚</span></div><div class="line">	<span class="comment">// å¦‚æœå‡½æ•°ä½œä¸ºå®å‚ä¼ å…¥ç›¸å½“äºä»£ç  var fn=obj.foo</span></div><div class="line">	<span class="comment">//å’Œä¸Šé¢ä¸€æ®µä»£ç æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªæ˜¯å‡½æ•°æœ¬èº«ï¼Œå¹¶æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡</span></div><div class="line"></div><div class="line">	fn(); <span class="comment">// åœ¨è¿™é‡Œè°ƒç”¨çš„æ—¶å€™ï¼Œç”±äºfnåªä»£è¡¨foo()å‡½æ•°ï¼Œè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šäº†</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">	<span class="attr">a</span>: <span class="number">2</span>,</div><div class="line">	<span class="attr">foo</span>: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> a = <span class="string">"oops, global"</span>; <span class="comment">// `a` also property on global object</span></div><div class="line"></div><div class="line">doFoo( obj.foo ); <span class="comment">// "oops, global"ä¸è¦è¢«obj.fooè¿·æƒ‘äº†</span></div><div class="line"><span class="comment">//æ²¡æœ‰å®é™…æ‰§è¡Œå‡½æ•°çš„è°ƒç”¨ï¼Œæ­¤æ—¶obj.fooä»…ä»…ä»£è¡¨æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡çš„å‡½æ•°</span></div><div class="line"></div><div class="line"><span class="comment">//è¿™ä¸ªä»£ç å—çœ‹ç€çœ¼ç†Ÿä¹ˆï¼Ÿè¿™å°±æ˜¯javascriptä¸­å›è°ƒå‡½æ•°çš„æ ·å­ï¼Œå½“</span></div><div class="line"><span class="comment">//ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›å¦ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,è¿™ä¸ªå‚æ•°å‡½æ•°å°±æ‰¾ä¸åˆ°è‡ªå·±ç»‘å®šçš„å¯¹è±¡æ˜¯è°äº†ï¼Œ</span></div><div class="line"><span class="comment">//æ‰€ä»¥å°±é»˜è®¤ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šäº†ã€‚ä½†æ˜¯æˆ‘ä»¬æ—¢ç„¶åœ¨ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œè‚¯å®šæ˜¯è¦ç”¨è¿™ä¸ªå‡½æ•°æ“ä½œå½“å‰çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ—¢ç„¶æ‰¾ä¸åˆ°äº†ï¼Œæˆ‘ä»¬å°±æ‰‹åŠ¨ç»™ä»–æŒ‡å®šä¸€ä¸ªå¯¹è±¡å§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨</span></div><div class="line"><span class="comment">//var  that=thisçš„åŸå› ã€‚æˆ‘è§‰å¾—ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œjsçš„åŠŸåŠ›è‡³å°‘ä¼šå¢åŠ 5%ğŸ˜ã€‚è‡³äºå…·ä½“ä½¿ç”¨ï¼Œæˆ‘æƒ³å†™å‡ºæ¥å…¶å®æ²¡æœ‰ä»€ä¹ˆå¿…è¦äº†ã€‚è¿™æ ·çš„ä»£</span></div><div class="line"><span class="comment">//ç éšå¤„å¯è§.</span></div></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬ä¼šè¿”å›æ¥çœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>####æ˜¾ç¤ºç»‘å®š</p>
<p>ç›´æ¥ä½¿ç”¨apply()å’Œcall()æ–¹æ³•æ¥ç»™å‡½æ•°æŒ‡å®šä¸€ä¸ªå¯¹è±¡<br>page 88<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;  <span class="comment">//å¯¹è±¡å­—é¢é‡å®šä¹‰</span></div><div class="line">	a: <span class="number">2</span> </div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo.call( obj ); <span class="comment">// 2  å¼ºåˆ¶ç»‘å®šåˆ°objå¯¹è±¡ä¸Š</span></div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨æ˜¾ç¤ºç»‘å®šè¿˜ä¸èƒ½è§£å†³thisçš„ä¸¢å¤±é—®é¢˜ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°</p>
<p>page 89</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123; <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something );</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.a + something;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123; <span class="comment">//å¯¹è±¡å­—é¢é‡</span></div><div class="line">	a: <span class="number">2</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; åŒ…è£¹å‡½æ•°ï¼Œæ˜¾ç¤ºç»‘å®š</div><div class="line">	<span class="keyword">return</span> foo.apply( obj, <span class="built_in">arguments</span> );</div><div class="line"> <span class="comment">//è¿”å›ç»‘å®šäº†å¯¹è±¡å’Œä¼ å…¥å‚æ•°çš„å‡½æ•°è°ƒç”¨</span></div><div class="line"> <span class="comment">//è¿™ä¸ªè¯­å¥åœ¨jsçš„ä»£ç ä¸­éå¸¸çš„å¸¸è§</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2, 3  </span></div><div class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//å¯ä»¥æŠŠç»‘å®šå‡½æ•°ç‹¬ç«‹å‡ºæ¥</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> fn.apply( obj, <span class="built_in">arguments</span> );</div><div class="line">	&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####new ç»‘å®š</p>
<blockquote>
<p>jsä¸­çš„newå…³é”®å­—å’Œjavaä¸­å®Œå…¨ä¸åŒï¼Œjsä¸­æ²¡æœ‰ç±»ï¼Œåªæœ‰å¯¹è±¡ï¼Œåœ¨jsä¸­ä½¿ç”¨new å…³é”®å­—çš„æ—¶å€™åªæ˜¯è¢«è°ƒç”¨çš„æ™®é€šå‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;  <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	<span class="keyword">this</span>.a = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo( <span class="number">2</span> ); <span class="comment">//ä»…ä»…æ˜¯è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°</span></div><div class="line"><span class="built_in">console</span>.log( bar.a ); <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>å¥½äº†ä»¥ä¸Šå°±æ˜¯js thisç»‘å®šçš„å››ç§æ–¹å¼ã€‚  è§£å†³çš„å…³é”®é—®é¢˜æ˜¯jsä¸­åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™åˆ°åº•æ˜¯å±äºå“ªä¸ªå¯¹è±¡çš„é—®é¢˜ã€‚ </p>
<p>åé¢è¿˜æœ‰ä¸€ç‚¹å†…å®¹ï¼Œä½†æ˜¯ä¸Šé¢çš„å†…å®¹æ˜¯æœ€é‡è¦çš„ã€‚  2017å¹´1æœˆ17æ—¥<br><code>çš„ç¡®åŒ…è£¹å‡½æ•°é‚£é‡Œå¥½åƒæ˜¯æ²¡æœ‰è®²æ¸…æ¥šï¼Œæˆ‘ä¹Ÿå¿˜äº†å½“åˆæ˜¯æ€ä¹ˆç†è§£çš„ï¼Œç­‰æˆ‘å†çœ‹çœ‹ï¼Œç„¶åæ›´æ–°ã€‚æœ‰äº›åœ°æ–¹å·²ç»åšäº†æ›´æ–°!</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptçš„applyå’Œcallæ–¹æ³•]]></title>
      <url>http://yoursite.com/2017/03/08/javascript-%E4%B8%AD%E7%9A%84apply%E5%92%8Ccall%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨javascriptæ¨¡å¼è®¾è®¡çš„å­¦ä¹ ä¸­ï¼Œæ·±æ„Ÿjavascriptçš„è¯­æ³•çš„çµæ´»æ€§ï¼Œåœ¨æ¨¡å¼è®¾è®¡çš„æ–¹æ³•ä¸­å¯¹äºé«˜é˜¶å‡½æ•°çš„ä½¿ç”¨åˆ°äº†ä»¤äººå‘æŒ‡çš„åœ°æ­¥ï¼Œå‡ ä¹æ¯ä¸ªç¤ºä¾‹ä¸­éƒ½ç¦»ä¸å¼€å‡½æ•°ä½œä¸ºå‚æ•°çš„è°ƒç”¨æ–¹æ³•ï¼Œapplyå’Œcallæ–¹æ³•æ˜¯ä½¿ç”¨æœ€å¤šçš„ã€‚è¿™ä¸¤ä¸ªå‡½æ•°è°ƒç”¨å½¢å¼ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯ç›®çš„éƒ½æ˜¯ä¸€æ ·çš„ã€‚applyå’Œcallå‡½æ•°æ˜¯javascriptä¸­çš„ç¡¬ç»‘å®šæ–¹å¼ï¼Œå¯ä»¥çµæ´»,åŠ¨æ€çš„æ”¹å˜å‡½æ•°è¿è¡Œæ—¶å€™çš„ä½œç”¨åŸŸå¯¹è±¡ã€‚å¹¶ä¸”å’Œargumentå¯¹è±¡ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œå¨åŠ›ä¼šæ›´å¤§ã€‚<br>ç»“åˆã€Šjavascriptå‡½æ•°å¼ç¼–ç¨‹ã€‹çš„ä¸€ä¸ªä¾‹å­è¯´è¯´ã€‚ p2<br>ä½¿ç”¨applyæ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä»–æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿”å›å¦ä¸€å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ç”¨applyæ¥æ‰§è¡Œå‡½æ•°</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function  splat(<span class="function"><span class="keyword">fun</span>)&#123; //splatå‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span></div><div class="line">  <span class="keyword">return</span> function(array)&#123; <span class="comment">//è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œarrayä½œä¸ºå½¢å‚</span></div><div class="line">     <span class="keyword">return</span> <span class="function"><span class="keyword">fun</span>.<span class="title">apply</span><span class="params">(<span class="literal">null</span>,array)</span></span>;<span class="comment">//applyæ–¹æ³•ä¼ å…¥æ•°ç»„å‚æ•°</span></div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> addArrayElements=splat(function(x,y)&#123;<span class="keyword">return</span> x+y;&#125;); <span class="comment">//ä¼ å…¥å‡½æ•°åŠ </span></div><div class="line"><span class="comment">//æ³•å‡½æ•°ä½œä¸ºå‚æ•°</span></div><div class="line"></div><div class="line">addArrayElements([<span class="number">1</span>,<span class="number">2</span>]); <span class="comment">//è°ƒç”¨å‡½æ•°ï¼Œ=&gt;3</span></div></pre></td></tr></table></figure>
<blockquote>
<p>å¦å¤–ä¸€ä¸ªå±•ç°jsçµæ´»æ€§çš„åœ°æ–¹æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥éšæ—¶ä»¥ä»»æ„å¤šä¸ªä»»æ„ç±»å‹çš„å‚æ•°æ¥è°ƒç”¨ä»»æ„ä¸€ä¸ªå‡½æ•°ã€‚è¿™é‡Œçš„ä¸‰ä¸ªä»»æ„ä½“ç°äº†jså‡½æ•°ä½¿ç”¨çš„çµæ´»æ€§ã€‚<br>æ¯ä¸ªjså‡½æ•°éƒ½å¯ä»¥è®¿é—®ä¸€ä¸ªargumentså±€éƒ¨å¯¹è±¡ï¼Œä»–ç±»ä¼¼æ•°ç»„ï¼Œå­˜å‚¨äº†è°ƒç”¨å‡½æ•°æ˜¯çš„å®é™…å‚æ•°ã€‚</p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">   function  unsplat(<span class="function"><span class="keyword">fun</span>)&#123;//æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</span></div><div class="line">  <span class="keyword">return</span> function()&#123;<span class="comment">//è¿”å›å¦ä¸€ä¸ªå‡½æ•°</span></div><div class="line">     <span class="comment">//è¿”å›çš„å‡½æ•°ä¸ºä¼ å…¥çš„å‡½æ•°ç»‘å®šargumentså¯¹è±¡ï¼Œè¿™é‡Œç»è¿‡</span></div><div class="line">     <span class="comment">//underscoreçš„toArrayæ–¹æ³•è½¬ä¸ºæ•°ç»„å¯¹è±¡</span></div><div class="line">     <span class="keyword">return</span> <span class="function"><span class="keyword">fun</span>.<span class="title">call</span><span class="params">(<span class="literal">null</span>,_.toArray(arguments)</span></span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> joinElements=unsplat(function(array)&#123;<span class="keyword">return</span> array.join(<span class="string">' '</span>);&#125;); <span class="comment">//è°ƒç”¨</span></div><div class="line"><span class="comment">//æ—¶ä¼ å…¥å‡½æ•°å®å‚</span></div><div class="line"></div><div class="line">alert(joinElements(<span class="number">1</span>,<span class="number">2</span>)); <span class="comment">//ä¼ å…¥è°ƒç”¨çš„å‚æ•°ï¼Œå‚æ•°é•¿åº¦æ˜¯ä¸å®šçš„</span></div></pre></td></tr></table></figure>
<p>#####è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨æ¨¡å¼è®¾è®¡çš„ä»£ç é‡Œç”¨çš„å¤ªå¤šäº†ï¼Œæ‰€ä»¥è¦å¥½å¥½ç ”ç©¶ç ”ç©¶.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascript èŒè´£é“¾æ¨¡å¼-ç´§å¯†è€¦åˆåˆ¤è¯»å˜å¤šå‡½æ•°åˆ†å¼€å¤„ç†]]></title>
      <url>http://yoursite.com/2017/03/08/javascript-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>èŒè´£é“¾æ¨¡å¼æ˜¯ï¼šæ˜¯å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å¦‚æœæ˜¯åœ¨jvascriptä¸­å¾ˆå¥½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä»ç¼–ç¨‹ä¸Šæ¥è¯´å°±æ˜¯æŠŠæ¯”è¾ƒå¤æ‚çš„if-elseåµŒå¥—ç´§å¯†çš„åˆ¤æ–­-æ‰§è¡Œé€»è¾‘ä½¿ç”¨é«˜é˜¶å‡½æ•°æŠŠåˆ¤æ–­è¯­å¥ä¸­æ‰€åšçš„äº‹æƒ…æ”¾åˆ°å‡½æ•°ä¸­å¤„ç†ã€‚</p>
</blockquote>
<p>é€»è¾‘å¤„ç†çš„å¤æ‚åº¦å¹¶æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å„ä¸ªå¤„ç†éƒ¨åˆ†å°±åˆ†æ•£åˆ°å‡½æ•°ä¸­å»äº†ã€‚æ¯ä¸ªå‡½æ•°åªåšä¸¤ä»¶äº‹æƒ…ï¼Œèƒ½å¤„ç†å°±å¤„ç†ï¼Œä¸èƒ½å¤„ç†å°±äº¤ç»™å…¶ä»–å‡½æ•°ï¼Œæˆ–è€…æŠŠè‡ªå·±çš„é€»è¾‘ï¼Œé€šè¿‡å¼‚æ­¥å†é€šçŸ¥ä¸‹ä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†ã€‚ è¿™æ ·é€šè¿‡å•ä¸ªå‡½æ•°å†…éƒ¨çš„æŒ‡é’ˆç®€åŒ–ç´§å¯†åµŒå¥—çš„é€»è¾‘ã€‚<br>æˆ‘ä½œä¸ºåˆå­¦è€…æ„Ÿè§‰åˆ°è¿™æ ·å¤„ç†ï¼Œä»£ç è¯»èµ·æ¥éå¸¸æ¸…æ™°ã€‚ä½†æ˜¯æ‰§è¡Œçš„æ•ˆç‡æ˜¯ä¸æ˜¯å’Œç´§å¯†åµŒå¥—çš„é€»è¾‘ä¸€æ ·æˆ‘å°±ä¸çŸ¥é“äº†ã€‚æˆ–è®¸æ˜¯ç”¨æ—¶é—´æ¢ä»£ç çš„æ˜“è¯»æ€§ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">//å®ä¾‹æ¥è‡ªã€Šjsè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹</div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">	<span class="keyword">var</span> order500 = <span class="function"><span class="keyword">function</span>(<span class="params"> orderType, pay, stock </span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span> ( orderType === <span class="number">1</span> &amp;&amp; pay === <span class="literal">true</span> )&#123;<span class="comment">//æ ¹æ®orderType,payè¿›è¡Œä»»åŠ¡åˆ†é…</span></div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ°100 ä¼˜æƒ åˆ¸'</span> ); <span class="comment">//ç¬¦åˆorder500æ¡ä»¶ï¼Œç›´æ¥æ‰§è¡Œé€»è¾‘</span></div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">		   <span class="comment">//ä¸ç¬¦åˆorder500æ¡ä»¶äº¤ä¸ªorder200å¤„ç†ï¼Œorder500ä»»åŠ¡å®Œæˆ</span></div><div class="line">			order200( orderType, pay, stock ); <span class="comment">// å°†è¯·æ±‚ä¼ é€’ç»™200 å…ƒè®¢å•</span></div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;;</div><div class="line">	<span class="comment">// 200 å…ƒè®¢å•</span></div><div class="line">	<span class="keyword">var</span> order200 = <span class="function"><span class="keyword">function</span>(<span class="params"> orderType, pay, stock </span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span> ( orderType === <span class="number">2</span> &amp;&amp; pay === <span class="literal">true</span> )&#123;<span class="comment">//ç¬¦åˆorder200æ¡ä»¶</span></div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'200 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ°50 ä¼˜æƒ åˆ¸'</span> ); <span class="comment">//æ‰§è¡Œé€»è¾‘</span></div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">		   <span class="comment">//æ¡ä»¶ä¸ç¬¦åˆï¼Œä¼ ç»™ä¸‹ä¸€ä¸ªå‡½æ•°å¤„ç†</span></div><div class="line">			orderNormal( orderType, pay, stock ); <span class="comment">// å°†è¯·æ±‚ä¼ é€’ç»™æ™®é€šè®¢å•</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="comment">// æ™®é€šè´­ä¹°è®¢å•</span></div><div class="line">	<span class="keyword">var</span> orderNormal = <span class="function"><span class="keyword">function</span>(<span class="params"> orderType, pay, stock </span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span> ( stock &gt; <span class="number">0</span> )&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'æ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸'</span> );</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log( <span class="string">'æ‰‹æœºåº“å­˜ä¸è¶³'</span> );</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="comment">// æµ‹è¯•ç»“æœï¼š</span></div><div class="line">	order500( <span class="number">1</span> , <span class="literal">true</span>, <span class="number">500</span>); <span class="comment">// è¾“å‡ºï¼š500 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ°100 ä¼˜æƒ åˆ¸</span></div><div class="line">	order500( <span class="number">1</span>, <span class="literal">false</span>, <span class="number">500</span> ); <span class="comment">// è¾“å‡ºï¼šæ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸</span></div><div class="line">	order500( <span class="number">2</span>, <span class="literal">true</span>, <span class="number">500</span> ); <span class="comment">// è¾“å‡ºï¼š200 å…ƒå®šé‡‘é¢„è´­, å¾—åˆ°500 ä¼˜æƒ åˆ¸</span></div><div class="line">	order500( <span class="number">3</span>, <span class="literal">false</span>, <span class="number">500</span> ); <span class="comment">// è¾“å‡ºï¼šæ™®é€šè´­ä¹°, æ— ä¼˜æƒ åˆ¸</span></div><div class="line">	order500( <span class="number">3</span>, <span class="literal">false</span>, <span class="number">0</span> ); <span class="comment">// è¾“å‡ºï¼šæ‰‹æœºåº“å­˜ä¸è¶³</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å†å†è®¿javascripté—­åŒ…]]></title>
      <url>http://yoursite.com/2017/03/08/%E5%86%8D%E5%86%8D%E8%AE%BFjavascript%E9%97%AD%E5%8C%85/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è¿˜æ˜¯é—­åŒ…ï¼Œé—­åŒ…åœ¨javascriptçš„ç¼–ç¨‹ä¸­ä½œç”¨å¤ªå¤§ã€‚ä»ç„¶è¿˜æ˜¯è¦åŠ æ·±ç†è§£<br>  è¿™æ¬¡çš„ä¾‹å­æ˜¯æ¥è‡ªã€Šjavascriptè®¾è®¡æ¨¡å¼ã€‹<br><a href="http://jsdesignpatterns.com" target="_blank" rel="external">pro javascript design patterns  sourcecode</a> è¿™æœ¬ä¹¦ç®—æ˜¯æ¯”è¾ƒè€çš„äº†ã€‚ä¸Šå¸è¦æˆ‘å­¦å¥½javascriptï¼ŒèŠ±äº†ä¸å°‘åŠ›æ°”ã€‚æœ¬åœ°å›¾ä¹¦é¦†çš„ javascriptçš„è®¾è®¡æ¨¡å¼çš„ä¹¦ç±å°½ç„¶æ‚‰æ•°å°½æ”¶äº†ã€‚åå­—ç›´æ¥å¸¦js è®¾è®¡æ¨¡å¼çš„ä¹¦å››æœ¬éƒ½æœ‰ï¼Œã€Šç²¾é€šjavascriptã€‹,ã€Šjavascripté¢å‘å¯¹è±¡ç¼–ç¨‹ã€‹æœ‰å†…å®¹æ¶‰åŠã€‚å‡ æœ¬javascriptçš„åŠ¨ç‰©ä¹¦éƒ½æœ‰ã€‚</p>
</blockquote>
<p>ç›´æ¥çœ‹ä»£ç ï¼Œè¿™ä¸ªä»£ç çš„é—®é¢˜ï¼Œå…¶å®åœ¨tabç¼–ç¨‹çš„æ—¶å€™ï¼Œå·²ç»åœ¨ç”¨äº†ï¼Œä½†æ˜¯è¿˜ä¸æ˜¯å¤ªæ¸…æ¥šã€‚<code>å…³é”®ç‚¹ï¼šæ¯æ¬¡è°ƒç”¨é—­åŒ…çš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œæˆ–è€…å«ä½œç”¨åŸŸæ°”æ³¡ï¼Œè¿™ä¸ªä½œç”¨åŸŸä¸­çš„å˜é‡å’Œå…¶ä»–é—­åŒ…çš„å˜é‡æ˜¯éš”ç»çš„ï¼Œæ‰€ä»¥å«æ°”æ³¡</code>ã€‚javascripté€šè¿‡é—­åŒ…å¯ä»¥è¾¾åˆ°éšè—å’Œå°è£…ä¿¡æ¯çš„ç”¨é€”ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//foo()å‡½æ•°æ˜¯å¤–éƒ¨å‡½æ•°ã€‚bar()æ˜¯å†…éƒ¨å‡½æ•°ï¼Œvar a=10æ˜¯ä½¿ç”¨var å…³é”®å­—</span></div><div class="line"><span class="comment">//å®šä¹‰çš„å˜é‡ï¼Œè€Œä¸”ä½äºfoo()å‡½æ•°å†…éƒ¨ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹æ˜¯è®¿é—®ä¸åˆ°çš„</span></div><div class="line"><span class="comment">//æ‰€ä»¥æ˜¯ç§æœ‰å˜é‡ã€‚bar()å‡½æ•°ä½äºfoo()å‡½æ•°å†…éƒ¨ï¼Œæ‹¥æœ‰è®¿é—®foo()ä½œç”¨åŸŸçš„æƒåˆ©ã€‚</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   <span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"> </div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;<span class="comment">//bar()å‡½æ•°æ˜¯å†…éƒ¨å‡½æ•°ï¼Œå¯ä»¥è®¿é—®åˆ°var a å˜é‡ï¼Œæˆ–è€…å«æ•è·</span></div><div class="line">     a *= <span class="number">2</span>; </div><div class="line">     <span class="keyword">return</span> a; <span class="comment">//return  å±€éƒ¨å˜é‡</span></div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="keyword">return</span> bar;     <span class="comment">//è¿”å›å†…éƒ¨å‡½æ•°ï¼Œè¿™æ ·åœ¨foo()ä½œç”¨åŸŸå¤–ä¹Ÿå¯ä»¥è®¿é—®åˆ°bar</span></div><div class="line">           <span class="comment">//å‡½æ•°ï¼Œç”±äºå˜é‡aä¹Ÿä»bar()å‡½æ•°è¿”å›ï¼Œå˜é‡ä» foo()ä½œç”¨åŸŸä¸­è„±é€ƒå‡ºæ¥ã€‚</span></div><div class="line">  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> baz = foo(); <span class="comment">// bazæ˜¯å‡½æ•°foo()çš„å¼•ç”¨</span></div><div class="line">baz(); <span class="comment">// returns 20. //å¥‡å¦™çš„åœ°æ–¹åœ¨è¿™é‡Œ</span></div><div class="line">baz(); <span class="comment">// returns 40.//ä¹Ÿæ˜¯</span></div><div class="line">baz(); <span class="comment">// returns 80.//ä¹Ÿæ˜¯</span></div><div class="line"><span class="comment">//æŒç»­è°ƒç”¨bazå®é™…ä¸Šåœ¨åŒä¸€ä¸ªfoo()ä½œç”¨åŸŸé‡Œé¢çš„æ“ä½œ.è¿™é‡Œå°±åªæœ‰ä¸€ä¸ª</span></div><div class="line"><span class="comment">//ä½œç”¨åŸŸå­˜åœ¨ï¼Œå˜é‡aä¹Ÿå°±å¯ä»¥ä¸€ç›´ä¿å­˜æ”¹å˜çš„å€¼äº†ã€‚</span></div><div class="line"></div><div class="line"><span class="comment">//ä¸‹é¢å°±ä¸åŒäº†ï¼Œblaté‡æ–°å¼•ç”¨äº†foo()å‡½æ•°ï¼Œé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ä½œç”¨</span></div><div class="line"><span class="comment">//åŸŸï¼Œå˜é‡aæ˜¯ä»10å¼€å§‹çš„ï¼Œå¯ä»¥ç†è§£ä¸ºåˆå§‹åŒ–ã€‚</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> blat = foo();   <span class="comment">//è¿™æ˜¯foo()çš„å¦ä¸€å¼•ç”¨ã€‚è¿™é‡Œæœ‰ç‚¹ç»•äº†ã€‚</span></div><div class="line"><span class="comment">//é—­åŒ…çš„å˜é‡æ˜¯åœ¨å®šä¹‰é—­åŒ…æ—¶å€™å°±å®šä¹‰å¥½çš„ï¼Œä¸è¿è¡Œæ—¶æ˜¯æ— å…³çš„ã€‚</span></div><div class="line"><span class="comment">//æ‰€ä»¥åœ¨ç¬¬äºŒæ¬¡å¼•ç”¨é—­åŒ…æ˜¯å˜é‡çš„åˆå§‹å€¼è¿˜æ˜¯10</span></div><div class="line"><span class="comment">//è¿™ä¸ªåœ°æ–¹æ˜¯ä¸æ˜¯æœ‰äº›ç†Ÿæ‚‰ï¼Ÿæ˜¯çš„ï¼Œå’Œå‡½æ•°ç»‘å®šçš„å¯¹è±¡åˆšå¥½æ˜¯ç›¸åçš„ï¼Œ</span></div><div class="line"><span class="comment">//å‡½æ•°ç»‘å®šçš„ä½œç”¨åŸŸå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶ç»‘å®šçš„ï¼Œä¸å®šä¹‰å‡½æ•°æ—¶çš„ä½œç”¨åŸŸæ— å…³</span></div><div class="line">blat();    <span class="comment">// returns 20</span></div><div class="line">blat();    <span class="comment">// returns 40</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å­¦ä¹ æ¨¡å¼è®¾è®¡çš„å¯ç¤º-çŒ®ç»™å’Œæˆ‘ä¸€æ ·çš„react-reduxçš„åˆå­¦è€…]]></title>
      <url>http://yoursite.com/2017/03/08/%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%BC%8F%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%90%AF%E7%A4%BA-%E7%8C%AE%E7%BB%99%E5%92%8C%E6%88%91%E4%B8%80%E6%A0%B7%E7%9A%84react-redux%E7%9A%84%E5%88%9D%E5%AD%A6%E8%80%85/</url>
      <content type="html"><![CDATA[<p>è¿™é‡Œæˆ‘ä¸è°ˆåˆ°åº•å“ªå®¶çš„ä¹¦å¥½ï¼Œé‚£ç§å­¦ä¹ æ–¹æ³•å¥½ã€‚ä½œä¸ºä¸€ä¸ªè½¯ä»¶å¼€å‘çš„åˆå­¦è€…å·²ç»ä¸¤å¹´äº†ï¼Œå‰ä¸€ä¸ªæœˆæ„Ÿè§‰åˆ°å¾ˆç„¦è™‘ï¼Œæ„Ÿè§‰åˆ°å¥½å¤šä»£ç éƒ½è¿˜è¯»ä¸æ‡‚ï¼Œè€Œä¸”å¹´é¾„ä¹Ÿæ¯”è¾ƒå¤§ã€‚ä½†æ˜¯è‡ªä»æ¥è§¦äº†å‡ æœ¬javascrptæ¨¡å¼è®¾è®¡çš„ä¹¦ä»¥åï¼Œç„¦è™‘æ¶ˆå¤±äº†ï¼Œå°½ç®¡ä»»ç„¶æœ‰å¾ˆå¤šçš„ä»£ç ç­‰ç€å»è¯»ï¼Œä½†æ˜¯å¿ƒé‡Œæ„Ÿè§‰éå¸¸æœ‰åº•ï¼Œä»¥å‰å¦‚æœæ˜¯èµ¤æ‰‹åœ¨è’åŸä¸Šæ‰“çŒçš„è¯ï¼Œç°åœ¨æ‰‹ä¸Šå°±ä¸€æŠŠçŒæªã€‚</p>
<p>ç°åœ¨è¯´è¯´è¯»è¿‡æ¨¡å¼è®¾è®¡ä»¥åçš„æ„Ÿå—ã€‚è¿™ä¸ªè¯»çš„è¿‡ç¨‹æœ¬èº«åˆæ˜¯åµŒå¥—å‡½æ•°ï¼Œè¯»æ¨¡å¼è®¾è®¡çš„è¿‡ç¨‹ä¸­ä¹Ÿåœ¨åˆ©ç”¨æ¨¡å¼çš„æ–¹æ³•æ¥ä¸æ–­çš„é’ˆå¯¹ä¸€ä¸ªé—®é¢˜ï¼Œç»§ç»­æ·±å…¥çš„å­¦ä¹ ï¼Œé‡æ„ã€‚ä¸æ–­çš„åå¤ã€‚</p>
<p>1æ‹¿ç€æ¦”å¤´çš„äººï¼Œçœ‹åˆ°ä»»ä½•ä¸œè¥¿éƒ½æ˜¯é’‰å­ï¼Ÿ</p>
<p>æˆ‘ä¸Šå‘¨æœ‰æ®µæ—¶é—´ï¼Œæ„Ÿè§‰çœ‹åˆ°ä»»ä½•çš„ä»£ç éƒ½åœ¨è€ƒè™‘ä»–é‡Œé¢æœ‰ä»€ä¹ˆæ¨¡å¼ï¼Œç”šè‡³å½±å“åˆ°äº†æˆ‘çš„å…¶ä»–å’Œç¼–ç¨‹ä¸ç›¸å¹²çš„é¢†åŸŸï¼Œæ¯”å¦‚æˆ‘ä»¥å‰çš„ä¸“ä¸šçŸ¥è¯†å’Œä¸šä½™çˆ±å¥½ï¼Œå‘ç°çŸ­æ—¶é—´å†…ï¼Œé€šè¿‡æŠŠæ¨¡å¼è®¾è®¡çš„æ€æƒ³(æˆ‘è¯´çš„è€Œæ˜¯æ€æƒ³ï¼Œä¸æ˜¯æ€è·¯ï¼Œæ˜¯å®è§‚çš„çœ‹æ³•)æ¥é‡æ–°å®¡è§†å­¦è¿‡æˆ–è€…äº†è§£çš„ä¸œè¥¿ï¼Œç»“æœè·å¾—äº†å’Œä»¥å‰å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œä¼¼ä¹å¥½å¤šé—®é¢˜çœ‹å¾—å¾ˆé€å½»äº†ã€‚ </p>
<p>ç»“æœä¹æ­¤ä¸ç–²ï¼Œä½†æ˜¯å†·é™ä¸‹æ¥æƒ³ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘æ˜¯å¦æœ‰ç‚¹çŸ«æ‰è¿‡æ­£äº†ï¼Ÿæˆ‘é‡æ–°åæ€ä»¥åå‘ç°ï¼Œå¹¶æ²¡æœ‰çŸ«æ‰è¿‡æ­£ï¼Œæ¨¡å¼å°±æ˜¯è§£å†³é—®é¢˜çš„ä¸‡èƒ½æ–¹å¼ï¼Œåªè¦ä½ æ˜¯åœ¨ä¸»åŠ¨çš„æ ¹æ®å®é™…æƒ…å†µè§£å†³é—®é¢˜ï¼Œä¸»åŠ¨çš„æ€»ç»“è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­å„ç§åˆ©å¼Šå’Œè§„å¾‹ï¼Œå°±æ˜¯æ¨¡å¼ã€‚<br>ä½ å†æ¬¡æŠŠè¿™ä¸ªå·²ç»æˆå‹çš„æ¨¡å¼åº”ç”¨åˆ°ç±»ä¼¼é—®é¢˜çš„è§£å†³å’Œè®¾è®¡ä¸­å°±æ˜¯<code>æ¨¡å¼è®¾è®¡</code>ã€‚<br>è¿™é‡Œé¢æœ€ä¸­çš„æ˜¯çœ‹æ¸…æ¥šå½“å‰è¦è§£å†³çš„é—®é¢˜å’Œå“ªäº›å·²çŸ¥çš„æ¨¡å¼ç›¸ç±»ä¼¼ã€‚è¿™æ˜¯ç¬¬ä¸€æ­¥ï¼Œå¯ä»¥ç§°ä¸º<code>æ¨¡å¼è¯†åˆ«</code>ã€‚æ¯”å¦‚ä½ è¦å¼€å‘æ±½è½¦å·ç‰Œä¹‹åˆ«ç³»ç»Ÿï¼Œä½ è¦å…ˆè¯†åˆ«å‡ºå·ç ï¼Œæ‰èƒ½åšåä¸€æ­¥çš„å·¥ä½œï¼Œåä¸€æ­¥çš„é€»è¾‘å†ç®€å•ï¼Œæ²¡æœ‰è¯†åˆ«å‡ºé—®é¢˜å°±ï¼Œåé¢çš„é—®é¢˜å°±æ— ä»è§£å†³ã€‚</p>
<p>ä½œä¸ºç¨‹åºå‘˜çš„ä½ æ˜¯å¦è€ƒè™‘è¿‡ï¼šâ€œæˆ‘çš„ç”Ÿæ´»ï¼Œä½“è‚²çˆ±å¥½ï¼Œè¯»ä¹¦ï¼Œå†™ä½œï¼ŒåŒ…æ‹¬æ‰¾å¯¹è±¡ï¼Œç»“å©šï¼Œç”šè‡³æ˜¯çº¦ç‚®è¿‡ç¨‹ä¸­æ˜¯ä¸æ˜¯æ€»ç»“äº†ä¸€äº›è§„å¾‹æˆ–è€…ä½¿ç”¨äº†åˆ«äººæ€»ç»“çš„ä¸€äº›è§„å¾‹ï¼Œåœ¨ä½¿ç”¨è¿™äº›è§„å¾‹çš„è¿‡ç¨‹ä¸­é‚£äº›æœ‰æ•ˆï¼Œé‚£äº›æ˜¯è´Ÿåˆ†ï¼Ÿâ€  æ˜¯çš„ï¼æ— å¤„ä¸åœ¨çš„ç»éªŒï¼Œåˆ°å¤„éƒ½æ˜¯ã€‚ä½†æ˜¯è¯·ä¸è¦å¿˜äº†ï¼Œè¿™äº›è§„å¾‹æ˜¯éƒ½æœ‰è‡ªå·±çš„ä½¿ç”¨ç‰¹æ®Šæ€§çš„ã€‚ä¸è€ƒè™‘ç¯å¢ƒæˆ–è€…ä¸Šä¸‹æ–‡çš„è§„å¾‹å°±ä¹±ç”¨è¿™äº›ç»éªŒå°±æ˜¯è€æµæ°“ï¼Œå¯èƒ½ä¸ä»…èµ·ä¸åˆ°è‰¯å¥½æ•ˆæœï¼Œåè€Œéª‚ç»éªŒæ€»ç»“è€…å‚»é€¼ã€‚<br>   æˆ‘ä»¬ä¸­å›½è¶³çƒå°±æ˜¯å…¸å‹çš„ä¹±ç”¨ç»éªŒçš„ä¾‹å­ã€‚ æˆ‘ä»¬çš„è¶³çƒç®¡ç†è€…æ€»æ˜¯æ‡’æ”¿ï¼Œæƒ³çŸ­å¹³å¿«çš„è§£å†³é—®é¢˜ï¼ŒæœŸæœ›ç”¨åˆ«äººç°æˆçš„æ¨¡å¼æ¥è§£å†³é—®é¢˜ã€‚<br>   ä¹Ÿå¯è°“æ˜¯å°è¯•äº†ä¸å°‘ï¼Œæ¯”å¦‚ç¬¬ä¸€äººå¤–ç±ä¸»å¸…ï¼Œå¾·å›½äººæ˜¯é‚£æ™®åˆ©ã€‚å½“æ—¶ä¸¾å›½å…´å¥‹ï¼Œä»¥ä¸ºæ‰¾åˆ°äº†è§£å†³ä¸­å›½è¶³çƒéš¾é¢˜çš„è‰¯è¯ã€‚ç»“æœå›½äººå…¨éƒ¨éƒ½é™·å…¥ä¸€ç§å¦„æƒ³ç—‡ä¸­ã€‚  ä½†æ˜¯å¿˜è®°äº†ä¸¤å›½è¶³çƒèƒŒæ™¯çš„å·®åˆ«ï¼Œ<br>   ä¸¤å›½å›½æ°‘èº«ä½“å¥åº·ï¼Œèº«ä½“ç´ è´¨å¹³å‡æƒ…å†µï¼Œè¶³çƒæ™®åŠæƒ…å†µï¼Œé’è®­æ™®åŠæƒ…å†µï¼Œè”èµ›å¼€å±•æƒ…å†µï¼Œå›½å®¶ç»æµæ”¶å…¥æƒ…å†µã€‚å½“ç•Œé˜Ÿå‘˜çš„å¤©èµ‹æƒ…å†µã€‚è¿™äº›éƒ½è¦ç»¼åˆè€ƒè™‘ã€‚é—®é¢˜å²‚æ˜¯åŒºåŒºä¸€ä¸ªè¶³çƒæ•™ç»ƒå°±èƒ½è§£å†³çš„ï¼Ÿç»“æœå¸Œæœ›è¶Šå¤§ï¼Œå¤±æœ›è¶Šå¤§ã€‚<br>   é¢†å¯¼ä»ä¸æ­»å¿ƒï¼Œæ¥ç€ç ¸é’±ï¼Œè¶³çƒè¦ä»å¨ƒå¨ƒæŠ“èµ·ï¼Œæ´¾äº†ä¸€å¯¹å°çƒå‘˜å»å·´è¥¿å­¦ä¹ ï¼Œä»¥ä¸ºè¿™æ ·é—®é¢˜å°±èƒ½è§£å†³äº†ã€‚å½“æ—¶çœ‹çºªå½•ç‰‡ä»‹ç»ï¼Œæ¡ä»¶é‚£ä¸ªå·®å‘€ã€‚ä½†æ˜¯å½“æ—¶å·´è¥¿å°±æ˜¯é‚£ä¸ªæ¡ä»¶ï¼Œä¸ºä»€ä¹ˆäººå®¶å°±æˆåŠŸäº†ï¼Œå±¡å¤ºä¸–ç•Œå† å†›å‘¢ï¼Ÿã€‚è¸¢çƒäººå¤ªå¤šäº†ï¼Œçƒåœºè™½ç„¶å¾ˆå·®ï¼Œä½†æ˜¯è¸¢çƒäººåŸºæ•°å¤§ï¼Œå¤©æ‰è¿˜æ˜¯èƒ½åœ¨è¿™æ ·çš„æ¡ä»¶ä¸‹è¯ç”Ÿã€‚æ‰€ä»¥è¿™æ ·çš„è®¡åˆ’å¿…å®šå¤±è´¥ã€‚</p>
<p>   å¦‚æœä¸è€ƒè™‘è¿™äº›ç»¼åˆé—®é¢˜ï¼Œå¤–ç±æ•™ç»ƒå’Œé’è®­ç³»ç»Ÿæ¥ä¸€ä¸ªæ­»ä¸€ä¸ªï¼ŒæˆåŠŸçš„éƒ½æ˜¯èµŒå¾’ã€‚</p>
<p>   å®é™…ä¸Šæˆ‘ä»¥ä¸Šçš„åˆ†æä¹Ÿæ˜¯ç«™åœ¨æ—è§‚è€…çš„è§’åº¦ä¸Šçœ‹é—®é¢˜ï¼Œè§£å†³é—®é¢˜è‚¯å®šä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œå¦‚æœèƒ½çœ‹åˆ°é—®é¢˜å°±èƒ½è§£å†³é—®é¢˜ï¼Œé‚£å°±ä¸æ˜¯é—®é¢˜äº†ã€‚</p>
<p>   2.åŠ¨æ‰‹ï¼Œé˜…è¯»ä¹‹åçš„æ„Ÿå—ã€‚æ¨¡å¼æ˜¯ä½ è‡ªå·±çš„ä½“éªŒ</p>
<p>   åœ¨å­¦ä¹ äº†æ¨¡å¼è®¾è®¡çš„ä¹¦ä»¥åï¼Œè¯•ç€å†™äº†ä¸€ç¯‡æœ‰å…³react/reduxä¸­æ½œè—çš„ä¸€äº›æ¨¡å¼çš„æ–‡ç« ã€‚å†™è¿™ä¸ªæ–‡ç« çš„è¿‡ç¨‹å®é™…æ˜¯åŸºäºæˆ‘å¯¹è¿™ä¸ªæ¡†æ¶ä¹‹é—´çš„å…³ç³»çš„å­¦ä¹ è¿‡ç¨‹ï¼Œæˆ‘æ˜¯åˆå­¦è€…ï¼Œåœ¨reduxçš„å­¦ä¹ ä¸­ç¡®å®æ˜¯å¡äº†å¾ˆé•¿æ—¶é—´ã€‚å¾ˆå¤šä»£ç å…·ä½“é€»è¾‘çœ‹çš„æ‡‚ï¼Œä½†æ˜¯å°±æ˜¯æ„Ÿè§‰ä¸çŸ¥é“åœ¨å¹²ä»€ä¹ˆï¼Œåœ¨å­¦äº›reduxä¸­ï¼Œåˆšå¼€å§‹ä¸çŸ¥é“æ•°æ®æ€ä¹ˆæµåŠ¨çš„ã€‚ ç°åœ¨çœ‹æ¥è¿™äº›å­¦ä¹ ä¸­çš„æ‘¸ç´¢è¿‡ç¨‹ä¹Ÿè¿˜æœ‰ä¸€å®šçš„å¥½å¤„ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡æ„è¯†åˆ° React UI Componentçš„ç»„ä»¶æ˜¯åŒ…å«åœ¨containerè¿™ä¸ªç½å­ä¸­çš„æ—¶å€™ï¼Œé—®é¢˜ä¼¼ä¹ä¸€ä¸‹å˜å¾—ç®€å•äº†ã€‚çœ‹åˆ°äº†ç»„ä»¶react-reduxä¹‹é—´çš„é‚£ç§ä¸ºäº†åŠŸèƒ½åˆ’åˆ†è€Œè¿›è¡Œ<code>è§£è€¦å’Œ</code>çš„è¿‡ç¨‹ï¼Œå½“æˆ‘æƒ³åˆ°<code>è§£è€¦å’Œ</code>çš„è¿‡ç¨‹ï¼Œä¼¼ä¹å…¶ä»–ç”¨åˆ°<code>è§£è€¦å’Œ</code>æ¦‚å¿µçš„åœ°æ–¹ï¼Œè®¤è¯†æ›´åŠ æ¸…æ¥šäº†å’Œæ˜æ™°äº†ï¼Œç»“æœæ˜¯åœ¨æˆ‘ç»§ç»­å­¦ä¹ ã€Šjsæ¨¡å¼è®¾è®¡ã€‹çš„æ—¶å€™ï¼Œéš¾åº¦å’Œå¹¿åº¦éƒ½é™äº†äº†å¥½å¤šï¼ŒåŸå› æ˜¯è¿™ç§<code>è§£è€¦å’Œ</code>æ€æƒ³æ˜¯ç¼–ç¨‹ä¸­æŠŠå¤æ‚é—®é¢˜åˆ†è§£æˆç®€å•é—®é¢˜çš„æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥æŠŠå¤æ‚çš„é€»è¾‘åˆ¤æ–­åˆ†è§£å¼€ã€‚æ¨¡å¼è®¾è®¡ä¸­å¤§é‡ä½¿ç”¨è¿™ç§æ€æƒ³ï¼Œæ‰€ä»¥å¾ˆå¤šé—®é¢˜å°±å¾ˆå®¹æ˜“çœ‹æ‡‚äº†ã€‚</p>
<p>   ä½†æ˜¯æˆ‘å›å¤´ä¸€æƒ³ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯åŸºäºæˆ‘è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹æ¥é€æ¸ç†è§£çš„ï¼Œå¦‚æœæ²¡æœ‰å‰é¢çš„æŒ«æŠ˜ï¼Œå¯èƒ½ä¹Ÿä¸ä¼šå¾—å‡º containeræ˜¯ä¸ªç½å­è¿™ä¸ªå½¢è±¡çš„ä¾‹å­ã€‚å¦‚æœåœ¨åˆšé‡åˆ°æŒ«æŠ˜çš„æ—¶å€™ï¼Œåˆ«äººå‘Šè¯‰æˆ‘ï¼Œè¿™ä¸ªå®¹å™¨å°±æ˜¯ä¸ªç½å­ï¼Œä½ å»çœ‹çœ‹å§ã€‚ ä¸å¯èƒ½çš„äº‹ï¼Œå’Œç›²äººæ‘¸è±¡ä¸€æ ·ï¼Œç»™ä½ è¯´é¢å‰æ˜¯ä¸€å¤´å¤§è±¡ï¼Œåœ¨ä½ æ²¡æœ‰å®Œå…¨æ‘¸é€çš„æƒ…å†µä¸‹ï¼Œä½ çš„æ„Ÿè§‰æ˜¯åƒå¥‡ç™¾æ€ªçš„ã€‚</p>
<p>   ä¹Ÿè®¸ä½ è‡ªå·±å®Œå…¨ç†è§£äº†ä»¥åï¼Œè¿™ä¸ªcontainerå¯ä»¥æ˜¯ä¸€ä¸ªé“ç½ï¼Œä¸€ä¸ªç¯®å­ï¼Œå…¶ä»–ä»€ä¹ˆçš„ä¸œè¥¿ã€‚ä¸é‡è¦<code>æœ€ç»ˆéƒ½ä¼šæŠ½è±¡æˆä¸€ä¸ªå®¹å™¨</code>ã€‚  å®¹å™¨å°±æ˜¯å¤§è±¡,è¦ä½ è‡ªå·±å»æ„Ÿå—</p>
<p>   3.æ¨¡å¼è®¾è®¡å’Œæ¨¡å¼è¯†åˆ«æ˜¯ä¸€ä¸ªæ€è€ƒè¿‡ç¨‹ã€‚</p>
<p>   æˆ‘æ„Ÿè§‰åœ¨å­¦ä¹ ä¸­æ…¢æ…¢æ„Ÿè§‰åˆ°äº†ç¼–ç¨‹æ€è€ƒçš„ä¹è¶£ã€‚åœ¨è¿™äº›ä¹¦ä¸Šï¼Œä¸€äº›å¾ˆå¤æ‚çš„ä»£ç ï¼Œç»è¿‡é‡æ„å˜ä¸ºå®¹æ˜“ç»´æŠ¤ï¼Œå®¹æ˜“é˜…è¯»ï¼Œå®¹æ˜“æ‰©å±•çš„è¿‡ç¨‹ï¼ŒçœŸæ˜¯ä¸€å¼ äº«å—è¿‡ç¨‹ã€‚ä»é˜…è¯»ä¸­æ„Ÿå—åˆ°äº†æ€è€ƒçš„å¼ºå¤§ã€‚<br>   å¦‚æœå‰ä¸€æ®µæ—¶é—´çš„å­¦ä¹ æ˜¯åŸºäºåˆ«äººçš„ä»£ç çš„ä¸€ç§å½¢å¼çš„æ¨¡ä»¿ï¼Œé‚£ä¹ˆä»é˜…è¯»è¿™äº›æ¨¡å¼è®¾è®¡çš„ä¹¦ä»¥åï¼Œåé¢å°±è¦è€ƒè™‘åˆ°å¯¹è¿™äº›ä½œè€…æ€æƒ³çš„æ¨¡ä»¿ï¼Œäººå®¶æ˜¯æ€ä¹ˆåšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘æ€ä¹ˆæ‰èƒ½è¾¾åˆ°ã€‚å¤§è¨€ä¸æƒ­çš„è¯´ï¼Œå¦‚æœåˆ°äº†è¿™ä¸€ä¸ªå¢ƒç•Œï¼Œæˆ‘æƒ³æˆ‘çš„ç¼–ç¨‹æ–¹æ³•å’Œèƒ½åŠ›éƒ½èƒ½æœ‰å¾ˆå¤§çš„æé«˜ã€‚<br>   4.ä»…ä»…æ˜¯ä¸ºäº†ç¼–ç¨‹è€Œç¼–ç¨‹å—ï¼Ÿ</p>
<p>   æ¨¡å¼è®¾è®¡çš„ä¹¦ä¸Šå®é™…è®²äº†å¾ˆå¤šçš„æ—¥å¸¸ç”Ÿæ´»ä¸­çš„äº‹ç‰©è¿è½¬åŸç†çš„æ¨¡æ‹Ÿè§£å†³è¿‡ç¨‹ã€‚ æˆ‘æƒ³çš„æ˜¯ç¼–ç¨‹éƒ½æ˜¯è§£å†³å®é™…é—®é¢˜ï¼Œè¦æƒ³ç¼–ç¨‹æ€æƒ³èƒ½æœ‰å¾ˆå¤§çš„æé«˜ï¼Œå¿…é¡»è¦å…³æ³¨è¿™äº›å…·ä½“äº‹ç‰©è¿è½¬çš„é€»è¾‘ã€‚<br>   5.ä¸æ–­çš„è®°å½•è‡ªå·±çš„æ„Ÿæ‚Ÿ<br>      äººçš„è®°å¿†æ˜¯å¾ˆè„†å¼±çš„ï¼Œç¨‹åºå‘˜è¦å­¦çš„ä¸œè¥¿é‚£ä¹ˆå¤šï¼Œä½ ä¸å¯èƒ½éƒ½è®°ä½ï¼Œé”™è¯¯çš„è®°å½•ä¸‹æ¥ä¹Ÿå¥½ã€‚</p>
<hr>
<p>   å¥½äº†ï¼Œå°±å†™è¿™ä¹ˆå¤šï¼Œåˆå­¦è€…æ°´å¹³ï¼Œå¯èƒ½è¿‡ä¸€æ®µæ—¶é—´å°±è§‰å¾—è¿™ä¸ªæ–‡ç« å¾ˆå‚»æ¯”äº†ã€‚å€Ÿæ­¤æ–‡è®°å½•è¿™ä¸ªå‚»é€¼çš„è¿‡ç¨‹ã€‚å‘µå‘µ</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æœ¬åœ°Node-jsæœåŠ¡å™¨ä½œä¸ºapiæœåŠ¡å™¨çš„è§£å†³åŠæ³•]]></title>
      <url>http://yoursite.com/2017/03/08/%E6%9C%AC%E5%9C%B0Node-js%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BD%9C%E4%B8%BAapi%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨çœ‹react-nativeæ•™ç¨‹çš„æ—¶å€™ï¼Œé‡åˆ°è¦åœ¨æ‰‹æœºç«¯è°ƒè¯•ï¼Œéœ€è¦apiæœåŠ¡å™¨ï¼Œä½†æ˜¯ç”±äºNode.jsè‡ªå·±å°±ä½œä¸ºæœåŠ¡å™¨ï¼Œæ²¡æœ‰apacheæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç”¨apacheå’Œnginxä¹Ÿå¯ä»¥è§£å†³ï¼Œä½†æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨nodeå·²æœ‰çš„æ¨¡å—è§£å†³è¿™ä¸ªé—®é¢˜.<br>æ¦‚å¿µ:ç”µè„‘çš„åœ°å€æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æœ¬åœ°ç¯å›åœ°å€ï¼Œå°±æ˜¯127.0.0.1æˆ–localhost,è¿™ä¸ªåœ°å€æœ¬æœºä»¥å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªåœ°å€æ˜¯è·¯ç”±å™¨æˆ–äº¤æ¢æœºåˆ†é…çš„ipåœ°å€ï¼Œè¿™ä¸ªåœ°å€å…¶ä»–ç”µè„‘å¯ä»¥è®¿é—®ã€‚<br>åœ¨node.jsä¸­è¦æŠŠipåœ°å€è½¬ä¸ºæœ¬åœ°ç¯å›åœ°å€æ‰å¯ä»¥è®¿é—®ã€‚åŸç†å°±æ˜¯è¿™æ ·ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//æœåŠ¡å™¨ç«¯çš„ä»£ç </span></div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line"><span class="comment">// set up handlebars view engine</span></div><div class="line"><span class="keyword">var</span> handlebars = <span class="built_in">require</span>(<span class="string">'express3-handlebars'</span>)</div><div class="line">	.create(&#123; <span class="attr">defaultLayout</span>:<span class="string">'main'</span> &#125;);</div><div class="line">app.engine(<span class="string">'handlebars'</span>, handlebars.engine);</div><div class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'handlebars'</span>);</div><div class="line"></div><div class="line">app.set(<span class="string">'port'</span>, process.env.PORT || <span class="number">3000</span>);</div><div class="line"></div><div class="line">app.use(express.static(__dirname + <span class="string">'/public'</span>));</div><div class="line"></div><div class="line"><span class="keyword">var</span> fortuneCookies = [</div><div class="line">	<span class="string">"Conquer your fears or they will conquer you."</span>,</div><div class="line">	<span class="string">"Rivers need springs."</span>,</div><div class="line">	<span class="string">"Do not fear what you don't know."</span>,</div><div class="line">	<span class="string">"You will have a pleasant surprise."</span>,</div><div class="line">	<span class="string">"Whenever possible, keep it simple."</span>,</div><div class="line">];</div><div class="line"></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</div><div class="line">	res.render(<span class="string">'home'</span>);</div><div class="line">&#125;);</div><div class="line">app.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> randomFortune = </div><div class="line">		fortuneCookies[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * fortuneCookies.length)];</div><div class="line">	res.render(<span class="string">'about'</span>, &#123; <span class="attr">fortune</span>: randomFortune &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 404 catch-all handler (middleware)</span></div><div class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</div><div class="line">	res.status(<span class="number">404</span>);</div><div class="line">	res.render(<span class="string">'404'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 500 error handler (middleware)</span></div><div class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err, req, res, next</span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.error(err.stack);</div><div class="line">	res.status(<span class="number">500</span>);</div><div class="line">	res.render(<span class="string">'500'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.listen(app.get(<span class="string">'port'</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log( <span class="string">'Express started on http://localhost:'</span> + </div><div class="line">    app.get(<span class="string">'port'</span>) + <span class="string">'; press Ctrl-C to terminate.'</span> );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<hr>
<p>ä¸Šé¢è¿™æ®µä»£ç åœ¨127.0.0.1:3000ç«¯å£å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨,ä½†æ˜¯åœ¨æ‰‹æœºç«¯æ˜¯ä¸èƒ½è®¿é—®çš„.</p>
<p>æˆ‘ä»¬å†å¯åŠ¨å¦ä¸€ä¸ªnode.jsæœåŠ¡å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//proxy.js</span></div><div class="line">   <span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>), </div><div class="line">         httpProxy = <span class="built_in">require</span>(<span class="string">'http-proxy'</span>);  <span class="comment">//å¼•å…¥è¿™ä¸ªæ¨¡å—</span></div><div class="line">  </div><div class="line"><span class="comment">// æ–°å»ºä¸€ä¸ªä»£ç† Proxy Server å¯¹è±¡  </span></div><div class="line"><span class="keyword">var</span> proxy = httpProxy.createProxyServer(&#123;&#125;);  </div><div class="line">  </div><div class="line"><span class="comment">// æ•è·å¼‚å¸¸  </span></div><div class="line">proxy.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, req, res</span>) </span>&#123;  </div><div class="line">  res.writeHead(<span class="number">500</span>, &#123;  </div><div class="line">    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>  </div><div class="line">  &#125;);  </div><div class="line">  res.end(<span class="string">'Something went wrong. And we are reporting a custom error message.'</span>);  </div><div class="line">&#125;);  </div><div class="line">  </div><div class="line"><span class="comment">// å¦å¤–æ–°å»ºä¸€ä¸ª HTTP 80 ç«¯å£çš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯å¸¸è§„ Node åˆ›å»º HTTP æœåŠ¡å™¨çš„æ–¹æ³•ã€‚  </span></div><div class="line"><span class="comment">// åœ¨æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œè°ƒç”¨ proxy.web(req, res config) æ–¹æ³•è¿›è¡Œè¯·æ±‚åˆ†å‘  </span></div><div class="line"><span class="keyword">var</span> server = <span class="built_in">require</span>(<span class="string">'http'</span>).createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;  </div><div class="line">  <span class="comment">// åœ¨è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰ä½ çš„è·¯ç”±åˆ†å‘  </span></div><div class="line">  <span class="keyword">var</span> host = req.headers.host, ip = req.headers[<span class="string">'x-forwarded-for'</span>] || req.connection.remoteAddress;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"client ip:"</span> + ip + <span class="string">", host:"</span> + host);  </div><div class="line">    </div><div class="line">  <span class="keyword">switch</span>(host)&#123;  <span class="comment">//æ„æ€æ˜¯ç›‘å¬ä¸‹é¢çš„ipåœ°å€,å¦‚æœåŒ¹é…å°±è½¬åˆ°</span></div><div class="line"><span class="comment">//127.0.0.1:3000åœ°å€</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'192.168.0.101:8080'</span>:    <span class="comment">//ç›‘å¬è¿™ä¸ªåœ°å€</span></div><div class="line">   <span class="comment">//è¿™ä¸ªåœ°å€åœ¨windowä¸Šç”¨ipconfigæŸ¥çœ‹,mac/linuxç”¨ifconfigæŸ¥çœ‹</span></div><div class="line">   </div><div class="line">    <span class="keyword">case</span> <span class="string">'bbs.aaaa.com'</span>:  </div><div class="line">        proxy.web(req, res, &#123; <span class="attr">target</span>: <span class="string">'http://127.0.0.1:3000'</span> &#125;);  <span class="comment">//è½¬åˆ°è¿™ä¸ªåœ°å€</span></div><div class="line">    <span class="keyword">break</span>;  </div><div class="line">    </div><div class="line">    <span class="keyword">default</span>:  </div><div class="line">        res.writeHead(<span class="number">200</span>, &#123;  </div><div class="line">            <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>  </div><div class="line">        &#125;);  </div><div class="line">        res.end(<span class="string">'Welcome to my server!'</span>);  </div><div class="line">  &#125;  </div><div class="line">&#125;);  </div><div class="line">  </div><div class="line"><span class="built_in">console</span>.log(<span class="string">"listening on port 8080"</span>)  </div><div class="line">server.listen(<span class="number">8080</span>);</div></pre></td></tr></table></figure></p>
<p>node proxy.js ä»¥åå¯åŠ¨äº†proxyæœåŠ¡å™¨.å¯ä»¥é€šè¿‡ç”µè„‘çš„ipåœ°å€è®¿é—®127.0.0.1çš„apiè·¯ç”±äº†ã€‚</p>
<p>å¦‚æœæ˜¯ä½¿ç”¨nginxä¹Ÿå¯ä»¥è¾¾åˆ°è¦æ±‚ï¼Œ<br>åœ¨macä¸Šä½¿ç”¨homebrewåŒ…ç®¡ç†ç›¸å½“æ–¹ä¾¿<br> bashä¸‹  å®‰è£… brew install nginx<br>                å¯åŠ¨ brew services start nginx<br>  å¦‚æœå®‰è£…äº†atomç¼–è¾‘å™¨<br>  bashåœ¨ ç›´æ¥  atom /usr/local/etc/nginx/nginx.conf æ‰“å¼€é…ç½®æ–‡ä»¶æœ¬åˆ†ä»¥ååšå‡ºä¿®æ”¹</p>
<p>ä¸‹é¢æ˜¯nginx.confçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//nginx.conf</span></div><div class="line"></div><div class="line"> #åŸæ¥çš„æ–‡ä»¶å¦å­˜åã€‚ç›´æ¥ä½¿ç”¨ä¸‹é¢å†…å®¹æ›¿æ¢nginx.<span class="keyword">conf</span>çš„å†…å®¹</div><div class="line"></div><div class="line"></div><div class="line">events &#123;</div><div class="line">    worker_connections  1024;</div><div class="line">&#125;</div><div class="line">http &#123;</div><div class="line">    <span class="keyword">include</span>       mime.types;</div><div class="line">    default_type  application/octet-stream;</div><div class="line"></div><div class="line">    #log_format  main  '<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] <span class="string">"$request"</span> '</div><div class="line">    #                  '<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> <span class="string">"$http_referer"</span> '</div><div class="line">    #                  '<span class="string">"$http_user_agent"</span> <span class="string">"$http_x_forwarded_for"</span>';</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    sendfile        <span class="keyword">on</span>;</div><div class="line">    #tcp_nopush     <span class="keyword">on</span>;</div><div class="line"></div><div class="line">    #keepalive_timeout  0;</div><div class="line">    keepalive_timeout  65;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    server &#123;</div><div class="line">        listen 8080;  #ç›‘å¬80880ç«¯å£</div><div class="line">        server_name www.penguu.com 192.168.1.100;  #è¿™é‡Œæ˜¯çœŸæœºè¦è®¿é—®çš„åœ°å€ã€‚</div><div class="line">        # <span class="keyword">Mac</span> é€šè¿‡ç»ˆç«¯ ifconfig æŸ¥çœ‹ã€‚æ¯”å¦‚æˆ‘æŸ¥çœ‹çš„å°±æ˜¯192.168.1.100</div><div class="line">        #æ‰‹æœºè®¿é—®çš„æ¥å£å°±æ˜¯ 192.168.1.100:8080</div><div class="line">        #å®é™…åœ¨23è¡Œç›‘å¬çš„ç«¯å£å¯ä»¥æ˜¯80ç«¯å£ï¼Œç”±äºæµè§ˆå™¨é»˜è®¤å°±æ˜¯80ç«¯å£ã€‚ä½†æ˜¯åœ¨<span class="keyword">mac</span>ä¸­æœ‰æƒé™é—®é¢˜ã€‚æ‰€#ä»¥å°±ä½¿ç”¨8080ç«¯å£</div><div class="line">        # address_bookä¸­çš„serviceä¸­çš„åœ°å€ä¹Ÿè¦ä¿®æ”¹è·¯å¾„æ˜¯</div><div class="line">        # <span class="keyword">view</span>/service.js-&gt;host,ä¿®æ”¹ä¸º 192.168.1.100ï¼š8080</div><div class="line"></div><div class="line">        #access_log /<span class="keyword">var</span>/<span class="keyword">log</span>/nginx/<span class="keyword">test</span>.<span class="keyword">log</span>;</div><div class="line">        location / &#123;</div><div class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</div><div class="line">            proxy_set_header X-Forwarded-<span class="keyword">For</span> <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">            proxy_set_header Host  <span class="variable">$http_host</span>;</div><div class="line">            proxy_set_header X-Nginx-Proxy true;</div><div class="line">            proxy_set_header Connection <span class="string">""</span>;</div><div class="line">            proxy_pass      http:<span class="comment">//127.0.0.1:3000;  # address_bookçš„ serveråœ°å€ï¼Œå°±æ˜¯æœ¬åœ°node.jsæœåŠ¡å™¨çš„ipåœ°å€</span></div><div class="line">            #node.jsé»˜è®¤å°±æ˜¯127.0.0.1 ï¼Œport:3000æ˜¯åœ¨<span class="keyword">app</span>.jsä¸­è®¾å®šçš„ã€‚å¯ä»¥ä¿®æ”¹ã€‚</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç”¨javascriptæ¥ç”Ÿäº§ä¸€éƒ¨iPhone8]]></title>
      <url>http://yoursite.com/2017/03/08/%E7%94%A8javascript%E6%9D%A5%E7%94%9F%E4%BA%A7%E4%B8%80%E9%83%A8iPhone8/</url>
      <content type="html"><![CDATA[<p>å…¶å®è¦è°ˆè°ˆjavascriptçš„å¯¹è±¡é“¾ã€‚</p>
<p>å”çº³å¾·.å·æ™® å½“é€‰ç¾å›½ç¬¬å››åäº”ä»»æ€»ç»Ÿã€‚å½“é€‰ä»¥åï¼Œå·æ™®ç«‹å³ç»™è’‚å§†.åº“å…‹æ‰“ç”µè¯<br>   <em>å·æ™®(Trump)</em>ï¼šâ€œæˆ‘è¯´å¨å­å•Šï¼Œæˆ‘æ˜¯ç¾å›½æ€»ç»Ÿï¼Œæˆ‘ç°åœ¨å‘½ä»¤ä½ æŠŠåœ¨ä¸­å›½çš„appleå·¥å‚æ¬å›ç¾å›½ï¼ŒiPhone8å°±åœ¨å›½å†…ç”Ÿäº§ï¼Œå¥½å…‘ç°æˆ‘å¯¹å¹¿å¤§è“é¢†é€‰æ°‘çš„æ‰¿è¯ºå•Šâ€.<br>  <em>åº“å…‹(Cook)</em>:â€œå‘µå‘µï¼Œè¿™æ˜¯ä¸€ä¸ªé¹…å¦¹å­å˜¤çš„å»ºè®®å—·ï¼Œbut noâ€.å»ºåœ¨ä¸­å›½çš„å·¥å‚æ˜¯æ¬ä¸å›æ¥äº†ã€‚</p>
<p>   å¼€ä¸ªç©ç¬‘ç®—æ˜¯å¼€åœºç™½ã€‚ç»è¿‡å‡ å¤©çš„ç†è§£ï¼Œå‘ç°javascriptçš„å¯¹è±¡<br>   é“¾å±…ç„¶å’Œç°ä»£ä¼ä¸šçš„ç”Ÿäº§é“¾å±…ç„¶ååˆ†çš„ç›¸ä¼¼ã€‚å­—é¢éƒ½å¸¦é“¾å•Šã€‚è¿™é‡Œå°±å€Ÿappleçš„iPhone8çš„ç”Ÿäº§æ¥ç†è§£jsçš„å¯¹è±¡é“¾ã€‚å¯èƒ½ä¸æ˜¯ååˆ†è´´åˆ‡ã€‚ä½†æ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¸®ä½ ç†è§£ç›¸å…³æ¦‚å¿µã€‚</p>
<p>   è¦å­¦ä¹ jsåŠŸï¼Œå¿…å…ˆè‡ªå®«ï¼Œå¦‚ä¸è‡ªå®«ï¼Œå¿…ä¸æˆåŠŸã€‚  å¦‚æœä½ å¸¦ç€java,C++,phpçš„å¯¹è±¡åŸç†æ¥å­¦ä¹ jsçš„å¯¹è±¡ç»§æ‰¿ï¼Œä¼šæ’å¾—æ»¡å¤´åŒ…ï¼Œå°¤å…¶æ˜¯çœ‹åˆ°å’Œå…¶ä»–è¯­è¨€ä¸€æ ·çš„å…³é”®å­—æ—¶ï¼Œåƒä¸‡ä¸èƒ½æ‹¿è€æ¦‚å¿µæ¥å¥—ã€‚jsè‡ªæˆä½“ç³»ï¼Œæ‰€ä»¥å­¦ä¹ jsçš„å¯¹è±¡é“¾è¦ç†è§£å…¶è‡ªèº«çš„ç‰¹ç‚¹ã€‚æˆ‘å…ˆæ‘†å‡ºæ¥ã€‚1jsä¸­æ˜¯æ²¡æœ‰ç±»è¿™ä¸ªæŠ½è±¡æ¦‚å¿µçš„ï¼Œ<code>jsä¸­éƒ½æ˜¯å¯¹è±¡</code>ã€‚2 jså¯¹è±¡ç»§æ‰¿å®é™…å‘ç”Ÿçš„æ˜¯ä¸€ç§â€œ<em>å§”æ‰˜å…³ç³»</em>â€ã€‚è¿™ç§å§”æ‰˜å…³ç³»æ˜¯jsçš„å¯¹è±¡é“¾çš„ç²¾åæ‰€åœ¨ã€‚</p>
<p>  è¿™ä¸ªâ€œ<em>å§”æ‰˜å…³ç³»</em>â€å¬ç€è€³ç†Ÿå—ï¼Ÿä»€ä¹ˆ?ä¸ç†Ÿã€‚é‚£ä¹ˆå¬è¿‡<code>OEM</code>ä¹ˆï¼Ÿä»€ä¹ˆ?ä¹Ÿæ²¡æœ‰å¬è¿‡<code>OEM</code>ã€‚å¥½å§çŸ¥é“å¯Œå£«åº·ä¹ˆï¼Ÿä»€ä¹ˆï¼Ÿæ²¡å¬è¿‡ï¼ŸåŒå­¦ç«æ˜Ÿå†¬å¤©å†·å—ï¼Ÿ<br>  å¥½å§ï¼ŒOEMå°±æ˜¯ä»£å·¥å·¥å‚ã€‚è¿™æµç¨‹å°±æ˜¯ä¸€ä¸ªå…¬å¸æ“…é•¿è®¾è®¡ï¼Œä½†æ˜¯ä»–ä¸ç”Ÿäº§äº§å“ï¼Œä»–<code>å§”æ‰˜</code>å¦ä¸€ä¸ªæ“…é•¿åˆ¶é€ çš„å·¥å‚ç”Ÿäº§äº§å“ã€‚å¦ä¸€ä¸ªå·¥å‚åˆä¼šæŠŠå…¶ä¸­ä¸€éƒ¨åˆ†ç”Ÿäº§è¿‡ç¨‹<code>å§”æ‰˜</code> ç»™å…¶ä»–å·¥å‚ï¼Œè¿™ä¸ªå§”æ‰˜å…³ç³»å¯ä»¥ä¸€ç›´æŒç»­ä¸‹å»ã€‚å¦‚æœç†è§£jså¯¹è±¡ç»§æ‰¿é“¾çš„äººç«‹åˆ»ä¼šçŸ¥é“æˆ‘è¯´çš„åŸç†ã€‚æ²¡æœ‰ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¸‹é¢å°±å€Ÿç€iPhone8çš„ç”Ÿäº§æ¥çœ‹çœ‹è¿™ä¸ª<code>å§”æ‰˜å…³ç³»</code>ã€‚</p>
<p> æˆ‘ä»¬æŠŠè¿™ä¸ªè¿‡ç¨‹ç¨å¾®ç®€åŒ–ä¸€ä¸‹ï¼Œè¦ä¸å…¨è¿‡ç¨‹å†™å®Œæˆ‘ä¹Ÿæ²¡æœ‰é‚£ä¸ªèƒ½åŠ›ï¼Œå†™å…¨è¿‡ç¨‹è¦æ‰¾éƒ­æ˜æ± æ¥å†™ã€‚ </p>
<p>  æˆ‘æŠŠip8çš„ç”Ÿäº§ç®€åŒ–ä¸º:<br>    1.ç¡¬ä»¶è®¾è®¡<br>    2.è½¯ä»¶è®¾è®¡<br>    3.åˆè¯•</p>
<pre><code>4. æ•´æœºç”Ÿäº§
5. ç”µæ± ç”Ÿäº§
6. å±å¹•ç”Ÿäº§
7.  å¤–è®¾ç”Ÿäº§
</code></pre><p>ä¸‹é¢ä¼šç”¨ä¸€äº›ä¼ªä»£ç æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚jsä¸­éƒ½æ˜¯å¯¹è±¡ï¼Œæ²¡æœ‰ç±»ã€‚ç±»éƒ½æ˜¯å®ä½“ï¼Œæ˜¯åœ¨å†…å­˜ä¸­å®é™…å­˜åœ¨çš„ã€‚åœ¨æ•´ä¸ªç”Ÿäº§ä¸­çš„å…¬å¸éƒ½æ˜¯å¯¹è±¡ã€‚ç°åœ¨æˆ‘ä»¬çœ‹çœ‹è¿™äº›å¯¹è±¡<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">//è‹¹æœå…¬å¸å¯¹è±¡   </span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Apple</span> &#123;</span></div><div class="line">        init()&#123;  <span class="comment">//åˆå§‹åŒ–appleå…¬å¸</span></div><div class="line">             founderï¼š<span class="string">"Steve Jobs"</span>;</div><div class="line">             current <span class="string">leader:</span><span class="string">"Tim Cook"</span>;</div><div class="line"><span class="symbol">             Designer:</span><span class="string">"Ivy"</span>;</div><div class="line">             <span class="string">Location :</span><span class="string">"South. CA"</span></div><div class="line">         &#125;</div><div class="line">         </div><div class="line">         programSoftware()&#123;  <span class="comment">//è½¯ä»¶åˆ¶ä½œå’Œè®¾è®¡</span></div><div class="line">             <span class="keyword">return</span> (<span class="string">" make ios11"</span>)ï¼›</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         designHardware()&#123; <span class="comment">//ç¡¬ä»¶åŸå‹è®¾è®¡</span></div><div class="line">            (<span class="string">" make ios11"</span>)ï¼›  </div><div class="line">            (<span class="string">" make  protype of ip8"</span>)ï¼›</div><div class="line">            (<span class="string">"design cpu of a11 "</span>)ï¼›</div><div class="line">   </div><div class="line">      &#125;</div><div class="line"></div><div class="line">         legalGroup()&#123;  <span class="comment">//æ³•åŠ¡éƒ¨ è´Ÿè´£å’Œåä¸ºæ‰“å®˜å¸</span></div><div class="line">           (<span class="string">"lawsuit with huawei"</span>)</div><div class="line">        &#125;               </div><div class="line">   &#125;</div><div class="line"></div><div class="line"><span class="comment">//è¿™å°±åœ¨javascripté‡Œé¢ç»™appleå…¬å¸å»ºç«‹äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ•´ä¸ªå¯¹è±¡æœ‰åˆå§‹åŒ–çš„å±æ€§ï¼Œ è¿˜æœ‰ä¸‰ä¸ªè‡ªå·±æ“…é•¿çš„æ–¹æ³•ã€‚</span></div></pre></td></tr></table></figure></p>
<p> è¯è¯´2007å¹´ï¼Œä¹”å¸ƒæ–¯è¿˜åœ¨ä¸–çš„æ—¶å€™ï¼Œä»–æ‰¾åˆ°å¯Œå£«åº·å…¬å¸è€æ¿éƒ­å°é“­è¯´ï¼šâ€æˆ‘è¯´å°é“­å•Šï¼Œæˆ‘æƒ³æ‰¾ä¸ªå·¥å‚ç”Ÿäº§æ‰‹æœºï¼Œä»¥å‰å¯Œå£«åº·ç”Ÿäº§çš„imacä¸é”™ï¼Œè¿™æ‰è¿˜æ˜¯å§”æ‰˜ä½ ä»¬æ¥ç”Ÿäº§å§â€œ ã€‚éƒ­å°é“­æ˜¯ï¼šå¥½å§ã€‚æˆ‘é©¬ä¸Šå»ºç«‹<code>å¯Œå£«åº·è‹¹æœæ‰‹æœºå·¥å‚</code>ã€‚ä¸ºäº†å¥½ç†è§£æˆ‘åŠ äº†<code>å‘½åç©ºé—´</code>ï¼Œçœ‹è§äº†ä¹ˆ^_^ã€‚2017å¹´ï¼ŒAppleæ¨å‡ºiphone 10å‘¨å¹´äº†ï¼Œåˆè¦å¼€å§‹ç”Ÿäº§äº†ã€‚</p>
  <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//FskAppleè¿™ä¸ªå¯¹è±¡å°±æ˜¯Appleçš„ç»§æ‰¿è€…ï¼Œä»–æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å®ä¾‹åŒ–å‡ºæ¥çš„</span></div><div class="line"><span class="comment">//FskAppleå’ŒAppleå°½ç®¡ç”¨äº†extendså…³é”®å­—ï¼Œä½†æ˜¯ä»–ä»¬æ²¡æœ‰ä»å±å…³ç³»ï¼Œä»…ä»…æ˜¯å§”æ‰˜å…³ç³»è€Œå·²</span></div><div class="line">   FskApple <span class="function"><span class="keyword">extends</span> <span class="title">Apple</span> <span class="params">()</span></span>&#123;</div><div class="line">        init()&#123;  <span class="comment">//fskçš„åˆå§‹åŒ–å±æ€§</span></div><div class="line">           founder:<span class="string">"éƒ­å°é“­"</span>ï¼›</div><div class="line">           location:<span class="string">"éƒ‘å·"</span>ï¼›            </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">          makeHardware()&#123; <span class="comment">//ç¡¬ä»¶ç”Ÿäº§    </span></div><div class="line">            (<span class="string">" make  module ip8"</span>)ï¼›     <span class="comment">//ç”Ÿäº§æ¨¡å…·ï¼Œè¿™æ˜¯fskçš„ç‰¹é•¿</span></div><div class="line">           (<span class="string">" Assemble ip8"</span>)ï¼›     <span class="comment">//ç»„è£…iphone8ï¼Œè¿™ä¹Ÿæ˜¯fskçš„ç‰¹é•¿     </span></div><div class="line">  </div><div class="line">         &#125;</div><div class="line"></div><div class="line"></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>  å¯Œå£«åº·å¹¶ä¸ç²¾é€šå±å¹•ç”Ÿäº§ï¼Œæ‰€ä»¥å¯Œå£«åº·æœ‰æŠŠå±å¹•çš„ç”Ÿäº§å§”æ‰˜ç»™äº†LGå…¬å¸.LGå…¬å¸è¦ç»™è‹¹æœç”Ÿäº§æœ€æ–°çš„AMOLEDå±å¹•ã€‚<code>è¿™é‡Œå’Œå®é™…çš„å§”æ‰˜æœ‰å‡ºå…¥åªæ˜¯ä¸ºäº†å¥½ç†è§£</code>. å¥½ä¹ˆåˆä¸€ä¸ªå·¥å‚å‡ºæ¥äº†ã€‚å¯Œå£«åº·LGå·¥å‚ã€‚</p>
   <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">//LGå¯Œå£«åº·å·¥å‚åˆå—fskçš„å§”æ‰˜ç”Ÿäº§</span></div><div class="line">     LgFsk <span class="function"><span class="keyword">extends</span> <span class="title">FskApple</span> <span class="params">()</span></span>&#123;</div><div class="line">      init()&#123;  <span class="comment">//LgFskçš„åˆå§‹åŒ–å±æ€§</span></div><div class="line">         founder:<span class="string">"unknow"</span>ï¼›</div><div class="line">         location:<span class="string">"seoul"</span>ï¼›            </div><div class="line">      &#125;</div><div class="line">      </div><div class="line">        makeScreen()&#123; <span class="comment">//å±å¹•   </span></div><div class="line">          (<span class="string">" make circuit"</span>)ï¼›     <span class="comment">//ç”Ÿäº§èƒŒæ¿ç”µè·¯</span></div><div class="line">         (<span class="string">" make panel"</span>)ï¼›     <span class="comment">//ç”Ÿäº§é¢æ¿     </span></div><div class="line"></div><div class="line">       &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®é™…çš„ç”Ÿäº§çš„å§”æ‰˜å…³ç³»æ¯”è¿™ä¸ªå¤æ‚çš„å¤šï¼Œjsçš„å¯¹è±¡é“¾ä¹Ÿæ¯”è¿™ä¸ªå¤æ‚ä¸€ç‚¹ã€‚æˆ‘åœ¨è¿™é‡ŒæŠŠå®ƒç®€åŒ–ä¸ºä¸€æ¡çº¿çš„å§”æ‰˜å…³ç³»åªæ˜¯ä¸ºäº†å¥½ç†è§£ã€‚</p>
<p>ä¸‰ä¸ªå¯¹è±¡çš„<code>å§”æ‰˜é“¾</code>å»ºæˆä»¥åï¼Œå°±å¯ä»¥æŠ•å…¥ç”Ÿäº§äº†ã€‚å¯Œå£«åº·å…¬å¸è¦è°ƒç”¨ip8çš„è®¾è®¡æ–¹æ³•æ—¶ï¼Œä»–å¹¶ä¸è¦è‡ªå·±å»åˆ›å»ºè¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºä»–ä¸æ“…é•¿è¿™ä¸ªæ–¹æ³•ï¼Œä»–ç›´æ¥åˆ©ç”¨å’Œè‹¹æœå…¬å¸çš„å§”æ‰˜å…³ç³»å€Ÿç”¨è‹¹æœå…¬å¸çš„è®¾è®¡æ–¹æ³•å°±å¯ä»¥äº†ã€‚ è‹¹æœæ˜¯å§”æ‰˜å¯Œå£«åº·æ¥ç”Ÿäº§ï¼Œä»æ•´ä¸ªäº§ä¸šé“¾æ¥è¯´ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å¯Œå£«åº·å§”æ‰˜è‹¹æœå…¬å¸åšäº†è®¾è®¡å·¥ä½œã€‚è‹¹æœä¸ç”Ÿäº§ï¼Œå¯Œå£«åº·ä¸è®¾è®¡ï¼Œä½†æ˜¯ä¸€æ—¦ä¸¤è€…äº§ç”Ÿå§”æ‰˜å…³ç³»ä»¥åï¼Œä¸¤è€…å¯ä»¥å‘æŒ¥å„è‡ªçš„ç‰¹é•¿ï¼Œ2017å¹´iPhone8å°±åœ¨è¿™ä¸ªå§”æ‰˜é“¾ä¸­ç”Ÿäº§å‡ºæ¥äº†ã€‚</p>
<p> ç°ä»£ä¼ä¸šæƒ³æ”¹å˜è¿™ä¹ˆä¸€ä¸ªå‘æŒ¥å„è‡ªä¼˜åŠ¿çš„é“¾æ—¶å¤šä¹ˆçš„ä¸å®¹æ˜“ï¼Œå†ä¹Ÿæ‰¾ä¸åˆ°æ›´å¥½çš„æ–¹æ³•äº†ã€‚æ‰€ä»¥åº“å…‹è¯´è‹¹æœå·¥å‚å†ä¹Ÿå›ä¸å»äº†ã€‚</p>
<p>ä¸ºæ­¤æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œæ¯”è¾ƒä¸‘ï¼Œå‡‘æ´»ç€çœ‹å§ã€‚è¿™é‡Œå°±æ˜¯ä¸‰ä¸ªå¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ã€‚æˆ‘è§‰å¾—å«è¿æ¥å…³ç³»æ¯”è¾ƒå¥½ä¸€ç‚¹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-3d40a51a813a002b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="screenshot_20.png"><br>åŸç†å¦‚æ­¤ï¼Œä¸‰ä¸ªå¯¹è±¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œä½†æ˜¯ä¹‹é—´å¹¶ä¸æ˜¯ä»å±å…³ç³»ã€‚å¯¹è±¡éƒ½å…·æœ‰è‡ªå·±æ“…é•¿çš„æ–¹æ³•ï¼Œå…¶ä»–å¯¹è±¡çš„æ–¹æ³•ä¹Ÿä¸æ´»å†è´¹åŠ›å»åšä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬ã€‚lgè¦è®¾è®¡æ–¹æ³•å¯ä»¥æ‰¾å¯Œå£«åº·ï¼Œå¯Œå£«åº·æ²¡æœ‰çš„è¯åˆå¯ä»¥æ‰¾è‹¹æœã€‚</p>
<p>æˆ‘ä»¬å»æ‰ç»†èŠ‚æ¥çœ‹ï¼Œjsçš„å¯¹è±¡ç»§æ‰¿é“¾åªæ˜¯æœ‰äº›å…³é”®å­—å€Ÿç”¨äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡çš„ä¸œè¥¿ï¼Œä½†æ˜¯å®é™…ä¸Šjså’Œjavaçš„å¯¹è±¡æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p>
<p>###æœ€åå†å¼ºè°ƒä¸€å¥ï¼šjavascriptä¸­çš„å¯¹è±¡ç»§æ‰¿é“¾ä¸æ˜¯å¯¹è±¡ä¹‹é—´çš„ä»å±å…³ç³»ï¼Œè€Œæ˜¯ä¸€ç§å§”æ‰˜å’Œåˆä½œå…³ç³»ã€‚ç†è§£è¿™ä¸€ç‚¹åé¢çš„å­¦ä¹ å°±å¥½åŠäº†ã€‚</p>
<p>   åˆå­¦è€…æ°´å¹³ï¼Œä¸çŸ¥é“è¿™ä¸ªé€šä¿—ç†è§£æ˜¯å¦å¾—ä½“å’Œå‡†ç¡®ï¼Ÿ</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascript-è£…é¥°è€…æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/08/javascript-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è£…é¥°è€…æ¨¡å¼ï¼šç»™å¯¹è±¡åŠ¨æ€æ·»åŠ èŒè´£çš„æ–¹å¼å°±æ˜¯è£…é¥°è€…æ¨¡å¼ï¼Œèƒ½å¤Ÿåœ¨ä¸æ”¹å˜åŸå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ç»™å¯¹è±¡æ·»åŠ æ–°çš„èŒè´£ã€‚<br>å‚è€ƒã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹</p>
</blockquote>
<p>###è£…é¥°å‡½æ•°<br>å¦‚æœåœ¨ç»™ä¸€ä¸ªå‡½æ•°æˆ–å¯¹è±¡æ·»åŠ åŠŸèƒ½çš„æ—¶å€™ä¸æƒ³åŠ¨åŸå‡½æ•°ï¼Œæˆ–è€…åŸå‡½æ•°æ˜¯åˆ«çš„ç¨‹åºå‘˜å†™çš„ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡å¼•ç”¨æ¥å¢åŠ å‡½æ•°åŠŸèƒ½</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">var</span> a=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//æ„é€ å‡½æ•°</span></div><div class="line">    alert(<span class="number">1</span>);</div><div class="line"> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> _a=a; <span class="comment">//_aä½œä¸ºä¸­é—´å˜é‡</span></div><div class="line"></div><div class="line">a=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//é‡æ–°èµ‹å€¼aå˜é‡</span></div><div class="line">   _a();  <span class="comment">//æ‰§è¡Œaå‡½æ•°</span></div><div class="line">   alert(<span class="number">2</span>); <span class="comment">//æ·»åŠ çš„åŠŸèƒ½</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢é‡ç‚¹æ˜¯ä»‹ç»ä¸€ä¸ªAOPçš„ä¾‹å­ï¼ŒAOPæ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåœ¨ä¸‹é¢çš„å‡½æ•°è¿è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥ç»™æŠŠå‡½æ•°çœ‹åšæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ†ä¸º è¿è¡Œå‰ï¼ˆbeforeï¼‰ï¼Œè¿è¡Œä¸­ï¼Œè¿è¡Œåï¼ˆafterï¼‰ã€‚åœ¨è¿è¡Œå‰ï¼Œè¿è¡Œåå¯ä»¥ç»™å‡½æ•°å¯¹è±¡æ·»åŠ ä¸åŒçš„èŒè´£ï¼Œè¿™äº›æ·»åŠ çš„èŒè´£ä¸ä¼šå½±å“åŸå‡½æ•°å¯¹è±¡çš„è¿è¡Œã€‚</p>
<p>åœ¨javascriptä¸­å‡ ä¹ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œå‡½æ•°ä½œä¸ºä¸€ç­‰å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ é€’ï¼Œæ‰€ä»¥åœ¨jsä¸­ä½¿ç”¨è£…é¥°è€…æ¨¡å¼çš„æ—¶å€™åå¾ˆå¤§çš„ä¾¿åˆ©æ€§ã€‚</p>
<p>#####AOPçš„æ ‡å‡†æ¨¡å‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//argumentå¯¹è±¡æ˜¯å‡½æ•°è°ƒç”¨æ—¶ï¼Œéšå¼ä¼ é€’çš„å‡½æ•°å‚æ•°</span></div><div class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span>(<span class="params"> beforefn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>; <span class="comment">// ä¿å­˜åŸå‡½æ•°çš„å¼•ç”¨</span></div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">// è¿”å›åŒ…å«äº†åŸå‡½æ•°å’Œæ–°å‡½æ•°çš„"ä»£ç†"å‡½æ•°</span></div><div class="line">			beforefn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ); <span class="comment">// æ‰§è¡Œæ–°å‡½æ•°ï¼Œä¸”ä¿è¯this</span></div><div class="line"><span class="comment">// ä¸è¢«åŠ«æŒï¼Œæ–°å‡½æ•°æ¥å—çš„å‚æ•°ä¹Ÿä¼šè¢«åŸå°ä¸åŠ¨åœ°ä¼ å…¥åŸå‡½æ•°ï¼Œæ–°å‡½æ•°åœ¨åŸå‡½æ•°ä¹‹å‰æ‰§è¡Œ</span></div><div class="line">			<span class="keyword">return</span> __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ); <span class="comment">// æ‰§è¡ŒåŸå‡½æ•°å¹¶è¿”</span></div><div class="line"><span class="comment">//å›åŸå‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œ å¹¶ä¸”ä¿è¯this ä¸è¢«åŠ«æŒ		</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> __self = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">		afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );</div><div class="line">		<span class="keyword">return</span> ret;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å®ä¾‹ï¼šç‚¹å‡»æŒ‰é’®æ—¶å¼¹æ¡†ä¹‹åç»Ÿè®¡å¼¹æ¡†çš„å‚æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//logå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’  </span></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params"> afterfn </span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> __self = <span class="keyword">this</span>; <span class="comment">//ä¿å­˜åŸå‡½æ•°çš„å¼•ç”¨ï¼Œ_åœ¨jsä¸­æ˜¯å¯ä»¥ä½¿ç”¨çš„å¯ä»¥ä½œä¸ºä¸€ä¸ªç§æœ‰æ–¹æ³•å’Œå˜é‡çš„èµ·å§‹æ ‡å¿—</span></div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//è¿”å›å‡½æ•°å¤åˆä½“</span></div><div class="line">			<span class="keyword">var</span> ret = __self.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );<span class="comment">//åŸå‡½æ•°è°ƒç”¨</span></div><div class="line">			afterfn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> );<span class="comment">//afterå‡½æ•°è°ƒç”¨</span></div><div class="line">			<span class="keyword">return</span> ret; <span class="comment">//è¿”å›åŸå‡½æ•°</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> showLogin = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'æ‰“å¼€ç™»å½•æµ®å±‚'</span> );</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'ä¸ŠæŠ¥æ ‡ç­¾ä¸º: '</span> + <span class="keyword">this</span>.getAttribute( <span class="string">'tag'</span> ) );</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	showLogin = showLogin.after( log ); <span class="comment">// æ‰“å¼€ç™»å½•æµ®å±‚ä¹‹åä¸ŠæŠ¥æ•°æ®</span></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'button'</span> ).onclick = showLogin;</div></pre></td></tr></table></figure></p>
<p>åœ¨javascriptä¸­ã€‚é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸çŸ›ç›¾çš„ã€‚ä¸¤è€…ç»“åˆèµ·æ¥å¨åŠ›æ›´å¤§ã€‚éšç€å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šè§‰å¾—æ»¡æ»¡çš„éƒ½æ˜¯å¥—è·¯å’Œæ¨¡å¼ã€‚åˆ°äº†è¿™ä¸€æ­¥å­¦ä¹ æœ‰ç‚¹æ¬²ç½¢ä¸èƒ½äº†ã€‚å­¦ä¹ javascriptçœŸæ˜¯æœ‰æ„æ€ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-Immutable-js,æŒä¹…åŒ–æ•°æ®ç»“æ„å’Œç»“æ„å…±äº«]]></title>
      <url>http://yoursite.com/2017/03/08/%E7%BF%BB%E8%AF%91-Immutable-js,%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%BB%93%E6%9E%84%E5%85%B1%E4%BA%AB/</url>
      <content type="html"><![CDATA[<p><em>ä¸ºä»€ä¹ˆè¦ç”¨Immutable.jsæ¥ä»£æ›¿Javascriptçš„å¯¹è±¡</em></p>
<blockquote>
<p>ç¿»è¯‘ç‰ˆæœ¬,<a href="https://medium.com/@dtinth/immutable-js-persistent-data-structures-and-structural-sharing-6d163fbd73d2#.inlzpjxr8" target="_blank" rel="external">åŸæ–‡è¯·è§</a></p>
<hr>
<p>æŠŠä½ çš„æ•°æ®çœ‹æˆæ˜¯ä¸å¯å˜çš„ä¼šå¸¦æ¥å¾ˆå¤šçš„å¥½å¤„.å®é™…ä¸Šåœ¨ReactèƒŒåæœ‰ä¸ªåŸåˆ™:Reactçš„å…ƒç´ æ˜¯ä¸å¯å˜çš„.ä½ å¯èƒ½ä¹Ÿä¼šå¯¹å­¦ä¹ ä¸å¯å˜Appæ„æ¶æœ‰å¾ˆå¤§å…´è¶£.</p>
</blockquote>
<p>ä½†æ˜¯ä½¿ç”¨Immutable.jsçš„å¥½å¤„æ˜¯:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">toggleTodo</span> (<span class="params">todos, id</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> todos.update(id,</div><div class="line">    (todo) =&gt; todo.update(<span class="string">'completed'</span>,<span class="comment">//updateæ˜¯immutableçš„æ–¹æ³•</span></div><div class="line">      (completed) =&gt; !completed</div><div class="line">    )</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>è·³è¿‡ä½¿ç”¨æ™®é€šçš„Javascriptå¯¹è±¡(æŠŠä»–ä»¬çœ‹ä½œä¸ºimmutable,å¯ä»¥é€‰åˆ™ä½¿ç”¨ä¾‹å¦‚seamless-immutableä¹‹ç±»çš„åŠ©æ‰‹å‡½æ•°),åƒè¿™æ ·ï¼Ÿ:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">toggleTodo</span> (<span class="params">todos, id</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123; &#125;, todos, &#123;</div><div class="line">    [id]: <span class="built_in">Object</span>.assign(&#123; &#125;, todos[id], &#123;</div><div class="line">      <span class="attr">completed</span>: !todos[id].completed</div><div class="line">    &#125;)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Using updeep</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleTodo</span> (<span class="params">todos, id</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> u(&#123;</div><div class="line">    [id]: &#123;</div><div class="line">      <span class="attr">completed</span>: <span class="function">(<span class="params">completed</span>) =&gt;</span> !completed</div><div class="line">    &#125;</div><div class="line">  &#125;, todos)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h3 id="ä¸€ä¸ªéå¸¸å¤§çš„å¯¹è±¡â€¦"><a href="#ä¸€ä¸ªéå¸¸å¤§çš„å¯¹è±¡â€¦" class="headerlink" title="ä¸€ä¸ªéå¸¸å¤§çš„å¯¹è±¡â€¦"></a>ä¸€ä¸ªéå¸¸å¤§çš„å¯¹è±¡â€¦</h3><p>è®©æˆ‘ä»¬å‡è®¾todo list é‡Œé¢æœ‰100,00ä¸ªä»»åŠ¡:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> todos = &#123;</div><div class="line">  â‹®</div><div class="line">  t79444dae: &#123; <span class="attr">title</span>: <span class="string">'Task 50001'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t7eaf70c3</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50002'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t2fd2ffa0</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50003'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t6321775c</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50004'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t2148bf88</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50005'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t9e37b9b6</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50006'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">tb5b1b6ae</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50007'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">tfe88b26d</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50008'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  â‹®</div><div class="line">  (<span class="number">100</span>,<span class="number">000</span> items)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘åˆšåˆšå®Œæˆç¬¬50005ä»¶ä»»åŠ¡.<br>ç°åœ¨æˆ‘æƒ³æŠŠå®ƒæ ‡è®°ä½å®Œæˆ.</p>
<h3 id="ä½¿ç”¨æ™®é€šJavascript-å¯¹è±¡"><a href="#ä½¿ç”¨æ™®é€šJavascript-å¯¹è±¡" class="headerlink" title="ä½¿ç”¨æ™®é€šJavascript å¯¹è±¡"></a>ä½¿ç”¨æ™®é€šJavascript å¯¹è±¡</h3><p><code>var nextState=toggleTodo(todos,&#39;t2148bf88&#39;)</code></p>
<p>è¿™ä¸ªå•ä¸€çš„æ“ä½œå“ŸèŠ±è´¹134msæ¥è¿è¡Œ.</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå½“ä½ ä½¿ç”¨<code>Object.assign</code>,Javascriptçš„æµ…å¤åˆ¶æ‹·è´æ¯ä¸€ä¸ªæºçš„æ¯ä¸ªå±æ€§åˆ°ç›®çš„åœ°.ä¸€æ¬¡ä¸€ä¸ª.</p>
<p>æˆ‘ä»¬æœ‰100,000ä¸ªtodos,æ‰€ä»¥æ„å‘³ç€æœ‰100,000ä¸ªå±æ€§è¦æ‹·è´.<br>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦èŠ±è¿™ä¹ˆé•¿çš„æ—¶é—´.</p>
<hr>
<h3 id="ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</h3><p>åœ¨Javascriptä¸­,å¯¹è±¡é»˜è®¤æ˜¯å¯ä»¥çªå˜(mutable)çš„.<br>å½“ä½ å…‹éš†ä¸€ä¸ªå¯¹è±¡,Javascriptæœ‰æ¯ä¸€ä¸ªå±æ€§çš„æ‹·è´,æ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡å˜å¾—å®Œå…¨åˆ†ç¦»çš„.çœ‹ä¸‹å›¾<br><img src="https://ww3.sinaimg.cn/large/006tKfTcly1fdobo2he6bj312w0i2dgz.jpg" alt="100,000ä¸ªå±æ€§è¢«(æµ…)å¤åˆ¶åˆ°ç›®çš„åœ°"></p>
<p>è¿™å°±å…è®¸ä½ åœ¨æ‹·è´ä»¥åæ”¹å˜ä»»ä½•å¯¹è±¡çš„å±æ€§,å¯¹è±¡ä¹‹é—´ä¹Ÿä¸ä¼šç›¸äº’å½±å“.ç”šè‡³åœ¨æŠŠè¿™äº›å¯¹è±¡å¤„ç†ä¸ºä¸å¯å˜(immutable),Javascriptä¹Ÿè¿˜æ˜¯æŒ‰ç…§mutableæ¥å¤„ç†.</p>
<hr>
<h3 id="ä½¿ç”¨Immutable-js"><a href="#ä½¿ç”¨Immutable-js" class="headerlink" title="ä½¿ç”¨Immutable.js"></a>ä½¿ç”¨Immutable.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> todos = Immutable.fromJS(&#123;</div><div class="line">  â‹®</div><div class="line">  t79444dae: &#123; <span class="attr">title</span>: <span class="string">'Task 50001'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t7eaf70c3</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50002'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t2fd2ffa0</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50003'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t6321775c</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50004'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t2148bf88</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50005'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">t9e37b9b6</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50006'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">tb5b1b6ae</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50007'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  <span class="attr">tfe88b26d</span>: &#123; <span class="attr">title</span>: <span class="string">'Task 50008'</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</div><div class="line">  â‹®</div><div class="line">  (<span class="number">100</span>,<span class="number">000</span> items)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>ä½¿ç”¨<code>Immutable.Map</code>æ¥ä»£è¡¨æˆ‘ä»¬çš„æ•°æ®,æ›´æ–°ç¬¬50005æ¡ä»»åŠ¡<br><code>var nextState=toggleTodo(todos,&#39;t2148bf88&#39;)</code></p>
<p>è¿™ä¸ªæ“ä½œä»…èŠ±è´¹1.2msæ—¶é—´å»è¿è¡Œ.é€Ÿåº¦æå‡äº†100å€ä»¥ä¸Šï¼</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆå¿«ï¼Ÿ</p>
<h3 id="æŒä¹…æ•°æ®ç»“æ„"><a href="#æŒä¹…æ•°æ®ç»“æ„" class="headerlink" title="æŒä¹…æ•°æ®ç»“æ„"></a>æŒä¹…æ•°æ®ç»“æ„</h3><p>æŒä¹…æ•°æ®ç»“æ„(Persistent data structures)å¼ºåŠ›é™åˆ¶æ‰€æœ‰çš„æ“ä½œéƒ½è¦è¿”å›æ•°æ®ç»“æ„çš„æ–°ç‰ˆæœ¬,ä¿æŒåŸæ•°æ®ç»“æ„çš„å®Œæ•´æ€§,ä¸èƒ½æ›´æ”¹åŸæ•°æ®ç»“æ„.</p>
<p>è¿™ä¸€ç‚¹æš—ç¤ºæ‰€æœ‰çš„æŒä¹…åŒ–æ•°æ®éƒ½æ˜¯ä¸å¯å˜çš„.</p>
<p>åœ¨è¿™ä¸ªç»™å®šçš„é™åˆ¶ä¸‹,å®ç°æŒä¹…åŒ–æ•°æ®ç»“æ„çš„åº“å¯ä»¥è¿›è¡Œå¾ˆå¥½çš„ä¼˜åŒ–,å› ä¸ºè¿™äº›åº“çŸ¥é“æˆ‘ä»¬ä¸ä¼šæ”¹å˜æˆ‘ä»¬çš„æ•°æ®.</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¼˜åŒ–</p>
<h3 id="ä½¿ç”¨triesæ¥ä¼˜åŒ–"><a href="#ä½¿ç”¨triesæ¥ä¼˜åŒ–" class="headerlink" title="ä½¿ç”¨triesæ¥ä¼˜åŒ–"></a>ä½¿ç”¨triesæ¥ä¼˜åŒ–</h3><p>ä¸ºäº†ç›´è§‚ä¸€ç‚¹,è¯•ä¸€ä¸ªå°ä¾‹å­</p>
<p>æƒ³è±¡å­˜å‚¨ä¸€ä¸ªé”®-å€¼æ˜ å°„:</p>
<p><img src="https://ww1.sinaimg.cn/large/006tKfTcly1fdocl8z802j304d08fglh.jpg" alt=""></p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®ç»“æ„å­˜å‚¨åˆ°å•ä¸€çš„Javascirptå¯¹è±¡ä¸­:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> data = &#123;</div><div class="line">  <span class="attr">to</span>: <span class="number">7</span>,</div><div class="line">  <span class="attr">tea</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">ted</span>: <span class="number">4</span>,</div><div class="line">  <span class="attr">ten</span>: <span class="number">12</span>,</div><div class="line">  <span class="attr">A</span>: <span class="number">15</span>,</div><div class="line">  <span class="attr">i</span>: <span class="number">11</span>,</div><div class="line">  <span class="attr">in</span>: <span class="number">5</span>,</div><div class="line">  <span class="attr">inn</span>: <span class="number">9</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªtrieæ¥ä»£æ›¿jsçš„å¯¹è±¡å‘¢ï¼Ÿä»–çš„ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š<br><img src="https://ww1.sinaimg.cn/large/006tKfTcly1fdocnlha2cj30eo0bhdg5.jpg" alt=""></p>
<p>åŸºæœ¬ä¸Šä½ å¯æ ¹æ®å›¾ä¸Šçš„è·¯å¾„ä»rootå¼€å§‹è·å–åˆ°ä½ éœ€è¦çš„å€¼.</p>
<p>å¦‚æœä½ ä»rootå¼€å§‹æ‰¾<code>data.in</code>,æ ¹æ®æ ‡è®°<code>i</code>å’Œ<code>n</code>çš„è·¯å¾„.å¯ä»¥æ‰¾åˆ°åŒ…å«<code>5</code>çš„èŠ‚ç‚¹.</p>
<p>é‚£ä¹ˆ,æ€ä¹ˆä¿®æ”¹å‘¢ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹æŠŠé”®<code>tea</code>çš„å€¼ä»<code>3</code>æ”¹ä¸º<code>14</code>.</p>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„trieï¼Œå°½å¯èƒ½çš„ä½¿ç”¨å­˜åœ¨çš„èŠ‚ç‚¹.</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1fdocttxa1tj30cq0a7mxf.jpg" alt=""></p>
<p>è€çš„æ ‘å½¢ç»“æ„ä»ç„¶å­˜åœ¨,è€Œä¸”æ²¡æœ‰å˜åŒ–.åœ¨å®ä¾‹ä¸­ä½ å¯ä»¥ä¿ç•™ä¸€ä¸ªå¼•ç”¨</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdocuasnscj30f00clwf2.jpg" alt=""></p>
<p>åœ¨ä¸Šå›¾ä¸­å¦‚ç»¿è‰²éƒ¨åˆ†æ‰€ç¤º,æˆ‘ä»¬ä»…ä»…åªéœ€è¦æ›´æ–°4ä¸ªèŠ‚ç‚¹æ¥æ›´æ–°è¿™ä¸ªæ•°.å…¶ä»–çš„èŠ‚ç‚¹æ˜¯å¯ä»¥é‡æ–°åˆ©ç”¨çš„ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªå›¾å±•ç¤ºImmutable.jsæ€ä¹ˆå®æ–½<code>Immutable.Map</code>.åˆ›å»ºä¸€ä¸ªæ¯ä¸ªèŠ‚ç‚¹æœ‰32ä¸ªåˆ†æ”¯çš„æ ‘.</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdodbub78oj30h20cpab6.jpg" alt="Immutable.Mapçš„å®æ–½"></p>
<p> å½“æˆ‘ä»¬æ›´æ–°ä¸€ä¸ªå•ä¸ªé¡¹ç›®,ä»…ä»…åªè¦ä¸€äº›èŠ‚ç‚¹éœ€è¦è¢«é‡æ–°åˆ›å»º.</p>
<p> Immutable.jså€ŸåŠ©crazy advanced techniquesä¿æŒæ ‘å½¢ç»“æ„çš„ç´§å‡‘,æ ¹æ®å„ç§å­æ ‘çš„å„ç§å±æ€§æ¥åˆ›å»ºå¤šç§ç±»å‹çš„èŠ‚ç‚¹.</p>
<p> <img src="https://ww1.sinaimg.cn/large/006tNc79ly1fdoe03ud5ej30h907wt9c.jpg" alt=""></p>
<h3 id="å¹¶ä¸æ€»æ˜¯å¦‚æ­¤â€¦"><a href="#å¹¶ä¸æ€»æ˜¯å¦‚æ­¤â€¦" class="headerlink" title="å¹¶ä¸æ€»æ˜¯å¦‚æ­¤â€¦"></a>å¹¶ä¸æ€»æ˜¯å¦‚æ­¤â€¦</h3><p> ä¸è¦æŠŠæœ¬é—®çš„æœ¬æ„ç†è§£ä¸ºâ€œä½ æ€»æ˜¯éœ€è¦Immutable.jsâ€œ.ä¸æ˜¯è¿™ä¸ªæ„æ€,æˆ‘åªæ˜¯æƒ³å¼ºè°ƒä¸€ä¸‹ä»–çš„å¥½å¤„.è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ¨èè¦ä½¿ç”¨ä»–.</p>
<p>  æ•°æ®ç»“æ„æ˜¯å¾ˆé‡è¦çš„,ä½†æ˜¯å½“æˆ‘ç¼–å†™è½¯ä»¶çš„æ—¶å€™,æˆ‘é¦–å…ˆè¦å°è¯•æœ€ç®€å•çš„æ–¹å¼.æˆ‘è¿‡å»ä½¿ç”¨æ•°ç»„å’Œå¯¹è±¡,ä¹‹åå½“æˆ‘éœ€è¦é€Ÿåº¦æå‡çš„æ—¶å€™,æˆ‘ä½¿ç”¨Immutable.js,æˆ–è€…æ˜¯åœ¨æˆ‘é‡åˆ°åˆ°æˆ‘éœ€è¦ä»–çš„æ—¶å€™.åœ¨åªè¦å°‘æ•°çš„æ¡ç›®,è¿˜æœ‰å°çš„å¯¹è±¡å’Œé›†åˆçš„æ—¶å€™,æˆ‘å°±ä¸ä¼šä½¿ç”¨Immutable.js.</p>
<h2 id="æ˜¯ä¸æ˜¯æ„æ€æ˜¯æˆ‘å¯èƒ½ä¼šè¿”å›å»å¹¶ä¸”åœ¨åé¢åœ¨æ”¹å˜"><a href="#æ˜¯ä¸æ˜¯æ„æ€æ˜¯æˆ‘å¯èƒ½ä¼šè¿”å›å»å¹¶ä¸”åœ¨åé¢åœ¨æ”¹å˜" class="headerlink" title="æ˜¯ä¸æ˜¯æ„æ€æ˜¯æˆ‘å¯èƒ½ä¼šè¿”å›å»å¹¶ä¸”åœ¨åé¢åœ¨æ”¹å˜?"></a>æ˜¯ä¸æ˜¯æ„æ€æ˜¯æˆ‘å¯èƒ½ä¼šè¿”å›å»å¹¶ä¸”åœ¨åé¢åœ¨æ”¹å˜?</h2><p>  å¯¹ï¼éå¸¸å¥½ï¼å¦‚æœä½ çš„æ•°æ®æ¥å…¥æ˜¯é€šè¿‡å•ä¸€,ç»„ç»‡è‰¯å¥½çš„æ¨¡å—.ä¾‹å¦‚:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">// -- Todos.js --</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> empty = &#123; &#125;</div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">todos, id, todo</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123; &#125;, todos, &#123; [id]: todo &#125;)</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getById</span> (<span class="params">todos, id</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> todos[id]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¼°è®¡æ‰€æœ‰çš„åº”ç”¨ä»£ç æ€»æ˜¯è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ¥è·å–æ•°æ®.å½“ä½ æƒ³æ”¹å˜å†…å«çš„æ•°æ®ç»“æ„æ—¶,ä½ ä»…ä»…éœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶.</p>
<p>è¿™ä¸ªæˆ‘ä»¬å«åšâ€å®ä½“æ¨¡å—â€œ,å°è£…äº†ä»£è¡¨æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æ‰€æœ‰å†…å®¹.è¿™ä¸ªæ¦‚å¿µæ¥è‡ªâ€Clean Architectureâ€œ.æˆ‘è®¡åˆ’ä»¥åæ¥å†™å†™è¿™ä¸ªé—®é¢˜.</p>
<h2 id="ä¸è¦æŠŠåº”ç”¨çš„é€»è¾‘å’Œæ•°æ®ç»“æ„è€¦åˆåœ¨ä¸€èµ·"><a href="#ä¸è¦æŠŠåº”ç”¨çš„é€»è¾‘å’Œæ•°æ®ç»“æ„è€¦åˆåœ¨ä¸€èµ·" class="headerlink" title="ä¸è¦æŠŠåº”ç”¨çš„é€»è¾‘å’Œæ•°æ®ç»“æ„è€¦åˆåœ¨ä¸€èµ·"></a><code>ä¸è¦æŠŠåº”ç”¨çš„é€»è¾‘å’Œæ•°æ®ç»“æ„è€¦åˆåœ¨ä¸€èµ·</code></h2><p>æˆ‘å¾ˆäº†è§£åº”ç”¨é€»è¾‘å’Œæ•°æ®ç»“æ„ä¸è€¦åˆåœ¨ä¸€èµ·çš„è‰°éš¾ä¹‹å¤„.è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“åœ¨æœªæ¥æ•°æ®æ€ä¹ˆæ¥è·å–.</p>
<p>ä¾‹å¦‚:æˆ‘ä»¬çš„todo appç°åœ¨ç®¡ç†ç€100,000ä»»åŠ¡.æˆ‘ä»¬æ”¹ä¸ºä½¿ç”¨Immytable.js.ç°åœ¨æ¯ä¸ªéƒ¨åˆ†éƒ½è¶³å¤Ÿå¥½å’Œè¶³å¤Ÿå¿«.</p>
<p>çªç„¶éœ€æ±‚æ¥äº†:â€ä»»åŠ¡è¦æœ‰ä¸€ä¸ªå®‰æ’è€…â€.(ç±»ä¼¼è€å¸ˆå¸ƒç½®ä½œä¸šç»™å­¦ç”Ÿ),â€ç”¨æˆ·åº”è¯¥å¯ä»¥çœ‹åˆ°ä»»åŠ¡æ˜¯è°ç»™å®‰æ’çš„â€.</p>
<pre><code class="js"> <span class="function"><span class="keyword">function</span> <span class="title">findByAssigneeAsArray</span> (<span class="params">todos, assigneeId</span>) </span>{
  <span class="keyword">return</span> todos.filter(
    <span class="function">(<span class="params">task</span>) =&gt;</span> Task.containsAssignee(task, assigneeId)
  ).toArray()
}
</code></pre>
<hr>
<p>ç”¨æˆ·å¼€å§‹æŠ±æ€¨appå˜æ…¢äº†,åˆ†ææ­ç¤ºä¸Šé¢è¿™ä¸ªå‡½æ•°æ˜¯ä¸ªå¤§é—®é¢˜.</p>
<p>ä½¿ç”¨ä¸Šé¢è¿™æ®µä»£ç éœ€è¦åºåˆ—æœç´¢100ï¼Œ000ä»»åŠ¡.è¿™æ ·åšæ€ä¹ˆèƒ½å¿«çš„èµ·æ¥ï¼Ÿ</p>
<h3 id="è¦ä¼˜åŒ–è¿™ä¸ªæ¡ˆä¾‹-æˆ‘ä»¬éœ€è¦æ”¹å˜å†…åœ¨çš„æ•°æ®ç»“æ„"><a href="#è¦ä¼˜åŒ–è¿™ä¸ªæ¡ˆä¾‹-æˆ‘ä»¬éœ€è¦æ”¹å˜å†…åœ¨çš„æ•°æ®ç»“æ„" class="headerlink" title="è¦ä¼˜åŒ–è¿™ä¸ªæ¡ˆä¾‹,æˆ‘ä»¬éœ€è¦æ”¹å˜å†…åœ¨çš„æ•°æ®ç»“æ„"></a>è¦ä¼˜åŒ–è¿™ä¸ªæ¡ˆä¾‹,æˆ‘ä»¬éœ€è¦æ”¹å˜å†…åœ¨çš„æ•°æ®ç»“æ„</h3><p>è¿™éœ€è¦ä¿æŒä¸€ä¸ªåå‘çš„æŸ¥è¯¢è¡¨,è¿æ¥ä»»åŠ¡å®‰æ’äººå’Œä»»åŠ¡åˆ—è¡¨çš„TaksID.è¿™ä¸ªä¼˜åŒ–çš„ä¿®æ”¹å®ä¾‹æ¥è‡ªäº<code>[Taskworld](https://taskworld.com/)</code>.</p>
<p>å¦‚æœæˆ‘ä»¬çš„reducer/selector/viewä»£ç å’Œæ•°æ®ç»“æ„ç›´æ¥è¿ç³»åœ¨ä¸€èµ·,è¦åšå‡ºè¿™æ ·çš„æ”¹å˜éå¸¸éš¾.</p>
<p>æ‰€ä»¥,å¦‚æœæˆ‘ä»¬æƒ³å¿«é€Ÿè¿­ä»£,æˆ‘ä»¬éœ€è¦ç¡®ä¿å¾ˆå®¹æ˜“åšå‡ºä¿®æ”¹.ä»å¼€å§‹å°±ä¿æŒä»£ç æ•´æ´,ä¹¦å†™æµ‹è¯•,å»ºç«‹æŒç»­é›†æˆ.</p>
<h3 id="æ„Ÿè°¢é˜…è¯»ï¼"><a href="#æ„Ÿè°¢é˜…è¯»ï¼" class="headerlink" title="æ„Ÿè°¢é˜…è¯»ï¼"></a>æ„Ÿè°¢é˜…è¯»ï¼</h3><p> æ›´å¤šçš„è®¨è®ºåœ¨<a href="https://www.reddit.com/r/reactjs/comments/5h7pqz/persistent_data_structures_and_structural_sharing/" target="_blank" rel="external">Reddit</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptç­–ç•¥æ¨¡å¼-å¹´åº•ç»©æ•ˆçš„è®¡ç®—]]></title>
      <url>http://yoursite.com/2017/03/08/javascript%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F-%E5%B9%B4%E5%BA%95%E7%BB%A9%E6%95%88%E7%9A%84%E8%AE%A1%E7%AE%97/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’æ›¿æ¢<br>å‚è§ã€Šjavascriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µã€‹</p>
</blockquote>
<p>è§£å†³é—®é¢˜ï¼šå…¬å¸çš„ç»©æ•ˆæ ¹æ®å‘˜å·¥çš„å·¥èµ„å’Œå¹´åº¦ç»©æ•ˆæ¥å†³å®šã€‚æ¯ä¸ªäººçš„å·¥èµ„å’Œç»©æ•ˆæ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯è®¡ç®—æ–¹æ³•æ˜¯ç›¸åŒçš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> jsç‰ˆçš„ç­–ç•¥æ¨¡å¼</div><div class="line"></div><div class="line"><span class="comment">//å®šä¹‰ä¸‰ä¸ªä¸åŒç»©æ•ˆçš„ç­–ç•¥ï¼Œæ¯ä¸ªç»©æ•ˆçš„ç­–ç•¥å®é™…çš„è®¡ç®—ç»“æœè¿˜æœ‰ä¼ å…¥çš„å‚æ•°æ¥è®¡ç®—</span></div><div class="line"><span class="keyword">var</span> strategies = &#123;</div><div class="line">		<span class="string">"S"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;  <span class="comment">//sæ˜¯ç»©æ•ˆï¼Œsalaryæ˜¯ä¼ å…¥çš„å·¥èµ„å‚æ•°ï¼Œä¸‹åŒ</span></div><div class="line">			<span class="keyword">return</span> salary * <span class="number">4</span>;</div><div class="line">		&#125;,</div><div class="line">		<span class="string">"A"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> salary * <span class="number">3</span>;</div><div class="line">		&#125;,</div><div class="line">		<span class="string">"B"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> salary </span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> salary * <span class="number">2</span>;</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">        <span class="comment">//ä½¿ç”¨ç­–ç•¥çš„è®¡ç®—å‡½æ•°ï¼Œä¼ å…¥ç»©æ•ˆå’Œå·¥èµ„å‚æ•°</span></div><div class="line">	<span class="keyword">var</span> calculateBonus = <span class="function"><span class="keyword">function</span>(<span class="params"> level, salary </span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> strategies[ level ]( salary );  <span class="comment">//æ ¹æ®å‚æ•°é€‰ç”¨ä¸åŒçš„ç­–ç•¥</span></div><div class="line">	&#125;;</div><div class="line">       <span class="comment">//ä½¿ç”¨æ—¶ä¼ å…¥ç»©æ•ˆç­‰çº§å’Œå·¥èµ„é¢</span></div><div class="line">	<span class="built_in">console</span>.log( calculateBonus( <span class="string">'S'</span>, <span class="number">20000</span> ) ); <span class="comment">// è¾“å‡ºï¼š80000</span></div><div class="line">	<span class="built_in">console</span>.log( calculateBonus( <span class="string">'A'</span>, <span class="number">10000</span> ) ); <span class="comment">// è¾“å‡ºï¼š30000</span></div></pre></td></tr></table></figure>
<p>é€šè¿‡ç­–ç•¥æ¨¡å¼ï¼Œç­–ç•¥å’Œå®é™…çš„è®¡ç®—æ–¹æ³•åˆ†å·¥æ˜ç¡®ï¼Œå…³ç³»è§£è€¦å’Œï¼Œå„è‡ªå‘ç”Ÿæ”¹å˜éƒ½ä¸æ”¹å˜å¦ä¸€éƒ¨åˆ†çš„ä»£ç ç»“æ„å’Œå†…å®¹ã€‚åœ¨å…·ä½“ç­–ç•¥ä¸­ä¹Ÿä¸ä¼šå‡ºç°ç´§è€¦åˆçš„åˆ¤è¯»é€‰æ‹©è¯­å¥ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-å¼€å¯React,Reduxå’ŒImmutableä¹‹æ—…-æµ‹è¯•é©±åŠ¨æ•™ç¨‹(part2)]]></title>
      <url>http://yoursite.com/2017/03/08/%E7%BF%BB%E8%AF%91-%E5%BC%80%E5%90%AFReact,Redux%E5%92%8CImmutable%E4%B9%8B%E6%97%85-%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E6%95%99%E7%A8%8B(part2)/</url>
      <content type="html"><![CDATA[<p>ç¿»è¯‘ç‰ˆæœ¬,<a href="http://www.theodo.fr/blog/2016/03/getting-started-with-react-redux-and-immutable-a-test-driven-tutorial-part-2/" target="_blank" rel="external">åŸæ–‡è¯·è§</a></p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fds4960hm8j30xc0b4weu.jpg" alt="Imageç”±[egghead.ioæä¾›](http://egghead.io/)"></p>
<p>è¿™æ˜¯ç¬¬äºŒéƒ¨åˆ†çš„å†…å®¹.</p>
<p>åœ¨ç¬¬ä¸€éƒ¨åˆ†,æˆ‘ä»¬ç½—åˆ—äº†appçš„UI,å¼€å‘å’Œå•å…ƒæµ‹è¯•çš„åŸºç¡€.</p>
<p>æˆ‘ä»¬çœ‹åˆ°äº†appçš„stateé€šè¿‡Reactçš„<code>props</code>å‘ä¸‹ä¼ é€’åˆ°å•ä¸ªçš„ç»„ä»¶,ç”¨æˆ·çš„actionså£°æ˜ä¸ºå›è°ƒå‡½æ•°,å› æ­¤appçš„é€»è¾‘å’ŒUIåˆ†ç¦»å¼€æ¥äº†.</p>
<h2 id="Reduxçš„å·¥ä½œæµä»‹ç»"><a href="#Reduxçš„å·¥ä½œæµä»‹ç»" class="headerlink" title="Reduxçš„å·¥ä½œæµä»‹ç»"></a>Reduxçš„å·¥ä½œæµä»‹ç»</h2><p>åœ¨è¿™ä¸€ç‚¹ä¸Š,æˆ‘ä»¬çš„UIæ˜¯æ²¡æœ‰äº¤äº’æ“ä½œçš„:å°½ç®¡æˆ‘ä»¬å·²ç»æµ‹è¯•äº†å¦‚æœä¸€ä¸ªitemå¦‚æœè¢«è®¾å®šä¸º<code>completed</code>,å®ƒå°†ç»™æ–‡æœ¬åˆ’çº¿,ä½†æ˜¯è¿™é‡Œè¿˜æ²¡æœ‰æ–¹æ³•é‚€è¯·ç”¨æˆ·æ¥å®Œæˆå®ƒ:</p>
<ol>
<li>state treeé€šè¿‡<code>props</code>å®šä¹‰äº†UIå’Œactionå›è°ƒå‡½æ•°.</li>
<li>ç”¨æˆ·çš„actions,ä¾‹å¦‚ç‚¹å‡»,è¢«å‘é€åˆ°action creator,actionè¢«å®ƒèŒƒå¼åŒ–.</li>
<li>redux actionè¢«ä¼ é€’åˆ°reducerå®ç°å®é™…çš„appé€»è¾‘</li>
<li>reduceræ›´æ–°state tree,dispatch stateåˆ°store.</li>
<li>UIæ ¹æ®storeé‡Œçš„æ–°state treeæ¥æ›´æ–°UI</li>
</ol>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdua9bq152j30f10870sn.jpg" alt="Redux working flos"></p>
<h2 id="è®¾å®šåˆå§‹åŒ–state"><a href="#è®¾å®šåˆå§‹åŒ–state" class="headerlink" title="è®¾å®šåˆå§‹åŒ–state"></a>è®¾å®šåˆå§‹åŒ–state</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/be48d4d610b3438aeb1dfcd07d317b3c72fbdb3e" target="_blank" rel="external">è¿™éƒ¨åˆ†çš„ä»£ç æäº¤åœ¨è¿™é‡Œ</a></p>
<p>æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªactionå°†ä¼šå…è®¸æˆ‘ä»¬åœ¨Redux storeé‡Œæ­£ç¡®çš„è®¾ç½®åˆå§‹åŒ–state<br>,æˆ‘ä»¬å°†ä¼šåˆ›å»ºstore.</p>
<p>Reduxä¸­çš„actionæ˜¯ä¸€ä¸ªä¿¡æ¯çš„è½½ä½“(payload).actionç”±ä¸€ä¸ªJSONå¯¹è±¡æœ‰ä¸€ä¸ª<code>type</code>å±æ€§,æè¿°actionåˆ°åº•æ˜¯åšä»€ä¹ˆçš„,è¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯appéœ€è¦çš„ä¿¡æ¯.åœ¨æˆ‘ä»¬çš„å®ä¾‹ä¸­,typeè¢«è®¾å®šä¸º<code>SET_STATE</code>,æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªstateå¯¹è±¡åŒ…å«éœ€è¦çš„state:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attribute">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">  <span class="attribute">state</span>: &#123;</div><div class="line">    <span class="attribute">todos</span>: [</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">1</span>, <span class="attribute">text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">2</span>, <span class="attribute">text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">3</span>, <span class="attribute">text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">    ],</div><div class="line">    <span class="attribute">filter</span>: <span class="string">'all'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªactionä¼šè¢«dispatchåˆ°ä¸€ä¸ªreducer,reducerè§’è‰²çš„æ˜¯è¯†åˆ«å’Œå®æ–½å’Œactionå¯¹åº”çš„é€»è¾‘ä»£ç .</p>
<p>è®©æˆ‘ä»¬ä¸ºreduceræ¥å†™å•å…ƒæµ‹è¯•ä»£ç <br><code>test/reducer_spec.js</code><br><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"> <span class="title">import</span> &#123;List, <span class="built_in">Map</span>, fromJS&#125; from <span class="string">'immutable'</span>;</div><div class="line"><span class="title">import</span> &#123;expect&#125; from <span class="string">'chai'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> reducer from <span class="string">'../src/reducer'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line"></div><div class="line">  it(<span class="string">'handles SET_STATE'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = <span class="built_in">Map</span>();</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attribute">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">      <span class="attribute">state</span>: <span class="built_in">Map</span>(&#123;</div><div class="line">        <span class="attribute">todos</span>: List.of(</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 1, text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;),</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 2, text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;),</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 3, text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'completed'</span>&#125;)</div><div class="line">        )</div><div class="line">      &#125;)</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line"></div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attribute">todos</span>: [</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 1, text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 2, text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 3, text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†æ–¹ä¾¿ä¸€ç‚¹,<code>state</code>ä½¿ç”¨å•çº¯JSå¯¹è±¡,è€Œä¸æ˜¯ä½¿ç”¨Immutableæ•°æ®ç»“æ„.è®©æˆ‘ä»¬çš„reduceræ¥å¤„ç†è½¬å˜.æœ€å,reducerå°†ä¼šä¼˜é›…çš„å¤„ç†<code>undefined</code>åˆå§‹åŒ–state:<br><code>test/reducer_spec.js</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles SET_STATE with plain JS payload'</span>, () =&gt; &#123;</div><div class="line">    const initialState = Map();</div><div class="line">    const action = &#123;</div><div class="line"><span class="symbol">      type:</span> <span class="string">'SET_STATE'</span>,</div><div class="line"><span class="symbol">      state:</span> &#123;</div><div class="line"><span class="symbol">        todos:</span> [</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    const nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line"><span class="symbol">      todos:</span> [</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles SET_STATE without initial state'</span>, () =&gt; &#123;</div><div class="line">    const action = &#123;</div><div class="line"><span class="symbol">      type:</span> <span class="string">'SET_STATE'</span>,</div><div class="line"><span class="symbol">      state:</span> &#123;</div><div class="line"><span class="symbol">        todos:</span> [</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    const nextState = reducer(undefined, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line"><span class="symbol">      todos:</span> [</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬çš„reducerå°†ä¼šåŒ¹é…æ¥æ”¶çš„actionsçš„<code>type</code>,å¦‚æœtypeæ˜¯<code>SET_STATE</code>,å½“å‰çš„stateå’Œactionè¿è½½çš„stateèåˆåœ¨ä¸€èµ·:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;<span class="built_in">Map</span>&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setState</span>(<span class="params">state, newState</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.merge(newState);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬ä¸å¾—ä¸æŠŠreducerè¿æ¥åˆ°æˆ‘ä»¬çš„app,æ‰€ä»¥å½“appå¯åŠ¨åˆå§‹åŒ–state.è¿™é‡Œå®é™…æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨Reduxåº“,å®‰è£…ä¸€ä¸‹<br><code>npm install â€”save redux@3.3.1 react-redux@4.4.1</code></p>
<p><code>src/index.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> &#123;List, <span class="built_in">Map</span>&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;</div><div class="line"><span class="keyword">import</span> &#123;TodoAppContainer&#125; <span class="keyword">from</span> <span class="string">'./components/TodoApp'</span>;</div><div class="line"></div><div class="line"><span class="comment">// We instantiate a new Redux store</span></div><div class="line"><span class="keyword">const</span> store = createStore(reducer);</div><div class="line"><span class="comment">// We dispatch the SET_STATE action holding the desired state</span></div><div class="line">store.dispatch(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">  <span class="attr">state</span>: &#123;</div><div class="line">    <span class="attr">todos</span>: [</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">    ],</div><div class="line">    <span class="attr">filter</span>: <span class="string">'all'</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'../node_modules/todomvc-app-css/index.css'</span>);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="comment">// We wrap our app in a Provider component to pass the store down to the components</span></div><div class="line">  &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">TodoAppContainer</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ çœ‹çœ‹ä¸Šé¢çš„ä»£ç æ®µ,ä½ å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬çš„<code>TodoApp</code>ç»„ä»¶å®é™…æ˜¯è¢«<code>TodoAppContainer</code>ä»£æ›¿.åœ¨Reduxé‡Œ,æœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶:å±•ç¤ºç»„ä»¶å’Œå®¹å™¨.æˆ‘æ¨èä½ é˜…è¯»ä¸€ä¸‹ç”±Dan Abramov(Reduxçš„ä½œè€…)å†™ä½œçš„<a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.e5z2vws8e" target="_blank" rel="external">é«˜ä¿¡æ¯é‡çš„æ–‡ç« </a>,å¼ºè°ƒäº†å±•ç¤ºç»„ä»¶å’Œå®¹å™¨çš„å·®å¼‚æ€§.</p>
<p>å¦‚æœæˆ‘æƒ³æ€»ç»“å¾—å¿«ä¸€ç‚¹,æˆ‘å°†å¼•ç”¨<a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux æ–‡æ¡£</a>çš„å†…å®¹ï¼š</p>
<p>â€œå±•ç¤ºç»„ä»¶æ˜¯å…³äºäº‹ä»¶çš„æ ·å­(æ¨¡æ¿å’Œæ ·å¼),å®¹å™¨ç»„ä»¶æ˜¯å…³äºäº‹æƒ…æ˜¯æ€ä¹ˆå·¥ä½œçš„(æ•°æ®è·å–,stateæ›´æ–°)â€.</p>
<p>æ‰€ä»¥æˆ‘ä»¬åˆ›å»ºstore,ä¼ é€’ç»™<code>TodoAppContainer</code>.ç„¶è€Œä¸ºäº†å­ç»„ä»¶å¯ä»¥ä½¿ç”¨store,æˆ‘ä»¬æŠŠstateæ˜ å°„æˆä¸ºReactç»„ä»¶<code>TodoApp</code>çš„<code>props</code>.<br><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: state.get(<span class="string">'todos'</span>),</div><div class="line">    <span class="attr">filter</span>: state.get(<span class="string">'filter'</span>)</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> TodoAppContainer = connect(mapStateToProps)(TodoApp);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­é‡æ–°åŠ è½½app,ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å®ƒåˆå§‹åŒ–å’Œä¹‹å‰ä¸€æ ·,ä¸è¿‡ç°åœ¨ä½¿ç”¨Redux tools.</p>
<h2 id="Redux-dev-å·¥å…·"><a href="#Redux-dev-å·¥å…·" class="headerlink" title="Redux dev å·¥å…·"></a>Redux dev å·¥å…·</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/9e82a2bf7ffaea5d0fda6af361a126517aecc115" target="_blank" rel="external">è¿™ä¸€éƒ¨åˆ†çš„æäº¤ä»£ç </a></p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»é…ç½®äº†redux storeå’Œreducer.æˆ‘ä»¬å¯ä»¥é…ç½®Redux dev toolsæ¥å±•ç°æ•°æ®æµå¼€å‘.</p>
<p>é¦–å…ˆ,è·å–<a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd" target="_blank" rel="external">Redux dev tools Chrome extension</a></p>
<p>dev toolså¯ä»¥åœ¨Storeåˆ›å»ºçš„æ—¶å€™å¯ä»¥åŠ è½½.</p>
<p><code>src/index.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> &#123;compose, createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> createStoreDevTools = compose(</div><div class="line">  <span class="built_in">window</span>.devToolsExtension ? <span class="built_in">window</span>.devToolsExtension() : <span class="function"><span class="params">f</span> =&gt;</span> f</div><div class="line">)(createStore);</div><div class="line"><span class="keyword">const</span> store = createStoreDevTools(reducer);</div><div class="line"><span class="comment">// ...</span></div></pre></td></tr></table></figure></p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdubya02s9j31cy0v6dgk.jpg" alt="Redux dev tools"></p>
<p>é‡æ–°åŠ è½½app,ç‚¹å‡»Reduxå›¾æ ‡,æœ‰äº†.</p>
<p>æœ‰ä¸‰ä¸ªä¸åŒçš„ç›‘è§†å™¨å¯ä»¥ä½¿ç”¨:Diffç›‘è§†å™¨,æ—¥å¿—ç›‘è§†å™¨,Sliderç›‘è§†å™¨.</p>
<h2 id="ä½¿ç”¨Action-Creatorsé…ç½®æˆ‘ä»¬çš„actions"><a href="#ä½¿ç”¨Action-Creatorsé…ç½®æˆ‘ä»¬çš„actions" class="headerlink" title="ä½¿ç”¨Action Creatorsé…ç½®æˆ‘ä»¬çš„actions"></a>ä½¿ç”¨Action Creatorsé…ç½®æˆ‘ä»¬çš„actions</h2><p>åˆ‡æ¢itemçš„ä¸åŒçŠ¶æ€.</p>
<p><a href="https://github.com/phacks/redux-todomvc/commit/7a2dc0963684b569c11f92e41a324324dfb21bdc" target="_blank" rel="external">è¿™éƒ¨åˆ†çš„æäº¤ä»£ç åœ¨è¿™é‡Œ</a></p>
<p>ä¸‹ä¸€æ­¥æ˜¯å…è®¸ç”¨æˆ·åœ¨<code>active</code>å’Œ<code>completed</code>ä¹‹å‰åˆ‡æ¢çŠ¶æ€ï¼š<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123;List, <span class="built_in">Map</span>, fromJS&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"><span class="keyword">import</span> &#123;expect&#125; <span class="keyword">from</span> <span class="string">'chai'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'../src/reducer'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles TOGGLE_COMPLETE by changing the status from active to completed'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles TOGGLE_COMPLETE by changing the status from completed to active'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">3</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†é€šè¿‡è¿™äº›æµ‹è¯•,æˆ‘ä»¬æ›´æ–°reducer:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="comment">// We find the index associated with the itemId</span></div><div class="line">  <span class="keyword">const</span> itemIndex = state.get(<span class="string">'todos'</span>).findIndex(</div><div class="line">    <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">  );</div><div class="line">  <span class="comment">// We update the todo at this index</span></div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .update(<span class="string">'status'</span>, status =&gt; status === <span class="string">'active'</span> ? <span class="string">'completed'</span> : <span class="string">'active'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// We update the state to account for the modified todo</span></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_COMPLETE'</span>:</div><div class="line">      <span class="keyword">return</span> toggleComplete(state, action.itemId);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å’Œ<code>SET_STATE</code>çš„actionåŒä¸€ä¸ªåœ°æ–¹,æˆ‘ä»¬éœ€è¦è®©<code>TodoAppContainer</code>ç»„ä»¶æ„ŸçŸ¥åˆ°action,æ‰€ä»¥<code>toggleComplete</code>å›è°ƒå‡½æ•°ä¼šè¢«ä¼ é€’åˆ°<code>TodoItem</code>ç»„ä»¶(å®é™…è°ƒç”¨å‡½æ•°çš„åœ°æ–¹).</p>
<p>åœ¨Reduxä¸­,æœ‰æ ‡å‡†çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹ï¼šAction Creators.</p>
<p>action creatorsæ˜¯ç®€å•çš„å‡½æ•°,è¿”å›åˆé€‚çš„actionï¼Œè¿™äº›éŸ©å¼æ˜¯Reactçš„<code>props</code>çš„ä¸€äº›æ˜ å°„ä¹‹ä¸€.<br>è®©æˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ä¸ªaction creator:<br><code>src/action_creators.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨,å°½ç®¡<code>TodoAppcontainer</code>ç»„ä»¶ä¸­çš„<code>connect</code>å‡½æ•°çš„è°ƒç”¨å¯ä»¥ç”¨æ¥è·å–store,æˆ‘ä»¬å‘Šè¯‰ç»„ä»¶ä½¿ç”¨æ˜ å°„<code>props</code>çš„å›è°ƒå‡½æ•°:<br><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionCreators <span class="keyword">from</span> <span class="string">'../action_creators'</span>;</div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      // ...</div><div class="line">        // We use the spread operator for better lisibility</div><div class="line">        <span class="tag">&lt;<span class="name">TodoList</span>  &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></div><div class="line">      // ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">export const TodoAppContainer = connect(mapStateToProps, actionCreators)(TodoApp);</div></pre></td></tr></table></figure></p>
<p>é‡å¯ä½ çš„webserver,åˆ·æ–°ä¸€ä¸‹ä½ çš„æµè§ˆå™¨:å½“å½“.åœ¨æ¡ç›®ä¸Šç‚¹å‡»ç°åœ¨å¯ä»¥åˆ‡æ¢å®ƒçš„çŠ¶æ€.å¦‚æœä½ æŸ¥çœ‹Redux dev tools,ä½ å¯ä»¥çœ‹åˆ°è§¦å‘çš„actionå’Œåç»§çš„æ›´æ–°.</p>
<h2 id="æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨"><a href="#æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨" class="headerlink" title="æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨"></a>æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/3949d4f38912e4b6b8e60fc4c553614d4076028c" target="_blank" rel="external">ç›¸å…³ä»£ç åœ¨åœ¨è¿™é‡Œ</a></p>
<p>ç°åœ¨æ¯ä»¶äº‹æƒ…éƒ½å·²ç»é…ç½®å®Œæ¯•,å†™å…¶ä»–çš„actionæ˜¯ä»¶å°äº‹.æˆ‘ä»¬ç»§ç»­åˆ›å»ºä½ å¸Œæœ›çš„<code>CHANGE_FILTER</code>action,æ”¹å˜å½“å‰stateçš„filter,ç”±æ­¤ä»…ä»…æ˜¾ç¤ºè¿‡æ»¤è¿‡çš„æ¡ç›®.<br>å¼€å§‹åˆ›å»ºaction creatorï¼š<br><code>src/action_creators.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">changeFilter</span>(<span class="params">filter</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CHANGE_FILTER'</span>,</div><div class="line">    filter</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨å†™reducerçš„å•å…ƒæµ‹è¯•:<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles CHANGE_FILTER by changing the filter'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ],</div><div class="line">      <span class="attr">filter</span>: <span class="string">'all'</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CHANGE_FILTER'</span>,</div><div class="line">      <span class="attr">filter</span>: <span class="string">'active'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ],</div><div class="line">      <span class="attr">filter</span>: <span class="string">'active'</span></div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å…³è”çš„reducerå‡½æ•°:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeFilter</span>(<span class="params">state, filter</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.set(<span class="string">'filter'</span>, filter);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_COMPLETE'</span>:</div><div class="line">      <span class="keyword">return</span> toggleComplete(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'CHANGE_FILTER'</span>:</div><div class="line">      <span class="keyword">return</span> changeFilter(state, action.filter);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æœ€åæˆ‘ä»¬æŠŠ<code>changeFilter</code>å›è°ƒå‡½æ•°ä¼ é€’ç»™<code>TodoTools</code>ç»„ä»¶:<br><code>TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">"todoapp"</span>&gt;</span></div><div class="line">        // ...</div><div class="line">        <span class="tag">&lt;<span class="name">TodoTools</span> <span class="attr">changeFilter</span>=<span class="string">&#123;this.props.changeFilter&#125;</span></span></div><div class="line">                   <span class="attr">filter</span>=<span class="string">&#123;this.props.filter&#125;</span></div><div class="line">                   <span class="attr">nbActiveItems</span>=<span class="string">&#123;this.getNbActiveItems()&#125;</span> /&gt;</div><div class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>å®Œæˆäº†,ç¬¬ä¸€ä¸ªfilter selectorå·¥ä½œå®Œç¾</p>
<h2 id="Itemç¼–è¾‘"><a href="#Itemç¼–è¾‘" class="headerlink" title="Itemç¼–è¾‘"></a>Itemç¼–è¾‘</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/2a7b1138f778524d4aa7eac193c995258d28c5a3" target="_blank" rel="external">ä»£ç åœ¨è¿™é‡Œ</a><br> å½“ç”¨æˆ·ç¼–è¾‘ä¸€ä¸ªæ¡ç›®,å®é™…ä¸Šæ˜¯ä¸¤ä¸ªactionsè§¦å‘çš„ä¸‰ä¸ªå¯èƒ½æ€§:</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥ç¼–è¾‘æ¨¡å¼:<code>EDIT_ITEM</code></li>
<li>ç”¨æˆ·é€€å‡ºç¼–è¾‘æ¨¡å¼(ä¸ä¿å­˜å˜åŒ–):<code>CANCEL_EDITING</code></li>
<li>ç”¨æˆ·éªŒè¯ä»–çš„ç¼–è¾‘(ä¿å­˜å˜åŒ–):<code>DONE_EDITING</code></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä¸ºä¸‰ä¸ªactionsç¼–å†™action creatorsï¼š<br><code>src/action_creators.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">editItem</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'EDIT_ITEM'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cancelEditing</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CANCEL_EDITING'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">doneEditing</span>(<span class="params">itemId, newText</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'DONE_EDITING'</span>,</div><div class="line">    itemId,</div><div class="line">    newText</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨ä¸ºè¿™äº›actionsç¼–å†™å•å…ƒæµ‹è¯•:<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles EDIT_ITEM by setting editing to true'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'EDIT_ITEM'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles CANCEL_EDITING by setting editing to false'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CANCEL_EDITING'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles DONE_EDITING by setting by updating the text'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'DONE_EDITING'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span>,</div><div class="line">      <span class="attr">newText</span>: <span class="string">'Redux'</span>,</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å‘reducerå‡½æ•°,å®é™…æ“ä½œä¸‰ä¸ªactions:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">findItemIndex</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.get(<span class="string">'todos'</span>).findIndex(</div><div class="line">    <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// We can refactor the toggleComplete function to use findItemIndex</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .update(<span class="string">'status'</span>, status =&gt; status === <span class="string">'active'</span> ? <span class="string">'completed'</span> : <span class="string">'active'</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">editItem</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">true</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cancelEditing</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">false</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doneEditing</span>(<span class="params">state, itemId, newText</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">false</span>)</div><div class="line">    .set(<span class="string">'text'</span>, newText);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'EDIT_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> editItem(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'CANCEL_EDITING'</span>:</div><div class="line">      <span class="keyword">return</span> cancelEditing(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'DONE_EDITING'</span>:</div><div class="line">      <span class="keyword">return</span> doneEditing(state, action.itemId, action.newText);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="æ¸…é™¤å®Œæˆ-æ·»åŠ å’Œåˆ é™¤æ¡ç›®"><a href="#æ¸…é™¤å®Œæˆ-æ·»åŠ å’Œåˆ é™¤æ¡ç›®" class="headerlink" title="æ¸…é™¤å®Œæˆ,æ·»åŠ å’Œåˆ é™¤æ¡ç›®"></a>æ¸…é™¤å®Œæˆ,æ·»åŠ å’Œåˆ é™¤æ¡ç›®</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/c89059a6767903fdf8b9827209f92e1f7385bdb7" target="_blank" rel="external">ä»£ç åœ¨è¿™é‡Œ</a></p>
<p>ä¸‰ä¸ªå‰©ä¸‹çš„actionæ˜¯:</p>
<ol>
<li><code>CLEAR_COMPLETED</code>,åœ¨<code>TodoTools</code>ç»„ä»¶ä¸­è§¦å‘,ä»åˆ—è¡¨ä¸­æ¸…é™¤å®Œæˆçš„æ¡ç›®</li>
<li><code>ADD_ITEM</code>,åœ¨<code>TodoHeader</code>ä¸­è§¦å‘,æ ¹æ®ç”¨æˆ·çš„çš„è¾“å…¥æ–‡æœ¬æ¥æ·»åŠ æ¡ç›®</li>
<li><code>DELETE_ITEM</code>,ç›¸ä¼¼<code>TodoItem</code>ä¸­è°ƒç”¨,åˆ é™¤ä¸€ä¸ªæ¡ç›®</li>
</ol>
<p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„å·¥ä½œæµæ˜¯:æ·»åŠ action creators,å•å…ƒæµ‹è¯•reducerå’Œä»£ç é€»è¾‘,æœ€ç»ˆé€šè¿‡propsä¼ é€’å›è°ƒå‡½æ•°:<br><code>src/action_creators.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">clearCompleted</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CLEAR_COMPLETED'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD_ITEM'</span>,</div><div class="line">    text</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteItem</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'DELETE_ITEM'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles CLEAR_COMPLETED by removing all the completed items'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CLEAR_COMPLETED'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles ADD_ITEM by adding the item'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'ADD_ITEM'</span>,</div><div class="line">      <span class="attr">text</span>: <span class="string">'Redux'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles DELETE_ITEM by removing the item'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'DELETE_ITEM'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">2</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCompleted</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>,</div><div class="line">    (todos) =&gt; todos.filterNot(</div><div class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'status'</span>) === <span class="string">'completed'</span></div><div class="line">    )</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params">state, text</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemId = state.get(<span class="string">'todos'</span>).reduce(<span class="function">(<span class="params">maxId, item</span>) =&gt;</span> <span class="built_in">Math</span>.max(maxId,item.get(<span class="string">'id'</span>)), <span class="number">0</span>) + <span class="number">1</span>;</div><div class="line">  <span class="keyword">const</span> newItem = <span class="built_in">Map</span>(&#123;<span class="attr">id</span>: itemId, <span class="attr">text</span>: text, <span class="attr">status</span>: <span class="string">'active'</span>&#125;);</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, (todos) =&gt; todos.push(newItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteItem</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>,</div><div class="line">    (todos) =&gt; todos.filterNot(</div><div class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">    )</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'CLEAR_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> clearCompleted(state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'ADD_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> addItem(state, action.text);</div><div class="line">    <span class="keyword">case</span> <span class="string">'DELETE_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> deleteItem(state, action.itemId);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div&gt;</div><div class="line">      &lt;section className="todoapp"&gt;</div><div class="line">        // We pass down the addItem callback</div><div class="line">        &lt;TodoHeader addItem=&#123;this.props.addItem&#125;/&gt;</div><div class="line">        &lt;TodoList &#123;...this.props&#125; /&gt;</div><div class="line">        // We pass down the clearCompleted callback</div><div class="line">        &lt;TodoTools changeFilter=&#123;this.props.changeFilter&#125;</div><div class="line">                    filter=&#123;this.props.filter&#125;</div><div class="line">                    nbActiveItems=&#123;this.getNbActiveItems()&#125;</div><div class="line">                    clearCompleted=&#123;this.props.clearCompleted&#125;/&gt;</div><div class="line">      &lt;/section&gt;</div><div class="line">      &lt;Footer /&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬çš„TodoMVC appç°åœ¨å®Œæˆäº†.</p>
<h2 id="åŒ…è£…èµ·æ¥"><a href="#åŒ…è£…èµ·æ¥" class="headerlink" title="åŒ…è£…èµ·æ¥"></a>åŒ…è£…èµ·æ¥</h2><p>è¿™æˆ‘ä»¬çš„æµ‹è¯•é©±åŠ¨çš„React,Redux&amp;Immutable æŠ€æœ¯æ ˆ</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå†…å®¹,æœ‰æ›´å¤šçš„äº‹æƒ…ç­‰ç€ä½ å»æŒ–æ˜<br>ä¾‹å¦‚:</p>
<ul>
<li><a href="https://github.com/reactjs/react-router-redux" target="_blank" rel="external">React Redux router</a>åˆ›å»ºå®Œå…¨çš„å•é¡µé¢åº”ç”¨</li>
<li>æ˜¯ç”±Reduxåœ¨åå°åŒæ„Redux,çœ‹è¿™<a href="http://teropa.info/blog/2015/09/10/full-stack-redux-tutorial.html" target="_blank" rel="external">1æ•™ç¨‹</a>,<a href="https://blog.diacode.com/trello-clone-with-phoenix-and-react-pt-1" target="_blank" rel="external">2æ•™ç¨‹</a></li>
<li><a href="https://github.com/Ghirro/gambit" target="_blank" rel="external">Gambie</a>,ç®€å•çš„åŒ…è£…å™¨ç®€åŒ–åˆ°APIçš„è¿æ¥</li>
<li><a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">ç³»åˆ—è§†é¢‘</a>,ä½œè€…æ˜¯Dan Abramov(Reduxçš„åˆ›å»ºè€…)</li>
<li>Redux <a href="http://redux.js.org/docs/introduction/Ecosystem.html" target="_blank" rel="external">ç½‘ç«™ä¸Šæ›´å¤šçš„å†…å®¹</a>!</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|Reselect-Reduxçš„ä¸­é—´ä»¶]]></title>
      <url>http://yoursite.com/2017/03/08/Redux-Reselect/</url>
      <content type="html"><![CDATA[<blockquote>
<p>â€œselectorâ€æ˜¯ä¸€ä¸ªç®€å•çš„Reduxåº“,çµæ„Ÿæ¥æºäº<code>NuclearJS</code>.</p>
<ul>
<li>Selectorå¯ä»¥è®¡ç®—è¡ç”Ÿçš„æ•°æ®,å¯ä»¥è®©Reduxåšåˆ°å­˜å‚¨å°½å¯èƒ½å°‘çš„stateã€‚</li>
<li>Selectoræ¯”è¾ƒé«˜æ•ˆ,åªæœ‰åœ¨æŸä¸ªå‚æ•°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰å‘ç”Ÿè®¡ç®—è¿‡ç¨‹.</li>
<li>Selectoræ˜¯å¯ä»¥ç»„åˆçš„,ä»–ä»¬å¯ä»¥ä½œä¸ºè¾“å…¥,ä¼ é€’åˆ°å…¶ä»–çš„selector.</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¿™ä¸ªä¾‹å­ä¸å¿…å¤ªåœ¨æ„,åé¢ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»</span></div><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</div><div class="line"><span class="keyword">const</span> taxPercentSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.taxPercent</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  shopItemsSelector,</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> taxSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxPercentSelector,</div><div class="line">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class="number">100</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxSelector,</div><div class="line">  (subtotal, tax) =&gt; (&#123; <span class="attr">total</span>: subtotal + tax &#125;)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">let</span> exampleState = &#123;</div><div class="line">  <span class="attr">shop</span>: &#123;</div><div class="line">    <span class="attr">taxPercent</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">items</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">value</span>: <span class="number">1.20</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">value</span>: <span class="number">0.95</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(subtotalSelector(exampleState)) <span class="comment">// 2.15</span></div><div class="line"><span class="built_in">console</span>.log(taxSelector(exampleState))      <span class="comment">// 0.172</span></div><div class="line"><span class="built_in">console</span>.log(totalSelector(exampleState))    <span class="comment">// &#123; total: 2.322 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#å®‰è£…">Installation</a></li>
<li><a href="#å®ä¾‹">å®ä¾‹</a><ul>
<li><a href="#motivation-for-memoized-selectors">Motivation for Memoized Selectors</a></li>
<li><a href="#creating-a-memoized-selector">Creating a Memoized Selector</a></li>
<li><a href="#composing-selectors">Composing Selectors</a></li>
<li><a href="#connecting-a-selector-to-the-redux-store">Connecting a Selector to the Redux Store</a></li>
<li><a href="#accessing-react-props-in-selectors">Accessing React Props in Selectors</a></li>
<li><a href="#sharing-selectors-with-props-across-multiple-components">Sharing Selectors with Props Across Multiple Components</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#createselectorinputselectors--inputselectors-resultfunc"><code>createSelector</code></a></li>
<li><a href="#defaultmemoizefunc-equalitycheck--defaultequalitycheck"><code>defaultMemoize</code></a></li>
<li><a href="#createselectorcreatormemoize-memoizeoptions"><code>createSelectorCreator</code></a></li>
<li><a href="#createstructuredselectorinputselectors-selectorcreator--createselector"><code>createStructuredSelector</code></a></li>
</ul>
</li>
<li><p><a href="#faq">FAQ</a></p>
<ul>
<li><a href="#q-why-isnt-my-selector-recomputing-when-the-input-state-changes">Why isnâ€™t my selector recomputing when the input state changes?</a></li>
<li><a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">Why is my selector recomputing when the input state stays the same?</a></li>
<li><a href="#q-can-i-use-reselect-without-redux">Can I use Reselect without Redux?</a></li>
<li><a href="#q-the-default-memoization-function-is-no-good-can-i-use-a-different-one">The default memoization function is no good, can I use a different one?</a></li>
<li><a href="#q-how-do-i-test-a-selector">How do I test a selector?</a></li>
<li><a href="#q-how-do-i-create-a-selector-that-takes-an-argument">How do I create a selector that takes an argument? </a></li>
<li><a href="#q-how-do-i-use-reselect-with-immutablejs">How do I use Reselect with Immutable.js?</a></li>
<li><a href="#q-can-i-share-a-selector-across-multiple-components">Can I share a selector across multiple components?</a></li>
<li><a href="#q-are-there-typescript-typings">Are there TypeScript typings?</a></li>
<li><a href="#q-how-can-i-make-a-curried-selector">How can I make a curried selector?</a></li>
</ul>
</li>
<li><p><a href="#related-projects">Related Projects</a></p>
</li>
<li><a href="#license">License</a><br>##å®‰è£…<br><code>npm install reselect</code></li>
</ul>
<p>##å®ä¾‹</p>
<p>###ç¼“å­˜Selcectosçš„åŠ¨æœº</p>
<blockquote>
<p>å®ä¾‹æ˜¯åŸºäº <a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux Todos List example</a>.</p>
</blockquote>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"></div><div class="line"><span class="comment">//ä¸‹é¢è¿™æ®µä»£ç æ˜¯æ ¹æ®è¿‡æ»¤å™¨çš„stateæ¥æ”¹å˜æ—¥ç¨‹stateçš„å‡½æ•°</span></div><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (filter) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">      <span class="keyword">return</span> todos</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">//todosæ˜¯æ ¹æ®è¿‡æ»¤å‡½æ•°è¿”å›çš„stateï¼Œä¼ å…¥ä¸¤ä¸ªå®å‚</span></div><div class="line">    todos: getVisibleTodos(state.todos, state.visibilityFilter)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//mapDispatchToPropsæ¥ä¼ é€’dispatchçš„æ–¹æ³•</span></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//ä½¿ç”¨Reduxçš„connectå‡½æ•°æ³¨å…¥state,åˆ°TodoListç»„ä»¶</span></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,<code>mapStateToProps</code>è°ƒç”¨<code>getVisibleTodos</code>å»è®¡ç®—<code>todos</code>.è¿™ä¸ªå‡½æ•°è®¾è®¡çš„æ˜¯ç›¸å½“å¥½çš„,ä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹ï¼š<code>todos</code>åœ¨æ¯ä¸€æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™éƒ½ä¼šé‡æ–°è®¡ç®—.å¦‚æœstateæ ‘çš„ç»“æ„æ¯”è¾ƒå¤§,æˆ–è€…è®¡ç®—æ¯”è¾ƒæ˜‚è´µ,æ¯ä¸€æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™éƒ½è¿›è¡Œè®¡ç®—çš„è¯,å°†ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜.<code>Reselect</code>èƒ½å¤Ÿå¸®åŠ©reduxæ¥é¿å…ä¸å¿…è¦çš„é‡æ–°è®¡ç®—è¿‡ç¨‹.</p>
<p>###åˆ›å»ºä¸€ä¸ªç¼“å­˜Selector<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®°å¿†ç¼“å­˜selectorä»£æ›¿<code>getVisibleTodos</code>,å¦‚æœ<code>state.todos</code>å’Œ<code>state.visibilityFilter</code>å‘ç”Ÿå˜åŒ–,ä»–ä¼šé‡æ–°è®¡ç®—<code>state</code>,ä½†æ˜¯å‘ç”Ÿåœ¨å…¶ä»–éƒ¨åˆ†çš„stateå˜åŒ–,å°±ä¸ä¼šé‡æ–°è®¡ç®—.</p>
<p>Reslectæä¾›ä¸€ä¸ªå‡½æ•°<code>createSelector</code>æ¥åˆ›å»ºä¸€ä¸ªè®°å¿†selectors.<code>createSelector</code>æ¥å—ä¸€ä¸ª<code>input-selectors</code>å’Œä¸€ä¸ªå˜æ¢å‡½æ•°ä½œä¸ºå‚æ•°.å¦‚æœReduxçš„stateå‘ç”Ÿæ”¹å˜é€ æˆ<code>input-selector</code>çš„å€¼å‘ç”Ÿæ”¹å˜,selectorä¼šè°ƒç”¨å˜æ¢å‡½æ•°,ä¾æ®<code>input-selector</code>åšå‚æ•°,è¿”å›ä¸€ä¸ªç»“æœ.å¦‚æœ<code>input-selector</code>è¿”å›çš„ç»“æœå’Œå‰é¢çš„ä¸€æ ·,é‚£ä¹ˆå°±ä¼šç›´æ¥è¿”å›æœ‰å…³state,ä¼šçœç•¥å˜æ¢å‡½æ•°çš„è°ƒç”¨.</p>
<p>ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè®°å¿†selector<code>getVisibleTodos</code>æ›¿ä»£éè®°å¿†çš„ç‰ˆæœ¬</p>
<h4 id="selectors-index-js"><a href="#selectors-index-js" class="headerlink" title="selectors/index.js"></a><code>selectors/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state</span>) =&gt;</span> state.visibilityFilter</div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state</span>) =&gt;</span> state.todos</div><div class="line"><span class="comment">//ä¸‹é¢çš„å‡½æ•°æ˜¯ç»è¿‡åŒ…è£…çš„</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>ä¸Šé¢çš„çš„å®ä¾‹ä¸­,<code>getVisibilityfilter</code>å’Œ<code>getTodos</code>æ˜¯input-selectors.è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯æ™®é€šçš„éè®°å¿†selectorå‡½æ•°,å› ä¸ºä»–ä»¬æ²¡æœ‰å˜æ¢ä»–ä»¬selectçš„æ•°æ®.<code>getVisibleTodos</code>å¦ä¸€æ–¹é¢æ˜¯ä¸€ä¸ªè®°å¿†selector.ä»–æ¥æ”¶<code>getVisibilityfilter</code>å’Œ<code>getTodos</code>ä½œä¸ºinput-selectors,å¹¶ä¸”ä½œä¸ºä¸€ä¸ªå˜æ¢å‡½æ•°è®¡ç®—ç­›é€‰çš„todo list.</p>
<p>###èšåˆselectors</p>
<p>ä¸€ä¸ªè®°å¿†æ€§selectoræœ¬èº«ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªè®°å¿†æ€§selectorçš„input-selector.è¿™é‡Œ<code>getVisibleTodos</code>å¯ä»¥ä½œä¸ºinput-selectorä½œä¸ºå…³é”®å­—ç­›é€‰çš„input-selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getKeyword = <span class="function">(<span class="params">state</span>) =&gt;</span> state.keyword</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodosFilteredByKeyword = createSelector(</div><div class="line">  [ getVisibleTodos, getKeyword ],</div><div class="line">  (visibleTodos, keyword) =&gt; visibleTodos.filter(</div><div class="line">    <span class="function"><span class="params">todo</span> =&gt;</span> todo.text.indexOf(keyword) &gt; <span class="number">-1</span></div><div class="line">  )</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###è¿æ¥ä¸€ä¸ªSelectoråˆ°Redux Store<br>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <a href="https://github.com/reactjs/react-redux" target="_blank" rel="external">React Redux</a>, ä½ å¯ä»¥ç›´æ¥ä¼ é€’selectoråˆ° <code>mapStateToProps()</code>:</p>
<h4 id="containers-VisibleTodoList-js-1"><a href="#containers-VisibleTodoList-js-1" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>###åœ¨React Propsä¸­æ¥å…¥Selectors</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å‡è®¾ç¨‹åºå°†ä¼šæœ‰ä¸€ä¸ªæ‰©å±•,æˆ‘ä»¬å…è®¸selectoræ”¯æŒå¤štodo List.è¯·æ³¨æ„å¦‚æœè¦å®Œå…¨å®æ–½è¿™ä¸ªæ‰©å±•,reducers,components,actionsç­‰ç­‰éƒ½éœ€è¦ä½œå‡ºæ”¹å˜.è¿™äº›å†…å®¹å’Œä¸»é¢˜ä¸æ˜¯å¤ªç›¸å…³,æ‰€ä»¥è¿™é‡Œå°±çœç•¥æ‰äº†.</p>
</blockquote>
<p>ç›®å‰ä¸ºæ­¢,æˆ‘ä»¬ä»…ä»…çœ‹åˆ°selectorsæ¥æ”¶storeçš„stateä½œä¸ºä¸€ä¸ªå‚æ•°,å…¶å®ä¸€ä¸ªselectorå¶å¯ä»¥æ¥å—props.</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ª<code>App</code>ç»„ä»¶,æ¸²æŸ“å‡ºä¸‰ä¸ª<code>VisibleTodoList</code>ç»„ä»¶,æ¯ä¸€ä¸ªç»„ä»¶æœ‰<code>ListId</code>å±æ€§.</p>
<h4 id="components-App-js"><a href="#components-App-js" class="headerlink" title="components/App.js"></a><code>components/App.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></div><div class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../containers/AddTodo'</span></div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../containers/VisibleTodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;VisibleTodoList listId="1" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="2" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="3" /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ¯ä¸€ä¸ª<code>VisibleTodoList</code>containeråº”è¯¥æ ¹æ®å„è‡ªçš„<code>listId</code>å±æ€§è·å–stateçš„ä¸åŒéƒ¨åˆ†.æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹<code>getVisibilityFilter</code>å’Œ<code>getTodos</code>,ä¾¿äºæ¥å—ä¸€ä¸ªå±æ€§å‚æ•°</p>
<h4 id="selectors-todoSelectors-js"><a href="#selectors-todoSelectors-js" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos <span class="comment">//è¿™é‡Œæ˜¯ä¸ºäºŒç»´æ•°ç»„äº†</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">      <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p><code>props</code>å¯ä»¥ä»<code>mapStateToProps</code>ä¼ é€’åˆ°<code>getVisibleTodos</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨<code>getVisibleTodos</code>å¯ä»¥è·å–<code>props</code>,æ¯ä¸€éƒ¨åˆ†ä¼¼ä¹éƒ½å·¥ä½œçš„ä¸é”™.</p>
<p><em>**ä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜</em><br>å½“<code>getVisibleTodos</code>selectorå’Œ<code>VisibleTodoList</code>containerçš„å¤šä¸ªå®ä¾‹ä¸€èµ·å·¥ä½œçš„æ—¶å€™,è®°å¿†åŠŸèƒ½å°±ä¸èƒ½æ­£å¸¸çš„è¿è¡Œ:</p>
<h4 id="containers-VisibleTodoList-js-2"><a href="#containers-VisibleTodoList-js-2" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// WARNING: THE FOLLOWING SELECTOR DOES NOT CORRECTLY MEMOIZE</span></div><div class="line">    <span class="comment">//âš ï¸ä¸‹é¢çš„selectorä¸èƒ½æ­£ç¡®çš„è®°å¿†</span></div><div class="line">    todos: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectoræ—¶å€™,å¦‚æœä»–çš„å‚æ•°é›†åˆå’Œä¸Šä¸€æ¬¡çš„å‚æ•°æœºä¼šæ˜¯ä¸€æ ·çš„,ä»…ä»…è¿”å›ç¼“å­˜çš„å€¼.å¦‚æœæˆ‘ä»¬äº¤æ›¿æ¸²æŸ“<code>&lt;VisibleTodoList listId=&quot;1&quot; /&gt;</code> å’Œ<code>&lt;VisibleTodoList listId=&quot;2&quot; /&gt;</code>æ—¶,å…±äº«çš„selectorå°†ä¼šäº¤æ›¿æ¥å—<code>{listIdï¼š1}</code>å’Œ<code>{listId:2}</code>ä½œä¸ºä»–çš„propsçš„å‚æ•°.è¿™å°†ä¼šå¯¼è‡´æ¯ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™çš„å‚æ•°éƒ½ä¸åŒ,å› æ­¤selectoræ¯æ¬¡éƒ½ä¼šé‡æ–°æ¥è®¡ç®—è€Œä¸æ˜¯è¿”å›ç¼“å­˜çš„å€¼.ä¸‹ä¸€éƒ¨åˆ†æˆ‘ä»¬å°†ä¼šä»‹ç»æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜.</p>
<p>###è·¨è¶Šå¤šä¸ªç»„ä»¶ä½¿ç”¨selectorså…±æ€§props</p>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†çš„å®ä¾‹éœ€è¦React Redux v4.3.0æˆ–è€…æ›´é«˜ç‰ˆæœ¬çš„æ”¯æŒ.</p>
</blockquote>
<p>åœ¨å¤šä¸ª<code>VisibleTodoList</code>ç»„ä»¶ä¸­å…±äº«selector,åŒæ—¶è¿˜è¦<strong>ä¿æŒ</strong>è®°å¿†æ€§,æ¯ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹éœ€è¦ä»–ä»¬è‡ªå·±çš„selectorå¤‡ä»½.</p>
<p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°<code>makeGetVisibleTodos</code>,è¿™ä¸ªå‡½æ•°æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™è¿”å›ä¸€ä¸ªæ–°çš„<code>getVisibleTodos</code>çš„æ‹·è´:</p>
<h4 id="selectors-todoSelectors-js-1"><a href="#selectors-todoSelectors-js-1" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> makeGetVisibleTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    [ getVisibilityFilter, getTodos ],</div><div class="line">    (visibilityFilter, todos) =&gt; &#123;</div><div class="line">      <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">          <span class="keyword">return</span> todos</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeGetVisibleTodos</div></pre></td></tr></table></figure>
<hr>
<p>æˆ‘ä»¬ä¹Ÿéœ€è¦è®¾ç½®ç»™æ¯ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹ä»–ä»¬å„è‡ªè·å–ç§æœ‰çš„selectoræ–¹æ³•.<code>mapStateToProps</code>çš„<code>connect</code>å‡½æ•°å¯ä»¥å¸®åŠ©å®Œæˆè¿™ä¸ªåŠŸèƒ½.</p>
<p><em>**å¦‚æœ<code>mapStateToProps</code>æä¾›ç»™<code>connect</code>ä¸è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œæ˜¯ä¸€ä¸ªå‡½æ•°,ä»–å°±å¯ä»¥è¢«ç”¨æ¥ä¸ºæ¯ä¸ªç»„ä»¶containeråˆ›å»ºä¸€ä¸ªç§æœ‰çš„<code>mapStateProps</code>å‡½æ•°.</em></p>
<p>åœ¨ä¸‹é¢çš„å®ä¾‹ä¸­,<code>mapStateProps</code>åˆ›å»ºä¸€ä¸ªæ–°çš„<code>getVisibleTodos</code>selector,ä»–è¿”å›ä¸€ä¸ª<code>mapStateToProps</code>å‡½æ•°,è¿™ä¸ªå‡½æ•°èƒ½å¤Ÿæ¥å…¥æ–°çš„selector.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœæˆ‘ä»¬æŠŠ<code>makeMapStateToprops</code>ä¼ é€’åˆ°<code>connect</code>,æ¯ä¸€ä¸ª<code>visibleTodoList</code>containerå°†ä¼šè·å¾—å„è‡ªçš„å«æœ‰ç§æœ‰<code>getVisibleTodos</code>selectorçš„<code>mapStateToProps</code>çš„å‡½æ•°.è¿™æ ·ä¸€æ¥è®°å¿†å°±æ­£å¸¸äº†,ä¸ç®¡<code>VisibleTodoList</code>containersçš„æ¸²æŸ“é¡ºåºæ€ä¹ˆæ ·.</p>
<h4 id="containers-VisibleTodoList-js-3"><a href="#containers-VisibleTodoList-js-3" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; makeGetVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  makeMapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<hr>
<p>##API</p>
<p>###createSelector(â€¦inputSelectors|[inputSelectors],resultFunc)</p>
<p>æ¥å—ä¸€ä¸ªæˆ–è€…å¤šä¸ªselectors,æˆ–è€…ä¸€ä¸ªselectorsæ•°ç»„,è®¡ç®—ä»–ä»¬çš„å€¼å¹¶ä¸”ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>resultFunc</code>.</p>
<p><code>createSelector</code>é€šè¿‡åˆ¤æ–­input-selectorä¹‹å‰è°ƒç”¨å’Œä¹‹åè°ƒç”¨çš„è¿”å›å€¼çš„å…¨ç­‰äº(===,è¿™ä¸ªåœ°æ–¹è‹±æ–‡æ–‡çŒ®å«reference equality,å¼•ç”¨ç­‰äº,è¿™ä¸ªå•è¯æ˜¯æœ¬è´¨,ä¸­æ–‡æ²¡æœ‰ç¿»è¯‘å‡ºæ¥).ç»è¿‡<code>createSelector</code>åˆ›å»ºçš„selectoråº”è¯¥æ˜¯immutable(ä¸å˜çš„).</p>
<p>ç»è¿‡<code>createSelector</code>åˆ›å»ºçš„Selectorsæœ‰ä¸€ä¸ªç¼“å­˜,å¤§å°æ˜¯1.è¿™æ„å‘³ç€å½“ä¸€ä¸ªinput-selectorå˜åŒ–çš„æ—¶å€™,ä»–ä»¬æ€»æ˜¯ä¼šé‡æ–°è®¡ç®—state,å› ä¸ºSelectorä»…ä»…å­˜å‚¨æ¯ä¸€ä¸ªinput-selectorå‰ä¸€ä¸ªå€¼.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">  state =&gt; state.values.value2,</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// You can also pass an array of selectors</span></div><div class="line"><span class="comment">//å¯ä»¥å‡ºä¼ é€’ä¸€ä¸ªselectoræ•°ç»„</span></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  [</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">    state =&gt; state.values.value2</div><div class="line">  ],</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨selectorå†…éƒ¨è·å–ä¸€ä¸ªç»„ä»¶çš„propséå¸¸æœ‰ç”¨.å½“ä¸€ä¸ªselectoré€šè¿‡<code>connect</code>å‡½æ•°è¿æ¥åˆ°ä¸€ä¸ªç»„ä»¶ä¸Š,ç»„ä»¶çš„å±æ€§ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™selector:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> abSelector = <span class="function">(<span class="params">state, props</span>) =&gt;</span> state.a * props.b</div><div class="line"></div><div class="line"><span class="comment">// props only (ignoring state argument)</span></div><div class="line"><span class="keyword">const</span> cSelector =  <span class="function">(<span class="params">_, props</span>) =&gt;</span> props.c</div><div class="line"></div><div class="line"><span class="comment">// state only (props argument omitted as not required)</span></div><div class="line"><span class="keyword">const</span> dSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  abSelector,</div><div class="line">  cSelector,</div><div class="line">  dSelector,</div><div class="line">  (ab, c, d) =&gt; (&#123;</div><div class="line">    <span class="attr">total</span>: ab + c + d</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>###defaultMemoize(func, equalityCheck = defaultEqualityCheck)</p>
<p><code>defaultMemoize</code>èƒ½è®°ä½é€šè¿‡funcä¼ é€’çš„å‚æ•°.è¿™æ˜¯<code>createSelector</code>ä½¿ç”¨çš„è®°å¿†å‡½æ•°.</p>
<p><code>defaultMemoize</code> é€šè¿‡è°ƒç”¨<code>equalityCheck</code>å‡½æ•°æ¥å†³å®šä¸€ä¸ªå‚æ•°æ˜¯å¦å·²ç»å‘ç”Ÿæ”¹å˜.å› ä¸º<code>defaultMemoize</code>è®¾è®¡å‡ºæ¥å°±æ˜¯å’Œimmutableæ•°æ®ä¸€èµ·ä½¿ç”¨,é»˜è®¤çš„<code>equalityCheck</code>ä½¿ç”¨å¼•ç”¨å…¨ç­‰äºæ¥åˆ¤æ–­å˜åŒ–:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultEqualityCheck</span>(<span class="params">currentVal, previousVal</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> currentVal === previousVal</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p><code>defaultMemoize</code>å’Œ<code>createSelectorCreator</code>å»<a href="#é…ç½®-equalitycheck-for-defaultmemoize">é…ç½®<code>equalityCheck</code>å‡½æ•°</a>.</p>
<p>###createSelectorCreator(memoize,â€¦memoizeOptions)</p>
<p><code>createSelectorCreator</code>ç”¨æ¥é…ç½®å®šåˆ¶ç‰ˆæœ¬çš„<code>createSelector</code>.</p>
<p><code>memoize</code>å‚æ•°æ˜¯ä¸€ä¸ªæœ‰è®°å¿†åŠŸèƒ½çš„å‡½æ•°,æ¥ä»£æ›¿<code>defaultMemoize</code>.<br><code>â€¦memoizeOption</code>å±•å¼€çš„å‚æ•°æ˜¯0æˆ–è€…æ›´å¤šçš„é…ç½®é€‰é¡¹,è¿™äº›å‚æ•°ä¼ é€’ç»™<code>memoizeFunc</code>.selectors<code>resultFunc</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<code>memoize</code>,<code>memoizeOptions</code>ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(</div><div class="line">  customMemoize, <span class="comment">// function to be used to memoize resultFunc,è®°å¿†resultFunc</span></div><div class="line">  option1, <span class="comment">// option1 will be passed as second argument to customMemoize ç¬¬äºŒä¸ªæƒ¨å‘¼</span></div><div class="line">  option2, <span class="comment">// option2 will be passed as third argument to customMemoize ç¬¬ä¸‰ä¸ªå‚æ•°</span></div><div class="line">  option3 <span class="comment">// option3 will be passed as fourth argument to customMemoize   ç¬¬å››ä¸ªå‚æ•°</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> customSelector = customSelectorCreator(</div><div class="line">  input1,</div><div class="line">  input2,</div><div class="line">  resultFunc <span class="comment">// resultFunc will be passed as first argument to customMemoize  ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™customMomize</span></div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨<code>customSelecotr</code>å†…éƒ¨æ»´å•Šç”¨memoizeçš„å‡½æ•°çš„ä»£ç å¦‚ä¸‹:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">customMemoize(resultFunc, option1, option2, option3)</div></pre></td></tr></table></figure></p>
<hr>
<p>ä¸‹é¢æ˜¯å‡ ä¸ªå¯èƒ½ä¼šç”¨åˆ°çš„<code>createSelectorCreator</code>çš„å®ä¾‹:</p>
<p>####ä¸º<code>defaultMemoize</code>é…ç½®<code>equalityCheck</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.filter(<span class="function"><span class="params">val</span> =&gt;</span> val &lt; <span class="number">5</span>),</div><div class="line">  values =&gt; values.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>####ä½¿ç”¨loadshçš„memoizeå‡½æ•°æ¥ç¼“å­˜æœªç»‘å®šçš„ç¼“å­˜.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> called = <span class="number">0</span></div><div class="line"><span class="keyword">const</span> hashFn = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(</div><div class="line">  <span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + <span class="string">'-'</span> + <span class="built_in">JSON</span>.stringify(val),</div><div class="line">  <span class="string">''</span></div><div class="line">)</div><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(memoize, hashFn)</div><div class="line"><span class="keyword">const</span> selector = customSelectorCreator(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; &#123;</div><div class="line">    called++</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<h3 id="createStructuredSelector-inputSelectors-selectorCreator-createSelector"><a href="#createStructuredSelector-inputSelectors-selectorCreator-createSelector" class="headerlink" title="createStructuredSelector({inputSelectors}, selectorCreator = createSelector)"></a>createStructuredSelector({inputSelectors}, selectorCreator = createSelector)</h3><p>å¦‚æœåœ¨æ™®é€šçš„æ¨¡å¼ä¸‹ä½¿ç”¨<code>createStructuredSelector</code>å‡½æ•°å¯ä»¥æå‡ä¾¿åˆ©æ€§.ä¼ é€’åˆ°<code>connect</code>çš„selectorè£…é¥°è€…(è¿™æ˜¯jsè®¾è®¡æ¨¡å¼çš„æ¦‚å¿µ,å¯ä»¥å‚è€ƒç›¸å…³çš„ä¹¦ç±)æ¥å—ä»–çš„input-selectors,å¹¶ä¸”åœ¨ä¸€ä¸ªå¯¹è±¡å†…æ˜ å°„åˆ°ä¸€ä¸ªé”®ä¸Š.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="comment">// The result function in the following selector</span></div><div class="line"><span class="comment">// is simply building an object from the input selectors ç”±selectorsæ„å»ºçš„ä¸€ä¸ªå¯¹è±¡</span></div><div class="line"><span class="keyword">const</span> structuredSelector = createSelector(</div><div class="line">   mySelectorA,</div><div class="line">   mySelectorB,</div><div class="line">   mySelectorC,</div><div class="line">   (a, b, c) =&gt; (&#123;</div><div class="line">     a,</div><div class="line">     b,</div><div class="line">     c</div><div class="line">   &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p><code>createStructuredSelector</code>æ¥å—ä¸€ä¸ªå¯¹è±¡,è¿™ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯input-selectors,å‡½æ•°è¿”å›ä¸€ä¸ªç»“æ„æ€§çš„selector.è¿™ä¸ªç»“æ„æ€§çš„selectorè¿”å›ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡çš„é”®å’Œ<code>inputSelectors</code>çš„å‚æ•°æ˜¯ç›¸åŒçš„,ä½†æ˜¯ä½¿ç”¨selectorsä»£æ›¿äº†å…¶ä¸­çš„å€¼.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="keyword">const</span> structuredSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">x</span>: mySelectorA,</div><div class="line">  <span class="attr">y</span>: mySelectorB</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = structuredSelector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;) <span class="comment">// will produce &#123; x: 1, y: 2 &#125;</span></div></pre></td></tr></table></figure>
<hr>
<p>ç»“æ„æ€§çš„selectorså¯ä»¥æ˜¯åµŒå¥—å¼çš„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nestedSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">subA</span>: createStructuredSelector(&#123;</div><div class="line">    selectorA,</div><div class="line">    selectorB</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">subB</span>: createStructuredSelector(&#123;</div><div class="line">    selectorC,</div><div class="line">    selectorD</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>##FAQ</p>
<h3 id="Q-ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™-selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ"><a href="#Q-ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™-selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ" class="headerlink" title="Q:ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™,selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ"></a>Q:ä¸ºä»€ä¹ˆå½“è¾“å…¥çš„stateå‘ç”Ÿæ”¹å˜çš„æ—¶å€™,selectorä¸é‡æ–°è®¡ç®—ï¼Ÿ</h3><p>A:æ£€æŸ¥ä¸€ä¸‹ä½ çš„è®°å¿†éŸ©å¼æ˜¯ä¸æ˜¯å’Œä½ çš„stateæ›´æ–°å‡½æ•°ç›¸å…¼å®¹(ä¾‹å¦‚:å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Redux).ä¾‹å¦‚:ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectoræ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡,åŸæ¥æœŸå¾…çš„æ˜¯æ›´æ–°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡.<code>createSelector</code>ä½¿ç”¨(===)æ£€æµ‹è¾“å…¥æ˜¯å¦æ”¹å˜,å› æ­¤å¦‚æœæ”¹å˜ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡æ²¡æœ‰è§¦å‘selectoré‡æ–°è®¡ç®—çš„åŸå› æ˜¯æ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æ²¡æœ‰è§¦å‘ç›¸å…³çš„æ£€æµ‹.æç¤ºï¼šå¦‚æœä½ æ­£åœ¨ä½¿ç”¨Redux,æ”¹å˜ä¸€ä¸ªstateå¯¹è±¡çš„<a href="http://redux.js.org/docs/Troubleshooting.html" target="_blank" rel="external">é”™è¯¯å¯èƒ½æœ‰</a>.</p>
<p>ä¸‹é¢çš„å®ä¾‹å®šä¹‰äº†ä¸€ä¸ªselectorå¯ä»¥å†³å®šæ•°ç»„çš„ç¬¬ä¸€ä¸ªtodoé¡¹ç›®æ˜¯ä¸æ˜¯å·²ç»è¢«å®Œæˆ:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isFirstTodoCompleteSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.todos[<span class="number">0</span>],</div><div class="line">  todo =&gt; todo &amp;&amp; todo.completed</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>ä¸‹é¢çš„stateæ›´æ–°å‡½æ•°å’Œ<code>isFirstTodoCompleteSelector</code><strong>å°†ä¸ä¼š</strong>æ­£å¸¸å·¥ä½œå·¥ä½œ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// BAD: mutating an existing object</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      todo.completed = !areAllMarked</div><div class="line">      <span class="keyword">return</span> todo</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢çš„stateæ›´æ–°å‡½æ•°å’Œ<code>isFirstTodoComplete</code>ä¸€èµ·<strong>å¯ä»¥</strong>æ­£å¸¸å·¥ä½œ.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// GOOD: returning a new object each time with Object.assign</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, todo, &#123;</div><div class="line">      <span class="attr">completed</span>: !areAllMarked</div><div class="line">    &#125;))</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨Redux,ä½†æ˜¯æœ‰ä½¿ç”¨mutableæ•°æ®çš„éœ€æ±‚,ä½ å¯ä»¥ä½¿ç”¨<code>createSelectorCreator</code>ä»£æ›¿é»˜è®¤çš„è®°å¿†å‡½æ•°,å¹¶ä¸”ä½¿ç”¨ä¸åŒçš„ç­‰å€¼æ£€æµ‹å‡½æ•°.è¯·å‚çœ‹<a href="#use-memoize-function-from-lodash-for-an-unbounded-cache">è¿™é‡Œ</a> å’Œ <a href="#customize-equalitycheck-for-defaultmemoize">è¿™é‡Œ</a>ä½œä¸ºå‚è€ƒ.</p>
<p>###Q:ä¸ºä»€ä¹ˆinput stateæ²¡æœ‰æ”¹å˜çš„æ—¶å€™,selectorè¿˜æ˜¯ä¼šé‡æ–°è®¡ç®—?</p>
<p>A: æ£€æŸ¥ä¸€ä¸‹ä½ çš„è®°å¿†å‡½æ•°å’Œä½ ä½ çš„stateæ›´æ–°å‡½æ•°æ˜¯ä¸æ˜¯å…¼å®¹(å¦‚æœæ˜¯ä½¿ç”¨Reduxçš„æ—¶å€™,çœ‹çœ‹reducer).ä¾‹å¦‚:ä½¿ç”¨æ¯ä¸€æ¬¡æ›´æ–°çš„æ—¶å€™,ä¸ç®¡å€¼æ˜¯ä¸æ˜¯å‘ç”Ÿæ”¹å˜,<code>createSelector</code>åˆ›å»ºçš„selectoræ€»æ˜¯ä¼šæ”¶åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡.<code>createSelector</code>å‡½æ•°ä½¿ç”¨(<code>===</code>)æ£€æµ‹inputçš„å˜åŒ–,ç”±æ­¤å¯çŸ¥å¦‚æœæ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,è¡¨ç¤ºselectoræ€»æ˜¯åœ¨æ¯æ¬¡æ›´æ–°çš„æ—¶å€™é‡æ–°è®¡ç®—.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">return</span> state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢çš„selectoråœ¨æ¯ä¸€æ¬¡REMOVE_OLDè°ƒç”¨çš„æ—¶å€™,éƒ½ä¼šé‡æ–°è®¡ç®—,å› ä¸ºArray.filteræ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡.ä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹,REMOVE_OLD actionéƒ½ä¸ä¼šæ”¹å˜todoåˆ—è¡¨,æ‰€ä»¥é‡æ–°è®¡ç®—æ˜¯ä¸å¿…è¦çš„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> visibleTodosSelector = createSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>ä½ å¯ä»¥é€šè¿‡stateæ›´æ–°å‡½æ•°è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡æ¥å‡å°‘ä¸å¿…è¦çš„é‡è®¡ç®—æ“ä½œ,è¿™ä¸ªå¯¹è±¡æ‰§è¡Œæ·±åº¦ç­‰å€¼æ£€æµ‹,åªæœ‰æ·±åº¦ä¸ç›¸åŒçš„æ—¶å€™æ‰è¿”å›æ–°å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">const</span> updatedState =  state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> isEqual(updatedState, state) ? state : updatedState</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ›¿ä»£çš„æ–¹æ³•æ˜¯,åœ¨selectorä¸­ä½¿ç”¨æ·±åº¦æ£€æµ‹æ–¹æ³•æ›¿ä»£é»˜è®¤çš„<code>equalityCheck</code>å‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ£€æŸ¥<code>equalityCheck</code>å‡½æ•°çš„æ›´æ›¿æˆ–è€…åœ¨stateæ›´æ–°å‡½æ•°ä¸­åšæ·±åº¦æ£€æµ‹å¹¶ä¸æ€»æ˜¯æ¯”é‡è®¡ç®—çš„èŠ±é”€å°.å¦‚æœæ¯æ¬¡é‡è®¡ç®—çš„èŠ±é”€æ€»æ˜¯æ¯”è¾ƒå°,å¯èƒ½çš„åŸå› æ˜¯Reselectæ²¡æœ‰é€šè¿‡<code>connect</code>å‡½æ•°ä¼ é€’<code>mapStateProps</code>å•çº¯å¯¹è±¡çš„åŸå› .</p>
<h3 id="Q-æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ"><a href="#Q-æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ" class="headerlink" title="Q:æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ"></a>Q:æ²¡æœ‰Reduxçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨Reselectå—ï¼Ÿ</h3><p>A:å¯ä»¥.Reselectæ²¡æœ‰å…¶ä»–ä»»ä½•çš„ä¾èµ–åŒ…,å› æ­¤å°½ç®¡ä»–è®¾è®¡çš„å’ŒReduxæ¯”è¾ƒæ­é…,ä½†æ˜¯ç‹¬ç«‹ä½¿ç”¨ä¹Ÿæ˜¯å¯ä»¥çš„.ç›®å‰çš„ç‰ˆæœ¬åœ¨ä¼ ç»Ÿçš„Flux APPä¸‹ä½¿ç”¨æ˜¯æ¯”è¾ƒæˆåŠŸçš„.</p>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„selectors,éœ€è¦ç¡®ä¿ä»–çš„å‚æ•°æ˜¯immutableçš„.</p>
<p>çœ‹<a href="#createselectorinputselectors--inputselectors-resultfunc">è¿™é‡Œ</a></p>
</blockquote>
<h3 id="Q-æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector"><a href="#Q-æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector" class="headerlink" title="Q:æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector."></a>Q:æ€ä¹ˆæ‰èƒ½åˆ›å»ºä¸€ä¸ªæ¥æ”¶å‚æ•°çš„selector.</h3><p>A:Reselectæ²¡æœ‰æ”¯æŒåˆ›å»ºæ¥æ”¶å‚æ•°çš„selectors,ä½†æ˜¯è¿™é‡Œæœ‰ä¸€äº›å®ç°ç±»ä¼¼å‡½æ•°åŠŸèƒ½çš„å»ºè®®.</p>
<p>å¦‚æœå‚æ•°ä¸æ˜¯åŠ¨æ€çš„,ä½ å¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> expensiveItemSelectorFactory = <span class="function"><span class="params">minValue</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    shopItemsSelector,</div><div class="line">    items =&gt; items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  expensiveItemSelectorFactory(<span class="number">200</span>),</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<hr>
<p>æ€»çš„è¾¾æˆå…±è¯†<a href="https://github.com/reactjs/reselect/issues/38" target="_blank" rel="external">çœ‹è¿™é‡Œ</a>å’Œ<a href="https://github.com/optimizely/nuclear-js/issues/14" target="_blank" rel="external">è¶…è¶Š neclear-js</a>æ˜¯:å¦‚æœä¸€ä¸ªselectoréœ€è¦åŠ¨æ€çš„å‚æ•°,é‚£ä¹ˆå‚æ•°åº”è¯¥æ˜¯storeä¸­çš„state.å¦‚æœä½ å†³å®šå¥½äº†åœ¨åº”ç”¨ä¸­ä½¿ç”¨åŠ¨æ€å‚æ•°,åƒä¸‹é¢è¿™æ ·è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°æ˜¯æ¯”è¾ƒåˆé€‚çš„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.items,</div><div class="line">  items =&gt; memoize(</div><div class="line">    <span class="function"><span class="params">minValue</span> =&gt;</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveFilter = expensiveSelector(state)</div><div class="line"></div><div class="line"><span class="keyword">const</span> slightlyExpensive = expensiveFilter(<span class="number">100</span>)</div><div class="line"><span class="keyword">const</span> veryExpensive = expensiveFilter(<span class="number">1000000</span>)</div></pre></td></tr></table></figure>
<hr>
<h3 id="Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½-æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ"><a href="#Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½-æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ" class="headerlink" title="Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½,æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ"></a>Qï¼šé»˜è®¤çš„è®°å¿†å‡½æ•°ä¸å¤ªå¥½,æˆ‘èƒ½ç”¨ä¸ªå…¶ä»–çš„å—ï¼Ÿ</h3><p>A: æˆ‘è®¤ä¸ºè¿™ä¸ªè®°å¿†éŸ©å¼å·¥ä½œçš„è¿˜å¯ä»¥,ä½†æ˜¯å¦‚æœä½ éœ€è¦ä¸€ä¸ªå…¶ä»–çš„éŸ©å¼ä¹Ÿæ˜¯å¯ä»¥çš„.<br>å¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="#customize-equalitycheck-for-defaultmemoize">ä¾‹å­</a></p>
<h3 id="Q-æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector"><a href="#Q-æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector" class="headerlink" title="Q:æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector?"></a>Q:æ€ä¹ˆæ‰èƒ½æµ‹è¯•ä¸€ä¸ªselector?</h3><p>A:å¯¹äºä¸€ä¸ªç»™å®šçš„input,ä¸€ä¸ªselectoræ€»æ˜¯äº§å‡ºç›¸åŒçš„ç»“æœ.åŸºäºè¿™ä¸ªåŸå› ,åšå•å…ƒæµ‹è¯•æ˜¯éå¸¸ç®€å•çš„.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> selector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; (&#123;</div><div class="line">    <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">    <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">  &#125;)</div><div class="line">)</div><div class="line"></div><div class="line">test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">2</span>, <span class="attr">d</span>: <span class="number">6</span> &#125;)</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨stateæ›´æ–°å‡½æ•°è°ƒç”¨çš„æ—¶å€™åŒæ—¶æ£€æµ‹selectorçš„è®°å¿†å‡½æ•°çš„åŠŸèƒ½ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„(ä¾‹å¦‚ ä½¿ç”¨Reduxçš„æ—¶å€™æ£€æŸ¥reducer).æ¯ä¸€ä¸ªselectoréƒ½æœ‰ä¸€ä¸ª<code>recomputations</code>æ–¹æ³•è¿”å›é‡æ–°è®¡ç®—çš„æ¬¡æ•°:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">suite(<span class="string">'selector'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">let</span> state = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">a</span>: action(state.a),</div><div class="line">      <span class="attr">b</span>: action(state.b)</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> selector = createSelector(</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">    state =&gt; state.b,</div><div class="line">    (a, b) =&gt; (&#123;</div><div class="line">      <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">      <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> plusOne = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line">  <span class="keyword">const</span> id = <span class="function"><span class="params">x</span> =&gt;</span> x</div><div class="line"></div><div class="line">  test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    state = reducer(state, id)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">1</span>)</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">6</span>, <span class="attr">d</span>: <span class="number">12</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">2</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<hr>
<p>å¦å¤–,selectorsä¿ç•™äº†æœ€åä¸€ä¸ªå‡½æ•°è°ƒç”¨ç»“æœçš„å¼•ç”¨,è¿™ä¸ªå¼•ç”¨ä½œä¸º<code>.resultFunc</code>.å¦‚æœä½ å·²ç»èšåˆäº†å…¶ä»–çš„selectors,è¿™ä¸ªå‡½æ•°å¼•ç”¨å¯ä»¥å¸®åŠ©ä½ æµ‹è¯•æ¯ä¸€ä¸ªselector,ä¸éœ€è¦ä»stateä¸­è§£è€¦æµ‹è¯•.</p>
<p>ä¾‹å¦‚å¦‚æœä½ çš„selectorsé›†åˆåƒä¸‹é¢è¿™æ ·:<br><strong>selectors.js</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> firstSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> thirdSelector = createSelector( ... )</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> myComposedSelector = createSelector(</div><div class="line">  firstSelector,</div><div class="line">  secondSelector,</div><div class="line">  thirdSelector,</div><div class="line">  (first, second, third) =&gt; first * second &lt; third</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p>å•å…ƒæµ‹è¯•å°±åƒä¸‹é¢è¿™æ ·:<br><strong>test/selectors.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// tests for the first three selectors...</span></div><div class="line">test(<span class="string">"firstSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"secondSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"thirdSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line"></div><div class="line"><span class="comment">// We have already tested the previous</span></div><div class="line"><span class="comment">// three selector outputs so we can just call `.resultFunc`</span></div><div class="line"><span class="comment">// with the values we want to test directly:</span></div><div class="line">test(<span class="string">"myComposedSelector unit test"</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// here instead of calling selector()</span></div><div class="line">  <span class="comment">// we just call selector.resultFunc()</span></div><div class="line">  assert(selector.resultFunc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="literal">true</span>)</div><div class="line">  assert(selector.resultFunc(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<hr>
<p>æœ€å,æ¯ä¸€ä¸ªselectoræœ‰ä¸€ä¸ª<code>resetRecomputations</code>æ–¹æ³•,é‡ç½®recomputationsæ–¹æ³•ä¸º0,è¿™ä¸ªå‚æ•°çš„æ„å›¾æ˜¯åœ¨é¢å¯¹å¤æ‚çš„selectorçš„æ—¶å€™,éœ€è¦å¾ˆå¤šç‹¬ç«‹çš„æµ‹è¯•,ä½ ä¸éœ€è¦ç®¡ç†å¤æ‚çš„æ‰‹å·¥è®¡ç®—,æˆ–è€…ä¸ºæ¯ä¸€ä¸ªæµ‹è¯•åˆ›å»ºâ€å‚»ç“œâ€selector.</p>
<h3 id="Q-Reselectæ€ä¹ˆå’ŒImmutble-jsä¸€èµ·ä½¿ç”¨"><a href="#Q-Reselectæ€ä¹ˆå’ŒImmutble-jsä¸€èµ·ä½¿ç”¨" class="headerlink" title="Q:Reselectæ€ä¹ˆå’ŒImmutble.jsä¸€èµ·ä½¿ç”¨?"></a>Q:Reselectæ€ä¹ˆå’ŒImmutble.jsä¸€èµ·ä½¿ç”¨?</h3><p>A:<code>creatSelector</code>åˆ›å»ºçš„Selectorsåº”è¯¥å¯ä»¥å’ŒImmutable.jsæ•°æ®ç»“æ„ä¸€èµ·å®Œç¾çš„å·¥ä½œ.<br>å¦‚æœä½ çš„selectoræ­£åœ¨é‡è®¡ç®—,å¹¶ä¸”ä½ è®¤ä¸ºstateæ²¡æœ‰å‘ç”Ÿå˜åŒ–,ä¸€å®šè¦ç¡®ä¿çŸ¥é“å“ªä¸€ä¸ªImmutable.jsæ›´æ–°æ–¹æ³•,è¿™ä¸ªæ–¹æ³•åªè¦ä¸€æ›´æ–°<strong>æ€»æ˜¯</strong>è¿”å›æ–°å¯¹è±¡.å“ªä¸€ä¸ªæ–¹æ³•åªæœ‰<strong>é›†åˆå®é™…å‘ç”Ÿå˜åŒ–çš„æ—¶å€™</strong>æ‰è¿”å›æ–°å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'immutable'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myMap = Immutable.Map(&#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"> <span class="comment">// set, merge and others only return a new obj when update changes collection</span></div><div class="line"><span class="keyword">let</span> newMap = myMap.set(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line">newMap = myMap.merge(&#123; <span class="string">'a'</span>, <span class="number">1</span> &#125;)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line"><span class="comment">// map, reduce, filter and others always return a new obj</span></div><div class="line">newMap = myMap.map(<span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">1</span>)</div><div class="line">assert.notEqual(myMap, newMap)</div></pre></td></tr></table></figure>
<hr>
<p>å¦‚æœä¸€ä¸ªæ“ä½œå¯¼è‡´çš„selectoræ›´æ–°æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡,å¯èƒ½ä¼šå‘ç”Ÿä¸å¿…è¦çš„é‡è®¡ç®—.<a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">çœ‹è¿™é‡Œ</a>.è¿™æ˜¯ä¸€ä¸ªå…³äºprosçš„è®¨è®º,ä½¿ç”¨æ·±å…¨ç­‰äºæ¥æ£€æµ‹ä¾‹å¦‚<code>immutable.js</code>æ¥å‡å°‘ä¸å¿…è¦çš„é‡è®¡ç®—è¿‡ç¨‹.</p>
<h3 id="Q-å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ"><a href="#Q-å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ" class="headerlink" title="Q:å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ"></a>Q:å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«selectorå—ï¼Ÿ</h3><p>A: ä½¿ç”¨<code>createSelector</code>åˆ›å»ºçš„Selectorçš„ç¼“å­˜çš„å¤§å°åªæœ‰1.è¿™ä¸ªè®¾å®šä½¿å¾—å¤šä¸ªç»„ä»¶çš„å®ä¾‹ä¹‹é—´çš„å‚æ•°ä¸åŒ,è·¨ç»„ä»¶å…±äº«selectorå˜å¾—ä¸åˆé€‚.è¿™é‡Œä¹Ÿæœ‰å‡ ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>
<ul>
<li>ä½¿ç”¨å·¥ç¨‹å‡½æ•°æ–¹æ³•,ä¸ºæ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„selector.è¿™é‡Œæœ‰ä¸€ä¸ªå†…å»ºçš„å·¥å‚æ–¹æ³•,React Redux v4.3æˆ–è€…æ›´é«˜ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨. <a href="#sharing-selectors-with-props-across-multiple-components">çœ‹è¿™é‡Œ</a></li>
<li>åˆ›å»ºä¸€ä¸ªç¼“å­˜å°ºå¯¸å¤§äº1çš„å®šåˆ¶selector.</li>
</ul>
<h3 id="Q-æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ"><a href="#Q-æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ" class="headerlink" title="Q:æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ"></a>Q:æœ‰TypeScriptçš„ç±»å‹å—ï¼Ÿ</h3><p>A: æ˜¯çš„ï¼ä»–ä»¬åŒ…å«åœ¨<code>package.json</code>é‡Œ.å¯ä»¥å¾ˆå¥½çš„å·¥ä½œ.</p>
<h3 id="Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector"><a href="#Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector" class="headerlink" title="Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ªæŸ¯é‡ŒåŒ–selector?"></a>Qï¼šæ€ä¹ˆæ„å»ºä¸€ä¸ª<a href="https://github.com/hemanth/functional-programming-jargon#currying" target="_blank" rel="external">æŸ¯é‡ŒåŒ–</a>selector?</h3><p>Aï¼šå°è¯•ä¸€äº›è¿™é‡Œ<a href="https://github.com/reactjs/reselect/issues/159#issuecomment-238724788" target="_blank" rel="external">åŠ©æ‰‹å‡½æ•°</a>,ç”±<a href="https://github.com/MattSPalmer" target="_blank" rel="external">MattSPalmer</a>æä¾›</p>
<h2 id="æœ‰å…³çš„é¡¹ç›®"><a href="#æœ‰å…³çš„é¡¹ç›®" class="headerlink" title="æœ‰å…³çš„é¡¹ç›®"></a>æœ‰å…³çš„é¡¹ç›®</h2><h3 id="reselect-map"><a href="#reselect-map" class="headerlink" title="reselect-map"></a><a href="https://github.com/HeyImAlex/reselect-map" target="_blank" rel="external">reselect-map</a></h3><p>å› ä¸ºReselectä¸å¯èƒ½ä¿è¯ç¼“å­˜ä½ æ‰€æœ‰çš„éœ€æ±‚,åœ¨åš<strong>éå¸¸æ˜‚è´µçš„è®¡ç®—</strong>çš„æ—¶å€™,è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæœ‰ç”¨.æŸ¥çœ‹ä¸€ä¸‹reselect-maps readme</p>
<p><strong>reselect-mapçš„ä¼˜åŒ–æªæ–½ä»…ä»…ä½¿ç”¨åœ¨ä¸€äº›å°çš„æ¡ˆä¾‹ä¸­,å¦‚æœä½ ä¸ç¡®å®šæ˜¯ä¸æ˜¯éœ€è¦ä»–,å°±ä¸è¦ä½¿ç”¨å®ƒ</strong>.</p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptä¸­çš„thiså…³é”®å­—]]></title>
      <url>http://yoursite.com/2017/03/08/javascript%E4%B8%AD%E7%9A%84this%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      <content type="html"><![CDATA[<p>å‰é¢å¯¹è¿™ä¸ªé—®é¢˜æ€»æ˜¯é›¾é‡Œçœ‹èŠ±ï¼ŒåƒğŸŒ§åƒé›¾åˆåƒé£ã€‚æœ€è¿‘ç»¼åˆç€çœ‹äº†ä¸€äº›ä¹¦å’Œæ–‡ç« æ‰ç®—æ˜¯åŸºæœ¬ææ¸…æ¥šäº†ã€‚<br>ä¸»è¦å‚è€ƒã€Šjavascrptè®¾è®¡æ¨¡å¼ä¸å¼€å‘æŒ‡å—ã€‹</p>
<p>javascript(ç¼©å†™js)è¯­è¨€ä¸­çš„thiså’Œjava,phpä¸­çš„thisæ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚<br>jsä¸­çš„thisæ˜¯åŠ¨æ€çš„ï¼Œæ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡æ˜¯è°ï¼Œéœ€è¦æ ¹æ®å‡½æ•°çš„è°ƒç”¨ä¸Šä¸‹æ–‡æ¥å†³å®šã€‚</p>
<ol>
<li>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨(æ˜¾ç¤ºç»‘å®š)</li>
<li>ä½œä¸ºæ™®é€šçš„å‡½æ•°æ¥è°ƒç”¨(é»˜è®¤ç»‘å®š)</li>
<li>ä½œä¸ºæ„é€ å™¨æ¥è°ƒç”¨</li>
<li>callå’Œapplyæ–¹æ³•è°ƒç”¨</li>
</ol>
<p>1ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">		<span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">		<span class="attr">getA</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			alert ( <span class="keyword">this</span> === obj ); <span class="comment">// è¾“å‡ºï¼štrue</span></div><div class="line">			alert ( <span class="keyword">this</span>.a ); <span class="comment">// è¾“å‡º: 1</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	obj.getA();  <span class="comment">//å‡½æ•°è¢«ç»‘å®šåœ¨å¯¹è±¡objä¸Šï¼ŒthisæŒ‡å‘objå¯¹è±¡</span></div><div class="line">	<span class="comment">//è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥ç«‹å³çœ‹åˆ°ç»‘å®šçš„å¯¹è±¡æ˜¯é‚£ä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯æœ€ç®€å•çš„</span></div></pre></td></tr></table></figure></p>
<p>2ä½œä¸ºæ™®é€šå‡½æ•°çš„è°ƒç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//åœ¨æµè§ˆå™¨çš„JavaScript é‡Œï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯window å¯¹è±¡ã€‚</span></div><div class="line">	<span class="built_in">window</span>.name = <span class="string">'globalName'</span>;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//è¿™ä¸ªå‡½æ•°æ²¡æœ‰æŒ‡å®šå¯¹è±¡ï¼Œé»˜è®¤ç»‘å®šåœ¨windowå¯¹è±¡ä¸Š</span></div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">	&#125;;</div><div class="line">	<span class="built_in">console</span>.log( getName() ); <span class="comment">// è¾“å‡ºï¼šglobalName</span></div><div class="line"></div><div class="line">	<span class="comment">//æˆ–è€…ï¼š</span></div><div class="line">	<span class="built_in">window</span>.name = <span class="string">'globalName'</span>;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> myObject = &#123;</div><div class="line">		<span class="attr">name</span>: <span class="string">'sven'</span>,</div><div class="line">		<span class="attr">getName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">  <span class="comment">//ä¸‹é¢è¿™ä¸ªå¼•ç”¨æ˜¯æ¯”è¾ƒè¿·æƒ‘äººçš„ï¼Œåœ¨ç”¨å˜é‡å¼•ç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ—¶å€™ï¼Œå˜é‡ä»…ä»…æŒ‡å‘å‡½æ•°æœ¬èº«ï¼Œå’ŒåŸæ¥å‡½æ•°å®šä¹‰åœ¨å“ªä¸ªå¯¹è±¡é‡Œæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„</span></div><div class="line">	<span class="keyword">var</span> getName = myObject.getName; <span class="comment">//getNameå‡½æ•°ä»»ç„¶æ˜¯é»˜è®¤ç»‘å®šåœ¨windowå…¨å±€å¯¹è±¡ä¸Š</span></div><div class="line">	<span class="built_in">console</span>.log( getName() ); <span class="comment">// globalName</span></div></pre></td></tr></table></figure></p>
<p><code>ä¸‹é¢è¿™ä¸ªå®ä¾‹ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºæ˜¯js thisä¸­æœ€ä¸ºè¿·æƒ‘çš„åœ°æ–¹ï¼Œéœ€è¦æ³¨æ„ï¼Œå¯èƒ½å­¦äº†å¾ˆé•¿æ—¶é—´éƒ½å¯¹è¿™ä¸ªåœ°æ–¹è¿·æƒ‘ï¼Œæ²¡æœ‰ä»€ä¹ˆåŸå› ï¼Œjså°±æ˜¯è¿™ä¹ˆè§„å®šçš„ã€‚</code></p>
<p><code>é‚£ï¼Œåˆ°åº•è§„å®šä»€ä¹ˆäº†ï¼Ÿå°±æ˜¯ å‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯é—­åŒ…å‡½æ•°çš„å¯¹è±¡æ˜¯é»˜è®¤ç»‘å®šåœ¨å…¨å±€ï¼Œå…¨å±€ï¼Œå…¨å±€ å¯¹è±¡ä¸Šçš„ï¼Œä¸€å®šï¼Œä¸€å®šï¼Œä¸€å®š è¦è®°ä½è¿™ä¸€ç‚¹</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">	<span class="built_in">window</span>.id = <span class="string">'window'</span>;</div><div class="line"></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'div1'</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		alert ( <span class="keyword">this</span>.id ); <span class="comment">// è¾“å‡ºï¼š'div1'</span></div><div class="line">		<span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œä»–æ˜¯é»˜è®¤ç»‘å®šåœ¨windowä¸Šçš„</span></div><div class="line">			alert ( <span class="keyword">this</span>.id ); <span class="comment">// è¾“å‡ºï¼š'window' </span></div><div class="line">		&#125;</div><div class="line">		callback();</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">  <span class="comment">//é‚£ä¹ˆè¦æ˜¯å†…éƒ¨å‡½æ•°è¦ä½¿ç”¨å¤–éƒ¨å‡½æ•°ç»‘å®šçš„å¯¹è±¡æ€ä¹ˆåŠã€‚</span></div><div class="line">  <span class="comment">//å¥½åŠï¼Œå°±æ˜¯æŠŠå¤–éƒ¨å‡½æ•°çš„å¯¹è±¡ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­</span></div><div class="line">  <span class="comment">//ç»å¸¸åœ¨ä»£ç ä¸­çœ‹åˆ°çš„ var that=thiså°±æ˜¯è¿™ä¸ªä½œç”¨</span></div><div class="line">  <span class="comment">//åœ¨å†…éƒ¨å‡½æ•°è¦ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥ç”¨thatäº†ã€‚æˆ–è€…ç”¨ var  self=this </span></div><div class="line">  <span class="comment">//è¿™ä»…ä»…æ˜¯å˜é‡çš„åå­—ä¸åŒï¼Œé“ç†éƒ½ä¸€æ ·</span></div><div class="line">	<span class="built_in">document</span>.getElementById( <span class="string">'div1'</span> ).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// ä¿å­˜div çš„å¼•ç”¨</span></div><div class="line">		<span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			alert ( that.id ); <span class="comment">// è¾“å‡ºï¼š'div1'  //thatæŒ‡å‘äº†å¤–éƒ¨å‡½æ•°çš„å¯¹è±¡</span></div><div class="line">		&#125;</div><div class="line">		callback();</div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<p>åœ¨ ECMA es5çš„ä¸¥æ ¼æ¨¡å¼ä¸‹<br>é—®é¢˜åˆæœ‰æ”¹å˜äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">use strict </div><div class="line"></div><div class="line">è¿™æ—¶å€™ï¼Œå†…éƒ¨å‡½æ•°çš„<span class="keyword">this</span>ä¸åœ¨é»˜è®¤æŒ‡å‘<span class="built_in">window</span>å¯¹è±¡ï¼Œè€Œæ˜¯æŒ‡å‘undefineï¼Œå®é™…å°±æ˜¯æ²¡æœ‰é»˜è®¤ç»‘å®šå¯¹è±¡ã€‚</div></pre></td></tr></table></figure>
<p>3æ„é€ å™¨è°ƒç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = <span class="string">'sven'</span>;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass();  <span class="comment">//å½“ä½¿ç”¨æ„é€ å™¨è°ƒç”¨çš„æ—¶å€™ï¼Œæ„é€ å™¨è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªå¯¹è±¡</span></div><div class="line">	alert ( obj.name ); <span class="comment">// è¾“å‡ºï¼šsven</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = <span class="string">'sven'</span>;</div><div class="line">		<span class="keyword">return</span> &#123; <span class="comment">// æ˜¾å¼åœ°è¿”å›ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">			name: <span class="string">'anne'</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div></pre></td></tr></table></figure></p>
<p>4call apply è°ƒç”¨<br>ç¡¬å¼ç»‘å®šï¼Œé€šè¿‡ä¼ å‚æ–¹å¼åŠ¨æ€æ”¹å˜å‡½æ•°çš„ç»‘å®šå¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> obj1 = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">'sven'</span>,</div><div class="line">	<span class="attr">getName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">	<span class="attr">name</span>: <span class="string">'anne'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( obj1.getName() ); <span class="comment">// è¾“å‡º: sven</span></div><div class="line"><span class="comment">//ä¸‹é¢è¿™ä¸ªå‡½æ•°ç¡¬å¼ç»‘å®šåˆ°obj2å¯¹è±¡ä¸Š</span></div><div class="line"><span class="built_in">console</span>.log( obj1.getName.call( obj2 ) ); <span class="comment">// è¾“å‡ºï¼šanne</span></div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯thisã€‚</p>
<p>å…³é”®å­—çš„å†…å®¹ï¼Œå…³é”®çš„åœ°æ–¹æ˜¯å¯¹æ¦‚å¿µæœ‰ä¸€å®šåƒé€ï¼Œå‡ºé—®é¢˜éƒ½æ˜¯æ¦‚å¿µä¸æ¸…æ¥šå¼•èµ·çš„</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Redux-reselect]]></title>
      <url>http://yoursite.com/2017/03/08/Reselect/</url>
      <content type="html"><![CDATA[<p><a href="https://travis-ci.org/reactjs/reselect" target="_blank" rel="external"><img src="https://img.shields.io/travis/reactjs/reselect/master.svg?style=flat-square" alt="Travis"></a><br><a href="https://www.npmjs.org/package/reselect" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/reselect.svg?style=flat-square" alt="npm package"></a><br><a href="https://coveralls.io/github/reactjs/reselect" target="_blank" rel="external"><img src="https://img.shields.io/coveralls/reactjs/reselect/master.svg?style=flat-square" alt="Coveralls"></a></p>
<p>Simple â€œselectorâ€ library for Redux inspired by getters in <a href="https://github.com/optimizely/nuclear-js.git" target="_blank" rel="external">NuclearJS</a>, <a href="https://github.com/Day8/re-frame#just-a-read-only-cursor" target="_blank" rel="external">subscriptions</a> in <a href="https://github.com/Day8/re-frame" target="_blank" rel="external">re-frame</a> and this <a href="https://github.com/gaearon/redux/pull/169" target="_blank" rel="external">proposal</a> from <a href="https://github.com/speedskater" target="_blank" rel="external">speedskater</a>.</p>
<ul>
<li>Selectors can compute derived data, allowing Redux to store the minimal possible state.</li>
<li>Selectors are efficient. A selector is not recomputed unless one of its arguments change.</li>
<li>Selectors are composable. They can be used as input to other selectors.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> shopItemsSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.items</div><div class="line"><span class="keyword">const</span> taxPercentSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.shop.taxPercent</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  shopItemsSelector,</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> taxSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxPercentSelector,</div><div class="line">  (subtotal, taxPercent) =&gt; subtotal * (taxPercent / <span class="number">100</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  subtotalSelector,</div><div class="line">  taxSelector,</div><div class="line">  (subtotal, tax) =&gt; (&#123; <span class="attr">total</span>: subtotal + tax &#125;)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">let</span> exampleState = &#123;</div><div class="line">  <span class="attr">shop</span>: &#123;</div><div class="line">    <span class="attr">taxPercent</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">items</span>: [</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">value</span>: <span class="number">1.20</span> &#125;,</div><div class="line">      &#123; <span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">value</span>: <span class="number">0.95</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(subtotalSelector(exampleState)) <span class="comment">// 2.15</span></div><div class="line"><span class="built_in">console</span>.log(taxSelector(exampleState))      <span class="comment">// 0.172</span></div><div class="line"><span class="built_in">console</span>.log(totalSelector(exampleState))    <span class="comment">// &#123; total: 2.322 &#125;</span></div></pre></td></tr></table></figure>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#example">Example</a><ul>
<li><a href="#motivation-for-memoized-selectors">Motivation for Memoized Selectors</a></li>
<li><a href="#creating-a-memoized-selector">Creating a Memoized Selector</a></li>
<li><a href="#composing-selectors">Composing Selectors</a></li>
<li><a href="#connecting-a-selector-to-the-redux-store">Connecting a Selector to the Redux Store</a></li>
<li><a href="#accessing-react-props-in-selectors">Accessing React Props in Selectors</a></li>
<li><a href="#sharing-selectors-with-props-across-multiple-components">Sharing Selectors with Props Across Multiple Components</a></li>
</ul>
</li>
<li><a href="#api">API</a><ul>
<li><a href="#createselectorinputselectors--inputselectors-resultfunc"><code>createSelector</code></a></li>
<li><a href="#defaultmemoizefunc-equalitycheck--defaultequalitycheck"><code>defaultMemoize</code></a></li>
<li><a href="#createselectorcreatormemoize-memoizeoptions"><code>createSelectorCreator</code></a></li>
<li><a href="#createstructuredselectorinputselectors-selectorcreator--createselector"><code>createStructuredSelector</code></a></li>
</ul>
</li>
<li><p><a href="#faq">FAQ</a></p>
<ul>
<li><a href="#q-why-isnt-my-selector-recomputing-when-the-input-state-changes">Why isnâ€™t my selector recomputing when the input state changes?</a></li>
<li><a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">Why is my selector recomputing when the input state stays the same?</a></li>
<li><a href="#q-can-i-use-reselect-without-redux">Can I use Reselect without Redux?</a></li>
<li><a href="#q-the-default-memoization-function-is-no-good-can-i-use-a-different-one">The default memoization function is no good, can I use a different one?</a></li>
<li><a href="#q-how-do-i-test-a-selector">How do I test a selector?</a></li>
<li><a href="#q-how-do-i-create-a-selector-that-takes-an-argument">How do I create a selector that takes an argument? </a></li>
<li><a href="#q-how-do-i-use-reselect-with-immutablejs">How do I use Reselect with Immutable.js?</a></li>
<li><a href="#q-can-i-share-a-selector-across-multiple-components">Can I share a selector across multiple components?</a></li>
<li><a href="#q-are-there-typescript-typings">Are there TypeScript typings?</a></li>
<li><a href="#q-how-can-i-make-a-curried-selector">How can I make a curried selector?</a></li>
</ul>
</li>
<li><p><a href="#related-projects">Related Projects</a></p>
</li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code>npm install reselect
</code></pre><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Motivation-for-Memoized-Selectors"><a href="#Motivation-for-Memoized-Selectors" class="headerlink" title="Motivation for Memoized Selectors"></a>Motivation for Memoized Selectors</h3><blockquote>
<p>The examples in this section are based on the <a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux Todos List example</a>.</p>
</blockquote>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span> (filter) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">      <span class="keyword">return</span> todos</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">    <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">      <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state.todos, state.visibilityFilter)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<p>In the above example, <code>mapStateToProps</code> calls <code>getVisibleTodos</code> to calculate <code>todos</code>. This works great, but there is a drawback: <code>todos</code> is calculated every time the component is updated. If the state tree is large, or the calculation expensive, repeating the calculation on every update may cause performance problems. Reselect can help to avoid these unnecessary recalculations.</p>
<h3 id="Creating-a-Memoized-Selector"><a href="#Creating-a-Memoized-Selector" class="headerlink" title="Creating a Memoized Selector"></a>Creating a Memoized Selector</h3><p>We would like to replace <code>getVisibleTodos</code> with a memoized selector that recalculates <code>todos</code> when the value of <code>state.todos</code> or <code>state.visibilityFilter</code> changes, but not when changes occur in other (unrelated) parts of the state tree.</p>
<p>Reselect provides a function <code>createSelector</code> for creating memoized selectors. <code>createSelector</code> takes an array of input-selectors and a transform function as its arguments. If the Redux state tree is mutated in a way that causes the value of an input-selector to change, the selector will call its transform function with the values of the input-selectors as arguments and return the result. If the values of the input-selectors are the same as the previous call to the selector, it will return the previously computed value instead of calling the transform function.</p>
<p>Letâ€™s define a memoized selector named <code>getVisibleTodos</code> to replace the non-memoized version above:</p>
<h4 id="selectors-index-js"><a href="#selectors-index-js" class="headerlink" title="selectors/index.js"></a><code>selectors/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state</span>) =&gt;</span> state.visibilityFilter</div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state</span>) =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ALL'</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> t.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">t</span> =&gt;</span> !t.completed)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>In the example above, <code>getVisibilityFilter</code> and <code>getTodos</code> are input-selectors. They are created as ordinary non-memoized selector functions because they do not transform the data they select. <code>getVisibleTodos</code> on the other hand is a memoized selector. It takes <code>getVisibilityFilter</code> and <code>getTodos</code> as input-selectors, and a transform function that calculates the filtered todos list.</p>
<h3 id="Composing-Selectors"><a href="#Composing-Selectors" class="headerlink" title="Composing Selectors"></a>Composing Selectors</h3><p>A memoized selector can itself be an input-selector to another memoized selector. Here is <code>getVisibleTodos</code> being used as an input-selector to a selector that further filters the todos by keyword:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getKeyword = <span class="function">(<span class="params">state</span>) =&gt;</span> state.keyword</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodosFilteredByKeyword = createSelector(</div><div class="line">  [ getVisibleTodos, getKeyword ],</div><div class="line">  (visibleTodos, keyword) =&gt; visibleTodos.filter(</div><div class="line">    <span class="function"><span class="params">todo</span> =&gt;</span> todo.text.indexOf(keyword) &gt; <span class="number">-1</span></div><div class="line">  )</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="Connecting-a-Selector-to-the-Redux-Store"><a href="#Connecting-a-Selector-to-the-Redux-Store" class="headerlink" title="Connecting a Selector to the Redux Store"></a>Connecting a Selector to the Redux Store</h3><p>If you are using <a href="https://github.com/reactjs/react-redux" target="_blank" rel="external">React Redux</a>, you can call selectors as regular functions inside <code>mapStateToProps()</code>:</p>
<h4 id="containers-VisibleTodoList-js-1"><a href="#containers-VisibleTodoList-js-1" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<h3 id="Accessing-React-Props-in-Selectors"><a href="#Accessing-React-Props-in-Selectors" class="headerlink" title="Accessing React Props in Selectors"></a>Accessing React Props in Selectors</h3><blockquote>
<p>This section introduces a hypothetical extension to our app that allows it to support multiple Todo Lists. Please note that a full implementation of this extension requires changes to the reducers, components, actions etc. that arenâ€™t directly relevant to the topics discussed and have been omitted for brevity.</p>
</blockquote>
<p>So far we have only seen selectors receive the Redux store state as an argument, but a selector can receive props too.</p>
<p>Here is an <code>App</code> component that renders three <code>VisibleTodoList</code> components, each of which has a <code>listId</code> prop:</p>
<h4 id="components-App-js"><a href="#components-App-js" class="headerlink" title="components/App.js"></a><code>components/App.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./Footer'</span></div><div class="line"><span class="keyword">import</span> AddTodo <span class="keyword">from</span> <span class="string">'../containers/AddTodo'</span></div><div class="line"><span class="keyword">import</span> VisibleTodoList <span class="keyword">from</span> <span class="string">'../containers/VisibleTodoList'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;VisibleTodoList listId="1" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="2" /&gt;</div><div class="line">    &lt;VisibleTodoList listId="3" /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Each <code>VisibleTodoList</code> container should select a different slice of the state depending on the value of the <code>listId</code> prop, so letâ€™s modify <code>getVisibilityFilter</code> and <code>getTodos</code> to accept a props argument:</p>
<h4 id="selectors-todoSelectors-js"><a href="#selectors-todoSelectors-js" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibleTodos = createSelector(</div><div class="line">  [ getVisibilityFilter, getTodos ],</div><div class="line">  (visibilityFilter, todos) =&gt; &#123;</div><div class="line">    <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">      <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">        <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">      <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">return</span> todos</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> getVisibleTodos</div></pre></td></tr></table></figure>
<p><code>props</code> can be passed to <code>getVisibleTodos</code> from <code>mapStateToProps</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>So now <code>getVisibleTodos</code> has access to <code>props</code>, and everything seems to be working fine.</p>
<p><strong>But there is a problem!</strong></p>
<p>Using the <code>getVisibleTodos</code> selector with multiple instances of the <code>VisibleTodoList</code> container will not correctly memoize:</p>
<h4 id="containers-VisibleTodoList-js-2"><a href="#containers-VisibleTodoList-js-2" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; getVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// WARNING: THE FOLLOWING SELECTOR DOES NOT CORRECTLY MEMOIZE</span></div><div class="line">    todos: getVisibleTodos(state, props)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<p>A selector created with <code>createSelector</code> only returns the cached value when its set of arguments is the same as its previous set of arguments. If we alternate between rendering <code>&lt;VisibleTodoList listId=&quot;1&quot; /&gt;</code> and <code>&lt;VisibleTodoList listId=&quot;2&quot; /&gt;</code>, the shared selector will alternate between receiving <code>{listId: 1}</code> and <code>{listId: 2}</code> as its <code>props</code> argument. This will cause the arguments to be different on each call, so the selector will always recompute instead of returning the cached value. Weâ€™ll see how to overcome this limitation in the next section.</p>
<h3 id="Sharing-Selectors-with-Props-Across-Multiple-Components"><a href="#Sharing-Selectors-with-Props-Across-Multiple-Components" class="headerlink" title="Sharing Selectors with Props Across Multiple Components"></a>Sharing Selectors with Props Across Multiple Components</h3><blockquote>
<p>The examples in this section require React Redux v4.3.0 or greater</p>
</blockquote>
<p>To share a selector across multiple <code>VisibleTodoList</code> components while passing in <code>props</code> <strong>and</strong> retaining memoization, each instance of the component needs its own private copy of the selector.</p>
<p>Letâ€™s create a function named <code>makeGetVisibleTodos</code> that returns a new copy of the <code>getVisibleTodos</code> selector each time it is called:</p>
<h4 id="selectors-todoSelectors-js-1"><a href="#selectors-todoSelectors-js-1" class="headerlink" title="selectors/todoSelectors.js"></a><code>selectors/todoSelectors.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> getVisibilityFilter = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].visibilityFilter</div><div class="line"></div><div class="line"><span class="keyword">const</span> getTodos = <span class="function">(<span class="params">state, props</span>) =&gt;</span></div><div class="line">  state.todoLists[props.listId].todos</div><div class="line"></div><div class="line"><span class="keyword">const</span> makeGetVisibleTodos = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    [ getVisibilityFilter, getTodos ],</div><div class="line">    (visibilityFilter, todos) =&gt; &#123;</div><div class="line">      <span class="keyword">switch</span> (visibilityFilter) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_COMPLETED'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">        <span class="keyword">case</span> <span class="string">'SHOW_ACTIVE'</span>:</div><div class="line">          <span class="keyword">return</span> todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.completed)</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">          <span class="keyword">return</span> todos</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeGetVisibleTodos</div></pre></td></tr></table></figure>
<p>We also need a way to give each instance of a container access to its own private selector. The <code>mapStateToProps</code> argument of <code>connect</code> can help with this.</p>
<p><strong>If the <code>mapStateToProps</code> argument supplied to <code>connect</code> returns a function instead of an object, it will be used to create an individual <code>mapStateToProps</code> function for each instance of the container.</strong></p>
<p>In the example below <code>makeMapStateToProps</code> creates a new <code>getVisibleTodos</code> selector, and returns a <code>mapStateToProps</code> function that has exclusive access to the new selector:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If we pass <code>makeMapStateToProps</code> to <code>connect</code>, each instance of the <code>VisibleTodosList</code> container will get its own <code>mapStateToProps</code> function with a private <code>getVisibleTodos</code> selector. Memoization will now work correctly regardless of the render order of the <code>VisibleTodoList</code> containers.</p>
<h4 id="containers-VisibleTodoList-js-3"><a href="#containers-VisibleTodoList-js-3" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">'../components/TodoList'</span></div><div class="line"><span class="keyword">import</span> &#123; makeGetVisibleTodos &#125; <span class="keyword">from</span> <span class="string">'../selectors'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> makeMapStateToProps = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> getVisibleTodos = makeGetVisibleTodos()</div><div class="line">  <span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todos</span>: getVisibleTodos(state, props)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> mapStateToProps</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onTodoClick</span>: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</div><div class="line">      dispatch(toggleTodo(id))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> VisibleTodoList = connect(</div><div class="line">  makeMapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(TodoList)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList</div></pre></td></tr></table></figure>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="createSelector-â€¦inputSelectors-inputSelectors-resultFunc"><a href="#createSelector-â€¦inputSelectors-inputSelectors-resultFunc" class="headerlink" title="createSelector(â€¦inputSelectors | [inputSelectors], resultFunc)"></a>createSelector(â€¦inputSelectors | [inputSelectors], resultFunc)</h3><p>Takes one or more selectors, or an array of selectors, computes their values and passes them as arguments to <code>resultFunc</code>.</p>
<p><code>createSelector</code> determines if the value returned by an input-selector has changed between calls using reference equality (<code>===</code>). Inputs to selectors created with <code>createSelector</code> should be immutable.</p>
<p>Selectors created with <code>createSelector</code> have a cache size of 1. This means they always recalculate when the value of an input-selector changes, as a selector only stores the preceding value of each input-selector.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">  state =&gt; state.values.value2,</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// You can also pass an array of selectors</span></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  [</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.values.value1,</div><div class="line">    state =&gt; state.values.value2</div><div class="line">  ],</div><div class="line">  (value1, value2) =&gt; value1 + value2</div><div class="line">)</div></pre></td></tr></table></figure>
<p>It can be useful to access the props of a component from within a selector. When a selector is connected to a component with <code>connect</code>, the component props are passed as the second argument to the selector:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> abSelector = <span class="function">(<span class="params">state, props</span>) =&gt;</span> state.a * props.b</div><div class="line"></div><div class="line"><span class="comment">// props only (ignoring state argument)</span></div><div class="line"><span class="keyword">const</span> cSelector =  <span class="function">(<span class="params">_, props</span>) =&gt;</span> props.c</div><div class="line"></div><div class="line"><span class="comment">// state only (props argument omitted as not required)</span></div><div class="line"><span class="keyword">const</span> dSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.d</div><div class="line"></div><div class="line"><span class="keyword">const</span> totalSelector = createSelector(</div><div class="line">  abSelector,</div><div class="line">  cSelector,</div><div class="line">  dSelector,</div><div class="line">  (ab, c, d) =&gt; (&#123;</div><div class="line">    <span class="attr">total</span>: ab + c + d</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="defaultMemoize-func-equalityCheck-defaultEqualityCheck"><a href="#defaultMemoize-func-equalityCheck-defaultEqualityCheck" class="headerlink" title="defaultMemoize(func, equalityCheck = defaultEqualityCheck)"></a>defaultMemoize(func, equalityCheck = defaultEqualityCheck)</h3><p><code>defaultMemoize</code> memoizes the function passed in the func parameter. It is the memoize function used by <code>createSelector</code>.</p>
<p><code>defaultMemoize</code> has a cache size of 1. This means it always recalculates when the value of an argument changes.</p>
<p><code>defaultMemoize</code> determines if an argument has changed by calling the <code>equalityCheck</code> function. As <code>defaultMemoize</code> is designed to be used with immutable data, the default <code>equalityCheck</code> function checks for changes using reference equality:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultEqualityCheck</span>(<span class="params">currentVal, previousVal</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> currentVal === previousVal</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>defaultMemoize</code> can be used with <code>createSelectorCreator</code> to <a href="#customize-equalitycheck-for-defaultmemoize">customize the <code>equalityCheck</code> function</a>.</p>
<h3 id="createSelectorCreator-memoize-â€¦memoizeOptions"><a href="#createSelectorCreator-memoize-â€¦memoizeOptions" class="headerlink" title="createSelectorCreator(memoize, â€¦memoizeOptions)"></a>createSelectorCreator(memoize, â€¦memoizeOptions)</h3><p><code>createSelectorCreator</code> can be used to make a customized version of <code>createSelector</code>.</p>
<p>The <code>memoize</code> argument is a memoization function to replace <code>defaultMemoize</code>.</p>
<p>The <code>...memoizeOptions</code> rest parameters are zero or more configuration options to be passed to <code>memoizeFunc</code>. The selectors <code>resultFunc</code> is passed as the first argument to <code>memoize</code> and the <code>memoizeOptions</code> are passed as the second argument onwards:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(</div><div class="line">  customMemoize, <span class="comment">// function to be used to memoize resultFunc</span></div><div class="line">  option1, <span class="comment">// option1 will be passed as second argument to customMemoize</span></div><div class="line">  option2, <span class="comment">// option2 will be passed as third argument to customMemoize</span></div><div class="line">  option3 <span class="comment">// option3 will be passed as fourth argument to customMemoize</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> customSelector = customSelectorCreator(</div><div class="line">  input1,</div><div class="line">  input2,</div><div class="line">  resultFunc <span class="comment">// resultFunc will be passed as first argument to customMemoize</span></div><div class="line">)</div></pre></td></tr></table></figure>
<p>Internally <code>customSelector</code> calls the memoize function as follows:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">customMemoize(resultFunc, option1, option2, option3)</div></pre></td></tr></table></figure>
<p>Here are some examples of how you might use <code>createSelectorCreator</code>:</p>
<h4 id="Customize-equalityCheck-for-defaultMemoize"><a href="#Customize-equalityCheck-for-defaultMemoize" class="headerlink" title="Customize equalityCheck for defaultMemoize"></a>Customize <code>equalityCheck</code> for <code>defaultMemoize</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.values.filter(<span class="function"><span class="params">val</span> =&gt;</span> val &lt; <span class="number">5</span>),</div><div class="line">  values =&gt; values.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="Use-memoize-function-from-lodash-for-an-unbounded-cache"><a href="#Use-memoize-function-from-lodash-for-an-unbounded-cache" class="headerlink" title="Use memoize function from lodash for an unbounded cache"></a>Use memoize function from lodash for an unbounded cache</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> called = <span class="number">0</span></div><div class="line"><span class="keyword">const</span> hashFn = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(</div><div class="line">  <span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + <span class="string">'-'</span> + <span class="built_in">JSON</span>.stringify(val),</div><div class="line">  <span class="string">''</span></div><div class="line">)</div><div class="line"><span class="keyword">const</span> customSelectorCreator = createSelectorCreator(memoize, hashFn)</div><div class="line"><span class="keyword">const</span> selector = customSelectorCreator(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; &#123;</div><div class="line">    called++</div><div class="line">    <span class="keyword">return</span> a + b</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="createStructuredSelector-inputSelectors-selectorCreator-createSelector"><a href="#createStructuredSelector-inputSelectors-selectorCreator-createSelector" class="headerlink" title="createStructuredSelector({inputSelectors}, selectorCreator = createSelector)"></a>createStructuredSelector({inputSelectors}, selectorCreator = createSelector)</h3><p><code>createStructuredSelector</code> is a convenience function for a common pattern that arises when using Reselect. The selector passed to a <code>connect</code> decorator often just takes the values of its input-selectors and maps them to keys in an object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="comment">// The result function in the following selector</span></div><div class="line"><span class="comment">// is simply building an object from the input selectors</span></div><div class="line"><span class="keyword">const</span> structuredSelector = createSelector(</div><div class="line">   mySelectorA,</div><div class="line">   mySelectorB,</div><div class="line">   mySelectorC,</div><div class="line">   (a, b, c) =&gt; (&#123;</div><div class="line">     a,</div><div class="line">     b,</div><div class="line">     c</div><div class="line">   &#125;)</div><div class="line">)</div></pre></td></tr></table></figure>
<p><code>createStructuredSelector</code> takes an object whose properties are input-selectors and returns a structured selector. The structured selector returns an object with the same keys as the <code>inputSelectors</code> argument, but with the selectors replaced with their values.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mySelectorA = <span class="function"><span class="params">state</span> =&gt;</span> state.a</div><div class="line"><span class="keyword">const</span> mySelectorB = <span class="function"><span class="params">state</span> =&gt;</span> state.b</div><div class="line"></div><div class="line"><span class="keyword">const</span> structuredSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">x</span>: mySelectorA,</div><div class="line">  <span class="attr">y</span>: mySelectorB</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = structuredSelector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;) <span class="comment">// will produce &#123; x: 1, y: 2 &#125;</span></div></pre></td></tr></table></figure>
<p>Structured selectors can be nested:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nestedSelector = createStructuredSelector(&#123;</div><div class="line">  <span class="attr">subA</span>: createStructuredSelector(&#123;</div><div class="line">    selectorA,</div><div class="line">    selectorB</div><div class="line">  &#125;),</div><div class="line">  <span class="attr">subB</span>: createStructuredSelector(&#123;</div><div class="line">    selectorC,</div><div class="line">    selectorD</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="Q-Why-isnâ€™t-my-selector-recomputing-when-the-input-state-changes"><a href="#Q-Why-isnâ€™t-my-selector-recomputing-when-the-input-state-changes" class="headerlink" title="Q: Why isnâ€™t my selector recomputing when the input state changes?"></a>Q: Why isnâ€™t my selector recomputing when the input state changes?</h3><p>A: Check that your memoization function is compatible with your state update function (i.e. the reducer if you are using Redux). For example, a selector created with <code>createSelector</code> will not work with a state update function that mutates an existing object instead of creating a new one each time. <code>createSelector</code> uses an identity check (<code>===</code>) to detect that an input has changed, so mutating an existing object will not trigger the selector to recompute because mutating an object does not change its identity. Note that if you are using Redux, mutating the state object is <a href="http://redux.js.org/docs/Troubleshooting.html" target="_blank" rel="external">almost certainly a mistake</a>.</p>
<p>The following example defines a simple selector that determines if the first todo item in an array of todos has been completed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isFirstTodoCompleteSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.todos[<span class="number">0</span>],</div><div class="line">  todo =&gt; todo &amp;&amp; todo.completed</div><div class="line">)</div></pre></td></tr></table></figure>
<p>The following state update function <strong>will not</strong> work with <code>isFirstTodoCompleteSelector</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// BAD: mutating an existing object</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      todo.completed = !areAllMarked</div><div class="line">      <span class="keyword">return</span> todo</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The following state update function <strong>will</strong> work with <code>isFirstTodoCompleteSelector</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> COMPLETE_ALL:</div><div class="line">    <span class="keyword">const</span> areAllMarked = state.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.completed)</div><div class="line">    <span class="comment">// GOOD: returning a new object each time with Object.assign</span></div><div class="line">    <span class="keyword">return</span> state.map(<span class="function"><span class="params">todo</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, todo, &#123;</div><div class="line">      <span class="attr">completed</span>: !areAllMarked</div><div class="line">    &#125;))</div><div class="line"></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you are not using Redux and have a requirement to work with mutable data, you can use <code>createSelectorCreator</code> to replace the default memoization function and/or use a different equality check function. See <a href="#use-memoize-function-from-lodash-for-an-unbounded-cache">here</a> and <a href="#customize-equalitycheck-for-defaultmemoize">here</a> for examples.</p>
<h3 id="Q-Why-is-my-selector-recomputing-when-the-input-state-stays-the-same"><a href="#Q-Why-is-my-selector-recomputing-when-the-input-state-stays-the-same" class="headerlink" title="Q: Why is my selector recomputing when the input state stays the same?"></a>Q: Why is my selector recomputing when the input state stays the same?</h3><p>A: Check that your memoization function is compatible with your state update function (i.e. the reducer if you are using Redux). For example, a selector created with <code>createSelector</code> that recomputes unexpectedly may be receiving a new object on each update whether the values it contains have changed or not. <code>createSelector</code> uses an identity check (<code>===</code>) to detect that an input has changed, so returning a new object on each update means that the selector will recompute on each update.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">return</span> state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The following selector is going to recompute every time REMOVE_OLD is invoked because Array.filter always returns a new object. However, in the majority of cases the REMOVE_OLD action will not change the list of todos so the recomputation is unnecessary.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> visibleTodosSelector = createSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>You can eliminate unnecessary recomputations by returning a new object from the state update function only when a deep equality check has found that the list of todos has actually changed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REMOVE_OLD &#125; <span class="keyword">from</span> <span class="string">'../constants/ActionTypes'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> initialState = [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">text</span>: <span class="string">'Use Redux'</span>,</div><div class="line">    <span class="attr">completed</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">id</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now()</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = initialState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">  <span class="keyword">case</span> REMOVE_OLD:</div><div class="line">    <span class="keyword">const</span> updatedState =  state.filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">return</span> todo.timestamp + <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> &gt; <span class="built_in">Date</span>.now()</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">return</span> isEqual(updatedState, state) ? state : updatedState</div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Alternatively, the default <code>equalityCheck</code> function in the selector can be replaced by a deep equality check:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelectorCreator, defaultMemoize &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> isEqual <span class="keyword">from</span> <span class="string">'lodash.isEqual'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> todosSelector = <span class="function"><span class="params">state</span> =&gt;</span> state.todos</div><div class="line"></div><div class="line"><span class="comment">// create a "selector creator" that uses lodash.isEqual instead of ===</span></div><div class="line"><span class="keyword">const</span> createDeepEqualSelector = createSelectorCreator(</div><div class="line">  defaultMemoize,</div><div class="line">  isEqual</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// use the new "selector creator" to create a selector</span></div><div class="line"><span class="keyword">const</span> mySelector = createDeepEqualSelector(</div><div class="line">  todosSelector,</div><div class="line">  (todos) =&gt; &#123;</div><div class="line">    ...</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Always check that the cost of an alternative <code>equalityCheck</code> function or deep equality check in the state update function is not greater than the cost of recomputing every time. If recomputing every time does work out to be the cheaper option, it may be that for this case Reselect is not giving you any benefit over passing a plain <code>mapStateToProps</code> function to <code>connect</code>.</p>
<h3 id="Q-Can-I-use-Reselect-without-Redux"><a href="#Q-Can-I-use-Reselect-without-Redux" class="headerlink" title="Q: Can I use Reselect without Redux?"></a>Q: Can I use Reselect without Redux?</h3><p>A: Yes. Reselect has no dependencies on any other package, so although it was designed to be used with Redux it can be used independently. It is currently being used successfully in traditional Flux apps.</p>
<blockquote>
<p>If you create selectors using <code>createSelector</code> make sure its arguments are immutable.<br>See <a href="#createselectorinputselectors--inputselectors-resultfunc">here</a></p>
</blockquote>
<h3 id="Q-How-do-I-create-a-selector-that-takes-an-argument"><a href="#Q-How-do-I-create-a-selector-that-takes-an-argument" class="headerlink" title="Q: How do I create a selector that takes an argument?"></a>Q: How do I create a selector that takes an argument?</h3><p>A: Reselect doesnâ€™t have built-in support for creating selectors that accepts arguments, but here are some suggestions for implementing similar functionalityâ€¦</p>
<p>If the argument is not dynamic you can use a factory function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> expensiveItemSelectorFactory = <span class="function"><span class="params">minValue</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> createSelector(</div><div class="line">    shopItemsSelector,</div><div class="line">    items =&gt; items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> subtotalSelector = createSelector(</div><div class="line">  expensiveItemSelectorFactory(<span class="number">200</span>),</div><div class="line">  items =&gt; items.reduce(<span class="function">(<span class="params">acc, item</span>) =&gt;</span> acc + item.value, <span class="number">0</span>)</div><div class="line">)</div></pre></td></tr></table></figure>
<p>The general consensus <a href="https://github.com/reactjs/reselect/issues/38" target="_blank" rel="external">here</a> and <a href="https://github.com/optimizely/nuclear-js/issues/14" target="_blank" rel="external">over at nuclear-js</a> is that if a selector needs a dynamic argument, then that argument should probably be state in the store. If you decide that you do require a selector with a dynamic argument, then a selector that returns a memoized function may be suitable:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createSelector &#125; <span class="keyword">from</span> <span class="string">'reselect'</span></div><div class="line"><span class="keyword">import</span> memoize <span class="keyword">from</span> <span class="string">'lodash.memoize'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveSelector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.items,</div><div class="line">  items =&gt; memoize(</div><div class="line">    <span class="function"><span class="params">minValue</span> =&gt;</span> items.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.value &gt; minValue)</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> expensiveFilter = expensiveSelector(state)</div><div class="line"></div><div class="line"><span class="keyword">const</span> slightlyExpensive = expensiveFilter(<span class="number">100</span>)</div><div class="line"><span class="keyword">const</span> veryExpensive = expensiveFilter(<span class="number">1000000</span>)</div></pre></td></tr></table></figure>
<h3 id="Q-The-default-memoization-function-is-no-good-can-I-use-a-different-one"><a href="#Q-The-default-memoization-function-is-no-good-can-I-use-a-different-one" class="headerlink" title="Q: The default memoization function is no good, can I use a different one?"></a>Q: The default memoization function is no good, can I use a different one?</h3><p>A: We think it works great for a lot of use cases, but sure. See <a href="#customize-equalitycheck-for-defaultmemoize">these examples</a>.</p>
<h3 id="Q-How-do-I-test-a-selector"><a href="#Q-How-do-I-test-a-selector" class="headerlink" title="Q: How do I test a selector?"></a>Q: How do I test a selector?</h3><p>A: For a given input, a selector should always produce the same output. For this reason they are simple to unit test.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> selector = createSelector(</div><div class="line">  <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">  state =&gt; state.b,</div><div class="line">  (a, b) =&gt; (&#123;</div><div class="line">    <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">    <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">  &#125;)</div><div class="line">)</div><div class="line"></div><div class="line">test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">2</span>, <span class="attr">d</span>: <span class="number">6</span> &#125;)</div><div class="line">  assert.deepEqual(selector(&#123; <span class="attr">a</span>: <span class="number">2</span>, <span class="attr">b</span>: <span class="number">3</span> &#125;), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>It may also be useful to check that the memoization function for a selector works correctly with the state update function (i.e. the reducer if you are using Redux). Each selector has a <code>recomputations</code> method that will return the number of times it has been recomputed:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">suite(<span class="string">'selector'</span>, () =&gt; &#123;</div><div class="line">  <span class="keyword">let</span> state = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> reducer = <span class="function">(<span class="params">state, action</span>) =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">a</span>: action(state.a),</div><div class="line">      <span class="attr">b</span>: action(state.b)</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> selector = createSelector(</div><div class="line">    <span class="function"><span class="params">state</span> =&gt;</span> state.a,</div><div class="line">    state =&gt; state.b,</div><div class="line">    (a, b) =&gt; (&#123;</div><div class="line">      <span class="attr">c</span>: a * <span class="number">2</span>,</div><div class="line">      <span class="attr">d</span>: b * <span class="number">3</span></div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">const</span> plusOne = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line">  <span class="keyword">const</span> id = <span class="function"><span class="params">x</span> =&gt;</span> x</div><div class="line"></div><div class="line">  test(<span class="string">"selector unit test"</span>, () =&gt; &#123;</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    state = reducer(state, id)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">4</span>, <span class="attr">d</span>: <span class="number">9</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">1</span>)</div><div class="line">    state = reducer(state, plusOne)</div><div class="line">    assert.deepEqual(selector(state), &#123; <span class="attr">c</span>: <span class="number">6</span>, <span class="attr">d</span>: <span class="number">12</span> &#125;)</div><div class="line">    assert.equal(selector.recomputations(), <span class="number">2</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Additionally, selectors keep a reference to the last result function as <code>.resultFunc</code>. If you have selectors composed of many other selectors this can help you test each selector without coupling all of your tests to the shape of your state.</p>
<p>For example if you have a set of selectors like this:</p>
<p><strong>selectors.js</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> firstSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> secondSelector = createSelector( ... )</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> thirdSelector = createSelector( ... )</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> myComposedSelector = createSelector(</div><div class="line">  firstSelector,</div><div class="line">  secondSelector,</div><div class="line">  thirdSelector,</div><div class="line">  (first, second, third) =&gt; first * second &lt; third</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>And then a set of unit tests like this:</p>
<p><strong>test/selectors.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// tests for the first three selectors...</span></div><div class="line">test(<span class="string">"firstSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"secondSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line">test(<span class="string">"thirdSelector unit test"</span>, () =&gt; &#123; ... &#125;)</div><div class="line"></div><div class="line"><span class="comment">// We have already tested the previous</span></div><div class="line"><span class="comment">// three selector outputs so we can just call `.resultFunc`</span></div><div class="line"><span class="comment">// with the values we want to test directly:</span></div><div class="line">test(<span class="string">"myComposedSelector unit test"</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// here instead of calling selector()</span></div><div class="line">  <span class="comment">// we just call selector.resultFunc()</span></div><div class="line">  assert(selector.resultFunc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="literal">true</span>)</div><div class="line">  assert(selector.resultFunc(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Finally, each selector has a <code>resetRecomputations</code> method that sets<br>recomputations back to 0.  The intended use is for a complex selector that may<br>have many independent tests and you donâ€™t want to manually manage the<br>computation count or create a â€œdummyâ€ selector for each test.</p>
<h3 id="Q-How-do-I-use-Reselect-with-Immutable-js"><a href="#Q-How-do-I-use-Reselect-with-Immutable-js" class="headerlink" title="Q: How do I use Reselect with Immutable.js?"></a>Q: How do I use Reselect with Immutable.js?</h3><p>A: Selectors created with <code>createSelector</code> should work just fine with Immutable.js data structures.</p>
<p>If your selector is recomputing and you donâ€™t think the state has changed, make sure you are aware of which Immutable.js update methods <strong>always</strong> return a new object and which update methods only return a new object <strong>when the collection actually changes</strong>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Immutable <span class="keyword">from</span> <span class="string">'immutable'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myMap = Immutable.Map(&#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"> <span class="comment">// set, merge and others only return a new obj when update changes collection</span></div><div class="line"><span class="keyword">let</span> newMap = myMap.set(<span class="string">'a'</span>, <span class="number">1</span>)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line">newMap = myMap.merge(&#123; <span class="string">'a'</span>, <span class="number">1</span> &#125;)</div><div class="line">assert.equal(myMap, newMap)</div><div class="line"><span class="comment">// map, reduce, filter and others always return a new obj</span></div><div class="line">newMap = myMap.map(<span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">1</span>)</div><div class="line">assert.notEqual(myMap, newMap)</div></pre></td></tr></table></figure>
<p>If a selectorâ€™s input is updated by an operation that always returns a new object, it may be performing unnecessary recomputations. See <a href="#q-why-is-my-selector-recomputing-when-the-input-state-stays-the-same">here</a> for a discussion on the pros and cons of using a deep equality check like <code>Immutable.is</code> to eliminate unnecessary recomputations.</p>
<h3 id="Q-Can-I-share-a-selector-across-multiple-components"><a href="#Q-Can-I-share-a-selector-across-multiple-components" class="headerlink" title="Q: Can I share a selector across multiple components?"></a>Q: Can I share a selector across multiple components?</h3><p>A: Selectors created using <code>createSelector</code> only have a cache size of one. This can make them unsuitable for sharing across multiple components if the arguments to the selector are different for each instance of the component. There are a couple of ways to get around this:</p>
<ul>
<li><p>Create a factory function which returns a new selector for each instance of the component. There is built-in support for factory functions in React Redux v4.3 or higher. See <a href="#sharing-selectors-with-props-across-multiple-components">here</a> for an example.</p>
</li>
<li><p>Create a custom selector with a cache size greater than one.</p>
</li>
</ul>
<h3 id="Q-Are-there-TypeScript-Typings"><a href="#Q-Are-there-TypeScript-Typings" class="headerlink" title="Q: Are there TypeScript Typings?"></a>Q: Are there TypeScript Typings?</h3><p>A: Yes! They are included and referenced in <code>package.json</code>. They should Just Workâ„¢.</p>
<h3 id="Q-How-can-I-make-a-curried-selector"><a href="#Q-How-can-I-make-a-curried-selector" class="headerlink" title="Q: How can I make a curried selector?"></a>Q: How can I make a <a href="https://github.com/hemanth/functional-programming-jargon#currying" target="_blank" rel="external">curried</a> selector?</h3><p>A: Try these <a href="https://github.com/reactjs/reselect/issues/159#issuecomment-238724788" target="_blank" rel="external">helper functions</a> courtesy of <a href="https://github.com/MattSPalmer" target="_blank" rel="external">MattSPalmer</a></p>
<h2 id="Related-Projects"><a href="#Related-Projects" class="headerlink" title="Related Projects"></a>Related Projects</h2><p>###<a href="https://github.com/HeyImAlex/reselect-map" target="_blank" rel="external">reselect-map</a></p>
<p>Can be useful when doing <strong>very expensive</strong> computations on elements of a collection because Reselect might not give you the granularity of caching that you need. Check out the reselect-maps README for examples.</p>
<p><strong>The optimizations in reselect-map only apply in a small number of cases. If you are unsure whether you need it, you donâ€™t!</strong></p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>MIT</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä½¿ç”¨React,Redux,redux-sageæ„å»ºå›¾ç‰‡åº“(ç¿»è¯‘)]]></title>
      <url>http://yoursite.com/2017/03/08/Getting%20Started%20with%20React,%20Redux%20and%20Immutable:%20a%20Test-Driven%20Tutorial%20(Part%202)%20/</url>
      <content type="html"><![CDATA[<p>ç¿»è¯‘ç‰ˆæœ¬,<a href="http://www.theodo.fr/blog/2016/03/getting-started-with-react-redux-and-immutable-a-test-driven-tutorial-part-2/" target="_blank" rel="external">åŸæ–‡è¯·è§</a></p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fds4960hm8j30xc0b4weu.jpg" alt="Imageç”±[egghead.ioæä¾›](http://egghead.io/)"></p>
<p>è¿™æ˜¯ç¬¬äºŒéƒ¨åˆ†çš„å†…å®¹.</p>
<p>åœ¨ç¬¬ä¸€éƒ¨åˆ†,æˆ‘ä»¬ç½—åˆ—äº†appçš„UI,å¼€å‘å’Œå•å…ƒæµ‹è¯•çš„åŸºç¡€.</p>
<p>æˆ‘ä»¬çœ‹åˆ°äº†appçš„stateé€šè¿‡Reactçš„<code>props</code>å‘ä¸‹ä¼ é€’åˆ°å•ä¸ªçš„ç»„ä»¶,ç”¨æˆ·çš„actionså£°æ˜ä¸ºå›è°ƒå‡½æ•°,å› æ­¤appçš„é€»è¾‘å’ŒUIåˆ†ç¦»å¼€æ¥äº†.</p>
<h2 id="Reduxçš„å·¥ä½œæµä»‹ç»"><a href="#Reduxçš„å·¥ä½œæµä»‹ç»" class="headerlink" title="Reduxçš„å·¥ä½œæµä»‹ç»"></a>Reduxçš„å·¥ä½œæµä»‹ç»</h2><p>åœ¨è¿™ä¸€ç‚¹ä¸Š,æˆ‘ä»¬çš„UIæ˜¯æ²¡æœ‰äº¤äº’æ“ä½œçš„:å°½ç®¡æˆ‘ä»¬å·²ç»æµ‹è¯•äº†å¦‚æœä¸€ä¸ªitemå¦‚æœè¢«è®¾å®šä¸º<code>completed</code>,å®ƒå°†ç»™æ–‡æœ¬åˆ’çº¿,ä½†æ˜¯è¿™é‡Œè¿˜æ²¡æœ‰æ–¹æ³•é‚€è¯·ç”¨æˆ·æ¥å®Œæˆå®ƒ:</p>
<ol>
<li>state treeé€šè¿‡<code>props</code>å®šä¹‰äº†UIå’Œactionå›è°ƒå‡½æ•°.</li>
<li>ç”¨æˆ·çš„actions,ä¾‹å¦‚ç‚¹å‡»,è¢«å‘é€åˆ°action creator,actionè¢«å®ƒèŒƒå¼åŒ–.</li>
<li>redux actionè¢«ä¼ é€’åˆ°reducerå®ç°å®é™…çš„appé€»è¾‘</li>
<li>reduceræ›´æ–°state tree,dispatch stateåˆ°store.</li>
<li>UIæ ¹æ®storeé‡Œçš„æ–°state treeæ¥æ›´æ–°UI</li>
</ol>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdua9bq152j30f10870sn.jpg" alt="Redux working flos"></p>
<h2 id="è®¾å®šåˆå§‹åŒ–state"><a href="#è®¾å®šåˆå§‹åŒ–state" class="headerlink" title="è®¾å®šåˆå§‹åŒ–state"></a>è®¾å®šåˆå§‹åŒ–state</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/be48d4d610b3438aeb1dfcd07d317b3c72fbdb3e" target="_blank" rel="external">è¿™éƒ¨åˆ†çš„ä»£ç æäº¤åœ¨è¿™é‡Œ</a></p>
<p>æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªactionå°†ä¼šå…è®¸æˆ‘ä»¬åœ¨Redux storeé‡Œæ­£ç¡®çš„è®¾ç½®åˆå§‹åŒ–state<br>,æˆ‘ä»¬å°†ä¼šåˆ›å»ºstore.</p>
<p>Reduxä¸­çš„actionæ˜¯ä¸€ä¸ªä¿¡æ¯çš„è½½ä½“(payload).actionç”±ä¸€ä¸ªJSONå¯¹è±¡æœ‰ä¸€ä¸ª<code>type</code>å±æ€§,æè¿°actionåˆ°åº•æ˜¯åšä»€ä¹ˆçš„,è¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯appéœ€è¦çš„ä¿¡æ¯.åœ¨æˆ‘ä»¬çš„å®ä¾‹ä¸­,typeè¢«è®¾å®šä¸º<code>SET_STATE</code>,æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªstateå¯¹è±¡åŒ…å«éœ€è¦çš„state:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attribute">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">  <span class="attribute">state</span>: &#123;</div><div class="line">    <span class="attribute">todos</span>: [</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">1</span>, <span class="attribute">text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">2</span>, <span class="attribute">text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">      &#123;<span class="attribute">id</span>: <span class="number">3</span>, <span class="attribute">text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>, <span class="attribute">editing</span>: false&#125;,</div><div class="line">    ],</div><div class="line">    <span class="attribute">filter</span>: <span class="string">'all'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªactionä¼šè¢«dispatchåˆ°ä¸€ä¸ªreducer,reducerè§’è‰²çš„æ˜¯è¯†åˆ«å’Œå®æ–½å’Œactionå¯¹åº”çš„é€»è¾‘ä»£ç .</p>
<p>è®©æˆ‘ä»¬ä¸ºreduceræ¥å†™å•å…ƒæµ‹è¯•ä»£ç <br><code>test/reducer_spec.js</code><br><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"> <span class="title">import</span> &#123;List, <span class="built_in">Map</span>, fromJS&#125; from <span class="string">'immutable'</span>;</div><div class="line"><span class="title">import</span> &#123;expect&#125; from <span class="string">'chai'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> reducer from <span class="string">'../src/reducer'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line"></div><div class="line">  it(<span class="string">'handles SET_STATE'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = <span class="built_in">Map</span>();</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attribute">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">      <span class="attribute">state</span>: <span class="built_in">Map</span>(&#123;</div><div class="line">        <span class="attribute">todos</span>: List.of(</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 1, text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;),</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 2, text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;),</div><div class="line">          <span class="built_in">Map</span>(&#123;<span class="attribute">id:</span><span class="string"> 3, text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'completed'</span>&#125;)</div><div class="line">        )</div><div class="line">      &#125;)</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line"></div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attribute">todos</span>: [</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 1, text</span>: <span class="string">'React'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 2, text</span>: <span class="string">'Redux'</span>, <span class="attribute">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attribute">id:</span><span class="string"> 3, text</span>: <span class="string">'Immutable'</span>, <span class="attribute">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†æ–¹ä¾¿ä¸€ç‚¹,<code>state</code>ä½¿ç”¨å•çº¯JSå¯¹è±¡,è€Œä¸æ˜¯ä½¿ç”¨Immutableæ•°æ®ç»“æ„.è®©æˆ‘ä»¬çš„reduceræ¥å¤„ç†è½¬å˜.æœ€å,reducerå°†ä¼šä¼˜é›…çš„å¤„ç†<code>undefined</code>åˆå§‹åŒ–state:<br><code>test/reducer_spec.js</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles SET_STATE with plain JS payload'</span>, () =&gt; &#123;</div><div class="line">    const initialState = Map();</div><div class="line">    const action = &#123;</div><div class="line"><span class="symbol">      type:</span> <span class="string">'SET_STATE'</span>,</div><div class="line"><span class="symbol">      state:</span> &#123;</div><div class="line"><span class="symbol">        todos:</span> [</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    const nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line"><span class="symbol">      todos:</span> [</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles SET_STATE without initial state'</span>, () =&gt; &#123;</div><div class="line">    const action = &#123;</div><div class="line"><span class="symbol">      type:</span> <span class="string">'SET_STATE'</span>,</div><div class="line"><span class="symbol">      state:</span> &#123;</div><div class="line"><span class="symbol">        todos:</span> [</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">          &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    const nextState = reducer(undefined, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line"><span class="symbol">      todos:</span> [</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">1</span>, <span class="string">text:</span> <span class="string">'React'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">2</span>, <span class="string">text:</span> <span class="string">'Redux'</span>, <span class="string">status:</span> <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="string">id:</span> <span class="number">3</span>, <span class="string">text:</span> <span class="string">'Immutable'</span>, <span class="string">status:</span> <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬çš„reducerå°†ä¼šåŒ¹é…æ¥æ”¶çš„actionsçš„<code>type</code>,å¦‚æœtypeæ˜¯<code>SET_STATE</code>,å½“å‰çš„stateå’Œactionè¿è½½çš„stateèåˆåœ¨ä¸€èµ·:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;<span class="built_in">Map</span>&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setState</span>(<span class="params">state, newState</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.merge(newState);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬ä¸å¾—ä¸æŠŠreducerè¿æ¥åˆ°æˆ‘ä»¬çš„app,æ‰€ä»¥å½“appå¯åŠ¨åˆå§‹åŒ–state.è¿™é‡Œå®é™…æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨Reduxåº“,å®‰è£…ä¸€ä¸‹<br><code>npm install â€”save redux@3.3.1 react-redux@4.4.1</code></p>
<p><code>src/index.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> &#123;List, <span class="built_in">Map</span>&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'./reducer'</span>;</div><div class="line"><span class="keyword">import</span> &#123;TodoAppContainer&#125; <span class="keyword">from</span> <span class="string">'./components/TodoApp'</span>;</div><div class="line"></div><div class="line"><span class="comment">// We instantiate a new Redux store</span></div><div class="line"><span class="keyword">const</span> store = createStore(reducer);</div><div class="line"><span class="comment">// We dispatch the SET_STATE action holding the desired state</span></div><div class="line">store.dispatch(&#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'SET_STATE'</span>,</div><div class="line">  <span class="attr">state</span>: &#123;</div><div class="line">    <span class="attr">todos</span>: [</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">    ],</div><div class="line">    <span class="attr">filter</span>: <span class="string">'all'</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'../node_modules/todomvc-app-css/index.css'</span>);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="comment">// We wrap our app in a Provider component to pass the store down to the components</span></div><div class="line">  &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">TodoAppContainer</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ çœ‹çœ‹ä¸Šé¢çš„ä»£ç æ®µ,ä½ å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬çš„<code>TodoApp</code>ç»„ä»¶å®é™…æ˜¯è¢«<code>TodoAppContainer</code>ä»£æ›¿.åœ¨Reduxé‡Œ,æœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶:å±•ç¤ºç»„ä»¶å’Œå®¹å™¨.æˆ‘æ¨èä½ é˜…è¯»ä¸€ä¸‹ç”±Dan Abramov(Reduxçš„ä½œè€…)å†™ä½œçš„<a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.e5z2vws8e" target="_blank" rel="external">é«˜ä¿¡æ¯é‡çš„æ–‡ç« </a>,å¼ºè°ƒäº†å±•ç¤ºç»„ä»¶å’Œå®¹å™¨çš„å·®å¼‚æ€§.</p>
<p>å¦‚æœæˆ‘æƒ³æ€»ç»“å¾—å¿«ä¸€ç‚¹,æˆ‘å°†å¼•ç”¨<a href="http://redux.js.org/docs/basics/UsageWithReact.html" target="_blank" rel="external">Redux æ–‡æ¡£</a>çš„å†…å®¹ï¼š</p>
<p>â€œå±•ç¤ºç»„ä»¶æ˜¯å…³äºäº‹ä»¶çš„æ ·å­(æ¨¡æ¿å’Œæ ·å¼),å®¹å™¨ç»„ä»¶æ˜¯å…³äºäº‹æƒ…æ˜¯æ€ä¹ˆå·¥ä½œçš„(æ•°æ®è·å–,stateæ›´æ–°)â€.</p>
<p>æ‰€ä»¥æˆ‘ä»¬åˆ›å»ºstore,ä¼ é€’ç»™<code>TodoAppContainer</code>.ç„¶è€Œä¸ºäº†å­ç»„ä»¶å¯ä»¥ä½¿ç”¨store,æˆ‘ä»¬æŠŠstateæ˜ å°„æˆä¸ºReactç»„ä»¶<code>TodoApp</code>çš„<code>props</code>.<br><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">todos</span>: state.get(<span class="string">'todos'</span>),</div><div class="line">    <span class="attr">filter</span>: state.get(<span class="string">'filter'</span>)</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> TodoAppContainer = connect(mapStateToProps)(TodoApp);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­é‡æ–°åŠ è½½app,ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å®ƒåˆå§‹åŒ–å’Œä¹‹å‰ä¸€æ ·,ä¸è¿‡ç°åœ¨ä½¿ç”¨Redux tools.</p>
<h2 id="Redux-dev-å·¥å…·"><a href="#Redux-dev-å·¥å…·" class="headerlink" title="Redux dev å·¥å…·"></a>Redux dev å·¥å…·</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/9e82a2bf7ffaea5d0fda6af361a126517aecc115" target="_blank" rel="external">è¿™ä¸€éƒ¨åˆ†çš„æäº¤ä»£ç </a></p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»é…ç½®äº†redux storeå’Œreducer.æˆ‘ä»¬å¯ä»¥é…ç½®Redux dev toolsæ¥å±•ç°æ•°æ®æµå¼€å‘.</p>
<p>é¦–å…ˆ,è·å–<a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd" target="_blank" rel="external">Redux dev tools Chrome extension</a></p>
<p>dev toolså¯ä»¥åœ¨Storeåˆ›å»ºçš„æ—¶å€™å¯ä»¥åŠ è½½.</p>
<p><code>src/index.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> &#123;compose, createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> createStoreDevTools = compose(</div><div class="line">  <span class="built_in">window</span>.devToolsExtension ? <span class="built_in">window</span>.devToolsExtension() : <span class="function"><span class="params">f</span> =&gt;</span> f</div><div class="line">)(createStore);</div><div class="line"><span class="keyword">const</span> store = createStoreDevTools(reducer);</div><div class="line"><span class="comment">// ...</span></div></pre></td></tr></table></figure></p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdubya02s9j31cy0v6dgk.jpg" alt="Redux dev tools"></p>
<p>é‡æ–°åŠ è½½app,ç‚¹å‡»Reduxå›¾æ ‡,æœ‰äº†.</p>
<p>æœ‰ä¸‰ä¸ªä¸åŒçš„ç›‘è§†å™¨å¯ä»¥ä½¿ç”¨:Diffç›‘è§†å™¨,æ—¥å¿—ç›‘è§†å™¨,Sliderç›‘è§†å™¨.</p>
<h2 id="ä½¿ç”¨Action-Creatorsé…ç½®æˆ‘ä»¬çš„actions"><a href="#ä½¿ç”¨Action-Creatorsé…ç½®æˆ‘ä»¬çš„actions" class="headerlink" title="ä½¿ç”¨Action Creatorsé…ç½®æˆ‘ä»¬çš„actions"></a>ä½¿ç”¨Action Creatorsé…ç½®æˆ‘ä»¬çš„actions</h2><p>åˆ‡æ¢itemçš„ä¸åŒçŠ¶æ€.</p>
<p><a href="https://github.com/phacks/redux-todomvc/commit/7a2dc0963684b569c11f92e41a324324dfb21bdc" target="_blank" rel="external">è¿™éƒ¨åˆ†çš„æäº¤ä»£ç åœ¨è¿™é‡Œ</a></p>
<p>ä¸‹ä¸€æ­¥æ˜¯å…è®¸ç”¨æˆ·åœ¨<code>active</code>å’Œ<code>completed</code>ä¹‹å‰åˆ‡æ¢çŠ¶æ€ï¼š<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123;List, <span class="built_in">Map</span>, fromJS&#125; <span class="keyword">from</span> <span class="string">'immutable'</span>;</div><div class="line"><span class="keyword">import</span> &#123;expect&#125; <span class="keyword">from</span> <span class="string">'chai'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">'../src/reducer'</span>;</div><div class="line"></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line"><span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles TOGGLE_COMPLETE by changing the status from active to completed'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles TOGGLE_COMPLETE by changing the status from completed to active'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">3</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">'Immutable'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†é€šè¿‡è¿™äº›æµ‹è¯•,æˆ‘ä»¬æ›´æ–°reducer:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="comment">// We find the index associated with the itemId</span></div><div class="line">  <span class="keyword">const</span> itemIndex = state.get(<span class="string">'todos'</span>).findIndex(</div><div class="line">    <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">  );</div><div class="line">  <span class="comment">// We update the todo at this index</span></div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .update(<span class="string">'status'</span>, status =&gt; status === <span class="string">'active'</span> ? <span class="string">'completed'</span> : <span class="string">'active'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// We update the state to account for the modified todo</span></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_COMPLETE'</span>:</div><div class="line">      <span class="keyword">return</span> toggleComplete(state, action.itemId);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å’Œ<code>SET_STATE</code>çš„actionåŒä¸€ä¸ªåœ°æ–¹,æˆ‘ä»¬éœ€è¦è®©<code>TodoAppContainer</code>ç»„ä»¶æ„ŸçŸ¥åˆ°action,æ‰€ä»¥<code>toggleComplete</code>å›è°ƒå‡½æ•°ä¼šè¢«ä¼ é€’åˆ°<code>TodoItem</code>ç»„ä»¶(å®é™…è°ƒç”¨å‡½æ•°çš„åœ°æ–¹).</p>
<p>åœ¨Reduxä¸­,æœ‰æ ‡å‡†çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹ï¼šAction Creators.</p>
<p>action creatorsæ˜¯ç®€å•çš„å‡½æ•°,è¿”å›åˆé€‚çš„actionï¼Œè¿™äº›éŸ©å¼æ˜¯Reactçš„<code>props</code>çš„ä¸€äº›æ˜ å°„ä¹‹ä¸€.<br>è®©æˆ‘ä»¬åˆ›å»ºç¬¬ä¸€ä¸ªaction creator:<br><code>src/action_creators.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'TOGGLE_COMPLETE'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨,å°½ç®¡<code>TodoAppcontainer</code>ç»„ä»¶ä¸­çš„<code>connect</code>å‡½æ•°çš„è°ƒç”¨å¯ä»¥ç”¨æ¥è·å–store,æˆ‘ä»¬å‘Šè¯‰ç»„ä»¶ä½¿ç”¨æ˜ å°„<code>props</code>çš„å›è°ƒå‡½æ•°:<br><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionCreators <span class="keyword">from</span> <span class="string">'../action_creators'</span>;</div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      // ...</div><div class="line">        // We use the spread operator for better lisibility</div><div class="line">        <span class="tag">&lt;<span class="name">TodoList</span>  &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></div><div class="line">      // ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">export const TodoAppContainer = connect(mapStateToProps, actionCreators)(TodoApp);</div></pre></td></tr></table></figure></p>
<p>é‡å¯ä½ çš„webserver,åˆ·æ–°ä¸€ä¸‹ä½ çš„æµè§ˆå™¨:å½“å½“.åœ¨æ¡ç›®ä¸Šç‚¹å‡»ç°åœ¨å¯ä»¥åˆ‡æ¢å®ƒçš„çŠ¶æ€.å¦‚æœä½ æŸ¥çœ‹Redux dev tools,ä½ å¯ä»¥çœ‹åˆ°è§¦å‘çš„actionå’Œåç»§çš„æ›´æ–°.</p>
<h2 id="æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨"><a href="#æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨" class="headerlink" title="æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨"></a>æ”¹å˜ç›®å‰çš„è¿‡æ»¤å™¨</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/3949d4f38912e4b6b8e60fc4c553614d4076028c" target="_blank" rel="external">ç›¸å…³ä»£ç åœ¨åœ¨è¿™é‡Œ</a></p>
<p>ç°åœ¨æ¯ä»¶äº‹æƒ…éƒ½å·²ç»é…ç½®å®Œæ¯•,å†™å…¶ä»–çš„actionæ˜¯ä»¶å°äº‹.æˆ‘ä»¬ç»§ç»­åˆ›å»ºä½ å¸Œæœ›çš„<code>CHANGE_FILTER</code>action,æ”¹å˜å½“å‰stateçš„filter,ç”±æ­¤ä»…ä»…æ˜¾ç¤ºè¿‡æ»¤è¿‡çš„æ¡ç›®.<br>å¼€å§‹åˆ›å»ºaction creatorï¼š<br><code>src/action_creators.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">changeFilter</span>(<span class="params">filter</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CHANGE_FILTER'</span>,</div><div class="line">    filter</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨å†™reducerçš„å•å…ƒæµ‹è¯•:<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles CHANGE_FILTER by changing the filter'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ],</div><div class="line">      <span class="attr">filter</span>: <span class="string">'all'</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CHANGE_FILTER'</span>,</div><div class="line">      <span class="attr">filter</span>: <span class="string">'active'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ],</div><div class="line">      <span class="attr">filter</span>: <span class="string">'active'</span></div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å…³è”çš„reducerå‡½æ•°:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeFilter</span>(<span class="params">state, filter</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.set(<span class="string">'filter'</span>, filter);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'SET_STATE'</span>:</div><div class="line">      <span class="keyword">return</span> setState(state, action.state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'TOGGLE_COMPLETE'</span>:</div><div class="line">      <span class="keyword">return</span> toggleComplete(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'CHANGE_FILTER'</span>:</div><div class="line">      <span class="keyword">return</span> changeFilter(state, action.filter);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æœ€åæˆ‘ä»¬æŠŠ<code>changeFilter</code>å›è°ƒå‡½æ•°ä¼ é€’ç»™<code>TodoTools</code>ç»„ä»¶:<br><code>TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">"todoapp"</span>&gt;</span></div><div class="line">        // ...</div><div class="line">        <span class="tag">&lt;<span class="name">TodoTools</span> <span class="attr">changeFilter</span>=<span class="string">&#123;this.props.changeFilter&#125;</span></span></div><div class="line">                   <span class="attr">filter</span>=<span class="string">&#123;this.props.filter&#125;</span></div><div class="line">                   <span class="attr">nbActiveItems</span>=<span class="string">&#123;this.getNbActiveItems()&#125;</span> /&gt;</div><div class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>å®Œæˆäº†,ç¬¬ä¸€ä¸ªfilter selectorå·¥ä½œå®Œç¾</p>
<h2 id="Itemç¼–è¾‘"><a href="#Itemç¼–è¾‘" class="headerlink" title="Itemç¼–è¾‘"></a>Itemç¼–è¾‘</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/2a7b1138f778524d4aa7eac193c995258d28c5a3" target="_blank" rel="external">ä»£ç åœ¨è¿™é‡Œ</a><br> å½“ç”¨æˆ·ç¼–è¾‘ä¸€ä¸ªæ¡ç›®,å®é™…ä¸Šæ˜¯ä¸¤ä¸ªactionsè§¦å‘çš„ä¸‰ä¸ªå¯èƒ½æ€§:</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥ç¼–è¾‘æ¨¡å¼:<code>EDIT_ITEM</code></li>
<li>ç”¨æˆ·é€€å‡ºç¼–è¾‘æ¨¡å¼(ä¸ä¿å­˜å˜åŒ–):<code>CANCEL_EDITING</code></li>
<li>ç”¨æˆ·éªŒè¯ä»–çš„ç¼–è¾‘(ä¿å­˜å˜åŒ–):<code>DONE_EDITING</code></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä¸ºä¸‰ä¸ªactionsç¼–å†™action creatorsï¼š<br><code>src/action_creators.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">editItem</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'EDIT_ITEM'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cancelEditing</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CANCEL_EDITING'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">doneEditing</span>(<span class="params">itemId, newText</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'DONE_EDITING'</span>,</div><div class="line">    itemId,</div><div class="line">    newText</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨ä¸ºè¿™äº›actionsç¼–å†™å•å…ƒæµ‹è¯•:<br><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles EDIT_ITEM by setting editing to true'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'EDIT_ITEM'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles CANCEL_EDITING by setting editing to false'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CANCEL_EDITING'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles DONE_EDITING by setting by updating the text'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">true</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'DONE_EDITING'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">1</span>,</div><div class="line">      <span class="attr">newText</span>: <span class="string">'Redux'</span>,</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>, <span class="attr">editing</span>: <span class="literal">false</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å‘reducerå‡½æ•°,å®é™…æ“ä½œä¸‰ä¸ªactions:<br><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">findItemIndex</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.get(<span class="string">'todos'</span>).findIndex(</div><div class="line">    <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// We can refactor the toggleComplete function to use findItemIndex</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleComplete</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .update(<span class="string">'status'</span>, status =&gt; status === <span class="string">'active'</span> ? <span class="string">'completed'</span> : <span class="string">'active'</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">editItem</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">true</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cancelEditing</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">false</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doneEditing</span>(<span class="params">state, itemId, newText</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemIndex = findItemIndex(state, itemId);</div><div class="line">  <span class="keyword">const</span> updatedItem = state.get(<span class="string">'todos'</span>)</div><div class="line">    .get(itemIndex)</div><div class="line">    .set(<span class="string">'editing'</span>, <span class="literal">false</span>)</div><div class="line">    .set(<span class="string">'text'</span>, newText);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, todos =&gt; todos.set(itemIndex, updatedItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'EDIT_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> editItem(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'CANCEL_EDITING'</span>:</div><div class="line">      <span class="keyword">return</span> cancelEditing(state, action.itemId);</div><div class="line">    <span class="keyword">case</span> <span class="string">'DONE_EDITING'</span>:</div><div class="line">      <span class="keyword">return</span> doneEditing(state, action.itemId, action.newText);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="æ¸…é™¤å®Œæˆ-æ·»åŠ å’Œåˆ é™¤æ¡ç›®"><a href="#æ¸…é™¤å®Œæˆ-æ·»åŠ å’Œåˆ é™¤æ¡ç›®" class="headerlink" title="æ¸…é™¤å®Œæˆ,æ·»åŠ å’Œåˆ é™¤æ¡ç›®"></a>æ¸…é™¤å®Œæˆ,æ·»åŠ å’Œåˆ é™¤æ¡ç›®</h2><p><a href="https://github.com/phacks/redux-todomvc/commit/c89059a6767903fdf8b9827209f92e1f7385bdb7" target="_blank" rel="external">ä»£ç åœ¨è¿™é‡Œ</a></p>
<p>ä¸‰ä¸ªå‰©ä¸‹çš„actionæ˜¯:</p>
<ol>
<li><code>CLEAR_COMPLETED</code>,åœ¨<code>TodoTools</code>ç»„ä»¶ä¸­è§¦å‘,ä»åˆ—è¡¨ä¸­æ¸…é™¤å®Œæˆçš„æ¡ç›®</li>
<li><code>ADD_ITEM</code>,åœ¨<code>TodoHeader</code>ä¸­è§¦å‘,æ ¹æ®ç”¨æˆ·çš„çš„è¾“å…¥æ–‡æœ¬æ¥æ·»åŠ æ¡ç›®</li>
<li><code>DELETE_ITEM</code>,ç›¸ä¼¼<code>TodoItem</code>ä¸­è°ƒç”¨,åˆ é™¤ä¸€ä¸ªæ¡ç›®</li>
</ol>
<p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„å·¥ä½œæµæ˜¯:æ·»åŠ action creators,å•å…ƒæµ‹è¯•reducerå’Œä»£ç é€»è¾‘,æœ€ç»ˆé€šè¿‡propsä¼ é€’å›è°ƒå‡½æ•°:<br><code>src/action_creators.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">clearCompleted</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'CLEAR_COMPLETED'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD_ITEM'</span>,</div><div class="line">    text</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteItem</span>(<span class="params">itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'DELETE_ITEM'</span>,</div><div class="line">    itemId</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>test/reducer_spec.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line">describe(<span class="string">'reducer'</span>, () =&gt; &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  it(<span class="string">'handles CLEAR_COMPLETED by removing all the completed items'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'CLEAR_COMPLETED'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles ADD_ITEM by adding the item'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'ADD_ITEM'</span>,</div><div class="line">      <span class="attr">text</span>: <span class="string">'Redux'</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'handles DELETE_ITEM by removing the item'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> initialState = fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'Redux'</span>, <span class="attr">status</span>: <span class="string">'completed'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> action = &#123;</div><div class="line">      <span class="attr">type</span>: <span class="string">'DELETE_ITEM'</span>,</div><div class="line">      <span class="attr">itemId</span>: <span class="number">2</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> nextState = reducer(initialState, action);</div><div class="line">    expect(nextState).to.equal(fromJS(&#123;</div><div class="line">      <span class="attr">todos</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'React'</span>, <span class="attr">status</span>: <span class="string">'active'</span>&#125;,</div><div class="line">      ]</div><div class="line">    &#125;));</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><code>src/reducer.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clearCompleted</span>(<span class="params">state</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>,</div><div class="line">    (todos) =&gt; todos.filterNot(</div><div class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'status'</span>) === <span class="string">'completed'</span></div><div class="line">    )</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addItem</span>(<span class="params">state, text</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> itemId = state.get(<span class="string">'todos'</span>).reduce(<span class="function">(<span class="params">maxId, item</span>) =&gt;</span> <span class="built_in">Math</span>.max(maxId,item.get(<span class="string">'id'</span>)), <span class="number">0</span>) + <span class="number">1</span>;</div><div class="line">  <span class="keyword">const</span> newItem = <span class="built_in">Map</span>(&#123;<span class="attr">id</span>: itemId, <span class="attr">text</span>: text, <span class="attr">status</span>: <span class="string">'active'</span>&#125;);</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>, (todos) =&gt; todos.push(newItem));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteItem</span>(<span class="params">state, itemId</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> state.update(<span class="string">'todos'</span>,</div><div class="line">    (todos) =&gt; todos.filterNot(</div><div class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.get(<span class="string">'id'</span>) === itemId</div><div class="line">    )</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">state = Map(</span>), <span class="title">action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">case</span> <span class="string">'CLEAR_COMPLETED'</span>:</div><div class="line">      <span class="keyword">return</span> clearCompleted(state);</div><div class="line">    <span class="keyword">case</span> <span class="string">'ADD_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> addItem(state, action.text);</div><div class="line">    <span class="keyword">case</span> <span class="string">'DELETE_ITEM'</span>:</div><div class="line">      <span class="keyword">return</span> deleteItem(state, action.itemId);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> state;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>src/components/TodoApp.jsx</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div&gt;</div><div class="line">      &lt;section className="todoapp"&gt;</div><div class="line">        // We pass down the addItem callback</div><div class="line">        &lt;TodoHeader addItem=&#123;this.props.addItem&#125;/&gt;</div><div class="line">        &lt;TodoList &#123;...this.props&#125; /&gt;</div><div class="line">        // We pass down the clearCompleted callback</div><div class="line">        &lt;TodoTools changeFilter=&#123;this.props.changeFilter&#125;</div><div class="line">                    filter=&#123;this.props.filter&#125;</div><div class="line">                    nbActiveItems=&#123;this.getNbActiveItems()&#125;</div><div class="line">                    clearCompleted=&#123;this.props.clearCompleted&#125;/&gt;</div><div class="line">      &lt;/section&gt;</div><div class="line">      &lt;Footer /&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬çš„TodoMVC appç°åœ¨å®Œæˆäº†.</p>
<h2 id="åŒ…è£…èµ·æ¥"><a href="#åŒ…è£…èµ·æ¥" class="headerlink" title="åŒ…è£…èµ·æ¥"></a>åŒ…è£…èµ·æ¥</h2><p>è¿™æˆ‘ä»¬çš„æµ‹è¯•é©±åŠ¨çš„React,Redux&amp;Immutable æŠ€æœ¯æ ˆ</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå†…å®¹,æœ‰æ›´å¤šçš„äº‹æƒ…ç­‰ç€ä½ å»æŒ–æ˜<br>ä¾‹å¦‚:</p>
<ul>
<li><a href="https://github.com/reactjs/react-router-redux" target="_blank" rel="external">React Redux router</a>åˆ›å»ºå®Œå…¨çš„å•é¡µé¢åº”ç”¨</li>
<li>æ˜¯ç”±Reduxåœ¨åå°åŒæ„Redux,çœ‹è¿™<a href="http://teropa.info/blog/2015/09/10/full-stack-redux-tutorial.html" target="_blank" rel="external">1æ•™ç¨‹</a>,<a href="https://blog.diacode.com/trello-clone-with-phoenix-and-react-pt-1" target="_blank" rel="external">2æ•™ç¨‹</a></li>
<li><a href="https://github.com/Ghirro/gambit" target="_blank" rel="external">Gambie</a>,ç®€å•çš„åŒ…è£…å™¨ç®€åŒ–åˆ°APIçš„è¿æ¥</li>
<li><a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">ç³»åˆ—è§†é¢‘</a>,ä½œè€…æ˜¯Dan Abramov(Reduxçš„åˆ›å»ºè€…)</li>
<li>Redux <a href="http://redux.js.org/docs/introduction/Ecosystem.html" target="_blank" rel="external">ç½‘ç«™ä¸Šæ›´å¤šçš„å†…å®¹</a>!</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptçŠ¶æ€æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/08/Javascript%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>çŠ¶æ€æ¨¡å¼æ˜¯è§£å†³æŸäº›éœ€æ±‚åœºæ™¯çš„æœ€å¥½æ–¹æ³•ã€‚çŠ¶æ€æ¨¡å¼çš„å…³é”®æ˜¯åŒºåˆ†äº‹ç‰©å†…éƒ¨çš„çŠ¶æ€ï¼Œäº‹ç‰©å†…éƒ¨çš„çŠ¶æ€çš„æ”¹å˜å¾€å¾€ä¼šå¸¦æ¥äº‹ç‰©çš„è¡Œä¸ºçš„æ”¹å˜<br>å‚è€ƒã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹ç¬¬16ç« </p>
</blockquote>
<p>æˆ‘åœ¨å‰é¢å†™äº†ä¸€ä¸ªç®€å•çš„æ•™ç¨‹ï¼Œä¸ºäº†è¯´æ˜react/reduxä¸­çš„çŠ¶æ€ç®¡ç†ï¼Œã€Šjavascriptæ¨¡å¼è®¾è®¡ä¸å¼€å‘å®è·µã€‹é‡Œé¢æœ‰è¿™æ ·çš„æ¨¡å¼ã€‚åœ¨ä¸‹ä¸€æ­¥çš„é‡æ„ä¸­ï¼Œå¦‚æœä»ç®€å•ç”µç¯çš„å¼€å…³æ”¹ä¸ºå¤šçº§è°ƒå…‰çš„ç”µç¯å¯ä»¥å€Ÿé‰´è¿™æ ·çš„æ¨¡å¼ã€‚åœ¨ç®€å•çš„å¤šä¸ªçŠ¶æ€ä¹‹é—´åˆ‡æ¢çš„æ—¶å€™ï¼Œè¿™æ ·çš„æ¨¡å¼æ˜¯éå¸¸æ¸…æ™°çš„ã€‚</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢ï¼Œä½¿ç”¨if-elseæ¥åˆ‡æ¢ï¼Œåœ¨æœ‰å¤šä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œè¿™æ ·çš„åˆ‡æ¢å°±ä¼šåµŒå¥—å¾ˆå¤šçš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œå¦‚æœåŠ å…¥æ–°çš„çŠ¶æ€ï¼Œä¿®æ”¹ä»£ç ä¹Ÿæ¯”è¾ƒå›°éš¾</div><div class="line">Light.prototype.buttonWasPressed = function()&#123;</div><div class="line">		if ( this.<span class="keyword">state</span> === 'off' )&#123;</div><div class="line">			console.<span class="keyword">log</span>( 'å¼€ç¯' );</div><div class="line">			this.<span class="keyword">state</span> = '<span class="keyword">on</span>';</div><div class="line">		&#125;else if ( this.<span class="keyword">state</span> === '<span class="keyword">on</span>' )&#123;</div><div class="line">			console.<span class="keyword">log</span>( 'å…³ç¯' );</div><div class="line">			this.<span class="keyword">state</span> = 'off';</div><div class="line">		&#125;</div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>çŠ¶æ€æ¨¡å¼çš„å…³é”®å°±æ˜¯ï¼šæŠŠäº‹ç‰©çš„æ¯ç§çŠ¶æ€éƒ½å°è£…æˆå•ç‹¬çš„ç±»ï¼Œè·Ÿæ­¤çŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½è¢«å°è£…åœ¨è¿™ä¸ªç±»çš„å†…éƒ¨ã€‚åªè¦æœ‰äº¤äº’è¡Œä¸ºï¼Œåªéœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼ŒæŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡å³å¯ï¼Œè¯¥çŠ¶æ€å¯¹è±¡ä¼šè´Ÿè´£æ¸²æŸ“å®ƒè‡ªèº«çš„è¡Œä¸ºã€‚</p>
<ol>
<li>å°è£…çŠ¶æ€</li>
</ol>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> OffLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">		    <span class="keyword">this</span>.light = light;</div><div class="line">		    &#125;;</div><div class="line">	     </div><div class="line">	OffLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å¼±å…‰'</span> ); <span class="comment">// offLightState å¯¹åº”çš„è¡Œä¸º</span></div><div class="line">		  <span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.weakLightState ); <span class="comment">// åˆ‡æ¢çŠ¶æ€åˆ°weakLightState</span></div><div class="line">     &#125;;</div><div class="line">    <span class="comment">// WeakLightStateï¼š</span></div><div class="line">    <span class="keyword">var</span> WeakLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">	  <span class="keyword">this</span>.light = light;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    WeakLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å¼ºå…‰'</span> ); <span class="comment">// weakLightState å¯¹åº”çš„è¡Œä¸º</span></div><div class="line">		<span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.strongLightState ); <span class="comment">// åˆ‡æ¢çŠ¶æ€åˆ°strongLightState</span></div><div class="line">	   &#125;;</div><div class="line">	<span class="comment">// StrongLightStateï¼š</span></div><div class="line">	  <span class="keyword">var</span> StrongLightState = <span class="function"><span class="keyword">function</span>(<span class="params"> light </span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.light = light;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	 StrongLightState.prototype.buttonWasPressed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log( <span class="string">'å…³ç¯'</span> ); <span class="comment">// strongLightState å¯¹åº”çš„è¡Œä¸º</span></div><div class="line">		<span class="keyword">this</span>.light.setState( <span class="keyword">this</span>.light.offLightState ); <span class="comment">// åˆ‡æ¢çŠ¶æ€åˆ°offLightState</span></div><div class="line">	&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨Lightç±»ä¸­ä¸ºæ¯ä¸ªçŠ¶æ€ç±»éƒ½åˆ›å»ºä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°ç”µç¯ä¸€å…±æœ‰å¤šå°‘ä¸ªçŠ¶æ€</p>
</blockquote>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span></span>()&#123;</div><div class="line">	<span class="built_in">this</span>.offLightState = <span class="keyword">new</span> <span class="type">OffLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.weakLightState = <span class="keyword">new</span> <span class="type">WeakLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.strongLightState = <span class="keyword">new</span> <span class="type">StrongLightState</span>( <span class="built_in">this</span> );</div><div class="line">	<span class="built_in">this</span>.button = <span class="literal">null</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨buttonæŒ‰é’®è¢«æŒ‰ä¸‹çš„æ—¶å€™ï¼Œé€šè¿‡self.currState.buttonWasPressed()å°†è¯·æ±‚å§”æ‰˜ä¸ºå½“å‰çš„çŠ¶æ€å»æ‰§è¡Œã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Light.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> button = <span class="built_in">document</span>.createElement( <span class="string">'button'</span> ),</div><div class="line">	self = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild( button );</div><div class="line">	<span class="keyword">this</span>.button.innerHTML = <span class="string">'å¼€å…³'</span>;</div><div class="line">	<span class="keyword">this</span>.currState = <span class="keyword">this</span>.offLightState; <span class="comment">// è®¾ç½®å½“å‰çŠ¶æ€</span></div><div class="line">	<span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		self.currState.buttonWasPressed();</div><div class="line">	&#125;	</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æœ€åæä¾›ä¸€ä¸ªsetStateçš„æ–¹æ³•ï¼ŒçŠ¶æ€å¯¹è±¡é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥åˆ‡æ¢lightå¯¹è±¡çš„çŠ¶æ€ã€‚çŠ¶æ€å¯¹è±¡çš„åˆ‡æ¢è§„å¾‹è¢«å®šä¹‰åœ¨å„ä¸ªçŠ¶æ€ç±»ä¸­ã€‚<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Light.prototype.setState = <span class="function"><span class="keyword">function</span></span>( <span class="keyword">new</span><span class="type">State</span> )&#123;</div><div class="line">		<span class="built_in">this</span>.currState = <span class="keyword">new</span><span class="type">State</span>; <span class="comment">//è®¾ç½®ä¸‹ä¸€ä¸ªçŠ¶æ€</span></div><div class="line">	&#125;;</div></pre></td></tr></table></figure></p>
<p>#####Javascriptç‰ˆæœ¬çš„çŠ¶æ€æœº</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Light = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.currState = FSM.off; <span class="comment">// è®¾ç½®å½“å‰çŠ¶æ€</span></div><div class="line">		<span class="keyword">this</span>.button = <span class="literal">null</span>;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	Light.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> button = <span class="built_in">document</span>.createElement( <span class="string">'button'</span> ),</div><div class="line">		self = <span class="keyword">this</span>;</div><div class="line">		button.innerHTML = <span class="string">'å·²å…³ç¯'</span>;</div><div class="line">		<span class="keyword">this</span>.button = <span class="built_in">document</span>.body.appendChild( button );</div><div class="line">		<span class="keyword">this</span>.button.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="comment">//åˆå§‹åŒ–ä¸‹å°±æ˜¯è°ƒç”¨FSM.offçš„æ–¹æ³•è®¾ç½®å†…éƒ¨çŠ¶æ€self.currState.buttonWasPressed.call( self ); // æŠŠè¯·æ±‚å§”æ‰˜ç»™FSM çŠ¶æ€æœº</span></div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> FSM = &#123;</div><div class="line">		<span class="attr">off</span>: &#123;</div><div class="line">			<span class="attr">buttonWasPressed</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log( <span class="string">'å…³ç¯'</span> );</div><div class="line">				<span class="keyword">this</span>.button.innerHTML = <span class="string">'ä¸‹ä¸€æ¬¡æŒ‰æˆ‘æ˜¯å¼€ç¯'</span>;</div><div class="line">				<span class="keyword">this</span>.currState = FSM.on;</div><div class="line">			&#125;</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">on</span>: &#123;</div><div class="line">			<span class="attr">buttonWasPressed</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="built_in">console</span>.log( <span class="string">'å¼€ç¯'</span> );</div><div class="line">				<span class="keyword">this</span>.button.innerHTML = <span class="string">'ä¸‹ä¸€æ¬¡æŒ‰æˆ‘æ˜¯å…³ç¯'</span>;</div><div class="line">				<span class="keyword">this</span>.currState = FSM.off;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">var</span> light = <span class="keyword">new</span> Light();</div><div class="line">	light.init();</div></pre></td></tr></table></figure>
<p>å…·ä½“çš„å®ä¾‹è¯¦ç»†çœ‹çœ‹ä¹¦ä¸­çš„ä¾‹å­</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-Redux-Saga-helloï¼Œworld!]]></title>
      <url>http://yoursite.com/2017/03/08/%E7%BF%BB%E8%AF%91-Redux-Saga-hello%EF%BC%8Cworld!/</url>
      <content type="html"><![CDATA[<p>12 OCTOBER 2016</p>
<blockquote>
<p>è¿™æ˜¯ç¿»è¯‘ç‰ˆæœ¬,<a href="https://ohyayanotherblog.ghost.io/redux-saga-hello-world/" target="_blank" rel="external">åŸæ–‡è¯·è§</a></p>
</blockquote>
<hr>
<p><a href="http://www.jianshu.com/p/6f8678a6ad78" target="_blank" rel="external">ç¬¬ä¸€éƒ¨åˆ†è¯‘æ–‡è¯·è§</a>ï¼Œ<br><a href="http://www.jianshu.com/p/fad0136e77c0" target="_blank" rel="external">ç¬¬äºŒéƒ¨åˆ†è¯‘æ–‡è¯·è§</a>ï¼Œ<br><a href="http://www.jianshu.com/p/88fc4236b505" target="_blank" rel="external">ç¬¬ä¸‰éƒ¨åˆ†è¯‘æ–‡è¯·è§</a>.</p>
<hr>
<p>##ç®€å•çš„Redux Saga æ¨¡æ¿</p>
<p>åœ¨è¿™ä¸ªæ–‡ç« ä¸­,æˆ‘ä»¬å°†å®Œæˆå®Œæ•´çš„React/Redux/Redux Saga app,å¹¶ä¸”æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¦è¿™æ ·åš.</p>
<p>æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªappçš„æ¨¡æ¿ä½œä¸ºæœ¬æ–‡çš„èµ·ç‚¹,æˆ‘ä»¬æ²¡æœ‰å¿…è¦å…³æ³¨ä¸€äº›å¼€å‘çš„ç»†èŠ‚,å› ä¸ºè¿™äº›ç»†èŠ‚ä¸æ˜¯æœ¬ç³»åˆ—æ–‡ç« çš„é‡ç‚¹(æˆ‘å‡è®¾ä½ å·²ç»äº†è§£React,Reduxä»¥åŠä¸æ­¤ç›¸å…³çš„å¼€å‘å·¥å…·.)ä½†æ˜¯æˆ‘ä»ç„¶ä¼šç®€å•å¼ºè°ƒä¸€äº›å†…å®¹,ä»¥ä¾¿äºä½ å¯¹é¡¹ç›®ä¾èµ–åŒ…å’Œé…ç½®æœ‰ä¸€äº›åŸºç¡€çš„äº†è§£.ä½ å¯èƒ½æ˜¯ä¸ªé«˜æ‰‹,æˆ–è€…æ˜¯ä¸ªä¸æŠ˜ä¸æ‰£çš„èœé¸Ÿ(æ˜¯èœé¸Ÿä¹Ÿæ²¡æœ‰å…³ç³»)å¦‚æœä½ ä¸å…³å¿ƒè¿™äº›åŸºç¡€å†…å®¹,ç›´æ¥è·³åˆ°é‚£å‰¯å›¾ç‰‡,çœ‹çœ‹åé¢çš„å†…å®¹.</p>
<p>ç¬¬ä¸€æ­¥,å…‹éš†repo,å¹¶ä¸”å®‰è£…ä¾èµ–åŒ…:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">//åŸæ–‡çš„repoä¸èƒ½è¿è¡Œäº†,ä¸‹é¢çš„repoæ˜¯éªŒè¯è¿‡çš„</span></div><div class="line">  git clone https:<span class="comment">//github.com/granmoe/redux-saga-clock-tutorial.git  </span></div><div class="line">cd redux-saga-clock-tutorial  </div><div class="line">npm i</div></pre></td></tr></table></figure></p>
<hr>
<p>å¥½äº†åšå®Œä¸Šé¢çš„å·¥ä½œ,ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®,è®©æˆ‘ä»¬å…ˆçœ‹çœ‹é‡Œé¢æœ‰äº›ä»€ä¹ˆå†…å®¹.<br>åœ¨æˆ‘ä»¬çš„package.jsonæ–‡ä»¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯éå¸¸æ ‡å‡†çš„,ä½†æ˜¯è¦æ³¨æ„,å¦‚æœè¦å¯¹ä»˜ä¸æ”¯æŒES2015æ ‡ç –çš„æµè§ˆå™¨,éœ€è¦å¼•å…¥babel-polyfillåŒ….è¿™ä¸ªåŒ…å¿…é¡»åœ¨redux-sagaä¹‹å‰å¼•å…¥(è¯‘è€…:redux-sagaä½¿ç”¨äº†ES2015çš„æŠ€æœ¯ï¼Œæ‰€ä»¥è¦å…ˆè·å¾—æ”¯æŒæ‰å¯ä»¥).</p>
<p>ä½ ä¹Ÿå¯ä»¥æ³¨æ„åˆ°,åœ¨package.jsonä¸­æœ‰ESLintä¾èµ–åŒ…,å› ä¸ºæˆ‘å‘ç°è¿™ä¸ªä¾èµ–åŒ…æ˜¯å¼€å‘ä¸­çš„æ— ä»·ä¹‹å®.</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬çš„babelé…ç½®,åœ¨.babelrcæ–‡ä»¶ä¸­:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line"><span class="string">"presets"</span>: [<span class="string">"es2015"</span>, <span class="string">"react"</span>, <span class="string">"stage-2"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>æˆ‘å·²ç»å†³å®šä½¿ç”¨es2015,reactå’Œstage-2.</p>
<p>æˆ‘è¿˜æƒ³è®²è®².eslintrcæ–‡ä»¶,ä½†æ˜¯æˆ‘å®åœ¨æ˜¯ä¸æƒ³è®©ä½ çœ‹åˆ°æƒ³ç¡è§‰.</p>
<p>webpackå’Œindex.htmlæ–‡ä»¶æ²¡è®²,ä½†æ˜¯è¿™é‡Œä¼°è®¡æ²¡æœ‰äººä¼šå¯¹è¿™ä¸¤ä¸ªæ–‡ä»¶æ„Ÿå…´è¶£.</p>
<p>#å¼€å§‹è¿›å…¥æ­£é¢˜å§<br><img src="http://upload-images.jianshu.io/upload_images/2044710-6a256c33dfea1ba8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/320" alt="patrick Stewart McKellan Elmo.jpg"><br> appçš„å…¥å£æ–‡ä»¶æ˜¯main.jsx:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">import</span> <span class="string">'babel-polyfill'</span> <span class="comment">// generator support  </span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>  </div><div class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'app.jsx'</span>  </div><div class="line"><span class="keyword">import</span> initStore <span class="keyword">from</span> <span class="string">'store'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> store = initStore()</div><div class="line"></div><div class="line">ReactDOM.render(  </div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;</span> <span class="attr">store</span> &#125;&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div></pre></td></tr></table></figure>
<hr>
<p> è¿™é‡Œæˆ‘ä»¬å¯¼å…¥ä¸€äº›ä¾èµ–é¡¹(åŒ…æ‹¬babel-polyfill),å¯¼å…¥æ ¹ç»„ä»¶,redux storeçš„é…ç½®,å®ä¾‹åŒ–store,ç„¶ååœ¨ç»è¿‡Provider classåŒ…è£…çš„â€appâ€divçš„ä¸­ä½¿ç”¨ReactDOMæ¸²æŸ“å‡ºæ ¹ç»„ä»¶,è¿™æ ·ä»¥æ¥,åœ¨appä¸­æ‰€æœ‰ç»„ä»¶æ ‘ç§çš„reactç»„ä»¶éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„æ¥å…¥åˆ°æˆ‘ä»¬çš„storeå®ä¾‹.</p>
<p> æŸ¥çœ‹store.js,ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨saga middlewareæ¥é…ç½®æˆ‘ä»¬çš„store:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">'redux-saga'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="keyword">const</span> sagaMiddleware = createSagaMiddleware()</div><div class="line"></div><div class="line">  <span class="keyword">const</span> store = createStore(</div><div class="line">    rootReducer,</div><div class="line">    applyMiddleware(sagaMiddleware)</div><div class="line">  )</div><div class="line"></div><div class="line">  sagaMiddleware.run(rootSaga)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> store</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p> é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨<code>createSagaMiddleware</code>æ–¹æ³•æ¥åˆ›å»ºmiddlewareå®ä¾‹.æ¥ä¸‹æ¥,æŠŠæ ¹reducerå’Œmiddlewareä¼ é€’åˆ°<code>createStore</code>,è¿™å°±åˆ›å»ºäº†ä¸€ä¸ªredux store.ç„¶åæŠŠæˆ‘ä»¬appçš„root sagaä¼ é€’è¿›saga middleware.è¿™ä¸€æ­¥ä¸€å®šè¦åœ¨redux storeå®ä¾‹åŒ–ä»¥åå†æ‰§è¡Œ.<code>rootSaga</code>æ˜¯é¡¶çº§generator,è¿™ä¸ªgeneratorè´Ÿè´£ä»£ç†å…¶ä»–æ‰€æœ‰çš„generatorsçš„å·¥ä½œ(é©¬ä¸Šä¼šçœ‹åˆ°.)</p>
<p> ##ä¸Šé¢éƒ½æ˜¯äº›ä»€ä¹ˆè§é¬¼çš„ä»£ç ,ä½ ä¸ªç‹å…«è›‹(è¯‘è€…:åŸæ„ç›´æ¥ç¿»è¯‘å•Š)<br> å…¶å®æˆ‘ä»¬å·²ç»æœ‰äº†æœ‰è¶£çš„ä¸œè¥¿,æˆ‘ä»¬çš„ä»£ç åŸºæœ¬ä¸Šä¾èµ–ä¸¤ä¸ªæ–‡ä»¶.â€app.jsxâ€æ˜¯ä¸€ä¸ªreactç»„ä»¶,å¯ä»¥æ ¹æ®appçš„stateå’ŒåŸºäºDOMäº‹ä»¶ç³»ç»Ÿçš„actionsæ¥è¿”å›æ¸²æŸ“çš„htmlæ ‡è®°.â€duck.jsâ€åŒ…å«å•çº¯å¯¹è±¡actionså’Œreducer,è¿™ä¸¤ä¸ªå‡½æ•°ä¸€èµ·å·¥ä½œæè¿°å‡ºæ€ä¹ˆä¿®æ”¹state.å…¶ä¸­ä¹ŸåŒ…å«äº†æ‰€æœ‰çš„æ§åˆ¶æµä»£ç ,æ§åˆ¶æµä»£ç æè¿°äº†æ•´ä¸ªappçš„å¤„ç†è¿‡ç¨‹.å¦‚æœä½ å¾ˆç†Ÿæ‚‰æ ‡å‡†çš„é¸­å­æ¨¡å‹,æˆ‘ä»…ä»…ä¿®æ”¹äº†é¸­å­æ¨¡å‹,è®©ä»–å¾ˆå®¹æ˜“åŒ…å«sagaä»£ç .è®©æˆ‘ä»¬ä½¿ç”¨é¸­å­æ¨¡å—æ¥å·¥ä½œå§.</p>
<p>  æˆ‘ä»¬å°†ä¼šåˆ›å»ºä¸€ä¸ªå¯ä»¥æ§åˆ¶çš„æ—¶é’Ÿ.å¼€å§‹æ¥æƒ³æƒ³appéœ€è¦çš„æœ€ç²¾ç®€çš„sateç»“æ„.åœ¨ä»»ä½•æ—¶é—´æˆ‘ä»¬è¦è¯¢é—®appçš„çŠ¶æ€æ˜¯â€ç°åœ¨å‡ ç‚¹äº†ï¼Ÿâ€æ‰€æœ‰æˆ‘ä»¬éœ€è¦å­˜å‚¨çš„å°±æ˜¯å•ä¸ªçš„æ•°å­—.ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆæ”¹å˜è¿™ä¸ªçŠ¶æ€.å¥½çš„,æˆ‘ä»¬æˆ‘ä»¬å°†åˆ¶ä½œä¸€ä¸ªæ—¶é’Ÿ,ç”¨æˆ·å¯ä»¥å‘å‰,å‘å,æš‚åœå’Œé‡ç½®.è¿™é‡Œçš„æ„æƒ³æ„å‘³ç€æˆ‘ä»¬è¡¨å¾æ—¶é—´çš„ä»£ç é€»è¾‘éœ€è¦å¢,å‡,ä»€ä¹ˆä¹Ÿä¸åš,é‡ç½®åˆ°0.ä»€ä¹ˆäº‹ä¹Ÿä¸åšæ„å‘³ç€ä¸éœ€è¦sateå‘ç”Ÿæ”¹å˜,æ‰€ä»¥æˆ‘ä»¬ç•™ä¸‹å¢åŠ ,å‡å°‘,é‡ç½®.æˆ‘ä»¬è¦æ˜¾ç¤ºæ—¶é—´çš„æ¯«ç§’æ•°,å› æ­¤appçš„stateå°±å®šä¸ºâ€æ¯«ç§’æ•°â€.</p>
<p>  æ­£å¦‚ä¸Šé¢æ‰€è®²çš„,æˆ‘ä»¬åœ¨reduxä»£ç ä¸­ä½¿ç”¨é¸­å­æ¨¡å‹,å¦‚æœä½ ä¸å–œæ¬¢è¿™æ ·åš,å¯ä»¥åˆ†å‰²æˆä¸‰ä¸ªæ–‡ä»¶.<br>  è®©æˆ‘ä»¬çœ‹çœ‹duck.jsä¸­çš„ç¬¬ä¸€éƒ¨åˆ†,<code>saga actions</code>.</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">import</span> &#123; takeLatest &#125; <span class="keyword">from</span> <span class="string">'redux-saga'</span></div><div class="line"><span class="keyword">const</span> initialState = &#123;  </div><div class="line">  <span class="attr">milliseconds</span>: <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">reducer</span> (<span class="params">currentState = initialState, action</span>) </span>&#123;  </div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'reset-clock'</span>:</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...currentState,</div><div class="line">        <span class="attr">milliseconds</span>: <span class="number">0</span></div><div class="line">      &#125;</div><div class="line">    <span class="keyword">case</span> <span class="string">'increment-milliseconds'</span>:</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...currentState,</div><div class="line">        <span class="attr">milliseconds</span>: currentState.milliseconds + <span class="number">100</span></div><div class="line">      &#125;</div><div class="line">    <span class="keyword">case</span> <span class="string">'decrement-milliseconds'</span>:</div><div class="line">      <span class="keyword">if</span> (!currentState.milliseconds) &#123; <span class="keyword">return</span> currentState &#125;</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...currentState,</div><div class="line">        <span class="attr">milliseconds</span>: currentState.milliseconds - <span class="number">100</span></div><div class="line">      &#125;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> currentState</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> resetClock = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'reset-clock'</span> &#125;) </div><div class="line"> </div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> incrementMilliseconds = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'increment-milliseconds'</span> &#125;)  </div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> decrementMilliseconds = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'decrement-milliseconds'</span> &#125;)</div></pre></td></tr></table></figure>
<hr>
<p> ä¸Šé¢è¿™æ®µä»£ç å¾ˆç®€å•.é¦–å…ˆç”±æˆ‘ä»¬éœ€æ±‚å­—æ®µçš„èµ·å§‹state,æ¥ç€æœ‰ä¸€ä¸ªreducer,reducerå®é™…ä¸Šæ“ä½œactions,å®ƒåŸºäºaction typeå¯¹stateåšå‡ºåˆé€‚çš„ä¿®é¥°,ä¹‹ååˆ›å»ºæ–°çš„stateã€‚æœ€åæˆ‘ä»¬export(æ¨¡å—æ¨¡å¼)ä¸€äº›å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨çš„<code>å•çº¯actionå¯¹è±¡</code>.(é©¬ä¸Šæˆ‘ä»¬ä¼šåœ¨sagaä¸­å¯¼å…¥actionå¯¹è±¡ä¹‹ä¸€).ç¤ºä¾‹ä»£ç æ€»æ˜¯è¿™ä¹ˆè¿™ä¹ˆçš„æ•´æ´.</p>
<p> ç°åœ¨æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸‹appçš„æµç¨‹.åœ¨å¤„ç†è¿‡ç¨‹ä¸­,ä»€ä¹ˆçŠ¶æ€éœ€è¦è¾“å…¥ï¼Ÿè¿™ä¸ªé—®é¢˜çš„å¦ä¸€ä¸ªé—®æ³•æ˜¯:appåœ¨æŸä¸ªç‰¹å®šçš„æ—¶é—´åº”è¯¥åšä»€ä¹ˆå·¥ä½œï¼Ÿæˆ‘ä»¬çš„æ—¶é’Ÿå¯ä»¥å‘å‰,å‘å,æš‚åœ.ä¸ºäº†åœ¨è¿™å‡ ä¸ªè¿‡ç¨‹ä¸­ç›¸äº’è½¬å˜,æˆ‘ä»¬éœ€è¦ä¸‰ä¸ªaction,å¼€å§‹æ—¶é’Ÿ,æ‹¨å›æ—¶é—´,æš‚åœæ—¶é’Ÿ.</p>
<p> ä»ä»£ç <code>//saga actions</code>å¼€å§‹,çœ‹çœ‹duckæ¨¡å—çš„å‰©ä½™éƒ¨åˆ†.æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸‰ä¸ªactions,æˆ‘ä»¬çš„root sagaåœ¨æ”¶åˆ°æŸä¸ªactionçš„æ—¶å€™,ä¼šå¯åŠ¨ä¸€ä¸ªå‚»ç“œå¤„ç†æµç¨‹.ç°åœ¨åœ¨ä»£ç é‡Œå‚»ç“œå¤„ç†æµç¨‹åªæ˜¯æ‰“å°ä¸€ä¸‹actionçš„åå­—.åç»­æˆ‘ä»¬ä¼šå¼€å§‹æ ¹æ®action typeå¤„ç†å…·ä½“çš„å¢,å‡,ä¼‘çœ æµç¨‹.è¿™é‡Œæ˜¯duck.jsçš„sagaä»£ç .</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// saga actions</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> startClock = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'start-clock'</span> &#125;)  </div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> pauseClock = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'pause-clock'</span> &#125;)  </div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> rewindClock = <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">type</span>: <span class="string">'rewind-clock'</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">// saga</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span>* <span class="title">rootSaga</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="keyword">yield</span> takeLatest([<span class="string">'start-clock'</span>, <span class="string">'pause-clock'</span>, <span class="string">'rewind-clock'</span>], handleClockAction)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Pushed this action to handleClockAction: '</span>, type)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p> actions(ä¸¥æ ¼ä¸Šè®²,æ ¹æ®æœ¯è¯­æ¥è¯´åº”è¯¥æ˜¯å«â€œaction creatorsâ€,ä½†æ˜¯æ— æ‰€è°“,åªè¦ä½ ç†è§£å…·ä½“çš„æ„ä¹‰å°±å¯ä»¥)åº”è¯¥çœ‹èµ·æ¥å’Œå…¶ä»–çš„redux actionsç±»ä¼¼.ä½†æ˜¯è¿™äº›actionåœ¨æˆ‘ä»¬çš„reducerä¸­ä¸èƒ½å¾—åˆ°å¤„ç†.å¦‚æœä¿æŒä»…ä»…åœ¨sagaä»£ç é™„è¿‘ä¿ç•™è¿™äº›actions,è¿™é‡Œçš„acionsä»…ä»…è§¦å‘saga.åšåˆ°è¿™ä¸€ç‚¹,ä¼šé¿å…actionå’Œæ ¹æ®è¿™äº›actionåšå‡ºçš„stateä¿®æ”¹çš„ä»£ç æ··æ‚åœ¨ä¸€èµ·.æ˜¾è€Œæ˜“è§,saga actionä»ç„¶é€šè„±<code>connect</code>å‡½æ•°ç»‘å®šåˆ°storeå®ä¾‹,å¹¶ä¸”è¾“å…¥åˆ°ç»„ä»¶é‡Œ.</p>
<p> ç°åœ¨è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶é‡Œå¥‡æ€ªçš„saga.ä½ è¿˜è®°å¾—<code>rootSaga</code>è¢«ä¼ é€’åˆ°sagaä¸­é—´ä»¶,å¯¹å—ï¼Ÿå¦ç‡è®²,ä½ å¯èƒ½ä¹Ÿä¸çŸ¥é“,ä½†æ˜¯è¿™ä¹Ÿæ²¡å…³ç³».æ¯æ¬¡æˆ‘ä»¬å‘å‡ºä¸€ä¸ªaction,actionä¼šè¢«æ¨é€åˆ°ç»è¿‡<code>sagaMiddleware.run(generator)</code>åŒ…è£…çš„generator.è¿™å°±æ„å‘³ç€,æ¯ä¸ªgeneratoréƒ½æœ‰æœºä¼šå“åº”action,åœ¨æˆ‘ä»¬çš„å®ä¾‹ä¸­,<code>rootSaga</code>é‡åˆ°åŒ¹é…çš„action typeçš„æ—¶å€™æ‰ä¼šåšå‡ºå“åº”.æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä»Redux Sagaè·å–çš„<code>takeLatest</code>åŠ©æ‰‹å‡½æ•°å®Œæˆè¿™ä¸ªå·¥ä½œ.<code>takeLatest</code>æ¥æ”¶ä»»ä½•ä¸action typeæ•°ç»„åŒ¹é…çš„action,ç„¶åæ¥ç€ä¼ é€’ä»–,å¯åŠ¨ä¸€ä¸ª<code>handleClockAcion</code>æµç¨‹,ä¼ é€’è¿›action.<code>takeLatest</code>æ„æ€æ˜¯ç›´æ¥æ”¶æœ€æ–°çš„actionï¼Œå¦‚æœç°åœ¨è¿˜æœ‰æ­£åœ¨è¿è¡Œçš„<code>handleClockAction</code>çš„è¯,åœ¨æ–°çš„actionå¼€å§‹ä¹‹å‰,å½“å‰çš„è¿™ä¸ªå¤„ç†æµç¨‹éœ€è¦å…ˆé€€å‡º.<code>handleClockAction</code>,æœ¬è´¨ä¸Šæ˜¯åœ¨åå°å¯åŠ¨,å…è®¸<code>rootSaga</code>ä¿æŒè¿è¡ŒçŠ¶æ€,å³ä½¿<code>handleClockAction</code>ä»åœ¨è¿è¡Œ,ä¹Ÿå¯ä»¥æ¥å—ä¸‹ä¸€ä¸ªåŒ¹é…çš„action.</p>
<p> æ³¨æ„æˆ‘ä»¬ä½¿ç”¨çš„<code>yield</code>å…³é”®è¯,å›æƒ³ä¸€ä¸‹,<code>yield</code>åœ¨generatorä¸­å‘å‡ºå’Œæ¥æ”¶å€¼.åœ¨ä»»ä½•æ—¶é—´,æˆ‘ä»¬<code>yield</code>ä¸€ä¸ªRedux SagaåŠ©æ‰‹æˆ–è€…effectçš„æ—¶å€™,æˆ‘ä»¬å°±æ­£åœ¨å’ŒSaga middlewareè¿›è¡Œé€šè®¯.åœ¨æˆ‘ä»¬çš„ä¸Šé¢çš„å®ä¾‹ä¸­,Redux Sagaç­‰å¾…åŒ¹é…å‘é€åˆ°sagaçš„action.åé¢æˆ‘ä»¬è¿˜ä¼šæ›´è¿›ä¸€æ­¥æ·±å…¥è®¨è®º.<br> æˆ‘å¸Œæœ›ä½ è‡³å°‘å¯¹è¿™ä¸ªæµç¨‹æœ‰ä¸€ç‚¹æ„Ÿè§‰.æˆ‘è®¤ä¸ºå¯èƒ½åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­(è¯‘è€…ï¼šè¿™é‡Œçš„æ„æ€æ˜¯å®é™…è¿è¡Œä»£ç çš„è¿‡ç¨‹ï¼Œå¹¶ä¸æ˜¯ä»£ç çš„æµ‹è¯•è¿‡ç¨‹)ä½ å¯¹è¿™ä¸ªæµç¨‹æ›´æ¸…æ¥šä¸€ç‚¹.æ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹Reactç»„ä»¶ä¸­æ€ä¹ˆå’Œç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹.<br> åœ¨ç»„ä»¶è¿™ä¸€ç‚¹çœ‹,â€œapp.jsxâ€æ˜¯éå¸¸ç®€å•çš„reactç»„ä»¶.è®©æˆ‘ä»¬çœ‹ä¸ªä»”ç»†.</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; incrementMilliseconds, decrementMilliseconds, resetClock, startClock, pauseClock, rewindClock &#125; <span class="keyword">from</span> <span class="string">'duck'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  </div><div class="line">  render () &#123;</div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      milliseconds,</div><div class="line">      incrementMilliseconds,</div><div class="line">      decrementMilliseconds,</div><div class="line">      resetClock,</div><div class="line">      startClock,</div><div class="line">      pauseClock,</div><div class="line">      rewindClock</div><div class="line">    &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    </div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">incrementMilliseconds</span> &#125; <span class="attr">onDoubleClick</span>=<span class="string">&#123;</span> <span class="attr">resetClock</span> &#125; <span class="attr">onMouseLeave</span>=<span class="string">&#123;</span> <span class="attr">decrementMilliseconds</span> &#125;</span></div><div class="line">          <span class="attr">className</span>=<span class="string">"clock"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 100 100"</span> <span class="attr">width</span>=<span class="string">"500"</span>&gt;</div><div class="line">          <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">"50"</span> <span class="attr">cy</span>=<span class="string">"50"</span> <span class="attr">r</span>=<span class="string">&#123;</span> <span class="attr">30</span> &#125; <span class="attr">stroke</span>=<span class="string">&#123;</span> '<span class="attr">rgba</span>(<span class="attr">1</span>,<span class="attr">1</span>,<span class="attr">1</span>,<span class="attr">1</span>)' &#125; <span class="attr">fill</span>=<span class="string">"orange"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123; milliseconds &#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">startClock</span> &#125;&gt;</span>Start Clock<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">pauseClock</span> &#125;&gt;</span>Pause Clock<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">rewindClock</span> &#125;&gt;</span>Rewind Clock<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default connect(state =&gt; (&#123;  </div><div class="line">  milliseconds: state.milliseconds</div><div class="line">&#125;), (&#123;</div><div class="line">  incrementMilliseconds,</div><div class="line">  decrementMilliseconds,</div><div class="line">  resetClock,</div><div class="line">  startClock,</div><div class="line">  pauseClock,</div><div class="line">  rewindClock</div><div class="line">&#125;))(Clock)</div></pre></td></tr></table></figure>
<hr>
<p> é€šè¿‡ä½¿ç”¨connecté«˜å†…èšç»„ä»¶,æˆ‘ä»¬å¯ä»¥ä»storeçš„stateè·å–ä¸€ä¸ªå­—æ®µ,å¹¶ä½œä¸ºpropsä¼ é€’è¿›å…¥ç»„ä»¶.æˆ‘ä»¬ä¹Ÿé€šè¿‡ä¸€ä¸ªå¯¹è±¡ä¼ é€’å››ä¸ªaction creators.ReduxæŠŠè¿™ä¸ªå¯¹è±¡ç»‘å®šåˆ°storeå®ä¾‹ä¸­,ç¡®ä¿æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­è°ƒç”¨è¿™å‡ ä¸ªactionçš„æ—¶å€™,ä»–ä»¬å¯ä»¥æ­£ç¡®çš„è¢«dispatch.<br>  åœ¨æˆ‘ä»¬çš„æ¸²æŸ“ä¸­,æˆ‘ä»¬è¿”å›ä¸€ä¸ª<code>&lt;div&gt;</code>,è¿™ä¸ªå…ƒç´ ä¸­æœ‰ä¸€ä¸ªSVG(åç»­ä¸­å°†ä¼šæ¯”è¾ƒå…³é”®).SVGæœ‰ä¸€äº›äº‹ä»¶æ“ä½œå¥æŸ„,è¿™äº›æ“ä½œå¥æŸ„å°†ä¼šdispatch stateä¿®é¥°actions.æ¥ä¸‹æ¥,ä¼šæœ‰ä¸€ä¸ª<code>&lt;p&gt;</code>å…ƒç´ ä¾æ®appçš„stateæ¥æ˜¾ç¤ºå½“å‰æ—¶é—´.æœ€åæˆ‘ä»¬æœ‰å‡ ä¸ª<code>&lt;button&gt;</code>s è¿æ¥åˆ°sagaçš„actions.<br>  ä¸Šé¢çš„ä»£ç éƒ½å°±ä½ä»¥å,æˆ‘ä»¬å°±è¯•ç€è¿è¡Œä¸€ä¸‹app,éªŒè¯ä¸€ä¸‹åŸºç¡€æ„æ¶å’Œactionsçš„å·¥ä½œæƒ…å†µ.</p>
<p>  ##åˆ°åº•èƒ½å·¥ä½œå—ï¼Ÿ<br>  å›åˆ°ä½ çš„ç»ˆç«¯,è¿è¡Œ<code>npm start</code>.ç°åœ¨è¾“å…¥localhost:8080,åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€devtools,æ£€æŸ¥ä¸€ä¸‹js ç»ˆç«¯.å½“ä½ ç‚¹å‡»buttonsçš„æ—¶å€™,ä¼šçœ‹åˆ°saga actionsçš„æ—¥å¿—è¾“å‡º.ç°åœ¨è¯•ç€åœ¨SVGä¸Šç‚¹å‡»,é¼ æ ‡ä¸€å®š,åŒå‡»action.ä½ å¯ä»¥çœ‹åˆ°æ¯«ç§’æ–‡æœ¬çš„æ›´æ–°.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-740c183a8fff53ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/480" alt="appçš„ç•Œé¢"></p>
<p>  çœŸå¥½å•Š,æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªRedux Saga appçš„æ¨¡æ¿ç»“æ„,äº†è§£äº†æ€ä¹ˆä½¿ç”¨<code>takeLatest</code>.è¿˜å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å‡ºä¸€äº›æ—¥å¿—ä¿¡æ¯.æ£’ï¼<br>  åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬ä¼šå®Œæˆæ•´ä¸ªæ—¶é’Ÿçš„å®æ–½,å¾—åˆ°ä¸€äº›éå¸¸é…·çš„å†…å®¹.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Redux-awesome]]></title>
      <url>http://yoursite.com/2017/03/08/Awesome%20Redux/</url>
      <content type="html"><![CDATA[<h1 id="Awesome-Redux"><a href="#Awesome-Redux" class="headerlink" title="Awesome Redux "></a>Awesome Redux <a href="https://github.com/sindresorhus/awesome" target="_blank" rel="external"><img src="https://cdn.rawgit.com/sindresorhus/awesome/d7305f38d29fed78fa85652e3a63e154dd8e8829/media/badge.svg" alt="Awesome"></a></h1><blockquote>
<p>List of repositories which use Redux</p>
</blockquote>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a><a href="https://github.com/reactjs/redux" target="_blank" rel="external">Redux</a></h2><h2 id="Documentation-of-Redux"><a href="#Documentation-of-Redux" class="headerlink" title="Documentation of Redux"></a><a href="http://redux.js.org" target="_blank" rel="external">Documentation of Redux</a></h2><h2 id="Documentation-of-Redux-Simple-Chinese-version"><a href="#Documentation-of-Redux-Simple-Chinese-version" class="headerlink" title="Documentation of Redux(Simple Chinese version)"></a><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="external">Documentation of Redux(Simple Chinese version)</a></h2><h2 id="Documentation-of-Redux-Russian-version-Work-in-progress"><a href="#Documentation-of-Redux-Russian-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Russian version) (Work in progress)"></a><a href="https://rajdee.gitbooks.io/redux-in-russian/" target="_blank" rel="external">Documentation of Redux(Russian version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Traditional-Chinese-version"><a href="#Documentation-of-Redux-Traditional-Chinese-version" class="headerlink" title="Documentation of Redux(Traditional Chinese version)"></a><a href="http://chentsulin.github.io/redux/index.html" target="_blank" rel="external">Documentation of Redux(Traditional Chinese version)</a></h2><h2 id="Documentation-of-Redux-Japanese-version-Work-in-progress"><a href="#Documentation-of-Redux-Japanese-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Japanese version) (Work in progress)"></a><a href="https://github.com/jposts/redux" target="_blank" rel="external">Documentation of Redux(Japanese version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Portuguese-version-Work-in-progress"><a href="#Documentation-of-Redux-Portuguese-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Portuguese version) (Work in progress)"></a><a href="https://github.com/franzejr/redux-in-portuguese/" target="_blank" rel="external">Documentation of Redux(Portuguese version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Spanish-version-Work-in-progress"><a href="#Documentation-of-Redux-Spanish-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Spanish version) (Work in progress)"></a><a href="https://sergiodxa.gitbooks.io/redux-en-espanol/content/" target="_blank" rel="external">Documentation of Redux(Spanish version)</a> (Work in progress)</h2><h2 id="Documentation-of-Redux-Korean-version"><a href="#Documentation-of-Redux-Korean-version" class="headerlink" title="Documentation of Redux(Korean version)"></a><a href="http://dobbit.github.io/redux/" target="_blank" rel="external">Documentation of Redux(Korean version)</a></h2><h2 id="Documentation-of-Redux-Sinhala-à·ƒà·’à¶‚à·„à¶½-version-Work-in-progress"><a href="#Documentation-of-Redux-Sinhala-à·ƒà·’à¶‚à·„à¶½-version-Work-in-progress" class="headerlink" title="Documentation of Redux(Sinhala|à·ƒà·’à¶‚à·„à¶½ version) (Work in progress)"></a><a href="https://sandaruny.github.io/redux-sin/" target="_blank" rel="external">Documentation of Redux(Sinhala|à·ƒà·’à¶‚à·„à¶½ version)</a> (Work in progress)</h2><blockquote>
<p>Predictable state container for JavaScript apps</p>
</blockquote>
<h2 id="Marks"><a href="#Marks" class="headerlink" title="Marks"></a>Marks</h2><ul>
<li><a href="http://isomorphic.net" target="_blank" rel="external">Universal (Isomorphic)</a> - :metal:</li>
<li><a href="https://github.com/gaearon/react-transform-hmr" target="_blank" rel="external">Hot Reload</a> - :fire:</li>
</ul>
<h3 id="Presentations"><a href="#Presentations" class="headerlink" title="Presentations"></a>Presentations</h3><ul>
<li><a href="https://www.youtube.com/watch?v=d0oUGmSE6IY&amp;list=PLJBrYU54JD2pTblB20OmV7GL6H5J-p2g8" target="_blank" rel="external">Letâ€™s learn React and Redux with Javascriptâ€™s new ES6 syntax, from Beginner to Intermediate to Advanced.</a></li>
<li><a href="https://github.com/chentsulin/redux-intro" target="_blank" rel="external">A introduction about Redux</a></li>
<li><a href="https://speakerdeck.com/chrisui/real-world-redux" target="_blank" rel="external">Real World Redux</a></li>
<li><a href="http://slides.com/omnidan/hor" target="_blank" rel="external">The power of higher-order reducers</a></li>
<li><a href="http://slides.com/evanschultz-1/reactive-angular" target="_blank" rel="external">Reactive Architecture with Redux and Angular</a></li>
<li><a href="http://slides.com/vladimirnovick/reduxinternals" target="_blank" rel="external">Redux Internals</a></li>
<li><a href="http://slides.com/scottprue-2/deck" target="_blank" rel="external">Replacing Angular 1 with React and Redux</a></li>
<li><a href="http://slides.com/cguedes/a-tour-on-react-ecosystem" target="_blank" rel="external">A tour on the React ecosystem</a></li>
<li><a href="http://slides.com/jenyaterpil/redux-from-twitter-hype-to-production#/" target="_blank" rel="external">Redux from Twitter hype to production</a></li>
</ul>
<hr>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><ul>
<li><a href="https://github.com/redux-effects" target="_blank" rel="external">Many tools and middlewares</a></li>
<li><a href="https://github.com/paulwittmann/redux-offline-docs" target="_blank" rel="external">Redux offline docs</a></li>
<li><a href="https://github.com/staltz/flux-challenge" target="_blank" rel="external">Flux challenge</a></li>
<li><a href="https://github.com/andrewngu/sound-redux" target="_blank" rel="external">Sound Redux - a simple Soundcloud client</a></li>
<li><a href="https://github.com/rwieruch/favesound-redux" target="_blank" rel="external">Favesound Redux - SoundCloud Client for Artists</a></li>
<li><a href="https://github.com/ipselon/structor" target="_blank" rel="external">Structor - a user interface builder for React</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external">generator-redux - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external">generator-reactapp - Yeoman generator for react app with redux</a></li>
<li><a href="http://rekit.js.org" target="_blank" rel="external">Rekit - Toolkit for building scalable web apps with React, Redux and React-router</a></li>
<li><a href="https://github.com/FormidableLabs/spectacle" target="_blank" rel="external">Spectacle - ReactJS based Presentation Library</a></li>
<li><a href="https://github.com/tayiorbeii/egghead.io_redux_course_notes" target="_blank" rel="external">Notes (and partial transcription) of Dan Abramovâ€™s Redux course videos on http://egghead.io</a></li>
<li><a href="https://github.com/dwyl/learn-redux" target="_blank" rel="external">Comprehensive Notes for Learning (how to use) Redux to manage state in your Web/Mobile Apps</a></li>
<li><a href="https://maxfarseer.gitbooks.io/redux-course-ru/content/" target="_blank" rel="external">React Redux [RU tutorial]</a></li>
<li><a href="https://tonyhb.gitbooks.io/redux-without-profanity/content/index.html" target="_blank" rel="external">Redux without profanity</a></li>
<li><a href="https://medium.com/@sapegin/react-and-redux-single-page-applications-resources-22cd859b0c1d#.o66rolp0p" target="_blank" rel="external">React and Redux Single Page Applications Resources</a></li>
<li><a href="https://github.com/markerikson/redux-ecosystem-links" target="_blank" rel="external">A categorized list of Redux-related addons, libraries, and utilities</a></li>
<li><a href="http://makeitopen.com/tutorials/building-the-f8-app/planning/" target="_blank" rel="external">Building the F8 2016 App (Redux, GraphQL, React Native)</a></li>
<li><a href="https://github.com/salsita/redux-elm" target="_blank" rel="external">The Elm Architecture in JavaScript</a></li>
</ul>
<hr>
<h3 id="Articles-And-Tutorials"><a href="#Articles-And-Tutorials" class="headerlink" title="Articles And Tutorials"></a>Articles And Tutorials</h3><ul>
<li><a href="https://app.pluralsight.com/library/courses/react-redux-react-router-es6" target="_blank" rel="external">Building Applications with React and Redux in ES6 on Pluralsight</a></li>
<li><a href="http://davidandsuzi.com/writing-a-basic-app-in-redux" target="_blank" rel="external">Writing a Basic App in Redux</a></li>
<li><a href="https://github.com/happypoulp/redux-tutorial" target="_blank" rel="external">Learn how to use Redux step by step</a></li>
<li><a href="https://medium.com/@bananaoomarang/handcrafting-an-isomorphic-redux-application-with-love-40ada4468af4" target="_blank" rel="external">Tutorial: Handcrafting an Isomorphic Redux Application (With Love)</a></li>
<li><a href="http://www.jchapron.com/2015/08/14/getting-started-with-redux" target="_blank" rel="external">0 to 1 : Getting started with Redux</a></li>
<li><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="external">Redux Chinese Document</a></li>
<li><a href="https://github.com/chentsulin/redux" target="_blank" rel="external">Redux Document (Traditional Chinese)</a></li>
<li><a href="https://medium.com/@cpojer/relay-and-routing-36b5439bad9" target="_blank" rel="external">Relay and Routing</a></li>
<li><a href="https://medium.com/@meagle/understanding-87566abcfb7a" target="_blank" rel="external">Understanding Redux Middleware</a></li>
<li><a href="https://www.livecoding.tv/ekosz/videos" target="_blank" rel="external">Several videos about Redux + Falcor</a> and <a href="https://github.com/ekosz/postcard-sender" target="_blank" rel="external">Example code</a></li>
<li><a href="http://briantroncone.com/?p=529" target="_blank" rel="external">Redux Middleware: Behind the Scenes</a></li>
<li><a href="https://github.com/erikras/ducks-modular-redux" target="_blank" rel="external">A proposal for bundling reducers, action types and actions when using Redux</a></li>
<li><a href="http://teropa.info/blog/2015/09/10/full-stack-redux-tutorial.html" target="_blank" rel="external">Full-Stack Redux Tutorial - A Comprehensive Guide to Test-First Development with Redux, React, and Immutable</a> Source <a href="https://github.com/teropa/redux-voting-server" target="_blank" rel="external">Server</a> + <a href="https://github.com/teropa/redux-voting-client" target="_blank" rel="external">Client</a></li>
<li><a href="https://medium.com/lexical-labs-engineering/redux-best-practices-64d59775802e" target="_blank" rel="external">Redux best practices</a></li>
<li><a href="http://blog.workshape.io/the-3ree-stack-react-redux-rethinkdb-express-js" target="_blank" rel="external">The 3REE Stack: React + Redux + RethinkDB + Express.js</a></li>
<li><a href="http://engineering.wework.com/process/2015/10/01/react-reflux-to-redux" target="_blank" rel="external">React Tutorial - Converting Reflux to Redux</a></li>
<li><a href="https://github.com/yildizberkay/redux-example" target="_blank" rel="external">Redux example using 500px API (with ES6)</a></li>
<li><a href="http://blog.joanboixados.com/building-a-boilerplate-for-a-koa-redux-react-application-including-webpack-mocha-and-sass/" target="_blank" rel="external">Building a boilerplate for a Koa, Redux, React application including Webpack, Mocha and SASS</a> - This article explains in detail how <a href="https://github.com/mezod/boilerplate-koa-redux-react" target="_blank" rel="external">this koa-redux-react-boilerplate</a> was built and the technologies it uses.</li>
<li><a href="http://jaysoo.ca/2015/09/26/typed-react-and-redux" target="_blank" rel="external">Typed React and Redux</a></li>
<li><a href="https://code-cartoons.com/a-cartoon-intro-to-redux-3afb775501a6#.8k7536uqu" target="_blank" rel="external">A cartoon intro to Redux</a></li>
<li><a href="http://jamesknelson.com/join-the-dark-side-of-the-flux-responding-to-actions-with-actors" target="_blank" rel="external">Join The Dark Side Of The Flux: Responding to Actions with Actors</a></li>
<li><a href="http://jamesknelson.com/can-i-dispatch-multiple-actions-from-redux-action-creators" target="_blank" rel="external">Can I dispatch multiple actions from Redux action creators?</a></li>
<li><a href="http://www.youhavetolearncomputers.com/blog/2015/9/15/a-conceptual-overview-of-redux-or-how-i-fell-in-love-with-a-javascript-state-container" target="_blank" rel="external">Understanding Redux (or, How I Fell in Love with a JavaScript State Container)</a></li>
<li><a href="http://reactjsnews.com/your-first-redux-app" target="_blank" rel="external">Your First Immutable React &amp; Redux App</a></li>
<li><a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">Getting Started with Redux - Eggheadâ€™s video lessons from Dan Abramov</a></li>
<li><a href="https://egghead.io/series/react-testing-cookbook" target="_blank" rel="external">Redux Testing Video Lessons - a few short Egghead video lessons (some free, some require a subscription)</a></li>
<li><a href="https://medium.com/@dorsha/implement-login-modal-with-redux-reselect-and-reactjs-668c468bcbe3#.lnwisap8c" target="_blank" rel="external">Implementing a smart Login Modal with Redux, reselect and ReactJS</a></li>
<li><a href="http://www.sitepoint.com/how-to-build-a-todo-app-using-react-redux-and-immutable-js" target="_blank" rel="external">How to Build a Todo App Using React, Redux, and Immutable.js</a></li>
<li><a href="https://voice.kadira.io/rethinking-redux-f1e96daba60c#.hp5v516ie" target="_blank" rel="external">Rethinking Redux</a></li>
<li><a href="http://jaysoo.ca/2016/01/03/managing-processes-in-redux-using-sagas" target="_blank" rel="external">Managing Side Effects In React + Redux Using Sagas</a></li>
<li><a href="https://auth0.com/blog/2016/01/04/secure-your-react-and-redux-app-with-jwt-authentication" target="_blank" rel="external">Secure Your React and Redux App with JWT Authentication</a></li>
<li><a href="https://medium.com/@thisbejim/getting-started-with-redux-and-graphql-8384b3b25c56#.3anuh1m7x" target="_blank" rel="external">Getting started with Redux and GraphQL</a></li>
<li><a href="http://www.sitepoint.com/data-flows-angular-2-redux" target="_blank" rel="external">Data Flows with Angular 2 and Redux</a></li>
<li><a href="http://jamesknelson.com/simple-routing-redux-react" target="_blank" rel="external">Simple Routing with Redux and React</a></li>
<li><a href="https://riadbenguella.com/2015/12/28/redux-nowadays-from-actions-creators-to-sagas/" target="_blank" rel="external">Redux nowadays : From actions creators to sagas</a></li>
<li><a href="http://konkle.us/master-complex-redux-workflows-with-sagas" target="_blank" rel="external">Master Complex Redux Workflows with Sagas</a></li>
<li><a href="http://blog.jhades.org/angular-2-application-architecture-building-flux-like-apps-using-redux-and-immutable-js-js" target="_blank" rel="external">Angular 2 Application Architecture - Building Flux Apps with Redux and Immutable.js</a></li>
<li><a href="http://www.toptal.com/react/react-redux-and-immutablejs" target="_blank" rel="external">React, Redux and Immutable.js: Ingredients for Efficient Web Applications</a></li>
<li><a href="https://shellmonger.com/2016/02/16/an-introduction-to-react-redux-part-1" target="_blank" rel="external">An Introduction to React Redux (Part 1)</a></li>
<li><a href="https://shellmonger.com/2016/02/19/an-introduction-to-react-redux-part-2" target="_blank" rel="external">An Introduction to React Redux (Part 2)</a></li>
<li><a href="http://jaysoo.ca/2016/02/28/organizing-redux-application" target="_blank" rel="external">Rules For Structuring (Redux) Applications</a></li>
<li><a href="http://toranbillups.com/blog/archive/2016/01/22/redux-for-the-very-beginner" target="_blank" rel="external">Redux for the very beginner</a></li>
<li><a href="http://www.zohaib.me/redux-call-service-async/" target="_blank" rel="external">Redux - Calling web service asynchronously</a></li>
<li><a href="http://swizec.com/blog/animating-with-react-redux-and-d3/swizec/6775" target="_blank" rel="external">Animating with React, Redux, and d3</a></li>
<li><a href="http://joelhooks.com/blog/2016/03/20/build-an-image-gallery-using-redux-saga/" target="_blank" rel="external">Build an Image Gallery Using React, Redux and redux-saga</a></li>
<li><a href="https://medium.com/@matt.krick/introducing-redux-operations-332ab56e468b#.7e30nsxne" target="_blank" rel="external">Introducing redux-operations</a></li>
<li><a href="https://medium.com/@matt.krick/solving-redux-s-shortcoming-in-150-locs-540979ce6cf9#.sw0s478j6" target="_blank" rel="external">Solving Reduxâ€™s shortcoming in 150 LOCs</a></li>
<li><a href="https://medium.com/@rajaraodv/the-anatomy-of-a-react-redux-app-759282368c5a#.h05vq2uaj" target="_blank" rel="external">The Anatomy Of A React Redux App</a></li>
<li><a href="http://www.theodo.fr/blog/2016/03/getting-started-with-react-redux-and-immutable-a-test-driven-tutorial-part-2/" target="_blank" rel="external">Getting Started with React, Redux and Immutable: a Test-Driven Tutorial (Part 2)</a></li>
<li><a href="https://css-tricks.com/learning-react-redux/" target="_blank" rel="external">Leveling Up with React: Redux</a></li>
<li><a href="http://btholt.github.io/complete-intro-to-react/" target="_blank" rel="external">Complete intro to react</a></li>
<li><a href="https://medium.com/@nicktho/recreating-redux-behind-the-magic-curtain-c21edd542c9c#.a93sgufyi" target="_blank" rel="external">Recreating Reduxâ€Šâ€”â€ŠBehind the magic curtain</a></li>
<li><a href="https://stormpath.com/blog/build-a-redux-powered-react-application/" target="_blank" rel="external">Letâ€™s Build a Redux Powered React Application</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/intro-to-react-redux-pros" target="_blank" rel="external">Deep Introduction to Redux - Seriese 1/3</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/redux-server-rendering-react-router-universal-web-app" target="_blank" rel="external">Universal Rendering with Redux and React-Router - Seriese 2/3</a></li>
<li><a href="https://www.codementor.io/reactjs/tutorial/redux-unit-test-mocha-mocking" target="_blank" rel="external">Unit Testing Redux Apps - Seriese 3/3</a></li>
<li><a href="https://zen.id.au/using-aurelia-and-redux-together-for-good-times-all-around/" target="_blank" rel="external">Using Aurelia and Redux together for good times all around</a></li>
<li><a href="https://www.reindex.io/blog/redux-and-relay/" target="_blank" rel="external">Comparing Redux and Relay</a></li>
<li><a href="https://egghead.io/courses/building-react-applications-with-idiomatic-redux" target="_blank" rel="external">Building React Applications with Idiomatic Redux</a></li>
<li><a href="http://www.robinwieruch.de/the-soundcloud-client-in-react-redux" target="_blank" rel="external">The SoundCloud Client in React + Redux</a></li>
<li><a href="https://github.com/berwin/Blog/issues/4" target="_blank" rel="external">æ·±å…¥æµ…å‡º Redux</a></li>
<li><a href="http://houssein.me/redux/immutablejs/angular2/2016/07/04/angular2-with-immutablejs-and-redux.html" target="_blank" rel="external">Building Angular 2 applications with Immutable.js and Redux</a></li>
<li><a href="http://blog.ng-book.com/introduction-to-redux-with-typescript-and-angular-2/" target="_blank" rel="external">Tutorial: Building Redux in TypeScript with Angular 2</a></li>
<li><a href="http://blog.rangle.io/react-and-redux-performance-with-reselect/" target="_blank" rel="external">Improving React and Redux performance with Reselect</a></li>
<li><a href="http://blog.rangle.io/recipes-for-redux/" target="_blank" rel="external">Recipes for Redux</a></li>
<li><a href="http://blog.rangle.io/getting-started-with-redux-and-angular-2/" target="_blank" rel="external">Getting Started with Redux &amp; Angular 2</a></li>
<li><a href="https://el-tramo.be/blog/react-swift/" target="_blank" rel="external">Universal/Isomorphic React+Redux on a Swift Web Backend</a></li>
<li><a href="http://engineering.datadoghq.com/redux-doghouse--creating-reusable-react-redux-components-through-scoping/" target="_blank" rel="external">Creating Reusable React-Redux Components Through Scoping</a></li>
<li><a href="https://github.com/lewis617/react-redux-tutorial" target="_blank" rel="external">React+Reduxç³»åˆ—æ•™ç¨‹</a></li>
<li><a href="https://lewis617.github.io/2016/11/20/r2-book/" target="_blank" rel="external">ä¹¦ç±ï¼šã€ŠReact ä¸ Redux å¼€å‘å®ä¾‹ç²¾è§£ã€‹</a></li>
</ul>
<hr>
<h3 id="Boilerplate"><a href="#Boilerplate" class="headerlink" title="Boilerplate"></a>Boilerplate</h3><ul>
<li><a href="http://redux-minimal.js.org/" target="_blank" rel="external"><strong>redux-minimal</strong> - Minimalist react-redux starter kit which letâ€™s you build rich real world apps</a></li>
<li><a href="https://github.com/nicksp/redux-webpack-es6-boilerplate" target="_blank" rel="external"><strong>Modern and Scalable React/Redux Boilerplate</strong> - Flexible starter kit using Webpack 2 (tree-shaking) / React Hot Loader v3 / Code Splitting for React Router / PostCSS / CSS Modules / custom <em>Ducks pattern</em> app architecture / best practices / Sentry error tracking / Enzyme test environment</a> :rocket:</li>
<li><a href="https://github.com/jaredpalmer/react-production-starter" target="_blank" rel="external"><strong>react-production-starter</strong> - React boilerplate with isomorphic rendering, async react-router routes, async redux reducers, async data fetching, and code-splitting.</a> :metal: :fire:</li>
<li><a href="https://github.com/hashnode/mern-starter" target="_blank" rel="external"><strong>mern.io</strong> - Simple full-stack boilerplate to get started with building isomorphic/universal apps, handles api part and also offers a cli to generate the boilerplate</a> :metal: :fire:</li>
<li><a href="https://github.com/combine/universal-react-redux" target="_blank" rel="external"><strong>universal-react-redux</strong> - Opinionated Universal React/Redux/Webpack with HMR. Continually updated.</a> :metal: :fire:</li>
<li><a href="https://github.com/coryhouse/react-slingshot" target="_blank" rel="external"><strong>react-slingshot</strong> - React Redux Starter Kit with hot reloading, tests and example app</a></li>
<li><a href="https://github.com/knowbody/react-redux-boilerplate" target="_blank" rel="external"><strong>react-redux-boilerplate</strong> - React Redux Boilerplate</a></li>
<li><a href="https://github.com/Keats/react-boilerplate" target="_blank" rel="external"><strong>react-boilerplate</strong> - React + Typescript + Sass boilerplate</a></li>
<li><a href="https://github.com/lcjnil/react-redux-scaffold" target="_blank" rel="external"><strong>react-redux-scaffold</strong> - Combination of redux, react-router and ES6+ support</a></li>
<li><a href="https://github.com/tsaiDavid/simple-redux-boilerplate" target="_blank" rel="external"><strong>simple-redux-boilerplate</strong> - Simple and guided React, Redux boilerplate w/ Transform HMR! :fire:</a></li>
<li><a href="https://github.com/Amorino/reactv" target="_blank" rel="external"><strong>reactv</strong> - React Redux example</a></li>
<li><a href="https://github.com/ellbee/redux-boilerplate" target="_blank" rel="external"><strong>redux-boilerplate</strong> - Boilerplate for Redux</a></li>
<li><a href="https://github.com/davezuko/react-redux-starter-kit" target="_blank" rel="external"><strong>react-redux-starter-kit</strong> - Get started with React, Redux, and React-Router.</a></li>
<li><a href="https://github.com/jackielii/simplest-redux-example" target="_blank" rel="external"><strong>simplest-redux-example</strong> - Simplest Redux + React example for beginners</a></li>
<li><a href="https://github.com/anorudes/redux-easy-boilerplate" target="_blank" rel="external"><strong>redux-easy-boilerplate</strong> - React Redux easy boilerplate</a></li>
<li><a href="https://github.com/dictyBase/dicty-redux" target="_blank" rel="external"><strong>dicty-redux</strong> - Starter kit to bootstrap React and Redux (Flux) based web application</a></li>
<li><a href="https://github.com/GordyD/3ree" target="_blank" rel="external"><strong>3ree</strong> - Boilerplate &amp; Demo for Universal Realtime Apps built with React + Redux + RethinkDB + Express</a></li>
<li><a href="https://github.com/rafaelchiti/react_scaffolding" target="_blank" rel="external"><strong>react_scaffolding</strong> - React + React Router 1.0 + Redux + Webpack &amp; Hot Module Replacement</a></li>
<li><a href="https://github.com/aybmab/express-redux-sample" target="_blank" rel="external"><strong>express-redux-sample</strong> - Express-Redux-PassportJs-MySQL Boilerplate</a></li>
<li><a href="https://github.com/GetExpert/redux-blog-example" target="_blank" rel="external"><strong>redux-blog-example</strong> - Redux-Webpack-Babel Blog Platform boilerplate</a></li>
<li><a href="https://github.com/omnidan/redux-undo-boilerplate" target="_blank" rel="external"><strong>redux-undo-boilerplate</strong> - a magical boilerplate with hot reloading and awesome error handling</a></li>
<li><a href="https://github.com/gpbl/redux500" target="_blank" rel="external"><strong>redux500</strong> - The Redux version of isomorphic500</a></li>
<li><a href="https://github.com/survivejs/redux-demo" target="_blank" rel="external"><strong>redux-demo</strong> - Redux port of SurviveJS - Webpack and React Kanban app</a></li>
<li><a href="https://github.com/erikras/react-redux-universal-hot-example" target="_blank" rel="external"><strong>react-redux-universal-hot-example</strong> - A starter boilerplate for a universal webapp using express, react, redux, webpack, and react-hot-loader</a> :metal:</li>
<li><a href="https://github.com/levjj/rde" target="_blank" rel="external"><strong>rde</strong> - Reactive Live Programming Environment</a></li>
<li><a href="https://github.com/cloudmu/react-redux-starter-kit" target="_blank" rel="external"><strong>React Redux Starter Kit</strong> - Yet another React and Redux based web application starter kit</a></li>
<li><a href="https://github.com/sullenor/skeleton" target="_blank" rel="external"><strong>skeleton</strong> - A simple project-stub to show the basic ideas. Also serves you as a quick start for your project (Mori + Redux)</a></li>
<li><a href="https://github.com/zalmoxisus/browser-redux" target="_blank" rel="external"><strong>browser-redux</strong> - Building Chrome apps and cross-browser extensions with Redux and Webpack</a></li>
<li><a href="https://github.com/chicoxyzzy/react-for-hipsters-boilerplate" target="_blank" rel="external"><strong>react-for-hipsters-boilerplate</strong> - Fresh boilerplate with brand new hot reloading confing and other hipster stuff</a></li>
<li><a href="https://github.com/mezod/boilerplate-koa-redux-react" target="_blank" rel="external"><strong>Documented Koa Redux React Webpack boilerplate</strong></a>- The building process of this boilerplate is deeply documented from 0 for learning purposes. <a href="http://blog.joanboixados.com/building-a-boilerplate-for-a-koa-redux-react-application-including-webpack-mocha-and-sass/" target="_blank" rel="external">You can find the docs here</a>.</li>
<li><a href="https://github.com/tuommii/err" target="_blank" rel="external"><strong>err</strong> - Electron, React, Redux-devtools boilerplate for building cross-platform apps.</a></li>
<li><a href="https://github.com/banzay/friends-app-redux" target="_blank" rel="external"><strong>friends-app-redux</strong> - React Redux Universal Hot Example</a></li>
<li><a href="https://github.com/caljrimmer/isomorphic-redux-app" target="_blank" rel="external"><strong>isomorphic-redux-app</strong> - Redux Isomorphic App (with async content)</a></li>
<li><a href="https://github.com/unicorn-standard/starter-kit" target="_blank" rel="external"><strong>starter-kit</strong> - Project boilerplate using React, Redux and Uniloc http://unicornstandard.com/packages/boilerplate.html</a></li>
<li><a href="https://github.com/tngan/loopback-redux-react-boilerplate" target="_blank" rel="external"><strong>loopback-redux-react-boilerplate</strong> - A boilerplate for a Redux-React application using LoopBack</a></li>
<li><a href="https://github.com/tomatau/breko-hub" target="_blank" rel="external"><strong>breko-hub</strong> - <strong>B</strong>abel <strong>Rea</strong>ct <strong>Ko</strong>a <strong>H</strong>ot <strong>U</strong>niversal <strong>B</strong>oilerplate â€“ A simple, clean and consistent boilerplate for creating universal webapps with universal data fetching and SocketIO integration</a></li>
<li><a href="https://github.com/inderps/react-redux-cordova-boilerplate" target="_blank" rel="external"><strong>React Redux Cordova Boilerplate</strong></a></li>
<li><a href="https://github.com/mxstbr/react-boilerplate" target="_blank" rel="external"><strong>react-boilerplate</strong> - Performance orientated, offline-first boilerplate feat. hot-reloading, PostCSS and the best developer experience.</a></li>
<li><a href="https://github.com/choonkending/react-webpack-node" target="_blank" rel="external"><strong>react-webpack-node</strong> - Boilerplate for an universal React + Redux/alt Flux application using Webpack running on a node express server</a></li>
<li>[<strong>Hapi React Starter Kit</strong> - Universal, Redux, Redis, Socket.io, Intl] (<a href="https://github.com/Dindaleon/hapi-react-starter-kit" target="_blank" rel="external">https://github.com/Dindaleon/hapi-react-starter-kit</a>)</li>
<li>[<strong>Universal Redux Template</strong> - A clean, extensible react + redux boilerplate with universal rendering, testing and more] (<a href="https://github.com/mz026/universal-redux-template" target="_blank" rel="external">https://github.com/mz026/universal-redux-template</a>)</li>
<li><a href="https://github.com/colinmeinke/universal-js" target="_blank" rel="external"><strong>universal-js</strong> - A universal Javascript starter kit inc. React, Redux, Redux Dev Tools, Universal Redux Router, CSS Modules, hot module reloading, Babel for ES2015+ and ESLint</a></li>
<li><a href="https://github.com/WapGeaR/redux-react-material-boilerplate" target="_blank" rel="external"><strong>redux-react-material-boilerplate</strong> - Simple boilerplate inc. React, Redux, Hot reload and Material-ui</a></li>
<li><a href="https://github.com/exeto/react-redux-starter" target="_blank" rel="external"><strong>react-redux-starter</strong> - React Redux Starter</a></li>
<li><a href="https://github.com/Pitzcarraldo/reduxible" target="_blank" rel="external"><strong>Reduxible</strong> - The Fast and Easy way to make a React + Redux apps</a></li>
<li><a href="https://github.com/chen844033231/react-workflow" target="_blank" rel="external"><strong>react-workflow</strong> - A large SPA boilerplate for web development built on top of Facebookâ€™s React library,use redux architecture</a></li>
<li><a href="https://github.com/PBRT/reactogo" target="_blank" rel="external"><strong>ReacToGo</strong> - A simple ES6 boilerplate with Redux architecture and ImmutableJS: Hot Reload, React UI Comp, Firebase, Router</a></li>
<li><a href="https://github.com/cristianszwarc/react_crud_localStorage" target="_blank" rel="external"><strong>React/Redux simple CRUD</strong> with persistent state and local async actions (add a manifest file and you get an offline webapp) </a></li>
<li><a href="https://github.com/FredericHeem/starhackit" target="_blank" rel="external"><strong>StarHackIt</strong> - An React/Redux Node full-stack starter kit with authentication and authorization code</a></li>
<li><a href="https://github.com/andrewcoelho/react-seed" target="_blank" rel="external"><strong>React Seed</strong> - A barebones scalable directory structure and package.json for facilitating new React + Redux projects. No fat to trim here!</a></li>
<li>[<strong>React/Redux with Auth boilerplate</strong> - Very simple boilerplate, good for fast creating admin panels / dashboard. Included: React, Redux, ReduxForm, React-Router, Simple Authenticate, Hot Reload and Webpack (with babel) :fire:] (<a href="https://github.com/WapGeaR/react-redux-boilerplate-auth" target="_blank" rel="external">https://github.com/WapGeaR/react-redux-boilerplate-auth</a>)</li>
<li><a href="https://github.com/Producters/docker-node-react-starter" target="_blank" rel="external"><strong>Docker + React/Redux + Node + PostgreSQL</strong> - full stack boilerplate with fully dockerized workflows for development, deployment, testing</a></li>
<li><a href="https://github.com/ufocoder/redux-universal-boilerplate" target="_blank" rel="external"><strong>Redux universal boilerplate</strong> - boilerplate for react universal application building on flux architecture based on redux implementation.</a></li>
<li><a href="https://github.com/kiki-le-singe/react-redux-universal-boilerplate" target="_blank" rel="external"><strong>React Redux Universal Boilerplate</strong> - An Universal ReactJS/Redux Boilerplate.</a></li>
<li><a href="https://github.com/douglascorrea/react-hot-redux-firebase-starter" target="_blank" rel="external"><strong>react-hot-redux-firebase-starter</strong> - Starter boilerplate for using React/Redux with Firebase 3.0 API, include the new React Hot Loader 3.0 :fire:</a></li>
<li><a href="https://github.com/btomashvili/react-redux-firebase-boilerplate" target="_blank" rel="external"><strong>React Redux Firebase Boilerplate</strong> - Designed for quickly spin up your apps with Firebase, using bunch of awesome new front-end technologies includes webpack build system, hot reloading, routing &amp; sass support. :fire:</a></li>
<li><a href="https://github.com/xkawi/react-universal-saga" target="_blank" rel="external"><strong>React Universal Saga</strong> - Universal React Starter Kit ft. Redux Saga</a></li>
<li><a href="https://github.com/rwieruch/react-redux-soundcloud" target="_blank" rel="external"><strong>React Redux SoundCloud Client</strong> - Seed Project for a SoundCloud Client with working Login + Extension Seed Projects</a></li>
<li><a href="https://github.com/barbar/vortigern" target="_blank" rel="external"><strong>vortigern</strong> - A universal boilerplate for building web applications w/ TypeScript, React, Redux and more.</a></li>
<li><a href="https://github.com/hdjirdeh/angular2-redux-contact-list" target="_blank" rel="external"><strong>angular2-redux-contact-list</strong> - Simple contact list built with Angular 2, Immutable.js and Redux</a></li>
<li><a href="https://github.com/lewis617/react-redux-seed" target="_blank" rel="external"><strong>react-redux-seed</strong> - ä½¿ç”¨ React ä¸ Redux å®ç° Universal æ¸²æŸ“çš„ç§å­å·¥ç¨‹</a></li>
<li><a href="https://arc.js.org" target="_blank" rel="external"><strong>ARc</strong> - A progressive React starter kit based on Atomic Design with redux, redux-saga and redux-form</a></li>
<li><a href="https://github.com/dogada/edux" target="_blank" rel="external"><strong>edux</strong> - fast Redux without constants and switches. Actions and reducers are generated from single source.</a></li>
</ul>
<hr>
<h3 id="React-Native-A-framework-for-building-native-apps-using-React"><a href="#React-Native-A-framework-for-building-native-apps-using-React" class="headerlink" title="React Native - A framework for building native apps using React"></a><a href="https://facebook.github.io/react-native" target="_blank" rel="external">React Native - A framework for building native apps using React</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/nikgraf/CarteJaune" target="_blank" rel="external">CarteJaune - An open source Redux/ExponentJS (React Native) app leveraging redux-saga to keep track of your vaccinations</a></li>
<li><a href="https://github.com/soliury/noder-react-native" target="_blank" rel="external">noder-react-native - The mobile app of cnodejs.org written in React Native</a></li>
<li><a href="https://github.com/hzyIO/react-native-redux-counter" target="_blank" rel="external">react-native-redux-counter</a></li>
<li><a href="https://github.com/chentsulin/react-native-counter-ios-android" target="_blank" rel="external">react-native-counter-ios-android</a></li>
<li><a href="https://github.com/bruz/react-native-redux-groceries" target="_blank" rel="external">react-native-redux-groceries - An example app using React Native, Redux, Firebase, and AsyncStorage for offline data</a></li>
<li><a href="https://github.com/fraserxu/soundredux-native" target="_blank" rel="external">react-native-sound-cloud</a></li>
<li><a href="https://github.com/bartonhammond/snowflake" target="_blank" rel="external">snowflake - mobile app starter: Login, Logout, Reset Password, Update Profile, Hot Reload</a></li>
<li><a href="https://github.com/just4fun/uestc-bbs-react-native" target="_blank" rel="external">uestc-bbs-react-native - An iOS client for http://bbs.uestc.edu.cn/ written in React Native with Redux</a></li>
<li><a href="https://github.com/nara/movies-redux" target="_blank" rel="external">movies-redux - redux implementation of react-native movies example that is included in react-native source</a></li>
<li><a href="https://github.com/uiheros/react-native-redux-todo-list" target="_blank" rel="external">react-native-redux-todo-list - A sample todo list app developed by using react-native and redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="React-A-JavaScript-library-for-building-user-interfaces"><a href="#React-A-JavaScript-library-for-building-user-interfaces" class="headerlink" title="React - A JavaScript library for building user interfaces"></a><a href="http://facebook.github.io/react" target="_blank" rel="external">React - A JavaScript library for building user interfaces</a></h3><ul>
<li><p>Containers</p>
<ul>
<li><a href="https://github.com/LouisBarranqueiro/reapop" target="_blank" rel="external"><strong>reapop</strong> - A React &amp; Redux notifications system</a></li>
</ul>
</li>
<li><p>Middlewares</p>
<ul>
<li><a href="https://github.com/therewillbecode/redux-cheerio" target="_blank" rel="external"><strong>redux-cheerio</strong> - Make HTTP requests and then parse the responses with jQuery selectors using Cheerio</a><ul>
<li><a href="https://github.com/ezekielchentnik/redux-reporter" target="_blank" rel="external"><strong>redux-reporter</strong> - Report actions &amp; metadata to 3rd party providers, extremely useful for analytics and error handling (New Relic, Sentry, Adobe DTM, Keen, etc.)</a></li>
<li><a href="https://github.com/acdlite/redux-transduce" target="_blank" rel="external"><strong>redux-transduce</strong> - Transducer utilities for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-actions" target="_blank" rel="external"><strong>redux-actions</strong> - Flux Standard Action utilities for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-promise" target="_blank" rel="external"><strong>redux-promise</strong> - FSA-compliant promise middleware for Redux</a></li>
<li><a href="https://github.com/shanhaichik/redux-sync-promise" target="_blank" rel="external"><strong>redux-sync-promise</strong> - Middleware for writing asynchronous actions in synchronous style</a></li>
<li><a href="https://github.com/alanrubin/redux-simple-promise" target="_blank" rel="external"><strong>redux-simple-promise</strong> - FSA-compliant promise middleware for Redux with simple behaviour with minimal boilerplate declarations</a></li>
<li><a href="https://github.com/symbiont-io/redux-async" target="_blank" rel="external"><strong>redux-async</strong> - FSA-compliant promise property middleware for Redux</a></li>
<li><a href="https://github.com/zackargyle/redux-async-queue" target="_blank" rel="external"><strong>redux-async-queue</strong> - Manage queues of thunk actions</a></li>
<li><a href="https://github.com/KELiON/redux-async-initial-state" target="_blank" rel="external"><strong>redux-async-initial-state</strong> - Set initial Redux state asynchronously</a></li>
<li><a href="https://github.com/kolodny/redux-await" target="_blank" rel="external"><strong>redux-await</strong> - Manage async redux actions sanely</a></li>
<li><a href="https://github.com/acdlite/redux-rx" target="_blank" rel="external"><strong>redux-rx</strong> - RxJS utilities for Redux</a></li>
<li><a href="https://github.com/faassen/reselect" target="_blank" rel="external"><strong>reselect</strong> - Selector library for Redux like in NuclearJS</a></li>
<li><a href="https://github.com/rackt/react-redux" target="_blank" rel="external"><strong>react-redux</strong> - React bindings for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-react-router" target="_blank" rel="external"><strong>redux-react-router</strong> - Redux bindings for React Router â€“ keep your router state inside your Redux store</a></li>
<li><a href="https://github.com/pburtchaell/redux-promise-middleware" target="_blank" rel="external"><strong>redux-promise-middleware</strong> - Redux middleware for resolving and rejecting promises</a></li>
<li><a href="https://github.com/gaearon/redux-thunk" target="_blank" rel="external"><strong>redux-thunk</strong> - Thunk middleware for Redux</a></li>
<li><a href="https://github.com/acdlite/redux-batched-updates" target="_blank" rel="external"><strong>redux-batched-updates</strong> - Batch React updates that occur as a result of Redux dispatches, to prevent cascading renders.</a></li>
<li><a href="https://github.com/itsmepetrov/redux-combine-actions" target="_blank" rel="external"><strong>redux-combine-actions</strong> - Redux middleware that allows you to easy combine actions and dispatch them sequentially</a></li>
<li><a href="https://github.com/DenisIzmaylov/redux-catch-promise" target="_blank" rel="external"><strong>redux-catch-promise</strong> - Extended replacement of redux-thunk middleware to supporting async-await functions and implement server-side rendering for React components with async state</a></li>
<li><a href="https://github.com/lapanoid/redux-delegator" target="_blank" rel="external"><strong>redux-delegator</strong> - Compose redux reducers in a structured way</a></li>
<li><a href="https://github.com/michalkvasnicak/routex" target="_blank" rel="external"><strong>routex</strong> - Simple router for Redux universal applications. Can be used with React too</a></li>
<li><a href="https://github.com/rt2zz/redux-persist-store" target="_blank" rel="external"><strong>redux-persist-store</strong> - Persist and rehydrate a redux store</a></li>
<li><a href="https://github.com/gyzerok/adrenaline" target="_blank" rel="external"><strong>adrenaline</strong> - React bindings for Redux with Relay in mind</a></li>
<li><a href="https://github.com/elgerlambert/redux-localstorage" target="_blank" rel="external"><strong>redux-localstorage</strong> - Store enhancer that syncs (a subset) of your Redux store state to localstorage.</a></li>
<li><a href="https://github.com/michaelcontento/redux-storage" target="_blank" rel="external"><strong>redux-storage</strong> - Persistence layer for redux with flexible backends</a></li>
<li><a href="https://github.com/vicentedealencar/redux-pouchdb" target="_blank" rel="external"><strong>redux-pouchdb</strong> - sync store state to pouchdb</a></li>
<li><a href="https://github.com/vslinko/redux-vstack-router" target="_blank" rel="external"><strong>redux-vstack-router</strong> - Helpers to bind vstack-router to redux</a></li>
<li><a href="https://github.com/phated/redux-create-store" target="_blank" rel="external"><strong>redux-create-store</strong></a></li>
<li><a href="https://github.com/tappleby/redux-batched-subscribe" target="_blank" rel="external"><strong>redux-batched-subscribe</strong> - Batch calls to subscribe handlers with a custom function, including debouncing or React batched updates.</a></li>
<li><a href="https://github.com/fcomb/redux-logger" target="_blank" rel="external"><strong>redux-logger</strong> - Logger middleware for Redux</a></li>
<li><a href="https://github.com/low-ghost/redux-node-logger" target="_blank" rel="external"><strong>redux-node-logger</strong> - A Redux Logger for Node Environments</a></li>
<li><a href="https://github.com/fcomb/redux-diff-logger" target="_blank" rel="external"><strong>redux-diff-logger</strong> - Diff logger between states for Redux</a></li>
<li><a href="https://github.com/lapwinglabs/redux-debug" target="_blank" rel="external"><strong>redux-debug</strong> - debug(â€¦) middleware for Redux</a></li>
<li><a href="https://github.com/idolize/redux-requests" target="_blank" rel="external"><strong>redux-requests</strong> - Avoid issuing duplicate HTTP requests</a></li>
<li><a href="https://github.com/rt2zz/redux-owl" target="_blank" rel="external"><strong>redux-owl</strong> - Redux One Way Linking</a></li>
<li><a href="https://github.com/pauldijou/redux-act" target="_blank" rel="external"><strong>redux-act</strong> - An opinionated lib to create actions and reducers for Redux</a></li>
<li><a href="https://github.com/FredericHeem/redux-act-async" target="_blank" rel="external"><strong>redux-act-async</strong> - Reducing boilerplate when creating asynchronous actions in Redux</a></li>
<li><a href="https://github.com/ngokevin/redux-raven-middleware" target="_blank" rel="external"><strong>redux-raven-middleware</strong> - Redux middleware for sending error reports to Sentry through raven-js</a></li>
<li><a href="https://github.com/callum/redux-routing" target="_blank" rel="external"><strong>redux-routing</strong> - Universal routing built on top of redux</a></li>
<li><a href="https://github.com/omnidan/redux-undo" target="_blank" rel="external"><strong>redux-undo</strong> - Simple undo/redo functionality for redux state containers</a></li>
<li><a href="https://github.com/danscan/rn-redux-mixpanel" target="_blank" rel="external"><strong>rn-redux-mixpanel</strong> - Configurable Redux middleware that sends your actions &amp; user profile data to Mixpanel</a></li>
<li><a href="https://github.com/ekosz/redux-falcor" target="_blank" rel="external"><strong>redux-falcor</strong> - Connect your redux front-end to your falcor back-end</a></li>
<li><a href="https://github.com/markdalgleish/redux-analytics" target="_blank" rel="external"><strong>redux-analytics</strong> - Trigger analytics events based on your event metadata</a></li>
<li><a href="https://github.com/omnidan/redux-ignore" target="_blank" rel="external"><strong>redux-ignore</strong> - Ignore redux actions by array or filter function</a></li>
<li><a href="https://github.com/omnidan/redux-recycle" target="_blank" rel="external"><strong>redux-recycle</strong> - Reset the redux state on certain actions</a></li>
<li><a href="https://github.com/indexiatech/re-notif" target="_blank" rel="external"><strong>re-notif</strong></a> A notification center based on React &amp; Redux.</li>
<li><a href="https://github.com/swennemans/redux-lunr" target="_blank" rel="external"><strong>redux-lunr</strong> - Make your redux store searchable with Lunr.js</a></li>
<li><a href="https://github.com/meadow/redux-ensure-fsa" target="_blank" rel="external"><strong>redux-ensure-fsa</strong> - Development middleware to check for FSA-compliant actions</a></li>
<li><a href="https://github.com/alexkuz/redux-pagan" target="_blank" rel="external"><strong>redux-pagan</strong> - internationalization via redux</a></li>
<li><a href="//github.com/wyze/redux-debounce"><strong>redux-debounce</strong></a> - Debounce your actions!</li>
<li><a href="https://github.com/stoeffel/redux-future" target="_blank" rel="external"><strong>redux-future</strong> - FSA-compliant future monad middleware for redux</a></li>
<li><a href="https://github.com/stoeffel/redux-io" target="_blank" rel="external"><strong>redux-io</strong> - FSA-compliant io monad middleware for redux</a></li>
<li><a href="https://github.com/stoeffel/redux-either" target="_blank" rel="external"><strong>redux-either</strong> - FSA-compliant either monad middleware for redux</a></li>
<li><a href="https://github.com/gpfunk/redux-timeout" target="_blank" rel="external"><strong>redux-timeout</strong> - Trigger actions based on timeouts</a></li>
<li><a href="https://github.com/d6u/redux-observable-middleware" target="_blank" rel="external"><strong>redux-observable-middleware</strong> - Redux middleware for subscribing to observables</a></li>
<li><a href="https://github.com/redux-observable/redux-observable" target="_blank" rel="external"><strong>redux-observable</strong> - RxJS 5-based middleware for Redux. Compose and cancel actions as epics.</a></li>
<li><a href="https://github.com/wyvernnot/redux-deferred" target="_blank" rel="external"><strong>redux-deferred</strong> - Redux middleware for jQuery Deferred Object</a></li>
<li><a href="https://github.com/sskyy/redux-task" target="_blank" rel="external"><strong>redux-task</strong> - A simple Side Effects manager for redux</a></li>
<li><a href="https://github.com/weo-edu/redux-gen" target="_blank" rel="external"><strong>redux-gen</strong> - Generator based middleware for redux</a></li>
<li><a href="https://github.com/Jackong/redux-authentication" target="_blank" rel="external"><strong>redux-authentication</strong> - Authentication component for Redux</a></li>
<li><a href="https://github.com/sergiodxa/socket.io-redux" target="_blank" rel="external"><strong>socket.io-redux</strong> - Redux middleware to emit action via socket.io</a></li>
<li><a href="https://github.com/sergiodxa/redux-catch" target="_blank" rel="external"><strong>redux-catch</strong> - Error catcher middleware for Redux reducers and middlewares</a></li>
<li><a href="https://github.com/stoeffel/redux-elm-middleware" target="_blank" rel="external"><strong>redux-elm-middleware</strong> - Elm middleware for redux</a></li>
<li><a href="https://github.com/agraboso/redux-api-middleware" target="_blank" rel="external"><strong>redux-api-middleware</strong> - Redux API middleware based on the real-world example</a></li>
<li><a href="https://github.com/Yaska/redux-mediaquery" target="_blank" rel="external"><strong>redux-mediaquery</strong> - Redux ActionCreator to put responsive-design breakpoints in your store</a></li>
<li><a href="https://github.com/lewis617/redux-amrc" target="_blank" rel="external"><strong>redux-amrc</strong> - Redux async middleware and reducer creator</a></li>
<li><a href="https://github.com/zslucky/redux-fetch-middleware" target="_blank" rel="external"><strong>redux-fetch-middleware</strong> - Redux middleware that help user to treat simple request via fetch api</a></li>
</ul>
</li>
</ul>
</li>
<li><p>Tools</p>
<ul>
<li><a href="https://github.com/skellock/reactotron" target="_blank" rel="external"><strong>reactotron</strong> - Control, monitor, and instrument your React Native apps from the comfort of your TTY</a></li>
<li><a href="https://github.com/conorhastings/redux-test-recorder" target="_blank" rel="external"><strong>redux-test-recorder</strong> - Redux test recorder is a redux middleware + included component for automagically generating tests for your reducers based on the actions in your app</a></li>
<li><a href="https://github.com/gaearon/redux-devtools" target="_blank" rel="external"><strong>redux-devtools</strong> - DevTools for Redux with hot reloading, action replay, and customizable UI</a></li>
<li><a href="https://github.com/rackt/react-router-redux" target="_blank" rel="external"><strong>react-router-redux</strong> - Ruthlessly simple bindings to keep react-router and redux in sync</a></li>
<li><a href="https://github.com/Agamennon/redux-tiny-router" target="_blank" rel="external"><strong>redux-tiny-router</strong> - A Router made for Redux, stop using the router as a controller itâ€™s just state!</a></li>
<li><a href="https://github.com/lapanoid/redux-devtools-gentest-plugin" target="_blank" rel="external"><strong>redux-devtools-gentest-plugin</strong> - Generate mocha like tests from redux-devtools session</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external"><strong>generator-redux</strong> - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external"><strong>generator-reactapp</strong> - Yeoman generator for react app with redux</a></li>
<li><a href="https://github.com/chentsulin/generator-redux-app" target="_blank" rel="external"><strong>generator-redux-app</strong> - Scaffold out a redux app with counter example and react-router</a></li>
<li><a href="https://github.com/sporto/redux-loader" target="_blank" rel="external"><strong>redux-loader</strong> - A high order component for Redux. This components loads resources and passes them to the child components via props</a></li>
<li><a href="https://github.com/Kvoti/redux-rest" target="_blank" rel="external"><strong>redux-rest</strong> - Automatically create Flux action constants, action creators and Redux reducers for your REST API</a></li>
<li><a href="https://github.com/kennetpostigo/react-reach" target="_blank" rel="external"><strong>react-reach</strong> - A library to communicate with Graphql through Redux</a></li>
<li><a href="https://github.com/lexich/redux-api" target="_blank" rel="external"><strong>redux-api</strong> - Flux REST API for redux infrastructure</a></li>
<li><a href="https://github.com/alixander/redux-store-validator" target="_blank" rel="external"><strong>redux-store-validator</strong> - Add validation to your Redux reducers</a></li>
<li><a href="https://github.com/adjohnson916/firedux" target="_blank" rel="external"><strong>firedux</strong> - Firebase + Redux for ReactJS</a></li>
<li><a href="https://github.com/vslinko/vstack-router" target="_blank" rel="external"><strong>vstack-router</strong> - Universal router</a></li>
<li><a href="https://github.com/Tom-Alexander/redux-ecommerce" target="_blank" rel="external"><strong>redux-ecommerce</strong> - E-commerce flux with redux</a></li>
<li><a href="https://github.com/erikras/redux-form" target="_blank" rel="external"><strong>redux-form</strong> - An ES7 decorator for forms using Redux and React</a></li>
<li><a href="https://github.com/posabsolute/redux-form-validator" target="_blank" rel="external"><strong>redux-form-validation</strong> - Form validation for controlled &amp; uncontrolled inputs</a></li>
<li><a href="https://github.com/mihirsoni/simple-redux-form" target="_blank" rel="external"><strong>simple-redux-form</strong> - A tiny redux-form alternative Higher Order Component for forms</a>.</li>
<li><a href="https://github.com/calesce/redux-slider-monitor" target="_blank" rel="external"><strong>redux-slider-monitor</strong> - A custom monitor for Redux DevTools to replay recorded Redux actions</a></li>
<li><a href="https://github.com/substantial/updeep" target="_blank" rel="external"><strong>updeep</strong> - Easily update nested frozen objects and arrays in a declarative and immutable manner</a></li>
<li><a href="https://github.com/gajus/redux-immutable" target="_blank" rel="external"><strong>redux-immutable</strong> - Streamlines use of Immutable.js with Redux reducers.</a></li>
<li><a href="https://github.com/lapanoid/redux-import-export-monitor" target="_blank" rel="external"><strong>redux-import-export-monitor</strong> - A monitor for copying your serialized action log to the clipboard, as well as pasting it in from somewhere else</a></li>
<li><a href="https://github.com/winkler1/icedam" target="_blank" rel="external"><strong>icedam</strong> - Just-in-time immutability: freezes data sent to views.</a></li>
<li><a href="https://github.com/broucz/react-inline-grid" target="_blank" rel="external"><strong>react-inline-grid</strong> - Predictable flexbox based grid for React using Redux and Immutable-js.</a></li>
<li><a href="https://github.com/grigory-leonenko/redux-easy-actions" target="_blank" rel="external"><strong>redux-easy-actions</strong> - Sugar library for creating Redux or Flux actions</a></li>
<li><a href="https://github.com/popc0rn/redux-mount" target="_blank" rel="external"><strong>redux-mount</strong> - Mount state data and change its state values on the fly</a></li>
<li><a href="https://github.com/ashaffer/redux-multi" target="_blank" rel="external"><strong>redux-multi</strong> - Dispatch multiple actions from one action creator</a></li>
<li><a href="https://github.com/scottcorgan/immu" target="_blank" rel="external"><strong>immu</strong> - A tiny, fail-fast, lazy, immutable Javascript objects library</a></li>
<li><a href="https://github.com/Versent/redux-crud" target="_blank" rel="external"><strong>Generate standard action creators and reducers for CRUD applications</strong></a></li>
<li><a href="https://github.com/indexiatech/redux-immutablejs" target="_blank" rel="external"><strong>Redux &amp; ImmutableJs</strong> - Integration of Redux &amp; ImmutableJs that 100% conforms Redux standards</a></li>
<li><a href="https://github.com/gcanti/redux-tcomb" target="_blank" rel="external"><strong>redux-tcomb</strong> - Immutable and type-checked state and actions for Redux</a></li>
<li><a href="https://github.com/johanneslumpe/redux-react-router-transitions" target="_blank" rel="external"><strong>redux-react-router-transitions</strong> - Attach react-router transitions to arbitrary actions</a></li>
<li><a href="https://github.com/ForbesLindesay/redux-optimist" target="_blank" rel="external"><strong>redux-optimist</strong> - Optimistically apply actions that can be later commited or reverted.</a></li>
<li><a href="https://github.com/whetstone/redux-devtools-diff-monitor" target="_blank" rel="external"><strong>redux-devtools-diff-monitor</strong> - Redux DevTools â€“ Diff Monitor</a></li>
<li><a href="https://github.com/romseguy/redux-store-visualizer" target="_blank" rel="external"><strong>redux-store-visualizer</strong> - Visualize Redux store in real time</a></li>
<li><a href="https://github.com/banderson/generator-redux" target="_blank" rel="external"><strong>generator-redux</strong> - CLI tools for Redux: next-gen functional Flux/React with devtools</a></li>
<li><a href="https://github.com/Jackong/generator-reactapp" target="_blank" rel="external"><strong>generator-reactapp</strong> - Yeoman generator for react app with redux</a></li>
<li><a href="https://github.com/tdzl2003/redux-viewmodel" target="_blank" rel="external"><strong>redux-viewmodel</strong> - ViewModel wrapping for Redux &amp; React</a></li>
<li><a href="https://github.com/newtack/redux-utils" target="_blank" rel="external"><strong>redux-utils</strong> - Utility functions for Redux</a></li>
<li><a href="https://github.com/erikras/multireducer" target="_blank" rel="external"><strong>multireducer</strong> - A utility to wrap many copies of a single Redux reducer into a single key-based reducer</a></li>
<li><a href="https://github.com/philholden/subdivide" target="_blank" rel="external"><strong>subdivide</strong> - User defined UI layout: Every pane can be subdivided and any widget assigned to any pane</a></li>
<li><a href="https://github.com/gregthebusker/replux" target="_blank" rel="external"><strong>replux</strong> - Self contained components and enhancements for Redux</a></li>
<li><a href="https://github.com/aparticka/redux-immutable-utils" target="_blank" rel="external"><strong>redux-immutable-utils</strong> - Utilities for using Immutable with Redux</a></li>
<li><a href="https://github.com/acdlite/recompose" target="_blank" rel="external"><strong>recompose</strong> - A microcomponentization toolkit for React</a></li>
<li><a href="https://github.com/izaakschroeder/redux-lift" target="_blank" rel="external"><strong>redux-lift</strong> - Lifting for Redux</a></li>
<li><a href="https://github.com/router5/redux-router5" target="_blank" rel="external"><strong>redux-router5</strong> - router5 integration with Redux</a></li>
<li><a href="https://github.com/zalmoxisus/redux-devtools-extension" target="_blank" rel="external"><strong>redux-devtools-extension</strong> - Redux DevTools Extension</a></li>
<li><a href="https://github.com/colinmeinke/universal-redux-router" target="_blank" rel="external"><strong>universal-redux-router</strong> - A very simple router for Redux and React that works on both server and client</a></li>
<li><a href="https://github.com/jprichardson/redux-watch" target="_blank" rel="external"><strong>redux-watch</strong> - Watch/monitor for state changes on an object path</a></li>
<li><a href="https://github.com/bvaughn/redux-devtools-filterable-log-monitor" target="_blank" rel="external"><strong>redux-devtools-filterable-log-monitor</strong> - Filterable tree view monitor for Redux DevTools</a></li>
<li><a href="https://github.com/posabsolute/redux-flash-notification" target="_blank" rel="external"><strong>redux-flash-notification</strong> -  A flash notification component for Redux</a></li>
<li><a href="https://github.com/yelouafi/redux-saga" target="_blank" rel="external"><strong>redux-saga</strong> - An alternative side effect model for Redux apps</a></li>
<li><a href="https://github.com/zalmoxisus/remote-redux-devtools" target="_blank" rel="external"><strong>remote-redux-devtools</strong> - Use Redux DevTools remotely for React Native, hybrid, desktop and server side Redux apps</a></li>
<li><a href="https://github.com/YoruNoHikage/redux-devtools-dispatch" target="_blank" rel="external"><strong>redux-devtools-dispatch</strong> - Dispatch your actions manually to test if your app reacts well</a></li>
<li><a href="https://github.com/raisemarketplace/redux-loop" target="_blank" rel="external"><strong>redux-loop</strong> - Sequence your effects naturally and purely by returning them from your reducers</a></li>
<li><a href="https://github.com/tommikaikkonen/redux-orm" target="_blank" rel="external"><strong>redux-orm</strong> - A small, simple and immutable ORM to manage data in your Redux store</a></li>
<li><a href="https://github.com/aparticka/redux-bacon" target="_blank" rel="external"><strong>redux-bacon</strong> - Utilities for attaching Bacon.js to Redux</a></li>
<li><a href="https://github.com/slorber/rereduce" target="_blank" rel="external"><strong>rereduce</strong> - Reducer library for Redux</a></li>
<li><a href="https://github.com/KarlPurk/redux-decorators" target="_blank" rel="external"><strong>redux-decorators</strong> - A ridiculously good syntax for working with Redux and TypeScript. Currently limited to Angular 2 but could potentially be used elsewhere</a></li>
<li><a href="https://github.com/amsardesai/redux-test-reducer" target="_blank" rel="external"><strong>redux-test-reducer</strong> - Simple and clean testing mechanism for Redux reducers</a></li>
<li><a href="https://github.com/alexkuz/redux-devtools-inspector" target="_blank" rel="external"><strong>redux-devtools-inspector</strong> - Another Redux DevTools Monitor</a></li>
<li><a href="https://github.com/sotojuan/redux-ava" target="_blank" rel="external"><strong>redux-ava</strong> - Helpers for writing Redux tests in AVA</a></li>
<li><a href="https://github.com/SpencerCDixon/redux-cli" target="_blank" rel="external"><strong>redux-cli</strong> - An opinionated CLI for building redux/react apps quicker</a></li>
<li><a href="https://github.com/salsita/redux-saga-rxjs" target="_blank" rel="external"><strong>redux-saga-rxjs</strong> - RxJS implementation of Saga pattern for redux</a></li>
<li><a href="https://github.com/dmitry-zaets/redux-actions-assertions" target="_blank" rel="external"><strong>redux-actions-assertions</strong> - Assertions for redux actions testing</a></li>
<li><a href="https://github.com/sergiodxa/redux-duck" target="_blank" rel="external"><strong>redux-duck</strong> - Helper function to create Redux modules using the ducks-modular-redux proposal</a></li>
<li><a href="https://github.com/jhen0409/redux-dispatch-cli" target="_blank" rel="external"><strong>redux-dispatch-cli</strong> - A CLI tool for Redux remote dispatch. Used in remote-redux-devtools</a></li>
<li><a href="https://github.com/zackargyle/redux-immutable-reducer" target="_blank" rel="external"><strong>redux-immutable-reducer</strong> - Immutable reducer states with Redux</a></li>
<li><a href="https://github.com/redux-bootstrap/redux-bootstrap" target="_blank" rel="external"><strong>redux-bootstrap</strong> - configure React + React-Router + Redux + Immutable.js with one function!</a></li>
<li><a href="https://github.com/mandeepbrar/redux-director" target="_blank" rel="external"><strong>redux-director</strong> - Redux bindings to director router</a></li>
<li><a href="https://github.com/ConciergeAuctions/redux-q" target="_blank" rel="external"><strong>redux-q</strong> - Provides a way to queue callbacks until an action is dispatched</a></li>
<li><a href="https://github.com/exeto/redux-apist" target="_blank" rel="external"><strong>redux-apist</strong> - Creator API actions for redux-thunk</a></li>
<li><a href="https://github.com/chiefGui/reswitch" target="_blank" rel="external"><strong>reswitch</strong> â€” Write reducers with less boilerplate</a></li>
<li><a href="https://github.com/redux-autoform/redux-autoform" target="_blank" rel="external"><strong>redux-autoform</strong> - Create Redux-Forms dynamically out of metadata</a></li>
<li><a href="https://github.com/clarus/redux-ship" target="_blank" rel="external"><strong>redux-ship</strong> - Composable, testable and typable side effects</a></li>
</ul>
</li>
<li><p>Frameworks</p>
<ul>
<li><a href="https://github.com/jumpsuit/jumpsuit" target="_blank" rel="external"><strong>Jumpsuit</strong> - A powerful &amp; efficient React framework. Jump in. Zip up. Build great apps.</a></li>
<li><a href="https://github.com/jumpsuit/jumpstate" target="_blank" rel="external"><strong>Jumpstate</strong> - Simple and powerful state management for Redux</a></li>
<li><a href="https://github.com/sorrycc/dva" target="_blank" rel="external"><strong>dva</strong> - Front-end framework based on react, redux, react-redux, react-router and redux-saga.</a></li>
<li><a href="https://github.com/ashaffer/vdux" target="_blank" rel="external"><strong>Vdux</strong> - Worldâ€™s smallest framework.  Stateless Virtual DOM &lt;-&gt; Redux</a></li>
<li><a href="https://github.com/esex/esex" target="_blank" rel="external"><strong>Esex</strong> - Full-stack Universal JavaScript Framework (Redux+RxJs)</a></li>
<li><a href="https://github.com/vslinko/ripster" target="_blank" rel="external"><strong>Ripster</strong></a></li>
<li><a href="https://github.com/este/este" target="_blank" rel="external"><strong>Este</strong> - The most complete minimal dev stack / boilerplate for React &amp; Redux universal web apps</a></li>
<li><a href="https://github.com/littlstar/stardux" target="_blank" rel="external"><strong>stardux</strong> - Functional DOM containers based on starplate, IncrementalDOM, and redux</a></li>
<li><a href="https://github.com/marknutter/nux" target="_blank" rel="external"><strong>nux</strong> - A Push-Based Functional Reactive Web Application Framework</a></li>
<li><a href="https://github.com/Wildhoney/Keo" target="_blank" rel="external"><strong>Keo</strong> - Plain functions for a more functional Deku approach to creating React components, with functional goodies such as compose, memoize, etcâ€¦ for free</a></li>
<li><a href="https://github.com/wildlyinaccurate/plait" target="_blank" rel="external"><strong>plait</strong> - A minimal JavaScript framework for building reactive web components</a></li>
<li><a href="https://github.com/reactuate/reactuate" target="_blank" rel="external"><strong>reactuate</strong> â€” A React/Redux stack (not a boilerplate!) with a focus on Domain-Driven Design</a></li>
<li><a href="https://github.com/mattkrick/meatier" target="_blank" rel="external"><strong>meatier</strong> - Like meteor, but meatier</a></li>
<li><a href="https://github.com/relax/relax" target="_blank" rel="external"><strong>relax</strong> - New generation CMS on top of React, Redux and GraphQL</a></li>
<li><a href="https://github.com/flipace/lovli.js" target="_blank" rel="external"><strong>lovli.js</strong> - A boilerplate for developing react+redux applications with rethinkdb/horizon as realtime database and express for the server</a></li>
<li><a href="https://github.com/mariusandra/kea-logic" target="_blank" rel="external"><strong>kea</strong> - Well-readable, self-documenting and easily refactorable framework that brings your data to life! Comes with scaffolding tools</a> :bird:</li>
<li><a href="https://github.com/tianche/feeble" target="_blank" rel="external"><strong>Feeble</strong> - A framework built on top of React/Redux/redux-saga which aims to make building React/Redux applications easier and better.</a></li>
<li><a href="https://github.com/mjaneczek/conventional-redux" target="_blank" rel="external"><strong>Conventional-Redux</strong> - A wrapper for react-redux which provides API based on convention over configuration pattern.</a></li>
<li><a href="https://github.com/derzunov/redux-react-i18n" target="_blank" rel="external"><strong>redux-react-i18n</strong> - An i18n solution for redux/reactâœŒğŸ¿âœŠğŸ½ğŸ¤˜ğŸ»</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a><a href="examples/README.md">Examples</a></h3><hr>
<h3 id="Similar-libraries"><a href="#Similar-libraries" class="headerlink" title="Similar libraries"></a>Similar libraries</h3><ul>
<li><a href="https://github.com/BobBuehler/flux-ts" target="_blank" rel="external"><strong>flux-ts</strong> - A small flux implementation heavily inspired by redux</a></li>
<li><a href="https://github.com/acstll/chopped-redux" target="_blank" rel="external"><strong>chopped-redux</strong> - A very small Flux implementation based on Redux</a></li>
<li><a href="https://github.com/edge/fluxette" target="_blank" rel="external"><strong>fluxette</strong> - Minimalist, functional, and concise Flux</a></li>
<li><a href="https://github.com/jas-chen/rx-redux" target="_blank" rel="external"><strong>rx-redux</strong> - A reimplementation of redux using RxJS</a></li>
<li><a href="https://github.com/johnhenry/understate" target="_blank" rel="external"><strong>understate</strong> - A simple state manager</a></li>
<li><a href="https://github.com/Lucifier129/refer" target="_blank" rel="external"><strong>refer</strong> - Redux-like library for handling global state on functional style</a></li>
<li><a href="https://github.com/karelsteinmetz/bobflux" target="_blank" rel="external"><strong>bobflux</strong> - Bobflux is pure functional implementation of FLUX pattern and is fitted to Bobril</a></li>
<li><a href="https://github.com/mobxjs/mobx" target="_blank" rel="external"><strong>mobx</strong> - Simple, scalable state management</a></li>
</ul>
<hr>
<h3 id="Deku-Functional-view-library-for-building-UI-components-as-an-alternative-to-React"><a href="#Deku-Functional-view-library-for-building-UI-components-as-an-alternative-to-React" class="headerlink" title="Deku - Functional view library for building UI components as an alternative to React"></a><a href="https://github.com/dekujs/deku" target="_blank" rel="external">Deku - Functional view library for building UI components as an alternative to React</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/nivanson/deku-redux-universal-hot-example" target="_blank" rel="external">Deku + Express + Redux + Crossroads Router</a></li>
<li><a href="https://github.com/troch/deku-redux" target="_blank" rel="external">deku-redux - Bindings for redux in deku (Standalone plugin)</a><br>)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Incremental-DOM-Incremental-DOM-is-a-library-for-building-up-DOM-trees-and-updating-them-in-place-when-data-changes"><a href="#Incremental-DOM-Incremental-DOM-is-a-library-for-building-up-DOM-trees-and-updating-them-in-place-when-data-changes" class="headerlink" title="Incremental DOM - Incremental DOM is a library for building up DOM trees and updating them in-place when data changes"></a><a href="http://google.github.io/incremental-dom" target="_blank" rel="external">Incremental DOM - Incremental DOM is a library for building up DOM trees and updating them in-place when data changes</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/joshthecoder/idom-redux-todomvc-app" target="_blank" rel="external">Incremental DOM + Redux Flux = Todo App</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="WinJS-Windows-Library-for-JavaScript"><a href="#WinJS-Windows-Library-for-JavaScript" class="headerlink" title="WinJS - Windows Library for JavaScript"></a><a href="http://try.buildwinjs.com" target="_blank" rel="external">WinJS - Windows Library for JavaScript</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/unindented/react-redux-winjs-example" target="_blank" rel="external">react-redux-winjs-example</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Angular-HTML-enhanced-for-web-apps"><a href="#Angular-HTML-enhanced-for-web-apps" class="headerlink" title="Angular - HTML enhanced for web apps"></a><a href="https://angularjs.org" target="_blank" rel="external">Angular - HTML enhanced for web apps</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/wbuchwalter/tsRedux" target="_blank" rel="external">Angular + Typescript + Redux</a></li>
<li><a href="https://github.com/wbuchwalter/ng-redux" target="_blank" rel="external">ng-redux - Standalone plugin</a></li>
<li><a href="https://github.com/neilff/redux-ui-router" target="_blank" rel="external">redux-ui-router - ngRedux middleware for Angular UI Router</a></li>
<li><a href="https://github.com/r-park/todo-angular-redux" target="_blank" rel="external">Todo app with ng-redux â€¢ ES6 â€¢ Webpack</a></li>
<li><a href="https://github.com/InfomediaLtd/angular2-redux-example" target="_blank" rel="external">https://github.com/InfomediaLtd/angular2-redux-example</a></li>
<li><a href="https://github.com/tomusdrw/angular2-redux-example" target="_blank" rel="external">https://github.com/tomusdrw/angular2-redux-example</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Angular-2-One-framework-Mobile-and-desktop"><a href="#Angular-2-One-framework-Mobile-and-desktop" class="headerlink" title="Angular 2 - One framework. Mobile and desktop"></a><a href="https://angular.io/" target="_blank" rel="external">Angular 2 - One framework. Mobile and desktop</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/InfomediaLtd/angular2-redux-example" target="_blank" rel="external">angular2-redux-example - Example project for using pure Redux with Angular 2 and TypeScript</a></li>
<li><a href="https://github.com/angular-redux/store" target="_blank" rel="external">@angular-redux/store - Angular 2 bindings for Redux</a></li>
<li><a href="https://github.com/InfomediaLtd/angular2-redux" target="_blank" rel="external">angular2-redux - Wrapper components for using Redux in an Angular2 application</a></li>
<li><a href="https://github.com/forforeach/ng2redux" target="_blank" rel="external">ng2redux - Angular 2 bindings for Redux implemented with TypeScript and decorators</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Vue-A-library-for-building-modern-web-interfaces"><a href="#Vue-A-library-for-building-modern-web-interfaces" class="headerlink" title="Vue - A library for building modern web interfaces"></a><a href="http://vuejs.org" target="_blank" rel="external">Vue - A library for building modern web interfaces</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/revue/revue" target="_blank" rel="external">Revue - Redux binding for Vue</a></li>
<li><a href="https://github.com/yang-wei/vue-flux" target="_blank" rel="external">Vue + Redux</a></li>
<li><a href="https://github.com/zhongqf/meteor-vue-redux-example" target="_blank" rel="external">Meteor + Vue + Redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Polymer-Build-modern-apps-using-web-components"><a href="#Polymer-Build-modern-apps-using-web-components" class="headerlink" title="Polymer - Build modern apps using web components"></a><a href="https://www.polymer-project.org" target="_blank" rel="external">Polymer - Build modern apps using web components</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/tur-nr/polymer-redux" target="_blank" rel="external">polymer-redux</a></li>
<li><a href="https://github.com/lastmjs/redux-store-element" target="_blank" rel="external">redux-store-element</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Ember-A-framework-for-creating-ambitious-web-applications"><a href="#Ember-A-framework-for-creating-ambitious-web-applications" class="headerlink" title="Ember - A framework for creating ambitious web applications"></a><a href="http://emberjs.com" target="_blank" rel="external">Ember - A framework for creating ambitious web applications</a></h3><ul>
<li>Examples</li>
</ul>
<hr>
<h3 id="Meteor-Build-apps-that-are-a-delight-to-use-faster-than-you-ever-thought-possible"><a href="#Meteor-Build-apps-that-are-a-delight-to-use-faster-than-you-ever-thought-possible" class="headerlink" title="Meteor - Build apps that are a delight to use, faster than you ever thought possible"></a><a href="https://www.meteor.com" target="_blank" rel="external">Meteor - Build apps that are a delight to use, faster than you ever thought possible</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/zhongqf/meteor-react-redux-example" target="_blank" rel="external">meteor-react-redux-example</a></li>
<li><a href="https://github.com/AdamBrodzinski/meteor-flux-leaderboard/tree/redux" target="_blank" rel="external">meteor-flux-leaderboard</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Mithril-A-Javascript-Framework-for-Building-Brilliant-Applications"><a href="#Mithril-A-Javascript-Framework-for-Building-Brilliant-Applications" class="headerlink" title="Mithril - A Javascript Framework for Building Brilliant Applications"></a><a href="http://mithril.js.org/" target="_blank" rel="external">Mithril - A Javascript Framework for Building Brilliant Applications</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/mijime/mithril-redux-starter-hmr" target="_blank" rel="external">mithril-redux-starter-hmr</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Backbone-Give-your-JS-App-some-Backbone-with-Models-Views-Collections-and-Events"><a href="#Backbone-Give-your-JS-App-some-Backbone-with-Models-Views-Collections-and-Events" class="headerlink" title="Backbone - Give your JS App some Backbone with Models, Views, Collections, and Events"></a><a href="http://backbonejs.org/" target="_blank" rel="external">Backbone - Give your JS App some Backbone with Models, Views, Collections, and Events</a></h3><ul>
<li>Tools<ul>
<li><a href="https://github.com/redbooth/backbone-redux" target="_blank" rel="external">backbone-redux â€” The easy way to keep your backbone collections and redux store in sync</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Aurelia-is-a-next-gen-JavaScript-client-framework-for-mobile-desktop-and-web-that-leverages-simple-conventions-to-empower-your-creativity"><a href="#Aurelia-is-a-next-gen-JavaScript-client-framework-for-mobile-desktop-and-web-that-leverages-simple-conventions-to-empower-your-creativity" class="headerlink" title="Aurelia - is a next gen JavaScript client framework for mobile, desktop and web that leverages simple conventions to empower your creativity"></a><a href="http://aurelia.io" target="_blank" rel="external">Aurelia - is a next gen JavaScript client framework for mobile, desktop and web that leverages simple conventions to empower your creativity</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/voidberg/aurelia-redux-todo" target="_blank" rel="external">aurelia-redux-todo - An implementation of the Redux todo demo app using Aurelia</a></li>
<li><a href="https://www.sitepoint.com/managing-state-aurelia-with-redux/" target="_blank" rel="external">Managing State in Aurelia: How to Use Aurelia with Redux</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Riot-A-React-like-user-interface-micro-library"><a href="#Riot-A-React-like-user-interface-micro-library" class="headerlink" title="Riot - A React-like user interface micro-library"></a><a href="http://riotjs.com" target="_blank" rel="external">Riot - A React-like user interface micro-library</a></h3><ul>
<li>Examples<ul>
<li><a href="https://github.com/remyhonig/riotredux-budget" target="_blank" rel="external">riotredux-budget</a></li>
<li><a href="https://github.com/zesty-io/app-skeleton" target="_blank" rel="external">app-skeleton</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="Electron-Build-cross-platform-desktop-apps-with-web-technologies"><a href="#Electron-Build-cross-platform-desktop-apps-with-web-technologies" class="headerlink" title="Electron - Build cross platform desktop apps with web technologies"></a><a href="http://electron.atom.io/" target="_blank" rel="external">Electron - Build cross platform desktop apps with web technologies</a></h3><ul>
<li><a href="https://github.com/chentsulin/electron-react-boilerplate" target="_blank" rel="external">electron-react-boilerplate (Electron + Redux + Hot Reload)</a></li>
</ul>
<hr>
<h3 id="A-Frame-A-web-framework-for-building-VR-experiences"><a href="#A-Frame-A-web-framework-for-building-VR-experiences" class="headerlink" title="A-Frame - A web framework for building VR experiences"></a><a href="https://aframe.io" target="_blank" rel="external">A-Frame - A web framework for building VR experiences</a></h3><ul>
<li><a href="https://github.com/ngokevin/kframe/tree/master/components/redux" target="_blank" rel="external">aframe-redux-component</a></li>
</ul>
<hr>
<h3 id="Chrome-Extensions"><a href="#Chrome-Extensions" class="headerlink" title="Chrome Extensions"></a>Chrome Extensions</h3><ul>
<li><a href="https://github.com/Dharmoslap/redux-chrome-extension" target="_blank" rel="external">Redux Chrome Extension</a></li>
<li><p><a href="https://github.com/jhen0409/react-chrome-extension-boilerplate" target="_blank" rel="external">React Chrome Extension Boilerplate (Webpack + Redux + Babel and etc</a></p>
</li>
<li><p>Examples</p>
<ul>
<li><a href="https://github.com/Pumgrana/plugin" target="_blank" rel="external">Pumgrana Plugin</a></li>
</ul>
</li>
</ul>
<h2 id="Ruby-on-Rails-Resources"><a href="#Ruby-on-Rails-Resources" class="headerlink" title="Ruby on Rails Resources"></a>Ruby on Rails Resources</h2><ul>
<li><a href="https://github.com/shakacode/react-webpack-rails-tutorial" target="_blank" rel="external">React Webpack Rails Tutorial Using Redux</a></li>
<li><a href="https://github.com/shakacode/react_on_rails" target="_blank" rel="external">react_on_rails gem</a></li>
</ul>
<h2 id="Other-languages"><a href="#Other-languages" class="headerlink" title="Other languages"></a>Other languages</h2><ul>
<li><p>.NET</p>
<ul>
<li><a href="https://github.com/GuillaumeSalles/redux.NET" target="_blank" rel="external">https://github.com/GuillaumeSalles/redux.NET</a></li>
<li><a href="https://github.com/pshomov/reducto" target="_blank" rel="external">https://github.com/pshomov/reducto</a></li>
</ul>
</li>
<li><p>Java</p>
<ul>
<li><a href="https://github.com/glung/redux-java" target="_blank" rel="external">https://github.com/glung/redux-java</a></li>
<li><a href="https://github.com/trikita/jedux" target="_blank" rel="external">https://github.com/trikita/jedux</a></li>
<li><a href="https://github.com/izumin5210/Droidux" target="_blank" rel="external">https://github.com/izumin5210/Droidux</a></li>
</ul>
</li>
<li><p>Swift</p>
<ul>
<li><a href="https://github.com/ReSwift/reduxSwift" target="_blank" rel="external">https://github.com/ReSwift/reduxSwift</a></li>
<li><a href="https://github.com/Swift-Flow/Swift-Flow" target="_blank" rel="external">https://github.com/Swift-Flow/Swift-Flow</a></li>
<li><a href="https://github.com/ReSwift/ReSwift" target="_blank" rel="external">https://github.com/ReSwift/ReSwift</a> and <a href="http://reswift.github.io/ReSwift/master" target="_blank" rel="external">docs</a></li>
</ul>
</li>
<li><p>Purescript</p>
<ul>
<li><a href="https://github.com/brakmic/purescript-redux" target="_blank" rel="external">https://github.com/brakmic/purescript-redux</a></li>
<li><a href="https://github.com/faber/purescript-purdux" target="_blank" rel="external">https://github.com/faber/purescript-purdux</a></li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-Redux-Saga-å®Œæˆæ—¶é’Ÿæ¼”ç¤ºApp]]></title>
      <url>http://yoursite.com/2017/03/08/-%E7%BF%BB%E8%AF%91-Redux-Saga-%E5%AE%8C%E6%88%90%E6%97%B6%E9%92%9F%E6%BC%94%E7%A4%BAApp/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ç¿»è¯‘ç‰ˆæœ¬ï¼Œ<a href="http://ohyayanotherblog.ghost.io/redux-saga-finishing-the-clock-demo-app/" target="_blank" rel="external">åŸæ–‡è¯·è§</a><br><em>14 NOVEMBER 2016</em></p>
</blockquote>
<h2 id="å®ç°Sagaä»£ç "><a href="#å®ç°Sagaä»£ç " class="headerlink" title="å®ç°Sagaä»£ç "></a>å®ç°Sagaä»£ç </h2><p>è¿™ç¯‡æ–‡ç« æ˜¯ä¸‰ç¯‡å…³äºRedux Sagaç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡,ä¹Ÿæ˜¯æœ€åä¸€ç¯‡.åœ¨ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬å…ˆå¯¹æœ‰å…³çš„æ¦‚å¿µè¿›è¡Œäº†çƒ­èº«.åœ¨ç¬¬äºŒéƒ¨åˆ†,æˆ‘ä»¬å’ŒReduxå…³ç³»æ¨è¿›åˆ°äº†å¦ä¸€ä¸ªé«˜åº¦.æˆ‘ä»¬æŠŠSagaä»˜è¯¸å®æ–½.åœ¨æœ€åä¸€ç¯‡æ–‡ç« ,æˆ‘ä»¬æŠŠæœ€åä¸€éƒ¨åˆ†å†…å®¹å†™å®Œ.å¦‚æœä½ æ²¡æœ‰å…‹éš†app repoï¼Œå¯ä»¥åœ¨è¿™ä¸ª<a href="https://github.com/granmoe/redux-saga-clock-tutorial" target="_blank" rel="external">åœ°å€å…‹éš†</a>,å¦‚æœä¸æƒ³çœ‹è¿™ä¸ªrepo,æƒ³ç›´æ¥è·³åˆ°æœ€ç»ˆçš„appä»£ç ,å¯ä»¥<a href="https://github.com/granmoe/redux-saga-clock.git" target="_blank" rel="external">çœ‹è¿™ä¸ªrepo</a>.   <a href="https://granmoe.github.io/redux-saga-clock/" target="_blank" rel="external">live demoçœ‹è¿™é‡Œ</a>.</p>
<hr>
<p><a href="http://www.jianshu.com/p/6f8678a6ad78" target="_blank" rel="external">ç¬¬ä¸€éƒ¨åˆ†è¯‘æ–‡è¯·è§</a>ï¼Œ<br><a href="http://www.jianshu.com/p/fad0136e77c0" target="_blank" rel="external">ç¬¬äºŒéƒ¨åˆ†è¯‘æ–‡è¯·è§</a>ï¼Œ<br><a href="http://www.jianshu.com/p/88fc4236b505" target="_blank" rel="external">ç¬¬ä¸‰éƒ¨åˆ†è¯‘æ–‡è¯·è§</a>.</p>
<hr>
<h2 id="Whatâ€™s-my-name-agian"><a href="#Whatâ€™s-my-name-agian" class="headerlink" title="Whatâ€™s my name agian?"></a>Whatâ€™s my name agian?</h2><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­,æˆ‘ä»¬è®¾è®¡äº†åŸºç¡€ä½†æ˜¯æœ‰ç‚¹å¹¼ç¨šçš„éœ€æ±‚,åˆ›å»ºäº†å¾ˆåˆçº§æ—¶é’Ÿ,å¯ä»¥å¯¹ç”¨æˆ·çš„äº¤äº’æ“ä½œåšå‡ºä¸€äº›å“åº”.(è¯‘è€…ï¼šåé¢æœ‰å‡ å¥ä¼¼ä¹å’ŒæŠ€æœ¯æ²¡æœ‰å¤ªå¤§å…³ç³»,æˆ‘å°±æ²¡æœ‰ç¿»è¯‘äº†.è¯·å‚è§åŸæ–‡).</p>
<p>æˆ‘ä»¬å†³å®šåªä½¿ç”¨æœ€å°åŒ–çš„redux stateå€¼æœ‰ä¸€ä¸ªå­—æ®µâ€œmillisecondsâ€æ¥ä»£è¡¨æ—¶é’Ÿçš„æ—¶é—´.å› ä¸ºæˆ‘ä»¬çš„æ—¶é’Ÿéœ€è¦å‘å‰,å‘å,é‡ç½®,æ‰€ä»¥åˆ›å»ºäº†ç›¸åº”çš„redux actionå»æ‰§è¡Œå¢,å‡,é‡ç½®actions,è¿™äº›actionså¯ä»¥æ”¹å˜state.<br>å½“æˆ‘ä»¬è¿›å…¥æŸäº›saga codeä»£ç ,åˆ›å»ºä¸€ä¸ªsagaç›‘å¬ä¸‰ä¸ªactions(å¼€å§‹,æš‚åœ,å›æ‹¨),åªæœ‰æ”¶åˆ°ç›¸åº”actionçš„æ—¶å€™,è¾“å‡ºæ—¥å¿—å†…å®¹.æœ€å,æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŠŠæ—¥å¿—è¾“å‡ºæ›¿æ¢æˆæ—¶é’Ÿå®é™…è¿è¡Œçš„æµç¨‹,ä¾‹å¦‚æ¯ä¸€ç§’ç§å‘é€ä¸€ä¸ªé€’å‡çš„action,å› æ­¤app stateçš„å¼‚æ­¥æ“ä½œéœ€è¦å¥½å¥½çš„è®¾è®¡.æœ€åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„Reactç»„ä»¶,å¯ä»¥è®©æˆ‘ä»¬æ ¹æ®æœŸæœ›çš„sagaä»£ç çš„å·¥ä½œæµç¨‹æµ‹è¯•reduxå’Œsaga action,è§‚å¯Ÿstateçš„æ›´æ–°.</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥å®Œæˆè¿™ä»¶äº‹,æˆ‘ä»¬æƒ³ç»™æœ‹å‹ç•™ä¸‹æ·±åˆ»çš„å°è±¡,çœ‹ä¸Šå»æœ‰æ„æ€ä¸€ç‚¹,æ‰€ä»¥ä¼šä½¿ç”¨ä¸€äº›éå¸¸é…·çš„SVGæŠ€æœ¯,å½“æ—¶é—´å¢åŠ çš„æ—¶å€™,æ—¶é’Ÿå¯ä»¥ç”»å‡ºä¸€äº›å›¾å½¢.ä½†æ˜¯æœ€é‡è¦çš„æ˜¯ä½¿ç”¨Sagaå¯ä»¥æ˜¯appå”±æ­Œ,è·³èˆ.å¼€å§‹ç¼–ç .</p>
<p>##å®ç°Saga<br>æˆ‘ä»¬çš„duck.jsæ˜¯éå¸¸å°çš„,å®é™…ä¸Šä»…ä»…éœ€è¦å¾ˆå°‘å‡ è¡Œä»£ç å»å®Œæˆsaga/redux.ç›®å‰ä¸ºæ­¢æˆ‘ä»¬çš„duckä»£ç æ˜¯è¿™æ ·çš„:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">export</span> <span class="function"><span class="keyword">function</span>* <span class="title">rootSaga</span> (<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="keyword">yield</span> takeLatest([<span class="string">'start-clock'</span>, <span class="string">'pause-clock'</span>, <span class="string">'rewind-clock'</span>], handleClockAction)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Pushed this action to handleClockAction: '</span>, type)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>æ­£å¦‚æˆ‘ä»¬ä¸Šä¸€ç¯‡æ–‡ç« æ‰€è®¨è®ºçš„,<code>takeLatest</code>å°†ä¼šç›‘å¬action typeæ•°ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ªaction type,å½“æ¯æ¬¡å‘é€çš„actionå’Œaction typeä¹‹ä¸€åŒ¹é…çš„æ—¶å€™,ä¼šè¿è¡Œå¦ä¸€ä¸ªæµç¨‹(åœ¨æˆ‘ä»¬çš„appä¸­,æ˜¯<code>handleClockAction</code>).<code>takeLatest</code>ä¹Ÿä¼šå–æ¶ˆä¹‹å‰çš„è¿è¡Œæµç¨‹,ä»–ä¹Ÿä¼šä¼ é€’æ•´ä¸ªactionå¯¹è±¡,æˆ‘ä»¬å¯ä»¥åœ¨<code>handleClockAction</code>ä½¿ç”¨è¿™ä¸ªå¯¹è±¡.</p>
<p>ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹æ•´ä¸ªappåº”è¯¥æ€ä¹ˆå·¥ä½œ.æ‰€æœ‰çš„å®é™…æµç¨‹éƒ½æ˜¯åœ¨<code>handelClockAction</code>ä¸­,åœ¨ä¸‰ä¸ªsaga actionsä¸­,æ¯ä¸€ä¸ªactionæˆ‘ä»¬éƒ½åšä¸€äº›ä¸åŒçš„å·¥ä½œ.æ·±å…¥åˆ°ä»£ç çš„åŸºç¡€æ„æ¶ä¸­.ä½¿ç”¨<code>if/else if</code>ä»£ç å—æ›¿æ¢<code>handleClockAction</code>çš„å•è¡Œä»£ç .è¿™ä¸ªä»£ç å—ä¸ºæ¯ä¸ªaction typeæä¾›åˆ†æ”¯åˆ¤æ–­é€»è¾‘,å¹¶ä¸”è¾“å‡ºä¸€äº›æ–‡æœ¬æ—¥å¿—,éªŒè¯ä»£ç çš„æ­£ç¡®æ€§.</p>
<p>ç»™ä½ å‡ ç§’é’Ÿ,è€å¿ƒç­‰å¾…ä¸€ä¸‹.</p>
<p>å¥½äº†,ä¸‹é¢çš„æ˜¯æˆ‘çš„<code>handelClockAction</code>çš„å®é™…æ ·å­:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//if else ifä»£ç å—è¿›è¡Œåˆ†æ”¯åˆ¤æ–­æ‰§è¡Œæµç¨‹</span></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'pause-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. Guess what needs to be done here?`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨è¿è¡Œapp(npm start),è½¬åˆ°localhost:8080,æ‰“å¼€javascriptç»ˆç«¯,æµ‹è¯•ä¸€äº›saga actions(ä»–ä»¬å’ŒSVGå›¾ä¸‹é¢çš„æŒ‰é’®æ˜¯è¿æ¥åœ¨ä¸€èµ·çš„).æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯æ¬¡actionæ‰§è¡Œæ—¶,æœ‰ç›¸åº”çš„æ—¥å¿—è¾“å‡º.</p>
<p>å½“æˆ‘ä»¬å¼€å§‹clock action,æˆ‘ä»¬æƒ³è®©æ—¶é’Ÿæ¯100æ¯«ç§’é€’å¢ä¸€æ¬¡.ä¸ºäº†è¿™æ ·åš,ä»sagaå¯¼å…¥åŠ©æ‰‹å‡½æ•°â€delayâ€.ç¼–è¾‘redux-sagaæ–‡ä»¶.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; delay, takeLatest &#125; <span class="keyword">from</span> <span class="string">'redux-saga'</span></div></pre></td></tr></table></figure>
<hr>
<p>delayéå¸¸ç®€å•ï¼ŒåŠŸèƒ½ä¸è¨€è‡ªæ˜.å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°,æ¯«ç§’æ•°,ç„¶åæš‚åœæ‰§è¡Œå¯¹åº”çš„æ—¶é—´.ä¾‹å¦‚<code>yield delay(50)</code>.åœ¨<code>if/else if</code>ä»£ç å—ä¸­æ·»åŠ ä¸€äº›é€»è¾‘ä»£ç ,æ¯1000ms,è¾“å‡ºæ—¥å¿—.è¯·è®°ä½,ä½ éœ€è¦è¿™ä¸ªè¿‡ç¨‹æ— é™åˆ¶çš„é‡å¤.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éå¸¸ç®€å•çš„åŸç”Ÿjavascriptä»£ç æ§åˆ¶æµæ¥å®ç°.æˆ‘æƒ³è®©ä½ å…ˆçŒœçŒœæ€ä¹ˆå®ç°.</p>
<p>ä¸è¦å·çœ‹.</p>
<p>èŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹.</p>
<p>å¥½äº†,ä¸‹é¢æ˜¯æˆ‘çš„ä»£ç </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;<span class="comment">//å°±æ˜¯è¿™ä¸ªwhile(true)è¯­å¥ä¿æŒå§‹ç»ˆè¿è¡Œ</span></div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'pause-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. Guess what needs to be done here?`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Š,æ‰“å¼€jsç»ˆç«¯,æŸ¥çœ‹æ—¥å¿—è¾“å‡º,å¯ä»¥å¾—åˆ°ç›´è§‚çš„ä¿¡æ¯.ä½ å°†çœ‹åˆ°,start clock actionæš‚åœ100æ¯«ç§’,ç„¶åè¾“å‡ºä¸€äº›æ—¥å¿—ä¿¡æ¯,ä¹‹åæ— é™åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹.æ³¨æ„ä¸€ä¸ªå…³é”®äº‹å®,æ— è®ºä»€ä¹ˆæ—¶é—´æˆ‘ä»¬çš„<code>takeLatest</code>å‡½æ•°æ¥æ”¶åˆ°åŒ¹é…çš„actionçš„æ—¶å€™,å®ƒä¼šé€€å‡ºå½“å‰è¿è¡Œçš„<code>handleClockAction</code>.å¦‚æœæ˜¯æš‚åœçš„action,ä»€ä¹ˆäº‹æƒ…ä¹Ÿä¸åš,ä½†æ˜¯è¿˜æ˜¯è¦é€€å‡ºå½“å‰ä»»ä½•çš„action,çŒœçŒœæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšï¼Ÿåˆ é™¤ä¸€ç‚¹ä»£ç ï¼æš‚åœçš„æ—¶é’Ÿå°†ä¼šè‡ªåŠ¨å¼€å§‹å·¥ä½œ,å› ä¸º<code>takeLatest</code>ä¼šé€€å‡ºå½“å‰çš„<code>handleClockAction</code>,ä¸ç®¡æ—¶é’Ÿæ˜¯å‘å‰è¿˜æ˜¯å‘åè¿è¡Œ,æ—¶é’Ÿéƒ½ä¼šåœæ­¢.<br>ç¡®ä¿¡ä½ ç†è§£<code>takeLatest</code>çš„å…³é”®ç‰¹æ€§.åœ¨<code>handleClockAction</code>ä¸­åšå‡ºåˆé€‚çš„æ”¹å˜.åº”è¯¥æƒ³ä¸‹é¢è¿™æ ·åš:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock forward here.`</span>)</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨è®©æˆ‘ä»¬åœ¨å¾ªç¯å†…çœŸæ­£çš„dispatchä¸€ä¸ªaction.<br>ï¼ˆæ—ç™½ï¼šæˆ‘ä»¬æ²¡æœ‰å®é™…dispatchä¸€ä¸ªactionï¼Œä»…ä»…è¯·æ±‚ä¸­é—´ä»¶æ¥åšè¿™ä»¶äº‹,æš‚æ—¶ä¸è¦æ‹…å¿ƒ,æˆ‘åé¢ä¼šè§£é‡Šæ¸…æ¥šçš„.)</p>
<p>åœ¨Sagaé‡Œé¢dispatchä¸€ä¸ªaction,æˆ‘ä»¬è¦ä½¿ç”¨<code>put</code> side effects,æ·»åŠ ä¸€è¡Œä»£ç åˆ°duckæ–‡ä»¶é‡Œ.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; put &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></div></pre></td></tr></table></figure>
<hr>
<p>é€šè¿‡<code>put</code>è¯·æ±‚ä¸€ä¸ªdispatchçš„action,ç®€å•çš„ä½¿ç”¨<code>yield put({ type: &#39;hi&#39;, data: &#39;I am an action&#39; })</code>å°±å¯ä»¥äº†.æ„æ€æ˜¯åœ¨<code>put</code>é‡Œ,å¯ä»¥è°ƒç”¨ä¸€ä¸ªaction creator è¿”å›ä¸€ä¸ªå•çº¯å¯¹è±¡,åƒè¿™æ ·<code>yield put(someAction())</code>.(åœ¨javascriptä¸­å‡½æ•°çš„å‚æ•°ä¼šç«‹å³æ±‚å€¼).è¿˜è®°å¾—æˆ‘ä»¬åœ¨å¼€å§‹åˆ›å»ºçš„é‚£äº›redux actionå—ï¼Ÿæˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ª,è½¬åˆ°whileå¾ªç¯,è¯•è¯•<code>put</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())<span class="comment">//æ³¨æ„è¿™ä¸€å¥</span></div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Received <span class="subst">$&#123;type&#125;</span>. We need to run the clock backwards here.`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>åœ¨ä½ çš„æµè§ˆå™¨é‡Œè¯•è¯•.æ³¨æ„åœ¨SVGä¸‹é¢çš„æ—¶é’Ÿæ—¶é—´æ˜¯é€’å¢çš„.</p>
<p>ä¸ºäº†è®©æ—¶é’Ÿåé€€,å¯ä»¥é‡ç”¨start æ—¶é’Ÿçš„å¤§éƒ¨åˆ†ä»£ç .</p>
<p>ä¸‹é¢æ˜¯å›é€€çš„ä»£ç :<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(<span class="number">1000</span>)</div><div class="line">      <span class="keyword">yield</span> put(decrementMilliseconds())<span class="comment">//é€’å‡</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>ç°åœ¨æµ‹è¯•ä¸€ä¸‹æ‰€æœ‰çš„saga actions,ç¡®ä¿æ¯ä»¶äº‹æƒ…éƒ½å·¥ä½œæ­£å¸¸.å¦‚æœå·¥ä½œä¸æ­£å¸¸,é‚£ç»å¯¹æ˜¯ä½ çš„é”™,ä¸æ˜¯æˆ‘çš„é”™.å¼€ä¸ªç©ç¬‘.(è¯‘è€…:åé¢å‡ å¥æ²¡æœ‰ç¿»è¯‘)</p>
<p>æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»æ˜¯è¿è¡Œsagaä»£ç å¹¶ä¸”é€šè¿‡å®éªŒå­¦åˆ°çš„äº†ä¸€äº›ä¸œè¥¿.ä¸€ä¸ªæç¤ºï¼š<code>delay</code>æ˜¯é˜»å¡çš„,å…¶ä»–çš„effectè¯­å¥éƒ½æ˜¯éé˜»å¡çš„.è¯•ç€ä½¿ç”¨<code>for</code>å¾ªç¯.è¦ä¹ˆæŠŠ<code>while</code>æ¡ä»¶æ”¹ä¸ºfalse.æˆ‘ä»¬å·²ç»æ”¾å¼ƒäº†promiseçš„ä¸–ç•Œ,ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›ç®€å•çš„,å¯é¢„æµ‹çš„,åŸç”Ÿçš„javascriptæ¥è¡¨ç°å‡ºæ‰€æœ‰çš„æ§åˆ¶æµè¯­å¥.</p>
<p>å¥½äº†,æŠŠsagaä»£ç æ¢å¤åˆ°ä¸Šé¢çš„æ ·å­.</p>
<p>åšå¥½äº†ä¸Šé¢çš„æ¢å¤,æˆ‘çš„sagaä»£ç å·²ç»å®Œæˆ,å¯ä»¥æ“ä½œäº†(æ³¨æ„äº‹é¡¹ï¼šåœ¨æœ€ç»ˆç‰ˆæœ¬ä¸Š,æˆ‘å·²ç»æŠŠä»£ç é‡æ–°ç»„ç»‡äº†ä¸€ä¸‹,ä»¥ä¾¿äºé˜…è¯»).</p>
<h2 id="Sagaâ€™sçš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œ"><a href="#Sagaâ€™sçš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œ" class="headerlink" title="Sagaâ€™sçš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œ"></a>Sagaâ€™sçš„æ–¹å¼å¤„ç†å¼‚æ­¥æ“ä½œ</h2><p>å¥½äº†.ç°åœ¨è®©æˆ‘ä»¬å†åšä¸€äº›äº‹æƒ…,è®©æˆ‘ä»¬è°ˆè°ˆä»£ç æ˜¯æ€ä¹ˆå·¥ä½œçš„.Redux Sagaä¸­æ ¸å¿ƒçš„æ¦‚å¿µæ˜¯:æˆ‘ä»¬å®é™…æ²¡æœ‰åƒdispatchä¸€ä¸ªactionåˆ°storeä¸€æ ·æ‰§è¡Œå¼‚æ­¥æ“ä½œ.æ›¿ä»£æ–¹æ³•æ˜¯:æˆ‘ä»¬yieldå¼‚æ­¥æ“ä½œåˆ°saga middleware,ç„¶åmiddlewareæ‰§è¡Œä»–ä»¬.ç®€å•çš„è¯´,æˆ‘ä»¬ç»™Sagaä¸€ä¸ªæŒ‡ç¤º,å‘Šè¯‰ä»–æˆ‘ä»¬å¸Œæœ›å‘ç”Ÿä»€ä¹ˆ.è¿™äº›å¼‚æ­¥æ“ä½œæè¿°æ˜¯éµå¾ªæ ‡å‡†generatorè¾“å‡ºçš„å•çº¯å¯¹è±¡:<code>{value:any,done:boolean}</code>,è¿™å’Œæˆ‘ä»¬åœ¨ç¬¬ä¸€éƒ¨åˆ†çœ‹åˆ°çš„å®Œå…¨ä¸€æ ·.<br>ä¾‹å¦‚,<code>yield put</code>å‘é€ä¸€ä¸ªå¯¹è±¡åˆ°ä¸­é—´ä»¶,è¿™ä¸ªä¸­é—´ä»¶åŒ…å«ä¸€ä¸ªactionå¯¹è±¡,å¯ä»¥dispatchä¸€äº›å†…å®¹ç»™æˆ‘ä»¬(è¯‘è€…:è¿™ä¸ªåœ°æ–¹æœ‰ç‚¹ç»•,å…¶å®æ˜¯åœ¨å¼‚æ­¥æ“ä½œå®Œæˆä»¥å,éœ€è¦å†æ¬¡dispatchè¿”å›çš„ç»“æœ,ä»è€Œæ”¹å˜stateï¼Œè¿™æ ·æˆ‘ä»¬çš„ç»„ä»¶æ‰å¯ä»¥æ ¹æ®stateçš„æ”¹å˜æ¥æ¸²æŸ“æ•ˆæœ,ä¾‹å¦‚ä»è¿œç¨‹èµ„æºè¯·æ±‚æ•°æ®,é€šå¸¸éƒ½éœ€è¦æŠŠæ•´ä¸ªæ“ä½œåˆ†æˆå‡ æ­¥æ¥å®Œæˆ,æ¯ä¸€æ­¥è¦æ”¹å˜ä¸åŒçš„state,åœ¨dispatchä¸­å†dispatch)è¿™æ ·å®šä¹‰å¼‚æ­¥æ•°æ®æµæœ‰å¾ˆå¤šå¥½å¤„,å…¶ä¸­ä¹‹ä¸€æ˜¯å¯æµ‹è¯•æ€§.æˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„åœ¨æ¯ä¸€ä¸ªside effectè¿”å›ä¸­é—´ä»¶çš„æ—¶å€™åˆ›å»ºæ–­è¨€(ç»§ç»­å…³æ³¨åç»­çš„å†…å®¹,æœ‰æµ‹è¯•çš„æ·±å…¥ä»‹ç»)</p>
<p> æˆ‘ä»¬åº”è¯¥éµå¾ªredux-sagaçš„æœ€ä½³å®è·µ,åšäº›å°å°çš„æ›´æ–°,ä»redux-saga/effectsä¸­å¯¼å…¥<code>call</code>,æŠŠ<code>yield delay(100)</code>æ”¹ä¸º<code>yield call(delay,100)</code>.å› ä¸ºæˆ‘ä»¬åªæƒ³è¿”å›side-effectsåˆ°sagaä¸­é—´ä»¶,sagaæä¾›äº†<code>call</code>effectæŠŠnon-effectsè½¬å˜ä¸ºeffects.ä¸ä»…ä»…yield<code>delay</code>è‡ªå·±(promiseå¯¹è±¡)ä¸åŒ,æˆ‘ä»¬é€šè¿‡<code>call</code>æŠŠ<code>delay</code>è½¬å˜ä¸ºeffect,ç„¶åyieldå®ƒ.æ‰€æœ‰çš„non-effectéƒ½åº”è¯¥åšç›¸åŒçš„å¤„ç†.<code>call</code>çš„è¯­æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°,å¹¶ä¸”ä¼ é€’å‚æ•°åˆ—è¡¨.ä¾‹å¦‚:<code>yield call(fetch,url,options)</code>.æœ€å,æ³¨æ„,<code>call</code>å¯ä»¥è¢«promiseå¯¹è±¡,generators,æˆ–è€…å‡½æ•°ä½¿ç”¨.</p>
<h2 id="ä»£ç ä¸è¦å¤ªä¸‘é™‹"><a href="#ä»£ç ä¸è¦å¤ªä¸‘é™‹" class="headerlink" title="ä»£ç ä¸è¦å¤ªä¸‘é™‹"></a>ä»£ç ä¸è¦å¤ªä¸‘é™‹</h2><p> æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ä½œä¸ºappçš„é…ç½®,åŒ…å«ä¸€äº›å¸¸é‡.ä¸ºä»€ä¹ˆä¸å«åšâ€œconfig.jsâ€åœ¨/srcç›®å½•ä¸‹åˆ›å»º,ç²˜è´´ä¸‹é¢çš„å†…å®¹.</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">const</span> MAX_RADIUS = <span class="number">40</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> hands = [  </div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">144000</span>, <span class="attr">maxTicks</span>: <span class="number">1</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">36000</span>, <span class="attr">maxTicks</span>: <span class="number">4</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">12000</span>, <span class="attr">maxTicks</span>: <span class="number">3</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">2000</span>, <span class="attr">maxTicks</span>: <span class="number">6</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">400</span>, <span class="attr">maxTicks</span>: <span class="number">5</span> &#125;,</div><div class="line">  &#123; <span class="attr">ms</span>: <span class="number">100</span>, <span class="attr">maxTicks</span>: <span class="number">4</span> &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> STROKE_WIDTH = MAX_RADIUS / hands.length</div><div class="line"></div><div class="line">hands = hands.map(<span class="function">(<span class="params">hand, idx</span>) =&gt;</span> &#123;  </div><div class="line">  <span class="keyword">const</span> radius = STROKE_WIDTH * (hands.length - idx)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    ...hand,</div><div class="line">    radius,</div><div class="line">    <span class="attr">circumference</span>: <span class="number">2</span> * <span class="built_in">Math</span>.PI * radius,</div><div class="line">    <span class="attr">alpha</span>: <span class="number">1</span> - idx / hands.length</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> CLOCK_HANDS = hands</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> MINIMUM_MS = <span class="number">100</span></div></pre></td></tr></table></figure>
<hr>
<p> è¿™é‡Œé¢éƒ½æœ‰ä»€ä¹ˆå†…å®¹ï¼Ÿè®©æˆ‘è§£é‡Šä¸€ä¸‹,å®ƒæ˜¯ä¸€ç»„å¸¸é‡å’Œè®¡ç®—é‡,æè¿°SVGçš„å¤–è§‚.<br> æˆ‘ä¸ä¼šè¯¦ç»†è®²è¿™ä¸ªå†…å®¹,ä¸æ˜¯è¿™é‡Œçš„é‡ç‚¹.</p>
<p> å¥½äº†,ç°åœ¨æˆ‘ä»¬çš„sagaä»£ç å·²ç»å°±ç»ª,æˆ‘ä»¬ä¹Ÿå®šä¹‰äº†æ‰€æœ‰SVGéœ€è¦çš„é…ç½®æ–‡ä»¶.å†æ›´æ–°ä¸€ä¸‹SVGå†…å®¹,å¥½å®Œæˆapp.jsxçš„ä»£ç .</p>
<h2 id="å®Œæˆ-HIM"><a href="#å®Œæˆ-HIM" class="headerlink" title="å®Œæˆ HIM"></a>å®Œæˆ HIM</h2><p> ä¸‹é¢æ˜¯ç›®å‰çš„app.jsxä»£ç <br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; incrementMilliseconds, decrementMilliseconds, resetClock, startClock, pauseClock, rewindClock &#125; <span class="keyword">from</span> <span class="string">'duck'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  </div><div class="line">  render () &#123;</div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      milliseconds,</div><div class="line">      incrementMilliseconds,</div><div class="line">      decrementMilliseconds,</div><div class="line">      resetClock,</div><div class="line">      startClock,</div><div class="line">      pauseClock,</div><div class="line">      rewindClock</div><div class="line">    &#125; = <span class="keyword">this</span>.props</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;svg onClick=&#123; incrementMilliseconds &#125; onDoubleClick=&#123; resetClock &#125; onMouseLeave=&#123; decrementMilliseconds &#125;</div><div class="line">          className="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="500"&gt;</div><div class="line">          &lt;circle cx="50" cy="50" r=&#123; 30 &#125; stroke=&#123; 'rgba(1,1,1,1)' &#125; fill="orange" /&gt;</div><div class="line">        &lt;/svg&gt;</div><div class="line">        &lt;p&gt;&#123; milliseconds &#125;&lt;/p&gt;</div><div class="line">        &lt;p&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; startClock &#125;&gt;Start Clock&lt;/button&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; pauseClock &#125;&gt;Pause Clock&lt;/button&gt;</div><div class="line">          &lt;button type="button" onClick=&#123; rewindClock &#125;&gt;Rewind Clock&lt;/button&gt;</div><div class="line">        &lt;/p&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default connect(state =&gt; (&#123;  </div><div class="line">  milliseconds: state.milliseconds</div><div class="line">&#125;), (&#123;</div><div class="line">  incrementMilliseconds,</div><div class="line">  decrementMilliseconds,</div><div class="line">  resetClock,</div><div class="line">  startClock,</div><div class="line">  pauseClock,</div><div class="line">  rewindClock</div><div class="line">&#125;))(Clock)</div></pre></td></tr></table></figure></p>
<hr>
<p> æˆ‘ä»¬éœ€è¦å¯¼å…¥conifgå†…å®¹,é€šè¿‡propsä¼ é€’åˆ°ç»„ä»¶.åˆ é™¤ä¸€äº›ä¸å¿…è¦çš„å¯¼å…¥æ–‡ä»¶.ä¸å†ç›´æ¥è°ƒç”¨ç‰¹å®šçš„actions,å› ä¸ºæˆ‘ä»¬ä»…ä»…åœ¨sagaä¸­å‘å‡ºaction.æ›´æ–°ä¸€ä¸‹ä»£ç .<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  </div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; startClock, rewindClock, pauseClock, resetClock &#125; <span class="keyword">from</span> <span class="string">'duck'</span>  </div><div class="line"><span class="keyword">import</span> &#123; CLOCK_HANDS, STROKE_WIDTH &#125; <span class="keyword">from</span> <span class="string">'config'</span></div></pre></td></tr></table></figure></p>
<hr>
<p> ç°åœ¨æˆ‘ä»¬æœ‰äº†æ•°æ®,å¯ä»¥åœ¨SVGå†…ç”»å‡ºæ¼‚äº®çš„åœ†ç¯.ç®€å•ç‚¹çš„è¯´æˆ‘ä»¬ä½¿ç”¨åŒå¿ƒåœ†ä»£è¡¨å°æ—¶/åˆ†é’Ÿ/ç§’.æ—¶é—´æµé€çš„æ—¶å€™,æ”¹å˜æ¯ä¸€ä¸ªåœ†ç¯çš„é•¿åº¦.ä¸ºäº†åšSVGå›¾ç‰‡,ä½¿ç”¨äº†ä¸€äº›å°æŠ€å·§<a href="https://css-tricks.com/svg-line-animation-works/" target="_blank" rel="external">CSS Trick blog post</a></p>
<p> æˆ‘ä»¬ä¸å†é€šè¿‡propsæ‰‹æ®µä¼ é€’millsecondså­—æ®µ.æ¯æ¬¡æ›´æ–°millisecondsæ—¶,æˆ‘ä»¬è®¡ç®—æ¯ä¸€ä¸ªæ—¶é’ŸæŒ‡é’ˆçš„ä½ç½®.è¿™åƒæ˜¯çƒ¦äººçš„æ•°å­¦è®¡ç®—.åŸºæœ¬ä¸Šæˆ‘ä»¬éå†æ¯ä¸€ä¸ªæŒ‡é’ˆ,ç„¶ååœ¨ä¸‹ä¸€ä¸ªæŒ‡é’ˆé‡å¤åŒæ ·çš„è¿‡ç¨‹,(æ—¶é’ˆå°±å‡æ‰å°æ—¶çš„æ•´å€å¥½ç§’æ•°,åˆ†é’Ÿå’Œç§’ä¸€æ ·å¤„ç†),æŠŠå‰©ä½™çš„æ—¶é—´ä¼ é€’ç»™ä¸‹å».æœ€å°çš„æŒ‡é’ˆå¯¹åº”çš„æœ€å°çš„ç²¾åº¦å•ä½,100ms(config.jsä¸­çš„MAXIMUM_MS),æ›´æ–°ä½ çš„<code>connect</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function"><span class="params">state</span> =&gt;</span> &#123;  </div><div class="line">  <span class="keyword">const</span> currentTime = state.milliseconds</div><div class="line">  <span class="keyword">let</span> remainingTime = currentTime</div><div class="line"></div><div class="line">  <span class="keyword">const</span> getTicks = <span class="function">(<span class="params">hands, timeRemaining</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> [hand, ...tailHands] = hands</div><div class="line">    hand.ticks = <span class="built_in">Math</span>.floor(timeRemaining / hand.ms)</div><div class="line">    <span class="keyword">return</span> tailHands.length ? [hand, ...getTicks(tailHands, timeRemaining % hand.ms)] : [hand]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> hands = getTicks(CLOCK_HANDS, remainingTime)</div><div class="line">    .map(<span class="function">(<span class="params">hand, idx</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> offset = state.milliseconds &gt;= hand.ms ? <span class="number">1</span> : <span class="number">0</span></div><div class="line">      <span class="keyword">const</span> position = hand.circumference - ((hand.ticks + offset) / hand.maxTicks * hand.circumference)</div><div class="line"></div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        ...hand,</div><div class="line">        position</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    hands</div><div class="line">  &#125;</div><div class="line">&#125;, (&#123;</div><div class="line">  startClock,</div><div class="line">  rewindClock,</div><div class="line">  resetClock,</div><div class="line">  pauseClock</div><div class="line">&#125;))(Clock)</div></pre></td></tr></table></figure>
<hr>
<p> ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶ä¸­å¯¼å…¥æ–°çš„<code>æŒ‡é’ˆ</code>å±æ€§.åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ç»™propsè§£æ„èµ‹å€¼:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">render () &#123;  </div><div class="line"><span class="keyword">const</span> &#123;</div><div class="line">  hands,</div><div class="line">  startClock,</div><div class="line">  rewindClock,</div><div class="line">  resetClock,</div><div class="line">  pauseClock</div><div class="line">&#125; = <span class="keyword">this</span>.props</div></pre></td></tr></table></figure>
<hr>
<p> ä¸ºäº†æœ€ç»ˆç‰ˆæœ¬,æˆ‘ä»¬åšä¸€ä¸‹æœ€ç»ˆçš„æ”¹å˜.æˆ‘ä»¬æ›´æ–°SVG,å¯åŠ¨<code>onMouseEnter</code>,å›é€€<code>onMouseLeave</code>,æš‚åœ<code>onClick</code>.æ·»åŠ ä¸€ä¸‹è¿™äº›å˜åŒ–.</p>
<p> ï¼ˆè¯‘è€…ï¼šè¿™ä¸€æ®µä¹Ÿä¸ç¿»äº†,åŸä½œè€…è¦å–ä¼ç‰¹åŠ ).</p>
<p>  åšå¥½äº†å§,ç°åœ¨æˆ‘ä»¬åœ¨SVGå†…åˆ›å»ºåŒå¿ƒåœ†,éå†<code>hands</code>å¹¶ä¸”åˆ›å»º<code>&lt;circle&gt;</code>SVGå…ƒç´ ,ä½¿ç”¨æˆ‘ä»¬çš„è®¡ç®—å€¼è®¾ç½®æ¯ä¸ªæŒ‡é’ˆçš„åŠå¾„,ä½ç½®å’Œé€æ˜åº¦.</p>
<p>  è¿™æ˜¯æœ€ç»ˆçš„æ›´æ–°,ä¸‹é¢æ˜¯<code>render()</code>å‡½æ•°è¿”å›çš„å†…å®¹ï¼š<br>  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">return</span> (  </div><div class="line">  &lt;svg onMouseEnter=&#123; startClock &#125; onMouseLeave=&#123; rewindClock &#125; onDoubleClick=&#123; resetClock &#125;</div><div class="line">    onClick=&#123; pauseClock &#125; className="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="500"&gt;</div><div class="line">    &#123; hands.map((hand, index) =&gt; &#123;</div><div class="line">      const &#123; radius, circumference, position, alpha &#125; = hand</div><div class="line">      return (</div><div class="line">        &lt;circle key=&#123; index &#125; cx="50" cy="50" r=&#123; radius &#125; stroke=&#123; `rgba(1,1,1,$&#123;alpha&#125;)` &#125; fill="none"</div><div class="line">          strokeWidth=&#123; STROKE_WIDTH &#125; strokeDasharray=&#123; circumference &#125; strokeDashoffset=&#123; position &#125; /&gt;</div><div class="line">      )</div><div class="line">    &#125;) &#125;</div><div class="line">  &lt;/svg&gt;</div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p> å¿˜äº†ä»¶äº‹æƒ…,è¿”å›duck.jsæ–‡ä»¶,ä»configå¯¼å…¥MINIMUM_MS:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; MINIMUM_MS &#125; <span class="keyword">from</span> <span class="string">'config'</span></div></pre></td></tr></table></figure>
<hr>
<p> ç°åœ¨åœ¨delayå‡½æ•°è°ƒç”¨æ—¶ä½¿ç”¨<code>MINIMUM_MS</code>æ›¿æ¢<code>1000</code>.<br> æ—¶é’Ÿæ¯100mså°±ä¼šæ»´ç­”ä¸€ä¸‹:</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span>* <span class="title">handleClockAction</span> (<span class="params">&#123; type &#125;</span>) </span>&#123;  </div><div class="line">  <span class="keyword">if</span> (type === <span class="string">'start-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(MINIMUM_MS)</div><div class="line">      <span class="keyword">yield</span> put(incrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'rewind-clock'</span>) &#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">      <span class="keyword">yield</span> delay(MINIMUM_MS)</div><div class="line">      <span class="keyword">yield</span> put(decrementMilliseconds())</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p> çœ‹çœ‹åœ¨sagaä¸­æ§åˆ¶æµç¨‹çš„é€»è¾‘æœ‰å¤šå®¹æ˜“ï¼Ÿ</p>
<h2 id="ç»™ä½ çš„æ—¶é’Ÿä¸Šå‘æ¡"><a href="#ç»™ä½ çš„æ—¶é’Ÿä¸Šå‘æ¡" class="headerlink" title="ç»™ä½ çš„æ—¶é’Ÿä¸Šå‘æ¡"></a>ç»™ä½ çš„æ—¶é’Ÿä¸Šå‘æ¡</h2><p> ç°åœ¨ç»™è¿™æ®µä»£ç æ‹§å‘æ¡,<code>npm start</code>,æµè§ˆå™¨ä¸­æ‰“å¼€localhost:8080.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-a754703b38f36735.gif?imageMogr2/auto-orient/strip" alt="redux-saga-clock.gif"></p>
<p> è¿™æ˜¯ä¸€ä¸ªèƒ½æš‚åœ,æ¢å¤,å‘å‰,å‘åå’Œé‡ç½®.çœ‹ä¸Šå»ä¹Ÿå¾ˆé…·.</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p> æ„Ÿè°¢é˜…è¯»è¿™ä¸ªæ•™ç¨‹,æˆ‘ä»¬æ¶‰åŠåˆ°äº†js generatorå’ŒRedux sagaçš„æœ‰å…³å†…å®¹.æˆ‘å¸Œæœ›èƒ½å¸®åŠ©ä½ ç†è§£æ€ä¹ˆä½¿ç”¨Redux Saga,åŒæ—¶è¿˜æœ‰ä½¿ç”¨çš„å¥½å¤„å’ŒèƒŒåçš„åˆç†æ€§.</p>
<p> å¦‚æœä½ æƒ³äº†è§£æ›´å¤šçš„Redux Sagaçš„å†…å®¹,è¿™é‡Œè¿˜æœ‰ä¸€äº›å¾ˆå¥½çš„æ•™ç¨‹.ä¸‹é¢æ˜¯æˆ‘å¼€å§‹å­¦ä¹ redux sagaçš„æ—¶å€™å¸®åŠ©æˆ‘å…¥é—¨çš„å†…å®¹.</p>
<ul>
<li><a href="http://yelouafi.github.io/redux-saga/docs/introduction/BeginnerTutorial.html" target="_blank" rel="external">Reduxçš„å®˜æ–¹æ–‡æ¡£</a>æ˜¯æ— ä»·ä¹‹å®</li>
<li><a href="http://wecodetheweb.com/2016/01/23/handling-async-in-redux-with-sagas/" target="_blank" rel="external">Niels Gerritsenâ€™sçš„Redux Sagaå…¥é—¨æ•™ç¨‹</a>.è¿™æ˜¯æˆ‘æœ€å¼€å§‹å­¦ä¹ Redux sagaçš„æ•™ç¨‹ä¹‹ä¸€,ç»“æ„å¾ˆæ¸…æ™°,å¸®åŠ©æˆ‘è·¨å›½ä¸€äº›æ¦‚å¿µéšœç¢.</li>
<li><a href="http://joelhooks.com/blog/2016/03/20/build-an-image-gallery-using-redux-saga" target="_blank" rel="external">Joel Hooksçš„æ•™ç¨‹</a></li>
<li><a href="http://jaysoo.ca/2016/01/03/managing-processes-in-redux-using-sagas/" target="_blank" rel="external">Jack Hsuçš„æ–‡ç« </a>.æˆ‘çš„å®ä¾‹å®é™…æ˜¯è¿™ä¸ªæ•™ç¨‹çš„æ‰©å±•.</li>
</ul>
<p>æˆ‘ä¹Ÿå–œæ¬¢ä¸‹é¢çš„æ–‡ç« ,è§£å¯†generators,æ¿€åŠ±æˆ‘å†™è¿™ç¯‡æ–‡ç« ,æ²¡æœ‰è¿™ä¸¤ä¸ªæ–‡ç« ,æˆ‘éƒ½ä¸çŸ¥é“generatorsè®²çš„æ˜¯ä»€ä¹ˆç©æ„.</p>
<ul>
<li><a href="https://davidwalsh.name/es6-generators" target="_blank" rel="external">David Walshçš„åšå®¢,å…³äºES6 generatorçš„å†…å®¹,ä½œè€…æ˜¯kyle Simpson</a></li>
<li><a href="http://www.2ality.com/2015/03/es6-generators.html2ality" target="_blank" rel="external">Axel Rauschmeyerçš„ES6 generatorsçš„æ–‡ç« </a></li>
</ul>
<p>æ„Ÿè°¢é˜…è¯»!</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘|Redux Persist]]></title>
      <url>http://yoursite.com/2017/03/08/translate%7Credux-persist/</url>
      <content type="html"><![CDATA[<p>Redux Persist<br>æŒä¹…åŒ–å’Œè„±æ°´ä¸€ä¸ªredux store<br>Redux Persistæ˜¯æ€§èƒ½å¥½,å®¹æ˜“å®æ–½,å®¹æ˜“æ‰©å±•</p>
<p><code>npm i - -save redux-persist</code></p>
<p><a href="https://travis-ci.org/rt2zz/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/travis/rt2zz/redux-persist/master.svg?style=flat-square" alt="build status"></a><br><a href="https://www.npmjs.com/package/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/redux-persist.svg?style=flat-square" alt="npm version"></a><br><a href="https://www.npmjs.com/package/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/npm/dm/redux-persist.svg?style=flat-square" alt="npm downloads"></a></p>
<h2 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h2><p>åŸºæœ¬ä½¿ç”¨æ–¹æ³•è¦åœ¨ä¼ ç»Ÿçš„reduxä¸­æ·»åŠ ä»£ç :<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> &#123;compose, applyMiddleware, createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"><span class="keyword">import</span> &#123;persistStore, autoRehydrate&#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"></div><div class="line"><span class="comment">// add `autoRehydrate` as an enhancer to your store </span></div><div class="line">(note: <span class="string">`autoRehydrate`</span> is not a middleware)</div><div class="line"><span class="comment">//æ·»åŠ `autoRehydrateåˆ°store`,ä¸æ˜¯ä¸­é—´ä»¶</span></div><div class="line"><span class="keyword">const</span> store = createStore(</div><div class="line">  reducer,</div><div class="line">  <span class="literal">undefined</span>,</div><div class="line">  compose(</div><div class="line">    applyMiddleware(...),</div><div class="line">    autoRehydrate()</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// begin periodically persisting the store</span></div><div class="line"><span class="comment">//å‘¨æœŸæ€§çš„æŒä¹…åŒ–store</span></div><div class="line">persistStore(store)</div></pre></td></tr></table></figure></p>
<hr>
<p>å¦‚æœä¸ºæ¯ä¸€ä¸ªreducerè®¾è®¡ rehydraretionçš„é€»è¾‘,éœ€è¦åœ¨reducerä¸­æ·»åŠ å¥æŸ„<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;REHYDRATE&#125; <span class="keyword">from</span> <span class="string">'redux-persist/constants'</span></div><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">case</span> REHYDRATE:</div><div class="line">  <span class="keyword">var</span> incoming = action.payload.myReducer</div><div class="line">  <span class="keyword">if</span> (incoming) <span class="keyword">return</span> &#123;...state, ...incoming, <span class="attr">specialKey</span>: processSpecial(incoming.specialKey)&#125;</div><div class="line">  <span class="keyword">return</span> state</div></pre></td></tr></table></figure></p>
<hr>
<p>ä¹Ÿå¯ä»¥é…ç½®ä¸€ä¸ªæŒä¹…åŒ–å±‚,æˆ–è€…åœ¨è„±æ°´å®Œæˆåæ¥å—ä¸€ä¸ªaction<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">persistStore(store, &#123;<span class="attr">blacklist</span>: [<span class="string">'someTransientReducer'</span>]&#125;, () =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'rehydration complete'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<hr>
<p>å¦‚æœäº‹æƒ…å˜ç³Ÿ,åªéœ€è¦æ¸…æ´—ä¸€ä¸‹å­˜å‚¨:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">persistStore(store, config, callback).purge()</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h4 id="persistStore-store-config-callback"><a href="#persistStore-store-config-callback" class="headerlink" title="persistStore(store,[config,callback])"></a><code>persistStore(store,[config,callback])</code></h4><ul>
<li>å‚æ•°<ul>
<li></li>
</ul>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[javascriptè¡¨è§‚æ¨¡å¼]]></title>
      <url>http://yoursite.com/2017/03/07/javascript%E8%A1%A8%E8%A7%82%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p>è¡¨è§‚æ¨¡å¼(Facade),è¡¨è§‚æ¨¡å¼æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯ç®€åŒ–ç±»çš„æ¥å£ï¼ŒäºŒæ˜¯æ¶ˆé™¤ç±»ä¸ä½¿ç”¨å®ƒçš„å®¢æˆ·ä»£ç ä¹‹é—´çš„è€¦åˆã€‚åœ¨jQueryæ•™ç¨‹ä¸­æ€»æ˜¯ä¼šå‘Šè¯‰ä½¿ç”¨è€…ï¼Œjqueryå·²ç»æ¶ˆé™¤äº†æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ï¼Œåªç”¨ä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥åœ¨æ‰€æœ‰çš„æµè§ˆå™¨ç¯å¢ƒä¸‹ä½¿ç”¨ï¼ŒèƒŒåçš„åŸç†å°±æ˜¯ï¼Œä½œè€…é€šè¿‡è¡¨è§‚æ¨¡å¼æ¶ˆé™¤äº†æµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚ã€‚</p>
</blockquote>
<p>åœ¨æµè§ˆå™¨çš„äº‹ä»¶ç›‘å¬ä¸­ï¼Œæœ‰äº‹ä»¶ä¼ æ’­å’Œé˜»æ­¢äº‹ä»¶ä¼ é€’çš„å¤„ç†ä¸Šæœ‰å·®å¼‚ã€‚<br>æ‰€ä»¥åœ¨å„ç§jsåº“ä¸­éƒ½ä½¿ç”¨è¡¨è§‚æ¨¡å¼åŠ ä»¥å¤„ç†<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> DED = <span class="built_in">window</span>.DED || &#123;&#125;; <span class="comment">//è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´</span></div><div class="line">DED.util = &#123;   <span class="comment">//ç”¨åå­—(util,å·¥å…·)ä½¿å‘½åç©ºé—´æ›´åŠ æ˜äº†</span></div><div class="line">  stopPropagation: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; </div><div class="line">    <span class="keyword">if</span> (ev.stopPropagation) &#123;<span class="comment">//æºä»£ç è¿™é‡Œæ˜¯ä¸æ˜¯å¤šäº†ä¸€ä¸ªv?</span></div><div class="line">      <span class="comment">// W3 interface</span></div><div class="line">      e.stopPropagation();</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// IE's interface</span></div><div class="line">      e.cancelBubble = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">preventDefault</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (e.preventDefault) &#123;</div><div class="line">      <span class="comment">// W3 interface</span></div><div class="line">      e.preventDefault();</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// IE's interface</span></div><div class="line">      e.returnValue = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">/* æ›´å…·å…·ä½“ä¼ å…¥çš„äº‹ä»¶å¯¹è±¡æ¥åˆ¤æ–­ä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨è€…çœ¼ä¸­ï¼Œåªæœ‰stopEventè¿™ä¸€ä¸ªæ–¹æ³• */</span></div><div class="line">  stopEvent: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">    DED.util.stopPropagation(e);</div><div class="line">    DED.util.preventDefault(e);</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>è®¾ç½®HTMLæ ·å¼çš„è¡¨è§‚æ¨¡å¼æ–¹æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>);</div><div class="line">element.style.color = <span class="string">'red'</span>;</div><div class="line"></div><div class="line">element.style.fontSize = <span class="string">'16px'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> element1 = <span class="built_in">document</span>.getElementById(<span class="string">'foo'</span>);</div><div class="line">element1.style.color = <span class="string">'red'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> element2 = <span class="built_in">document</span>.getElementById(<span class="string">'bar'</span>);</div><div class="line">element2.style.color = <span class="string">'red'</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> element3 = <span class="built_in">document</span>.getElementById(<span class="string">'baz'</span>);</div><div class="line">element3.style.color = <span class="string">'red'</span>;</div><div class="line"><span class="comment">//ä¸Šé¢æ˜¯æœ€åŸå§‹çš„æ–¹æ³•</span></div><div class="line"></div><div class="line"></div><div class="line">setStyle([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>], <span class="string">'color'</span>, <span class="string">'red'</span>); <span class="comment">//ä½¿ç”¨setStyleçš„æ–¹æ³•</span></div><div class="line"><span class="comment">//ä¼ å…¥å…ƒç´ æ•°ç»„ï¼Œå±æ€§ï¼Œå±æ€§å€¼ä¸‰ä¸ªå‚æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStyle</span>(<span class="params">elements, prop, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length<span class="number">-1</span>; I &lt; len; ++i) &#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(elements[i]).style[prop] = val;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">setStyle([<span class="string">'foo'</span>], <span class="string">'position'</span>, <span class="string">'absolute'</span>); <span class="comment">//setStyleéƒ½æ˜¯ç±»ä¼¼</span></div><div class="line">setStyle([<span class="string">'foo'</span>], <span class="string">'top'</span>, <span class="string">'50px'</span>);</div><div class="line">setStyle([<span class="string">'foo'</span>], <span class="string">'left'</span>, <span class="string">'300px'</span>);</div><div class="line"></div><div class="line">setCSS([<span class="string">'foo'</span>], &#123; <span class="comment">//ç›´æ¥ä½¿ç”¨setCSSæ–¹æ³•ï¼Œä¼ å…¥å…ƒç´ æ•°ç»„å’Œæ ·å¼å±æ€§å¯¹è±¡</span></div><div class="line">  position: <span class="string">'absolute'</span>,</div><div class="line">  <span class="attr">top</span>: <span class="string">'50px'</span>,</div><div class="line">  <span class="attr">left</span>: <span class="string">'300px'</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCSS</span>(<span class="params">el, styles</span>) </span>&#123;</div><div class="line">  <span class="keyword">for</span> ( <span class="keyword">var</span> prop <span class="keyword">in</span> styles ) &#123; <span class="comment">//éå†å±æ€§å¯¹è±¡é”®å€¼å¯¹</span></div><div class="line">    <span class="keyword">if</span> (!styles.hasOwnProperty(prop)) <span class="keyword">continue</span>;</div><div class="line">    setStyle(el, prop, styles[prop]); <span class="comment">//ä½¿ç”¨setStyleæ–¹æ³•è®¾ç½®å…ƒç´ å±æ€§</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">setCSS([<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>], &#123;</div><div class="line">  <span class="attr">color</span>: <span class="string">'white'</span>,</div><div class="line">  <span class="attr">background</span>: <span class="string">'black'</span>,</div><div class="line">  <span class="attr">fontSize</span>: <span class="string">'16px'</span>,</div><div class="line">  <span class="attr">fontFamily</span>: <span class="string">'georgia, times, serif'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä¸¤ä¸ªä¾‹å­çœ‹ç€å¥½ç†Ÿæ‚‰ï¼Œåœ¨jqueryçš„apiä¸­åˆ°å¤„éƒ½æœ‰è¿™æ ·çš„æ¨¡å¼ã€‚<br>ä½†æ˜¯ä¹Ÿæœ‰æ€§èƒ½çš„æŸå¤±ã€‚è¦åšå¤šä½™çš„æ“ä½œã€‚ jquery 2.x.xçš„ç‰ˆæœ¬æ²¡æœ‰ç›´æ¥æ”¾å¼ƒäº†IEæµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯åŸºäºå¯¹è¡¨è§‚æ¨¡å¼çš„è€ƒè™‘ï¼Ÿæ²¡æœ‰è¯»æºç ï¼ŒçŒœæµ‹ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-é‡æ–°æ€è€ƒRedux]]></title>
      <url>http://yoursite.com/2017/03/03/%E7%BF%BB%E8%AF%91-%E9%87%8D%E6%96%B0%E6%80%9D%E8%80%83Redux/</url>
      <content type="html"><![CDATA[<blockquote>
<p><em>Arunoda Susiripala  <a href="https://voice.kadira.io/rethinking-redux-f1e96daba60c#.svx11tv8l" target="_blank" rel="external">å‚çœ‹åŸæ–‡</a>,è¿™ç¯‡æ–‡ç« å‘å¸ƒæœ‰äº›æ—¶é—´äº†,ä½†ä»ç„¶æ˜¯å¾ˆå¥½çš„å­¦ä¹ èµ„æ–™,è€Œä¸”åœ¨éšç€å­¦ä¹ å’Œäº†è§£çš„æ·±å…¥,è®¸å¤šæœ‰æ„æ€çš„æƒ³æ³•å¾—åˆ°è¯å®,é‚£æ„Ÿè§‰çœŸæ˜¯å¾ˆå¥½.æ¯”å¦‚æˆ‘å‰é¢è¯ç”Ÿäº†ä¸€ä¸ªæƒ³æ³•,reduxå°±æ˜¯ä¸€ä¸ªæ•°æ®å±‚å•Š!å¯ä»¥å€ŸåŠ©æ•°æ®åº“çš„æ€æƒ³æ¥å­¦ä¹ ,åŒ…æ‹¬å…¶ä¸­è¯ç”Ÿçš„ä¸€äº›ä¸­é—´æ€æƒ³.åœ¨è¿™ç¯‡æ–‡ç« æœ‰æœ‰äº†æ–°çš„å‘ç°,åœ¨Meteorçš„stateç®¡ç†æ–¹æ³•ç›´æ¥ä½¿ç”¨äº†<code>minimongo cache</code>çš„åå­—,åå­—é‡Œçš„å«ä¹‰ä¸è¨€è‡ªæ˜äº†.å°±æ˜¯è¿™äº›å°ç‚¹æ…¢æ…¢ä½¿æˆ‘çš„å­¦ä¹ è¿‡ç¨‹æ›´åŠ æ·±å…¥.å½“ç„¶ä¹Ÿæœ‰ä¸€äº›æ–°çš„æƒ³æ³•,æœ‰å…´è¶£çš„å¾€ä¸‹çœ‹çœ‹.<br>   Dec 22, 2015</em></p>
<hr>
<p>   #é‡æ–°æ€è€ƒRedux<br>   Reduxæ˜¯éå¸¸å¥½çš„æ¡†æ¶.è¿™ç¯‡æ–‡ç« æ—¢ä¸æ˜¯Reduxçš„æ‰©å……ä¹Ÿä¸æ˜¯è¦åˆ›å»ºä¸€ä¸ªæ–°çš„Fluxåº“,è¿™é‡Œæ˜¯å¯¹Reduxæ¨¡å¼çš„é‡æ–°æ€è€ƒ.</p>
</blockquote>
<h3 id="ä»€ä¹ˆæ˜¯Redux"><a href="#ä»€ä¹ˆæ˜¯Redux" class="headerlink" title="ä»€ä¹ˆæ˜¯Redux?"></a>ä»€ä¹ˆæ˜¯Redux?</h3><p>   åœ¨æˆ‘ä»¬è®¨è®ºæ–°å†…å®¹ä¹‹å‰,è®©æˆ‘ä»¬å…ˆçœ‹çœ‹Reduxæ˜¯ä»€ä¹ˆ.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-078a8427c21f15a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt="Redux flow pic"></p>
<ul>
<li>æœ¬è´¨ä¸Š,Reduxæ˜¯æˆ‘ä»¬çš„appé‡Œå­˜å‚¨å®¢æˆ·ç«¯stateçš„åœ°æ–¹.</li>
<li>ä¸€äº›actionså¯ä»¥æ”¹å˜state.</li>
<li><p>æˆ‘ä»¬ä½¿ç”¨çº¯å‡½æ•°æ¥ç›‘å¬æ‰€æœ‰çš„actionså¹¶ä¸”ä½¿ç”¨å½“å‰çš„stateä½œä¸ºä¸Šä¸‹æ–‡å»åˆ›å»ºæ–°çš„state.è¿™ä¸ªå‡½æ•°å«reducer.<br>(ä¹‹æ‰€ä»¥å«çº¯å‡½æ•°,æ˜¯å› ä¸ºå®ƒä¸ä¼šçªå˜state,è€Œä¸”å®ƒä¹Ÿæ²¡æœ‰ä»»ä½•å¼‚æ­¥æ“ä½œ.)</p>
</li>
<li><p>æœ‰å¾ˆå¤šè®¢é˜…è€…ç›‘å¬ç€ä»–ä»¬éœ€è¦ä¿®æ”¹çš„state.</p>
</li>
</ul>
<p>å¦‚æœä½ æ˜¯Reduxæ–°æ‰‹,çœ‹çœ‹è¿™äº›ç”±<a href="https://egghead.io/series/getting-started-with-redux" target="_blank" rel="external">Reduxåˆ›å»ºè€…å‘å¸ƒçš„è§†é¢‘</a></p>
<p>æˆ‘ä»¥å‰å’Œä½ ä¸€æ ·,ä½†æ˜¯æˆ‘ç°åœ¨å–œæ¬¢Redux.</p>
<h2 id="ä¸ºä»€ä¹ˆæ˜¯Redux"><a href="#ä¸ºä»€ä¹ˆæ˜¯Redux" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯Redux?"></a>ä¸ºä»€ä¹ˆæ˜¯Redux?</h2><p>ç°åœ¨æœ‰è¶³å¤Ÿçš„ç†ç”±ä½¿ç”¨Reactæ„å»ºapp.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çˆ¶å­æ•°æ®æµ,Meteorçš„Tracker based system,Relayæˆ–è€…Mobservable.</p>
<p>è¿™äº›æ–¹æ³•å¯¹äºç®€å•app(æˆ–è€…ä¸­å‹appåº”ç”¨)æ¥è¯´è¿˜æ˜¯æŒºå¥½çš„.ä½†æ˜¯ä¸€æ—¦appè§„æ¨¡å˜å¤§,ææœ‰å¯èƒ½ä¼šä¸§å¤±appçš„æ§åˆ¶æƒ.</p>
<blockquote>
<p>æˆ‘ä¹‹æ‰€ä»¥è¿™ä¹ˆè¯´æ˜¯ä»æˆ‘ä¸¤æ¬¡é‡æ„kandira UIçš„ç»éªŒæ¥çš„,é‚£ä¸ªè¿‡ç¨‹å¤ªç—›è‹¦äº†.</p>
</blockquote>
<p>èƒ½å’ŒReduxå¾ˆé«˜å·¥ä½œçš„æ„æ¶å°±æ˜¯Redux.</p>
<p>Reduxæ˜¯ä¸€ä¸ªç®€å•æ¦‚å¿µ,å®ƒé‡‡ç”¨äº†ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ(å®é™…ä¸Šæ¥è‡ªElm)å’ŒFluxçš„æ„æ¶.</p>
<p>æœ‰äº†Redux,</p>
<ul>
<li>æˆ‘ä»¬çš„stateæ˜¯å¯ä»¥é¢„æœŸçš„,åœ¨appä¸­ä¹Ÿæ˜¯è¿™æ ·</li>
<li>appçš„å¤§éƒ¨åˆ†æ˜¯çº¯å‡½æ•°,UIä¹Ÿæ˜¯çº¯å‡½æ•°.æ‰€ä»¥å¾ˆå®¹æ˜“æµ‹è¯•.</li>
<li>Reduxæ˜¯ä¸€ä¸ªç®€å•çš„åº“,æ‰€ä»¥æ²¡æœ‰ä»»ä½•é­”æ³•.</li>
<li>Reduxé‡Œçš„æ¨¡å¼è¢«å¾ˆå¤šå¼€å‘è€…ä½¿ç”¨.æ‰€æœ‰ä½ å¯ä»¥ä¾æ®å¾ˆå¥½çš„ç”Ÿæ€ç³»ç»Ÿ.</li>
</ul>
<p>ä¸Šé¢è¿™äº›è§‚ç‚¹å°±æ˜¯æˆ‘è®¤ä¸ºReduxéå¸¸é‡è¦çš„åŸå› .</p>
<p>##é‡æ–°æ€è€ƒ<br>æˆ‘ä»¬æ­£åœ¨è€ƒè™‘ä½¿ç”¨å®¢æˆ·ç«¯stateå’ŒMeteroåå°äº¤äº’æ¥é‡å†™app.æˆ‘ä»¬è®¤ä¸ºReduxçš„æ¨¡å‹æ›´åˆé€‚.ä½†æ˜¯æˆ‘ä»¬è¿˜æœ‰è®¸å¤šé—®é¢˜è¦è€ƒè™‘,åœ¨é‚£äº›åœ°æ–¹ä¹¦å†™é€»è¾‘ä»£ç ,æ€ä¹ˆå‡å°‘æ¨¡æ¿ä»£ç é‡.<br> æˆ‘ä»¬ä¹Ÿä¸æ€ä¹ˆç¡®ä¿¡Reduxçš„stateç®¡ç†æ€ä¹ˆå’Œå…¶ä»–çš„stateç®¡ç†ç³»ç»Ÿæ•´åˆ,æ¯”å¦‚Meteorçš„minimongo cache(è¯‘è€…:å•è¯çš„å«ä¹‰æ„å‘³ç€å¯ä»¥çœ‹åšç®€å•çš„mongo æ•°æ®åº“,çœ‹åˆ°è¿™é‡Œä½ æœ‰ä»€ä¹ˆæƒ³æ³•å‘¢ï¼Ÿ).è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æƒ³è¦å¯»æ±‚ä¸€äº›æ”¹å˜.</p>
<p> ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹æˆ‘ä»¬å»ºè®®çš„ä¸€äº›ä¿®æ”¹.</p>
<h3 id="ä½¿ç”¨Reduxç®¡ç†UIçš„state"><a href="#ä½¿ç”¨Reduxç®¡ç†UIçš„state" class="headerlink" title="ä½¿ç”¨Reduxç®¡ç†UIçš„state"></a>ä½¿ç”¨Reduxç®¡ç†UIçš„state</h3><p> åœ¨æˆ‘ä»¬çš„appä¸­,æˆ‘ä»¬è¦ä¿ç•™ä¸€äº›states,Reduxå°±æ˜¯ç”¨äºUI stateç®¡ç†çš„ç»„ä»¶.åœ¨Reduxä¹‹å¤–å¯èƒ½ä¼šæœ‰å…¶ä»–éƒ¨åˆ†æ¥ç®¡ç†state,ä¾‹å¦‚åƒæ˜¯REST APIçš„ç¼“å­˜æˆ–è€…GraphQL.åœ¨Meteorä¸­,å¯èƒ½æ˜¯Minimongo cache.</p>
<p> ###Reduxä¸­çš„å¯¼èˆª<br> update:<br>  åœ¨è¯„è®ºå’Œå…¶ä»–åœ°æ–¹,æˆ‘å‡†å¤‡è¯•è¯•simple-redux-router.çœ‹èµ·æ¥å¯ä»¥åœ¨Reduxä¸­è¿›è¡Œå¯¼èˆª.ä»–å…è®¸Reactè·¯ç”±å™¨ç®¡ç†å¸ƒå±€å’Œdispatch actionsåˆ°store.<br>  æˆ‘æŠŠsimple-redux-routerå’Œæˆ‘çš„sample appè¿›è¡Œæ•´åˆ,æ•´åˆè¿‡ç¨‹è¿˜å¥½é™¤äº†å³æ—¶åŠ è½½è¿‡ç¨‹.<br>  ç°åœ¨,æˆ‘ä»¬å‡†å¤‡æŠŠReact Routerå’ŒReduxåˆå¹¶.ä½†æ˜¯æˆ‘ä»¬ä»”ç»†è€ƒè™‘ä¸€ä¸‹å°±å¯ä»¥å‘ç°,routing(è·¯ç”±)å…¶å®æ˜¯å¦ä¸€ç§ç”¨æˆ·çš„action,ç±»ä¼¼æŒ‰é’®çš„ç‚¹å‡»action.æ‰€ä»¥routerä¸åº”è¯¥æˆä¸ºappçš„ç®¡ç†æˆ–è€…app stateçš„ç®¡ç†å·¥å…·.<br>  ç†æƒ³Reduxä¸­çš„routeråº”è¯¥åº”routeçš„æ”¹å˜è€Œå‘èµ·actions.è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦åšçš„å·¥ä½œ.ç„¶åæˆ‘ä»¬ä½¿ç”¨reduceræ¥æ”¹å˜éœ€è¦çš„app state.</p>
<h3 id="ä½¿ç”¨æ¨¡å—çš„ç›®å½•ç»“æ„"><a href="#ä½¿ç”¨æ¨¡å—çš„ç›®å½•ç»“æ„" class="headerlink" title="ä½¿ç”¨æ¨¡å—çš„ç›®å½•ç»“æ„"></a>ä½¿ç”¨æ¨¡å—çš„ç›®å½•ç»“æ„</h3><p>  æ¨èçš„æ˜¯é»˜è®¤çš„å¸ƒå±€ç›®å½•ç»“æ„.ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„ç‰¹æ€§æ—¶,æˆ‘ä»¬éœ€è¦åœ¨å¤šä¸ªç›®å½•ä¸­æ·»åŠ ä»£ç .<br>  æœ‰ä¸€ä¸ªæ¨¡å¼å«åš<code>é¸­å­</code>æ¨¡å‹,å»ºè®®æˆ‘ä»¬æŒ‰ç»„æŠŠç›¸å…³çš„actions creatorså’Œreduceræ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­.æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨è¿™ä¸ªæ–¹æ³•.æˆ‘ä»¬ä¹Ÿå‡†å¤‡æŠŠç›¸äº’å…³è”çš„ç»„ä»¶å’Œredux containeræ”¾åˆ°ä¸€ä¸ªå•ä¸€ç›®å½•ä¸­.</p>
<p>  ###ç”¨äºæ•°æ®åŠ è½½çš„ä¸€äº›åŠ©æ‰‹å‡½æ•°.</p>
<p>  æˆ‘ä»¬éœ€è¦æ•°æ®æ¥æ¸²æŸ“ç»„ä»¶,é€šå¸¸æˆ‘ä»¬é€šè¿‡action creatoræ¥åšè¿™ä»¶äº‹.ä½†æ˜¯ä¸ºäº†æŠŠæ•°æ®åŠ è½½å’Œç»„ä»¶æ¸²æŸ“å¾ˆå¥½çš„æ•´åˆåœ¨ä¸€èµ·,æˆ‘ä»¬éœ€è¦å†™ä¸€äº›æ¨¡æ¿å¼çš„ä»£ç .æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›åŠ©æ‰‹æ–¹æ³•æ¥æ¶ˆé™¤è¿™äº›æ¨¡æ¿ä»£ç .</p>
<p>  ###æ•´åˆåœ¨ä¸€èµ·<br>  ä¸ºäº†å……åˆ†ç†è§£è¿™äº›ç†å¿µ,æˆ‘ä»¬å¿…éœ€è¯»ä¸€äº›ä»£ç .è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ„å»ºå®ä¾‹ä»£ç appçš„åŸå› .<br>  è¿™é‡Œæ˜¯repo:<a href="https://github.com/kadira-samples/rethinking-redux-demo" target="_blank" rel="external">rethinking-redux-demo</a>.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç¿»è¯‘-ä¸­é—´ä»¶å’ŒReact-Redux-ç”Ÿå‘½å‘¨æœŸ]]></title>
      <url>http://yoursite.com/2017/03/01/%E7%BF%BB%E8%AF%91-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8CReact-Redux-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      <content type="html"><![CDATA[<blockquote>
<p><em>rajaraodv </em> <a href="https://medium.com/@rajaraodv/using-middlewares-in-react-redux-apps-f7c9652610c6#.fu82u8qjf" target="_blank" rel="external">åŸæ–‡è¯·å‚çœ‹</a>.</p>
<p>å¦‚æœä½ ä½¿ç”¨è¿‡ç±»ä¼¼Express.jsæ¡†æ¶æ„å»ºNode.jsç¨‹åº,ä½ å°±å¯èƒ½åœ¨ä½¿ç”¨ä¸­é—´ä»¶,å¹¶ä¸”çŸ¥é“ä»–ä»¬æ€ä¹ˆå·¥ä½œ.Reduxç»™å‰ç«¯å¼•å…¥åŒæ ·çš„æ¦‚å¿µ.</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ</h2><p>ä¸­é—´ä»¶æ˜¯å¯ä»¥è¢«æ¡†æ¶è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°,åœ¨æ¡†æ¶ä¸­æ•°æ®æµç»“æŸä¹‹å‰,åœ¨æ•°æ®æµä¸­åŠ å¼ºæˆ–è€…æ”¹å˜è¾“å‡º.<br>ä¾‹å¦‚:å¦‚æœæ¡†æ¶é‡Œé¢æ²¡æœ‰ä¸­é—´ä»¶æ˜¯è¿™ä¸ªæ ·å­çš„:</p>
<p><code>funcAâ€Šâ€”â€Šcallsâ†’ funcBâ€Šâ€”â€Šcallsâ†’ funcC</code></p>
<p>æ·»åŠ äº†ä¸­é—´ä»¶ä»¥å,æ§åˆ¶æµå°±å˜ä¸º:<br><code>funcAâ€Šâ€”â€Šcallsâ†’ funcBâ€Šâ€”â€Šcallsâ†’ funcMiddleWare1â€Šâ€”â€Šback to â†’funcB. funcB â†’ then callsâ†’ funcMiddleWare2â€Šâ€”â€Šback toâ†’ funcB. funcBâ€Šâ€”â€Šfinally callsâ†’ funcC</code></p>
<p>æ³¨æ„ï¼šfuncBæœ€ç»ˆè°ƒç”¨funcCä½†æ˜¯åœ¨è°ƒç”¨funcCä¹‹å‰è¦è°ƒç”¨ä¸¤ä¸ªä¸­é—´ä»¶.</p>
<h2 id="æ²¡æœ‰ä¸­é—´ä»¶çš„Reduxç”Ÿå‘½å‘¨æœŸ"><a href="#æ²¡æœ‰ä¸­é—´ä»¶çš„Reduxç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ²¡æœ‰ä¸­é—´ä»¶çš„Reduxç”Ÿå‘½å‘¨æœŸ"></a>æ²¡æœ‰ä¸­é—´ä»¶çš„Reduxç”Ÿå‘½å‘¨æœŸ</h2><p>è®©æˆ‘ä»¬æƒ³çœ‹çœ‹Redux appç”Ÿå‘½å‘¨æœŸ,æ¥æ›´å¥½çš„ç†è§£å®ƒ.</p>
<p>åœºæ™¯:ç‚¹å‡»â€Click Meâ€æŒ‰é’®,æ›´æ–°â€Clicked xyz timesâ€ æ–‡æœ¬.</p>
<p>å›¾ç‰‡1</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-da53be67e7cd17d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="1*9E8kenASCn6TWNM9-dEL4Q.png"></p>
<p>åœºæ™¯ï¼šç°åœ¨,å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™,æˆ‘ä»¬æƒ³æŠŠç‚¹å‡»çš„æ•°ç›®ä¿å­˜åˆ°æœåŠ¡å™¨,å¹¶ä¸”åœ¨debuggä¸­å±•ç¤ºstateçš„å˜åŒ–æ—¥å¿—.è®©æˆ‘ä»¬çœ‹çœ‹ç°åœ¨çš„æ§åˆ¶æµ.</p>
<p>å›¾ç‰‡2</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2044710-196ed4d492237d61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="1*kzLsHNZpJ9HVA4On9YkgAw.png"></p>
<p>åœ¨Reduxä¸­,ä¸­é—´ä»¶å‡½æ•°ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¢«è°ƒç”¨,ç›´åˆ°æ‰€æœ‰çš„ä¸­é—´ä»¶è¢«è°ƒç”¨,ç„¶åâ€œActionâ€å¯¹è±¡å‘—å‘é€åˆ°â€œReducerâ€.</p>
<p>æ³¨æ„:è¿™å°±å…è®¸ä¸­é—´ä»¶æœ‰ä¿®æ”¹Actionå¯¹è±¡çš„æ½œåŠ›,åœ¨æœ€ç»ˆè°ƒç”¨Reducersä¹‹å‰,è§£æAJAXè°ƒç”¨,è¿˜å¯ä»¥åšå…¶ä»–äº‹æƒ…æ¯”å¦‚æ—¥å¿—.Reeucerså°†ä¼šæ›´æ–°state,åœ¨appéœ€è¦çš„æ—¶å€™æ¸²æŸ“ç»„ä»¶.</p>
<h2 id="ä½¿ç”¨ä¸­é—´ä»¶"><a href="#ä½¿ç”¨ä¸­é—´ä»¶" class="headerlink" title="ä½¿ç”¨ä¸­é—´ä»¶"></a>ä½¿ç”¨ä¸­é—´ä»¶</h2><p>Reduxæœ‰ä¸ªå·¨å¤§çš„ç¤¾åŒº,å·²ç»æ„å»ºäº†<a href="https://github.com/xgrommx/awesome-redux#react---a-javascript-library-for-building-user-interfaces" target="_blank" rel="external">å¤§é‡å¯ä»¥å®Œæˆå„ç§ä»»åŠ¡çš„ä¸­é—´ä»¶</a>.</p>
<p>æ‰€æœ‰ä½ éœ€è¦åšçš„å°±æ˜¯:</p>
<ol>
<li>é€šè¿‡npm å®‰è£…</li>
<li>é…ç½®æˆ–è€…æ·»åŠ åˆ°Redux</li>
</ol>
<p>ä¾‹å¦‚ï¼šåœ¨æˆ‘å‰é¢çš„blogï¼š<a href="https://medium.com/@rajaraodv/a-guide-for-building-a-react-redux-crud-app-7fe0b8943d0f#.aenutqb0r" target="_blank" rel="external">åˆ›å»ºReact Redux CRUDç¨‹åºæŒ‡å—</a>,appä¸ºCRUDæ“ä½œåšAJAXè¯·æ±‚.<br>åœ¨é‡Œé¢,æˆ‘ä½¿ç”¨AXiosçš„åº“æ¥åšAJAXè°ƒç”¨.ä½†æ˜¯Axiosè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡.ä½†æ˜¯Actionséœ€è¦ä¼ é€’ç»™Reducersçš„æ˜¯ä¸€ä¸ªçº¯ç²¹çš„JSONå¯¹è±¡.æ‰€ä»¥åœ¨åœ¨æ•°æ®åˆ°è¾¾Reducersä¹‹å‰ä½¿ç”¨redux-promiseè§£æActionä¸­çš„Promiseå¯¹è±¡.</p>
<p>ä¸ºäº†ä½¿ç”¨,é¦–å…ˆå®‰è£….</p>
<p><code>npm install â€” save redux-promise</code></p>
<p>å†åšä¸€ç‚¹é…ç½®å·¥ä½œ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">import</span> React <span class="keyword">from</span> â€˜reactâ€™;</div><div class="line">...</div><div class="line">import &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> â€˜reduxâ€™;</div><div class="line"><span class="keyword">import</span> rp <span class="keyword">from</span> â€˜redux-promiseâ€™; <span class="comment">// &lt;------------ MIDDLEWARE</span></div><div class="line">...</div><div class="line"><span class="comment">//add middlewares</span></div><div class="line"><span class="keyword">const</span> createStoreWithMiddleware = applyMiddleware(rp)(createStore);</div><div class="line">ReactDOM.render(</div><div class="line"> <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;createStoreWithMiddleware(reducers)&#125;</span>&gt;</span></span></div><div class="line"> <span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;browserHistory&#125;</span> <span class="attr">routes</span>=<span class="string">&#123;routes&#125;</span> /&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></div><div class="line"> , document.getElementById(â€˜bodyâ€™));</div></pre></td></tr></table></figure>
<hr>
<h2 id="ä¸­é—´ä»¶æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"><a href="#ä¸­é—´ä»¶æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ" class="headerlink" title="ä¸­é—´ä»¶æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"></a>ä¸­é—´ä»¶æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h2><p>å¦‚æœä½ çœ‹äº†<a href="https://github.com/acdlite/redux-promise" target="_blank" rel="external">redux-promise</a>,ä½ å°±å¯ä»¥çœ‹åˆ°ä»–æ˜¯æ€ä¹ˆå·¥ä½œçš„.</p>
<p>è¿™é‡Œæ˜¯ä¼ªä»£ç :</p>
<ol>
<li>Reduxè°ƒç”¨ä¸­é—´ä»¶,â€œdispatch(å‡½æ•°)â€,â€œnext(å‡½æ•°)â€å’Œâ€actionâ€œJSONå¯¹è±¡.</li>
<li>ä¸­é—´ä»¶æ£€æŸ¥â€actionâ€å¯¹è±¡,çœ‹çœ‹æ˜¯å¦æœ‰Promiseå¯¹è±¡</li>
<li>å¦‚æœæ²¡æœ‰Promiseå¯¹è±¡,è°ƒç”¨â€nextâ€œå‡½æ•°è¿”å›åˆ°Redux.</li>
<li>å¦‚æœè¿™æ ·åš,ä»–ä¼šé™„åŠ ä¸ŠæˆåŠŸæˆ–è€…å¤±è´¥çš„å›è°ƒå‡½æ•°,ç­‰å¾…æœåŠ¡å™¨çš„å“åº”.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//redux-promise middleware source code</span></div><div class="line"><span class="keyword">import</span> &#123; isFSA &#125; <span class="keyword">from</span> <span class="string">'flux-standard-action'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPromise</span>(<span class="params">val</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> val &amp;&amp; <span class="keyword">typeof</span> val.then === <span class="string">'function'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">promiseMiddleware</span>(<span class="params">&#123; dispatch &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">next</span> =&gt;</span> action =&gt; &#123;</div><div class="line">    <span class="keyword">if</span> (!isFSA(action)) &#123;</div><div class="line">      <span class="keyword">return</span> isPromise(action)</div><div class="line">        ? action.then(dispatch)</div><div class="line">        : next(action);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> isPromise(action.payload)</div><div class="line">      ? action.payload.then(</div><div class="line">          <span class="function"><span class="params">result</span> =&gt;</span> dispatch(&#123; ...action, <span class="attr">payload</span>: result &#125;),</div><div class="line">          error =&gt; dispatch(&#123; ...action, <span class="attr">payload</span>: error, <span class="attr">error</span>: <span class="literal">true</span> &#125;)</div><div class="line">        )</div><div class="line">      : next(action);</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>æ›´å¤šå†…å®¹è¯·çœ‹:</p>
<ol>
<li><a href="http://redux.js.org/docs/advanced/Middleware.html" target="_blank" rel="external">å®˜æ–¹Redux ä¸­é—´ä»¶æ–‡æ¡£</a></li>
<li><a href="https://github.com/xgrommx/awesome-redux#react---a-javascript-library-for-building-user-interfaces" target="_blank" rel="external">ä¸­é—´ä»¶åˆ—è¡¨</a></li>
<li>åˆ°<a href="https://medium.com/@rajaraodv/a-guide-for-building-a-react-redux-crud-app-7fe0b8943d0f#.aenutqb0r" target="_blank" rel="external">A Guide For Building A React Redux CRUD APP</a>.</li>
</ol>
<p>å°±è¿™äº›å†…å®¹äº†.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Javascript Thiså…³é”®å­—å…¨è§£æ]]></title>
      <url>http://yoursite.com/2017/01/08/This%20keywords/</url>
      <content type="html"><![CDATA[<p><img src="http://upload-images.jianshu.io/upload_images/2044710-9f870a42dbc62877.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="cover.jpg"></p>
<p>ã€Šä½ ä¸çŸ¥é“çš„javascriptã€‹è¿™æœ¬ä¹¦è¯»äº†æœ‰å¥½å‡ éäº†ï¼Œä¼¼ä¹æ¯ä¸€æ¬¡è¯»éƒ½æœ‰æ–°å‘ç°ï¼Œæœ‰äº›å†…å®¹å¹¶ä¸æ˜¯ä¸€ä¸‹å­å¯ä»¥å¼„æ‡‚çš„ï¼Œæ¯æ¬¡è¯»ä¼¼ä¹éƒ½èƒ½æ˜ç™½ä¸€äº›æ¦‚å¿µã€‚<br>å†é‡è¯»ä¸€ä¸‹<code>this</code>å…³é”®å­—ã€‚è¿™ä¸ªæ¦‚å¿µéå¸¸çµæ´»ï¼Œä¹Ÿéå¸¸éš¾æŒæ¡ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—ç»å¸¸è¯»è¯»æ²¡æœ‰åå¤„ã€‚æœŸå¾…javascriptä¸€æ¡¶æ±Ÿæ¹–ï¼Œè¿™æ ·å­¦ä¹ çš„æˆæœ¬å°±ä½å•¦ï¼<br>å‚è€ƒæœ¬ä¹¦çš„ç¬¬äºŒéƒ¨åˆ†çš„ç¬¬ä¸€ç« ï¼Œç¬¬äºŒç« ã€‚<a id="more"></a></p>
<blockquote>
<p>thiså…³é”®å­—æ˜¯jsä¸­æœ€æœ€å¤æ‚çš„æœºåˆ¶ä¹‹ä¸€ã€‚ä»–è¢«è‡ªåŠ¨å®šä¹‰åˆ°æ‰€æœ‰å‡½æ•°çš„ä½œç”¨åŸŸä¸­ã€‚</p>
</blockquote>
<p>åœ¨å­¦ä¹ è¿™ä¸ªå…³é”®å­—çš„è¿‡ç¨‹ä¸­ä¼¼ä¹ä¹Ÿèµ°äº†å¾ˆé•¿æ—¶é—´çš„å¼¯è·¯ã€‚ä½ è¦é—®æˆ‘ä¸ºä»€ä¹ˆèµ°äº†å¾ˆé•¿æ—¶é—´çš„å¼¯è·¯ï¼Œå…³é”®çš„åœ°æ–¹è¿˜æ˜¯æ²¡æœ‰å¯¹æ ¸å¿ƒçš„æ¦‚å¿µå½»åº•å­¦ä¹ å’Œé¢†ä¼šï¼Œè¿™ä¸€ç‚¹å’Œå°å­¦ç”Ÿå­¦ä¹ æ–°çŸ¥è¯†æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚è¦æƒ³æŒæ¡thisè¿™ä¸ªå…³é”®å­—ï¼Œéœ€è¦ç´§æ‰£å…³é”®æ¦‚å¿µï¼Œä¸è¦å‡­ç©ºæƒ³è±¡è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚</p>
<p><strong>å…³é”®æ¦‚å¿µï¼šjsä¸­çš„å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¸€å®šï¼Œä¸€å®šï¼Œä¸€å®šä¼šç»‘å®šåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œåœ¨åˆ†æthiså…³é”®å­—çš„æ—¶å€™ï¼Œä¸€å®šè¦çŸ¥é“å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™è¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯è°ï¼Ÿ</strong>ã€‚<br><strong>åˆ‡è®°ï¼šjsä¸­å‡½æ•°çš„è°ƒç”¨å’Œå®šä¹‰æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ï¼Œå‡½æ•°æ‰€ç»‘å®šçš„å¯¹è±¡ç›´åˆ°ä»–è¢«è°ƒç”¨çš„æ—¶å€™æ‰èƒ½çŸ¥é“ã€‚</strong></p>
<p>thiså…³é”®å­—çš„ä¸ç¡®å®šå®šæ˜¯æŠŠåŒåˆƒå‰‘ï¼Œä¸€æ˜¯å‡½æ•°è°ƒç”¨æ—¶çš„å¯¹è±¡ä¸ç¡®å®šæ€§ï¼Œæ˜¯jsä¸­å‡½æ•°çš„ä½¿ç”¨å…·æœ‰å¾ˆå¤§çµæ´»æ€§ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥å€Ÿç”¨å…¶ä»–å‡½æ•°æ¥å®ŒæˆåŠŸèƒ½ã€‚äºŒæ˜¯è¿™ä¹Ÿé€ æˆäº†thiså­¦ä¹ çš„ä¸€äº›å›°æ‰°ã€‚æ‰€ä»¥åœ¨å­¦ä¹ çš„æ—¶å€™å…ˆè¦ç†è§£thiså…³é”®å­—çš„ä¼˜ç‚¹ï¼Œç„¶åå†å»å­¦ä¹ é€ æˆå›°æ‰°çš„åœ°æ–¹</p>
<p>é¦–å…ˆçœ‹çœ‹ç¬¬ä¸€æ®µä»£ç <br>page 75<br>    <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line"><span class="comment">//æ³¨æ„åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æœªè°ƒç”¨ï¼Œè¿™æ—¶å€™å‡½æ•°æ˜¯æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">identify</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.name.toUpperCase();</div><div class="line">&#125;</div><div class="line"><span class="comment">//åŒä¸Šé¢çš„å‡½æ•°,ä½†æ˜¯è¿™ä¸ªå‡½æ•°å†…éƒ¨æœ‰ç‚¹å¤æ‚ï¼Œå¦‚æœä¸‹é¢çš„ä»£ç çœ‹ä¸æ‡‚</span></div><div class="line"><span class="comment">//å¯ä»¥åªçœ‹ä¸Šé¢çš„å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">speak</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> greeting = <span class="string">"Hello, I'm "</span> + identify.call( <span class="keyword">this</span> );</div><div class="line">	<span class="built_in">console</span>.log( greeting );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> me = &#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå­—é¢é‡å¯¹è±¡</span></div><div class="line">	name: <span class="string">"Kyle"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> you = &#123;<span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå­—é¢é‡å¯¹è±¡</span></div><div class="line">	name: <span class="string">"Reader"</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//é€šè¿‡callæ–¹å¼æŠŠå‡½æ•°identifyåˆ†åˆ«ç»‘å®šåˆ°ä¸¤ä¸ªå¯¹è±¡ä¸Š</span></div><div class="line"><span class="comment">//è¿™æ—¶çš„thisæ˜¯æŒ‡å‘meå¯¹è±¡ï¼Œå’Œyouå¯¹è±¡</span></div><div class="line">identify.call( me ); <span class="comment">// KYLE  </span></div><div class="line">identify.call( you ); <span class="comment">// READER</span></div><div class="line"></div><div class="line"><span class="comment">//é€šè¿‡callæ–¹å¼æŠŠå‡½æ•°callåˆ†åˆ«ç»‘å®šåˆ°ä¸¤ä¸ªå¯¹è±¡ä¸Š</span></div><div class="line"><span class="comment">//è¿™æ—¶çš„thisæ˜¯æŒ‡å‘meå¯¹è±¡ï¼Œå’Œyouå¯¹è±¡</span></div><div class="line">speak.call( me ); <span class="comment">// Hello, I'm KYLE</span></div><div class="line">speak.call( you ); <span class="comment">// Hello, I'm READER</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>åœ¨javascriptä¸­å®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°æ˜¯ä¸å±äºä»»ä½•å¯¹è±¡çš„ã€‚è¿™ä¸€ç‚¹éå¸¸çš„å…³é”®ï¼Œéå¸¸çš„å…³é”®ï¼Œéå¸¸çš„å…³é”®ã€‚è¿™æ˜¯ç†è§£thiså…³é”®å­—çš„ç¬¬ä¸€ä¸ªéšœç¢ã€‚</p>
</blockquote>
<p>thiså…³é”®å­—åœ¨jså‡½æ•°å®šä¹‰çš„æ—¶å€™çš„ä¸ç¡®å®šæ€§ä½¿å¾—jså‡½æ•°ä½¿ç”¨æœ‰æå¤§çš„çµæ´»æ€§ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨ä»–ã€‚</p>
<p>###thisåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>thisçš„ç»‘å®šå’Œå‡½æ•°å®šä¹‰çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåª<code>å–å†³äºå‡½æ•°è°ƒç”¨çš„æ–¹å¼</code>.<br>javascriptä¸­å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ´»åŠ¨è®°å½•(æœ‰æ—¶ä¹Ÿç§°ä¸Šä¸‹æ–‡)ã€‚è¿™ä¸ªè®°å½•åŒ…æ‹¬å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°ã€‚thiså°±æ˜¯è®°å½•ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚</p>
<p>è¿™æ ·åœ¨å­¦ä¹ javascriptå…³é”®å­—çš„<code>é¦–è¦é—®é¢˜æ˜¯è¦è§£å†³æ€ä¹ˆçŸ¥é“åˆ°å‡½æ•°çš„è°ƒç”¨ä½ç½®</code>.</p>
<p>###jså¯¹è±¡ç»‘å®šè§„åˆ™</p>
<p>æ¯ä¸ªjså‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ä¸€å®šè¦æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>ç»‘å®š</code>ä»¥åæ‰èƒ½ä½¿ç”¨ã€‚ è¿™é‡Œæ˜¯ç†è§£äº†jså‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨çš„åŒºåˆ«ä»¥åéœ€è¦æŒæ¡çš„ä¸€ä¸ªè§„æ¨¡æœ€åºå¤§çš„æ¦‚å¿µï¼Œåœ¨jsä¸­ä¸€å…±æœ‰å››ç§ç»‘å®šæ–¹å¼.å°±æˆ‘ä¸ªäººæ¥çœ‹ï¼Œç»‘å®šè§„åˆ™å¹¶ä¸éš¾ï¼Œ<code>éš¾ç‚¹è¿˜æ˜¯åœ¨jsçš„å‡½æ•°ä½œç”¨åŸŸçš„ç†è§£</code>. å°¤å…¶æ˜¯<code>é»˜è®¤ç»‘å®š</code>.è¿™ä¸ªç»‘å®šæ–¹å¼æœ‰æå¤§çš„è¿·æƒ‘æ€§ã€‚</p>
<p>####é»˜è®¤ç»‘å®š<br>è¿™ä¸ªæ˜¯å‡½æ•°çš„ç‹¬ç«‹è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°ç›´æ¥è°ƒç”¨çš„æ—¶å€™ï¼Œä¼¼ä¹æ˜¯æ²¡æœ‰ç»‘å®šåˆ°å¯¹è±¡ä¸Šçš„ï¼Œä½†æ˜¯æ ¹æ®å‰é¢çš„ä»‹ç»ï¼Œjsä¸­å‡½æ•°è°ƒç”¨æ—¶å¿…é¡»è¦ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šã€‚<br>çœ‹ä¸‹é¢ä»£ç  page 83</p>
<pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="comment">//è¿™æ˜¯å‡½æ•°çš„å®šä¹‰ä½ç½®</span></div><div class="line">	<span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;<span class="comment">//è¿™ä¸ªå˜é‡å®šä¹‰çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»…ä»…æ˜¯èµ‹å€¼ç»™aå—ï¼Ÿ</span></div><div class="line"></div><div class="line">  foo(); <span class="comment">// 2  //è¿™æ˜¯å‡½æ•°çš„è°ƒç”¨ä½ç½®ã€‚ä¸ºä»€ä¹ˆä¼šæ‰“å°å‡º2å‘¢ï¼Ÿ</span></div></pre></td></tr></table></figure>
</code></pre><blockquote>
<p>å¾ˆå¤šå‡½æ•°éƒ½æ˜¯è¿™ä¹ˆè°ƒç”¨çš„ï¼Œç…§çŒ«ç”»è™ä¹Ÿå¯ä»¥å†™å‡ºæ¥ï¼Œä½†æ˜¯ç†è§£äº†å…·ä½“çš„å«ä¹‰å°±ä¸ä¸€æ ·äº†ã€‚<br>fooè¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­(windowä½œç”¨åŸŸä¸­)ï¼Œå·§åˆçš„æ˜¯ä»–çš„è°ƒç”¨ä¹Ÿæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œæ³¨æ„è¿™ä»…ä»…æ˜¯å·§åˆï¼Œå·§åˆã€‚ é‚£ä¹ˆfoo()è°ƒç”¨çš„æ—¶å€™ä¸ºä»€ä¹ˆä¼šæ‰“å°å‡ºå˜é‡ açš„å€¼å‘¢ï¼Ÿå°½ç®¡ä½¿ç”¨äº†varè¿™ä¸ªå…³é”®å­—ï¼Œä½†æ˜¯åˆ†æä½œç”¨åŸŸå¯ä»¥çŸ¥é“ï¼Œaè¿™ä¸ªå˜é‡å®é™…æ˜¯å…¨å±€å˜é‡ï¼Œè¯´çš„å†æ˜ç™½ä¸€ç‚¹ï¼Œaå®é™…æ˜¯windowè¿™ä¸ªå…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œ2æ˜¯è¿™ä¸ªå±æ€§çš„å±æ€§å€¼ã€‚<br>foo()è°ƒç”¨çš„æ—¶å€™æ˜¯ä¸€ä¸ä¸æŒ‚çš„å…¨è£¸çŠ¶æ€ï¼Œä»…ä»…æ˜¯å‡½æ•°æœ¬èº«ï¼Œæ²¡æœ‰ä»»ä½•ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™ä»–ä¹Ÿæ²¡æœ‰ä»»ä½•å‡½æ•°åŒ…è£¹ï¼Œå¤„åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹é¢ï¼Œæ‰€ä»¥foo()é‡Œé¢çš„thisæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œå½“è¦æ‰“å°this.açš„æ—¶å€™ï¼Œå¯»æ‰¾foo()è°ƒç”¨ä½ç½®ä¼šæ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œæ‰¾å…¨å±€ä½œç”¨åŸŸçš„å±æ€§this.açš„æ—¶å€™ä¼šæ‰“å°å‡º2è¿™ä¸ªå±æ€§å€¼ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨setTimeout,setIntervalå‡½æ•°çš„æ—¶å€™ï¼Œå®é™…è¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ä¸æŒ‚çš„ï¼ŒåŒæ ·ç»‘å®šåœ¨windowå¯¹è±¡ä¸Šã€‚</p>
<p>####éšå¼ç»‘å®š</p>
<p>å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™è¢«æ·»åŠ äº†ä¿®é¥°ç¬¦ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä»£ç <br>page 85</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="function">function <span class="title">foo</span><span class="params">()</span> </span>&#123; <span class="comment">//å®šä¹‰åœ¨å…¨å±€ä½œç”¨ä¸‹çš„å‡½æ•°ï¼Œä»…ä»…æ˜¯å®šä¹‰ï¼Œä¸æ˜¯è°ƒç”¨ä½ç½®</span></div><div class="line">	console.<span class="built_in">log</span>( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj = &#123; <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	foo: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.foo(); <span class="comment">// 2  ç»™foo()å‡½æ•°æ‰¾äº†ä¸€ä¸ªå¯¹è±¡ï¼Œthiså°±æŒ‡å‘è¿™ä¸ªå¯¹è±¡äº†</span></div></pre></td></tr></table></figure>
<p>è¿™æ˜¯æœ€å¸¸è§çš„æ–¹å¼äº†ï¼Œå¦‚æœä¸å†™å‰é¢çš„objæ˜¯ä¸æ˜¯å°±æ˜¯ä¸Šé¢çš„é»˜è®¤ç»‘å®šäº†ï¼Ÿ</p>
<p><code>éšå¼ä¸¢å¤±</code><br>ç»å¸¸åœ¨jsä»£ç çš„åµŒå¥—å›è°ƒå‡½æ•°ä¸­çœ‹åˆ°åœ¨å¤–å±‚å‡½æ•°å¼€å§‹çš„ä¸€å¥ </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  that=<span class="keyword">this</span>; <span class="comment">//è¿™æ˜¯ä»€ä¹ˆå«ä¹‰</span></div></pre></td></tr></table></figure>
<p>æˆ–è®¸ä½ å·²ç»ä¼šç”¨äº†ï¼Œä½†æ˜¯ç†è§£äº†å…¶ä¸­æ„ä¹‰ç”¨èµ·æ¥ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹å•Š</p>
<p>çœ‹ä¸‹é¢æ®µä»£ç .è¿™æ®µä»£ç å…¶å®ä»¥å‰æˆ‘ä¹Ÿä¸å¤ªç†è§£ï¼Œé—®é¢˜è¿˜æ˜¯æ²¡æœ‰å½»åº•é¢†æ‚Ÿjså‡½æ•°å®šä¹‰å’Œè°ƒç”¨ä¹‹é—´æ˜¯æ²¡æœ‰å…³ç³»çš„è¿™ä¸€ç‚¹ã€‚<br>page 86</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function">function <span class="title">foo</span><span class="params">()</span> </span>&#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°</span></div><div class="line">	console.<span class="built_in">log</span>( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj = &#123; <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å­—é¢é‡</span></div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	foo: foo  <span class="comment">//å‡½æ•°ä½œä¸ºå¯¹å¯¹è±¡çš„å±æ€§</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">var bar = obj.foo; <span class="comment">//æŠŠobjå¯¹è±¡çš„å‡½æ•°fooå±æ€§èµ‹å€¼ç»™barå˜é‡</span></div><div class="line"><span class="comment">//è¿™é‡Œå°±æ˜¯ç†è§£è¿™ä¸ªé—®é¢˜çš„å…³é”®ï¼Œå¦‚æœä½ ç°åœ¨è®¤ä¸ºè°ƒç”¨bar()çš„æ—¶å€™ç»‘å®šçš„å¯¹è±¡</span></div><div class="line"><span class="comment">//æ˜¯objé‚£å°±å®Œå…¨æé”™äº†ã€‚è¿™ä¸ªæ—¶å€™ä»…ä»…æ˜¯æŠŠå‡½æ•°fooèµ‹å€¼ç»™äº†varå˜é‡ï¼Œ</span></div><div class="line"><span class="comment">//å¹¶æ²¡æœ‰æŠŠå¯¹è±¡ä¹Ÿç»™barå˜é‡ï¼Œå› ä¸ºè¿™é‡Œè¿˜ä¸æ˜¯foo()å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œç°åœ¨</span></div><div class="line"><span class="comment">//fooå‡½æ•°è¿˜æ²¡æœ‰ç»‘å®šå¯¹è±¡ï¼Œé‚£ä¹ˆè°ƒç”¨bar()çš„æ—¶å€™å¯¹è±¡åˆ°åº•æ˜¯è°ï¼Ÿä¸çŸ¥é“ã€‚</span></div><div class="line"><span class="comment">//è°ƒç”¨çš„æ—¶å€™æ‰çŸ¥é“ã€‚</span></div><div class="line"></div><div class="line">var a = <span class="string">"oops, global"</span>; <span class="comment">// ä»»ç„¶æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§</span></div><div class="line">bar(); <span class="comment">// "oops, global" è¿™é‡Œæ‰§è¡Œçš„æ˜¯é»˜è®¤ç»‘å®šï¼Œthiså°±æ˜¯å»å…¨å±€å¯¹è±¡å•¦</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢è¿™æ®µä»£ç å°±æ˜¯ä½¿ç”¨var that=thisçš„åœºæ™¯<br>åœ¨ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ—¶å€™è¦ç•™å¿ƒã€‚jsä¸­å‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ å…¥å‡½æ•°ã€‚ é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ï¼Œå‡½æ•°ä¸€æ—¦ä½œä¸ºå®å‚ä»£æ›¿å½¢å‚çš„æ—¶å€™ï¼Œå®é™…ä¹Ÿæ‰§è¡Œäº†å’Œä¸Šé¢ä»£ç ä¸€æ ·çš„èµ‹å€¼è¿‡ç¨‹ï¼Œå®é™…åªæ˜¯ä¼ é€’äº†å‡½æ•°æœ¬èº«ï¼ŒåŸå…ˆçš„å¯¹è±¡å°±æ²¡æœ‰äº†ã€‚</p>
<p>page 86</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function">function <span class="title">foo</span><span class="params">()</span> </span>&#123; <span class="comment">//å®šä¹‰ä¸€ä¸ªå‡½æ•°</span></div><div class="line">	console.<span class="built_in">log</span>( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">function <span class="title">doFoo</span><span class="params">(fn)</span> </span>&#123; <span class="comment">//fnæ˜¯å½¢å‚</span></div><div class="line">	<span class="comment">// å¦‚æœå‡½æ•°ä½œä¸ºå®å‚ä¼ å…¥ç›¸å½“äºä»£ç  var fn=obj.foo</span></div><div class="line">	<span class="comment">//å’Œä¸Šé¢ä¸€æ®µä»£ç æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªæ˜¯å‡½æ•°æœ¬èº«ï¼Œå¹¶æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡</span></div><div class="line"></div><div class="line">	fn(); <span class="comment">// åœ¨è¿™é‡Œè°ƒç”¨çš„æ—¶å€™ï¼Œç”±äºfnåªä»£è¡¨foo()å‡½æ•°ï¼Œè¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šäº†</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj = &#123;</div><div class="line">	a: <span class="number">2</span>,</div><div class="line">	foo: foo</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var a = <span class="string">"oops, global"</span>; <span class="comment">// `a` also property on global object</span></div><div class="line"></div><div class="line">doFoo( obj.foo ); <span class="comment">// "oops, global"ä¸è¦è¢«obj.fooè¿·æƒ‘äº†</span></div><div class="line"><span class="comment">//æ²¡æœ‰å®é™…æ‰§è¡Œå‡½æ•°çš„è°ƒç”¨ï¼Œæ­¤æ—¶obj.fooä»…ä»…ä»£è¡¨æ²¡æœ‰ç»‘å®šä»»ä½•å¯¹è±¡çš„å‡½æ•°</span></div><div class="line"></div><div class="line"><span class="comment">//è¿™ä¸ªä»£ç å—çœ‹ç€çœ¼ç†Ÿä¹ˆï¼Ÿè¿™å°±æ˜¯javascriptä¸­å›è°ƒå‡½æ•°çš„æ ·å­ï¼Œå½“</span></div><div class="line"><span class="comment">//ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›å¦ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,è¿™ä¸ªå‚æ•°å‡½æ•°å°±æ‰¾ä¸åˆ°è‡ªå·±ç»‘å®šçš„å¯¹è±¡æ˜¯è°äº†ï¼Œ</span></div><div class="line"><span class="comment">//æ‰€ä»¥å°±é»˜è®¤ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Šäº†ã€‚ä½†æ˜¯æˆ‘ä»¬æ—¢ç„¶åœ¨ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œè‚¯å®šæ˜¯è¦ç”¨è¿™ä¸ªå‡½æ•°æ“ä½œå½“å‰çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ—¢ç„¶æ‰¾ä¸åˆ°äº†ï¼Œæˆ‘ä»¬å°±æ‰‹åŠ¨ç»™ä»–æŒ‡å®šä¸€ä¸ªå¯¹è±¡å§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨</span></div><div class="line"><span class="comment">//var  that=thisçš„åŸå› ã€‚æˆ‘è§‰å¾—ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œjsçš„åŠŸåŠ›è‡³å°‘ä¼šå¢åŠ 5%ğŸ˜ã€‚è‡³äºå…·ä½“ä½¿ç”¨ï¼Œæˆ‘æƒ³å†™å‡ºæ¥å…¶å®æ²¡æœ‰ä»€ä¹ˆå¿…è¦äº†ã€‚è¿™æ ·çš„ä»£</span></div><div class="line"><span class="comment">//ç éšå¤„å¯è§.</span></div></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬ä¼šè¿”å›æ¥çœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>####æ˜¾ç¤ºç»‘å®š</p>
<p>ç›´æ¥ä½¿ç”¨apply()å’Œcall()æ–¹æ³•æ¥ç»™å‡½æ•°æŒ‡å®šä¸€ä¸ªå¯¹è±¡<br>page 88</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">   <span class="function">function <span class="title">foo</span><span class="params">()</span> </span>&#123;  <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	console.<span class="built_in">log</span>( <span class="keyword">this</span>.a );</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj = &#123;  <span class="comment">//å¯¹è±¡å­—é¢é‡å®šä¹‰</span></div><div class="line">	a: <span class="number">2</span> </div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo.call( obj ); <span class="comment">// 2  å¼ºåˆ¶ç»‘å®šåˆ°objå¯¹è±¡ä¸Š</span></div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ˜¾ç¤ºç»‘å®šè¿˜ä¸èƒ½è§£å†³thisçš„ä¸¢å¤±é—®é¢˜ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…è£¹å‡½æ•°</p>
<p>page 89</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">  <span class="function">function <span class="title">foo</span><span class="params">(something)</span> </span>&#123; <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	console.<span class="built_in">log</span>( <span class="keyword">this</span>.a, something );</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.a + something;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj = &#123; <span class="comment">//å¯¹è±¡å­—é¢é‡</span></div><div class="line">	a: <span class="number">2</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">var bar = function() &#123; åŒ…è£¹å‡½æ•°ï¼Œæ˜¾ç¤ºç»‘å®š</div><div class="line">	<span class="keyword">return</span> foo.apply( obj, arguments );</div><div class="line"> <span class="comment">//è¿”å›ç»‘å®šäº†å¯¹è±¡å’Œä¼ å…¥å‚æ•°çš„å‡½æ•°è°ƒç”¨</span></div><div class="line"> <span class="comment">//è¿™ä¸ªè¯­å¥åœ¨jsçš„ä»£ç ä¸­éå¸¸çš„å¸¸è§</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">var b = bar( <span class="number">3</span> ); <span class="comment">// 2, 3  </span></div><div class="line">console.<span class="built_in">log</span>( b ); <span class="comment">// 5</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//å¯ä»¥æŠŠç»‘å®šå‡½æ•°ç‹¬ç«‹å‡ºæ¥</span></div><div class="line"></div><div class="line"><span class="function">function <span class="title">bind</span><span class="params">(fn, obj)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> function() &#123;</div><div class="line">		<span class="keyword">return</span> fn.apply( obj, arguments );</div><div class="line">	&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####new ç»‘å®š</p>
<blockquote>
<p>jsä¸­çš„newå…³é”®å­—å’Œjavaä¸­å®Œå…¨ä¸åŒï¼Œjsä¸­æ²¡æœ‰ç±»ï¼Œåªæœ‰å¯¹è±¡ï¼Œåœ¨jsä¸­ä½¿ç”¨new å…³é”®å­—çš„æ—¶å€™åªæ˜¯è¢«è°ƒç”¨çš„æ™®é€šå‡½æ•°</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="function">function <span class="title">foo</span><span class="params">(a)</span> </span>&#123;  <span class="comment">//å®šä¹‰å‡½æ•°</span></div><div class="line">	<span class="keyword">this</span>.a = a;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var bar = <span class="keyword">new</span> foo( <span class="number">2</span> ); <span class="comment">//ä»…ä»…æ˜¯è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°</span></div><div class="line">console.<span class="built_in">log</span>( bar.a ); <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>å¥½äº†ä»¥ä¸Šå°±æ˜¯js thisç»‘å®šçš„å››ç§æ–¹å¼ã€‚  è§£å†³çš„å…³é”®é—®é¢˜æ˜¯jsä¸­åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™åˆ°åº•æ˜¯å±äºå“ªä¸ªå¯¹è±¡çš„é—®é¢˜ã€‚ </p>
<p>åé¢è¿˜æœ‰ä¸€ç‚¹å†…å®¹ï¼Œä½†æ˜¯ä¸Šé¢çš„å†…å®¹æ˜¯æœ€é‡è¦çš„ã€‚  2017å¹´1æœˆ17æ—¥<br><code>çš„ç¡®åŒ…è£¹å‡½æ•°é‚£é‡Œå¥½åƒæ˜¯æ²¡æœ‰è®²æ¸…æ¥šï¼Œæˆ‘ä¹Ÿå¿˜äº†å½“åˆæ˜¯æ€ä¹ˆç†è§£çš„ï¼Œç­‰æˆ‘å†çœ‹çœ‹ï¼Œç„¶åæ›´æ–°ã€‚æœ‰äº›åœ°æ–¹å·²ç»åšäº†æ›´æ–°!</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[understanding React(1)]]></title>
      <url>http://yoursite.com/2016/05/29/understanding%20React(1)/</url>
      <content type="html"><![CDATA[<p>Rect/Reduxçš„ç³»åˆ—æ–‡ç« <a id="more"></a><br>ç†è§£Reactç¨‹åº(1)-å®‡å®™å¤§çˆ†ç‚¸çš„å¥‡ç‚¹.<br>å½“å¤§çº¦160äº¿å¹´å‰å®‡å®™å¤§çˆ†ç‚¸ä»ä¸€ä¸ªå¥‡ç‚¹å¼€å§‹çš„æ—¶å€™,ç¬¬ä¸€ç¼•å…‰åœ¨å®‡å®™ä¸­æ‰©å±•å¼€æ¥,çˆ†ç‚¸æ—¶äº§ç”Ÿçš„å®‡å®™èƒŒæ™¯è¾å°„è‡³ä»Šåœ¨å®‡å®™çš„æ—¶ç©ºä¸­åˆ°å¤„æ¸¸è¡,ä½œä¸ºä¸€ä¸ªæ™®é€šäººä¹Ÿå¯ä»¥å¾ˆå®¹æ„ŸçŸ¥åˆ°åˆ°ä»–ä»¬çš„å­˜åœ¨,ä¸ä¿¡çš„è¯æ¬å‡ºä½ å®¶é‡ŒçŠ„è§’æ—®æ—¯é‡Œè½æ»¡ç°å°˜çš„åäºŒå¯¸é»‘ç™½ç”µè§†æœº,åªè¦èƒ½ç‚¹äº®ä½ å°±å¯ä»¥æ„ŸçŸ¥åˆ°ä»–ä»¬å­˜åœ¨.é‚£ä¹ˆä»–ä»¬æ˜¯ä»€ï¼Ÿæ²¡æœ‰ç”µè§†èŠ‚ç›®çš„æ—¶å€™,æ»¡å±çš„é›ªèŠ±ç‚¹å°±æ˜¯ç”µè§†å¤©çº¿æ¥å—åˆ°çš„å®‡å®™èƒŒæ™¯è¾å°„.è‡³ä»Šå…³äºå®‡å®™å¤§çˆ†ç‚¸çš„å¥‡ç‚¹åˆ°åº•æ˜¯æ˜¯ä»€ä¹ˆï¼Ÿè°åšçš„ç¨‹åºæ¶æ„,åˆè¡·æ˜¯ä»€ä¹ˆï¼Ÿè¿·ä»ç„¶æ²¡æœ‰è§£å¼€,ç”šè‡³åœ¨å®‡å®™å¤§çˆ†ç‚¸å¼€å§‹ä¹‹å‰,è¿æ—¶é—´éƒ½æ˜¯ä¸å­˜åœ¨çš„.ç§‘å­¦å®¶å¼„ç»Ÿçš„æŠŠæ‰€æœ‰çš„æœªè§£ä¹‹è°œéƒ½ä¸¢ç»™äº†å¥‡ç‚¹,ä¸ºäº†è‡ªåœ†å…¶è¯´,åˆåˆ›å»ºäº†å…¶ä»–çš„ç†è®º.æˆ–è®¸æœ¬æ¥å°±å­˜åœ¨å¤šä¸ªå¥‡ç‚¹,æ‰€ä»¥å­˜åœ¨å¥½å¤šå¹³è¡Œçš„å®‡å®™.å¥½å§ï¼ä¸Šé¢çš„æ˜¯ä¸€ä¸ªè„‘æ´å¤§å¼€çš„è¿‡ç¨‹,ä½ å¯èƒ½ä¼šè¯´ä½ è¯´çš„è¿™äº›ä¸œè¥¿åˆ°åº•å’Œç¨‹åºå¼€å‘æœ‰åŠç‚¹å…³ç³»å—ï¼Ÿæˆ–è®¸æœ‰å§,ä¹Ÿæˆ–è®¸æ›´æœ¬æ²¡æœ‰ä»»ä½•å…³ç³».çœ‹ä½ æ˜¯æ€ä¹ˆç†è§£äº†.</p>
<p>ä¸‹é¢æˆ‘æŠŠè¿™ä¸ªä¸»é¢˜æœ‰å…³çš„å†™ä½œæƒ³æ³•è®²ä¸€ä¸‹.</p>
<ul>
<li>ç¼–ç¨‹åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿå”¯ä¸€çš„ç›®çš„æ˜¯:<code>ä¿¡æ¯</code>.ç¼–ç¨‹å°±æ˜¯ä¼ é€’ä¿¡æ¯.Reactä½œä¸ºJavascriptç¼–ç¨‹è¯­è¨€çš„å­é›†,ä»–æ˜¯åœ¨ä¼ é€’ä¿¡æ¯å—ï¼Ÿå½“ç„¶æ˜¯äº†.å¦‚æœä½ æ˜ç™½äº†æˆ‘è¯´çš„è¿™å¥è¯,åé¢æˆ‘è¦è®²çš„é—®é¢˜å°±å®¹æ˜“å•¦. æ‰€æœ‰çš„æ•°æ®ç»“æ„åŒ…æ‹¬æ›´é«˜çº§çš„æ•°æ®åº“éƒ½æ˜¯å›´ç»•ç€<code>ä¿¡æ¯</code>æ¥è¿è½¬çš„.è¿™ä¸ªä¸»é¢˜æˆ‘åŸæœ¬æƒ³æ”¾åˆ°æœ€åæ¥å†™.å¤´è„‘é‡Œå‡ºç°è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™,å…¶å®ä¹Ÿæ˜¯ç†è§£äº†ä¸€äº›ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µä»¥åæ‰æœ‰çš„.ä½†æˆ‘æœ¬äººä»¥å‰æ²¡æœ‰æ·±å…¥å­¦ä¹ è¿‡å…¶ä»–ç¼–ç¨‹è¯­è¨€,å¦‚æœä½ æ˜¯æ·±å…¥å­¦ä¹ å’Œäº†è§£è¿‡ä¸€ç§ç¼–ç¨‹è¯­è¨€,é‚£ä¹ˆè¿™é‡Œè®²çš„å†…å®¹å°±å®¹æ˜“ç†è§£äº†.<code>å¦‚æœæˆ‘ä»¬æŠŠä¸ºäº†è§£å†³Reactç¼–ç¨‹ä¸­å‡ºç°çš„stateç®¡ç†é—®é¢˜å¼•å…¥çš„Reduxçœ‹åšæ˜¯ä¸€ç§ç®€å•çš„æ•°æ®åº“ç³»ç»Ÿ</code>,æœ‰äº›é—®é¢˜å°±èƒ½æ‰¾åˆ°å·²çŸ¥æ¦‚å¿µä½œä¸ºç†è§£çš„ä¾æ‰˜äº†.è¿™ä¸ªæ¦‚å¿µ,å¹¶éæˆ‘è‡ªå·±æå‡º,åŸå…ˆæ˜¯æœ‰ç‚¹éšçº¦çš„æƒ³æ³•,åœ¨çœ‹äº†ä¸€æœ¬æœ‰å…³Reactæ¦‚å¿µçš„ä¹¦çš„æ—¶å€™,è§‰å¾—è¿™ä¸ªæƒ³æ³•æ˜¯å¾ˆæ­£ç¡®çš„.æ•°æ®åº“æ“ä½œæ ¸å¿ƒçš„æ¦‚å¿µå°±æ˜¯CRUD,è¿˜æœ‰å—ï¼Ÿæ•°æ®çš„éªŒè¯,æ•°æ®çš„è¿‡æ»¤ç­‰ç­‰.è¿™äº›æ¦‚å¿µå¦‚æœä½ æ¯”ç…§ä»»ä½•ä¸€ç§æ•°æ®åº“çš„æ“ä½œ,éƒ½å¯ä»¥åœ¨Reduxå’ŒReduxä¸­é—´ä»¶ä¸­æ‰¾åˆ°ç±»ä¼¼çš„æ¦‚å¿µ.</li>
<li>æ—¢ç„¶æˆ‘ä»¬è¯´åˆ°äº†å®‡å®™å¤§çˆ†ç‚¸çš„å¥‡ç‚¹ç†è®ºäº†,é‚£ä¹ˆå¦‚æœæŠŠReactç¨‹åºçœ‹æˆæ˜¯ä¸€ä¸ªå¥‡ç‚¹,æ¯”å®‡å®™å¤§çˆ†ç‚¸ç†è®ºå¹¸è¿çš„æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª<code>å¥‡ç‚¹</code>æ˜¯æ€ä¹ˆå½¢æˆçš„.Reactçš„å¥‡ç‚¹æ˜¯ä¸€ä¸ªhtmlæ–‡ä»¶.å¯¹äºReactçš„çˆ†ç‚¸è¿‡ç¨‹,æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥å®Œå…¨è§£é‡Šæ¸…æ¥šçš„.ç”šè‡³æˆ‘ä»¬è¿˜å¯ä»¥è®©è¿™ä¸ªçˆ†ç‚¸è¿‡ç¨‹æ— é™æ¬¡çš„é‡å¤.æœ‰ç‚¹è™šå¹»äº†å§.æ²¡æœ‰å¼•å…¥é­”å¹»ç°å®ä¸»ä¹‰çš„<code>ä¸€åªæ–—é¸¡</code>[^è¿™åªæ–—é¸¡æ¥è‡ªäºé©¬å°”å…‹æ–¯çš„ã€Šæ²¡æœ‰äººå†™ä¿¡çš„ä¸Šå°‰ã€‹,å®é™…è¿™æœ¬ä¹¦æ²¡æœ‰ä»»ä½•é­”å¹»å†™è¯—ä¸»ä¹‰,é™¤äº†è¿™åªé¸¡çš„ä¸€ä¸ç‚¹æå†™]å’Œçœ‹æ–‡ç« çš„ä½ æ¥å¯¹è¯,æˆ‘å·²ç»å¦¥åäº†.è¿™ä¸ªè¿‡ç¨‹ä¼šå®é™…éœ€è¦ä¸¤æ–¹é¢çš„å†…å®¹å°±å¯ä»¥äº†,ä¸€æ˜¯Node.jsçš„çŸ¥è¯†å’Œä¸€ç‚¹React-reduxç¨‹åºåˆå§‹åŒ–çš„çŸ¥è¯†.</li>
<li>ä¸Šé¢ç¬¬ä¸€ç‚¹æˆ‘ä»¬è°ˆåˆ°äº†å§‘ä¸”å¯ä»¥æŠŠReduxçœ‹åšæ˜¯ä¸€ç§<code>æ•°æ®åº“</code>.é‚£ä¹ˆæ•°æ®åº“æ“ä½œå°±æœ‰æ•°æ®çš„å¢åˆ æ”¹æŸ¥å’Œæ•°æ®çš„éªŒè¯å’Œè¿‡æ»¤è¿‡ç¨‹,å…·ä½“çš„å®ç°è¯­å¥éƒ½åœ¨react-reduxä¸­å®ç°.å¦‚æœæ˜¯å…¶ä»–è¯­è¨€,æˆ‘ä¸çŸ¥é“æ€ä¹ˆæ¥å®ç°,å¦‚æœæ˜¯Redux,å°±å¥½åŠäº†.Reduxæ¨¡å—é‡Œçš„å†…å®¹å…¶å®æ˜¯éå¸¸å°‘çš„.å°‘åˆ°ä»€ä¹ˆç¨‹åº¦,å¯ä»¥è¿™æ ·è¯´Reduxé‡Œé¢é™¤äº†é—­åŒ…å’Œæ•°ç»„æ“ä½œå°±æ²¡æœ‰æ›´å¤šçš„å†…å®¹äº†.ä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿä¸‹é¢è¿™ä¸ªæ¦‚å¿µéå¸¸å…³é”®.<code>åœ¨javascriptä¸­,å…¶ä»–å¯¹è±¡å’Œå‡½æ•°å¯¹è±¡éƒ½æ˜¯ä¼ å¼•ç”¨èµ‹å€¼çš„</code>.æ²¡é”™!javascriptä¹‹æ‰€ä»¥èƒ½å¤Ÿæˆä¸ºä¸€é—¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€.å¯¹è±¡å’Œå‡½æ•°ä¼ å¼•ç”¨èµ‹å€¼æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ¦‚å¿µ,è¿™æ ·åšä»¥å,å‡½æ•°å’Œå¯¹è±¡å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ ‡è®°çš„<code>é”®å</code>.è¿™ä¸ªé”®åå°±å¯ä»¥åœ¨ç¨‹åºé‡Œåˆ°å¤„è¿è¡Œäº†.è¿™ä¸ªåœ°æ–¹æˆ‘ä»¬å€ŸåŠ©äºæ•°æ®åº“çš„æ“ä½œæ¦‚å¿µå’Œjavascriptçš„å‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µæ¥ç†è§£Reduxçš„æºç .è¿™ä¸€éƒ¨åˆ†å¯èƒ½ä¼šæ¯”è¾ƒå›°éš¾,å›°éš¾ç‚¹å®é™…æ˜¯æ•°ç»„çš„æ“ä½œæ–¹æ³•çš„çµæ´»åº”ç”¨,å½“ç„¶è¿˜æœ‰<code>é—­åŒ…äº†</code>.è¯´é“è¿™ä¸ªåœ°æ–¹çš„æ—¶å€™æˆ‘ä»¬åœ¨è®¨è®º,æœ¬äººå­¦ä¹ ç¼–ç¨‹æ—¶é—´ä¸é•¿,å¯¹äºè¿™äº›æ–¹æ³•æ½œç§»é»˜åŒ–çš„ä¸œè¥¿å¤ªå°‘,å†™åˆ°ç›¸å…³å†…å®¹ä¸€å®šè¯·é«˜æ‰‹æŒ‡æ•™.</li>
<li>Reduxçš„ä¸­é—´ä»¶,å®é™…åº”ç”¨ä¸­,ç®€å•çš„æµç¨‹å®é™…æ˜¯å¾ˆå°‘çš„.è¿™å¾ˆå¥½ç†è§£å•Š!å°±ç®—æ˜¯ä½ å®¶å°±åœ¨è‡ªæ¥æ°´å‚çš„å¤§é—¨å£,ä½ ä¹Ÿä¸å¯èƒ½æ¯å¤©æ‹¿ç€ä¸€ä¸ªæ¡¶å»æ°´å‚æ‰“æ°´.è‡ªæ¥æ°´å‚çš„æ°´ç»è¿‡å¾ˆå¤šé“çš„å·¥åº,å‡ºå‚çš„æ—¶å€™è¿˜è¦ç»è¿‡å¾ˆå¤šçš„ç®¡é“å’Œæ°´è¡¨æ‰èƒ½åˆ°ä½ å®¶é‡Œ.è‡ªæ¥æ°´å‚æ˜¯ä¸å¯èƒ½åš<code>å¤§è‡ªç„¶çš„æ¬è¿å·¥</code>çš„.[^è¿™ä¸ªæ˜¯çœ‹åˆ°æœ‰ä¸ªå¹½é»˜å›¾ç‰‡ï¼Œé¢˜ç›®æ˜¯æˆ‘ä»¬æ˜¯å¤§è‡ªç„¶çš„æ¬è¿å·¥,ç»“æœæ˜¯æ¡¶è£…æ°´é‡Œæœ‰åªé’è›™åœ¨æ¸¸æ³³,æ„æ€çš„ç¡®æ˜¯å¤§è‡ªç„¶æ¬è¿å·¥,é’è›™éƒ½æ¬è¿äº†].åœ¨æ•°æ®åœ¨Reactå’ŒReduxçš„æµåŠ¨ä¸­,éœ€è¦è§£å†³å¾ˆå¤šçš„ç»†èŠ‚é—®é¢˜,ä¸­é—´ä»¶å°±æ˜¯æ¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹.æœ‰æ—¶å€™äº‹æƒ…è¿˜æ²¡å®Œ.è‡ªæ¥æ°´å‚ä¼šåœ¨è‡ªæ¥æ°´ç”Ÿäº§çš„æ—¶å€™æ·»åŠ æ¼‚ç™½æ¶ˆæ¯’å‰‚.ä¸€æ—¦è¿™æ ·,é—®é¢˜å°±å˜å¾—æ›´å¤æ‚äº†.åˆ°åº•é€‰æ‹©å“ªå®¶çš„æ¬¡æ°¯é…¸é’ ,å‡ æ—¶èƒ½åˆ°è´§,æ¯å®¶çš„ä¸œè¥¿æ·»åŠ çš„æ­¥éª¤æ˜¯ä¸æ˜¯ä¸€æ ·?å¦‚æœçªç„¶ç¼ºè´§äº†,æ€ä¹ˆé€šçŸ¥ç”¨æ°´çš„äºº.è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯Reduxä¸­çš„side effectçš„æ¦‚å¿µ,è™½ç„¶ä¸åœ¨ä¸»æµç¨‹ä¸Š,ä½†æ˜¯å¯¹äºä¸»æµç¨‹è¿˜æ˜¯æœ‰å¾ˆå¤§å½±å“.Reduxåˆ°åº•æ€ä¹ˆå¤„ç†è¿™äº›ç»†èŠ‚ï¼Ÿè¿™éƒ½ä¾èµ–äºä¸­é—´ä»¶æ¥å®ç°.æ‰€ä»¥å¦‚æœè¦ç¼–å†™å¤æ‚çš„åº”ç”¨,è¿™ä¸ªåœ°æ–¹æ˜¯éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´çš„.å¦‚æœæ˜¯ç”Ÿäº§å†œå¤«å±±æ³‰è¿˜å¥½åŠ,å¦‚æœæ˜¯ç”Ÿäº§è„‰åŠ¨,é‚£é—®é¢˜å°±æ›´å¤æ‚å•¦ï¼[^å†œå¤«å±±æ³‰åªæ˜¯æ°´,è„‰åŠ¨é‡Œå°±æ·»åŠ äº†å¾ˆå¤šçš„ç»´ç”Ÿç´ ç­‰ç­‰ä¸œè¥¿].Reduxçš„ä¸­é—´ä»¶ç°åœ¨å¾ˆå¤š,ä½†æ˜¯å®é™…ä¸­ä¸å¯èƒ½æ¯ä¸ªéƒ½ç”¨åˆ°å’Œå­¦ä¹ åˆ°,æ‰€ä»¥åªæ˜¯å…³æ³¨å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ä¸­é—´ä»¶å°±å¯ä»¥äº†.</li>
<li>javascriptçš„æ¨¡å¼è®¾è®¡åœ¨Reactå’ŒReduxä¸­çš„åº”ç”¨,æ¨¡å¼è®¾è®¡åœ¨ç¼–ç¨‹ä¸­æ— å¤„ä¸åœ¨çš„,åœ¨é«˜æ‰‹çš„æºç ä¸­çœ‹è¿™äº›æ¨¡å¼è®¾è®¡æ–¹æ³•,å¯èƒ½æ›´åŠ çš„åŸæ±åŸå‘³å’Œæ ‡å‡†,æ‰€ä»¥æˆ‘ä¹ˆä¹Ÿæ¥ç®€å•çš„è°ˆè°ˆè¿™äº›å†…å®¹,æ¨¡å¼è®¾è®¡å…¶å®å°±æ˜¯Reactå¤§çˆ†ç‚¸çš„èƒŒæ™¯è¾å°„,ä»–å°±å­˜åœ¨äºç¨‹åºçš„ä»»ä½•åœ°æ–¹.</li>
<li>æœ‰å…³æµ‹è¯•-ä½œä¸ºåˆå­¦è€…å¯¹äºç¨‹åºçš„æµ‹è¯•ç†è§£å¤ªå°‘,å€ŸåŠ©ç€è¿™æ¬¡å†™ä½œçš„æœºä¼š,åŠ æ·±è®¤è¯†.</li>
</ul>
<blockquote>
<p>å¥½äº†ï¼Œå¤§æ¦‚è¦å†™çš„ä¸œè¥¿å°±æ˜¯è¿™ä¹ˆå¤šï¼Œåç»­å°±æŒ‰ç…§è¿™ä¸ªæ¡†æ¶æ¥å†™ä½œ.æˆ‘è‡ªå·±èµ·äº†ä¸€ä¸ªåå­—å«<code>æ¡†æ¶å†™ä½œ</code>æˆ–è€…<code>å¤§çº²å†™ä½œ</code>.èµ·å› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿‡å¹´çš„æ—¶å€™åœ¨å®¶é‡Œ,åˆšå¥½è§†é¢‘ç›’å­æœ‰ã€Šå£«å…µçªå‡»ã€‹,æ‰€æœ‰åˆçœ‹äº†ä¸€é,è®°ä¸æ¸…æ˜¯çœ‹çš„ç¬¬å‡ å›äº†.ä½†æ˜¯çœ‹åˆ°æœ‰ä¸€é›†ä¸€å›¢æ”¹ç¼–çš„æ—¶å€™,å¸ˆé•¿å‡ºåœº,æˆ‘è®°å¾—æ•´ä¸ªå£«å…µçªå‡»é‡Œåªå‡ºç°è¿‡ä¸¤ä¸ªå¥³æ€§,å°±æ˜¯è¿™ä¸€é›†.å’Œå…¶ä»–çš„å›½äº§å†›äº‹é¢˜æå¤§ç›¸å¾„åº­,å…¶ä»–çš„å›½äº§å†›äº‹é¢˜æé‡Œéƒ½ä¼šå‡ºç°å‡ ä¸ªé•¿ç›¸ä¿Šç¾,æ‹¿ç€ç”µè„‘çˆ±å¥½è€…ç„Šæ¥ç”µè·¯æ¿,èº«æ‰‹ä¸å‡¡çš„,å’Œç”·ä¸»äººå…¬æç€ä¸çŸ¥é“å‡ ä¸ªè§’çš„æ‹çˆ±å…³ç³».å£«å…µçªå‡»å®Œå…¨å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå¥³æ€§å˜ä¸ºè®¸ä¸‰å¤šå°æ—¶å€™åŒç­çš„ä¸‘å°é¸­,çªç„¶ä¸€ä¸‹çªå˜ä¸ºå£«å…µçªå‡»é‡Œçš„è½åœ¨çª è‡¼é‡Œçš„å¥³ä¸»äººå…¬.åœ¨åŸå…ˆ25é›†çš„ä¸»çº¿é‡Œåœ¨æ·»åŠ è¿™ä¹ˆä¸€ä¸ªä¸­é—´ä»¶,åœ¨æ‹25é›†ä¹Ÿä¸æˆé—®é¢˜å•Š.æ·»åŠ è¿™ä¸ªä¸­é—´ä»¶ä»¥å,é—®é¢˜å°±å¤æ‚äº†,è¿™å¥³ä¸»äººå…¬å¯èƒ½æ˜¯æˆææˆ–è€…ä¼å…­ä¸€çš„å¦¹å¦¹[^æˆæ,ä¼å…­ä¸€å’Œè®¸ä¸‰å¤šæ˜¯åŒä¹¡å—·].å“ˆå“ˆside effectå‡ºç°äº†.åé¢ç¼–å‰§æƒ³æ”¶ç¬”å°±å¾ˆéš¾åˆ¹è½¦äº†. ä½ ä¹Ÿåˆ«ä»¥ä¸ºæˆ‘æ˜¯åœ¨è®²ç¬‘è¯,å¦‚æœä½ åœ¨å›¾ä¹¦é¦†çš„å†™ä½œæ ç›®é‡Œæ‰¾æ‰¾,å¯ä»¥çœ‹åˆ°ç¾å‰§å’Œç”µå½±ç¼–å‰§çš„ä¸€äº›ä¹¦ç±,éƒ½æ˜¯è¿™ä¸ªå¥—è·¯.å‘µå‘µ!ä¸èƒ½å†è®²ä¸‹å»äº†,è¦è¿™ä¹ˆå†™å¾—å¿ƒä¸­æœ‰æ¡†æ¶,è€Œè¦å½¢æˆè¿™ä¸ªæ¡†æ¶éœ€è¦çœ‹å¾ˆå¤šçš„ç±»ä¼¼æ¡†æ¶.è¿™ä¹Ÿæ˜¯å­¦ä¹ ç¼–ç¨‹çš„æ–¹æ³•,å­¦ä¹ æ›´å¤šçš„ä»£ç ,æ‰èƒ½çœ‹åˆ°é‡Œé¢çš„æ¡†æ¶.<br>ã€Šå£«å…µçªå‡»ã€‹æˆ‘çœ‹äº†å¾ˆå¤šé,Reactçš„ç¨‹åºæˆ‘ä¹Ÿçœ‹äº†å¥½å¤š,ä½ çš„é€‰æ‹©æ˜¯ä»€ä¹ˆå‘¢?</p>
</blockquote>
<hr>
<p>æ¥ä¸‹æ¥çš„ä¸€ç¯‡æˆ‘ä»¬è¦çœ‹çœ‹ä¸€ä¸ªReactçš„ç¨‹åºæ˜¯æ€ä¹ˆåŠ è½½åˆ°æµè§ˆå™¨ä¸­çš„.<br>éœ€è¦æœ‰ç‚¹<code>node.js</code>çš„åŸºç¡€çŸ¥è¯†å’Œè‡ªåŠ¨åŒ–æ‰“åŒ…ç¨‹åºçš„åŸºç¡€.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[understanding React(2)]]></title>
      <url>http://yoursite.com/2016/05/29/understanding%20React(2)/</url>
      <content type="html"><![CDATA[<p>#####understanding React2</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Redux Persist]]></title>
      <url>http://yoursite.com/2016/05/29/Redux%E5%92%8CReact%E7%BC%96%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1 id="Redux-Persist"><a href="#Redux-Persist" class="headerlink" title="Redux Persist"></a>Redux Persist</h1><p>Persist and rehydrate a redux store.</p>
<p>Redux Persist is <a href="#why-redux-persist">performant</a>, easy to <a href="#basic-usage">implement</a>, and easy to <a href="./docs/ecosystem.md">extend</a>.</p>
<p><code>npm i --save redux-persist</code></p>
<p><a href="https://travis-ci.org/rt2zz/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/travis/rt2zz/redux-persist/master.svg?style=flat-square" alt="build status"></a><br><a href="https://www.npmjs.com/package/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/npm/v/redux-persist.svg?style=flat-square" alt="npm version"></a><br><a href="https://www.npmjs.com/package/redux-persist" target="_blank" rel="external"><img src="https://img.shields.io/npm/dm/redux-persist.svg?style=flat-square" alt="npm downloads"></a></p>
<h2 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h2><p>Basic usage requires adding a few lines to a traditional redux application:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;compose, applyMiddleware, createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"><span class="keyword">import</span> &#123;persistStore, autoRehydrate&#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"></div><div class="line"><span class="comment">// add `autoRehydrate` as an enhancer to your store (note: `autoRehydrate` is not a middleware)</span></div><div class="line"><span class="keyword">const</span> store = createStore(</div><div class="line">  reducer,</div><div class="line">  <span class="literal">undefined</span>,</div><div class="line">  compose(</div><div class="line">    applyMiddleware(...),</div><div class="line">    autoRehydrate()</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// begin periodically persisting the store</span></div><div class="line">persistStore(store)</div></pre></td></tr></table></figure></p>
<p>For per reducer rehydration logic, you can opt-in by adding a handler to your reducer:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;REHYDRATE&#125; <span class="keyword">from</span> <span class="string">'redux-persist/constants'</span></div><div class="line"><span class="comment">//...</span></div><div class="line"><span class="keyword">case</span> REHYDRATE:</div><div class="line">  <span class="keyword">var</span> incoming = action.payload.myReducer</div><div class="line">  <span class="keyword">if</span> (incoming) <span class="keyword">return</span> &#123;...state, ...incoming, <span class="attr">specialKey</span>: processSpecial(incoming.specialKey)&#125;</div><div class="line">  <span class="keyword">return</span> state</div></pre></td></tr></table></figure></p>
<p>You may also need to configure the persistence layer, or take action after rehydration has completed:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">persistStore(store, &#123;<span class="attr">blacklist</span>: [<span class="string">'someTransientReducer'</span>]&#125;, () =&gt; &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'rehydration complete'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>And if things get out of wack, just purge the storage<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">persistStore(store, config, callback).purge()</div></pre></td></tr></table></figure></p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p><a href="./docs/api.md">Full API</a></p>
<h4 id="persistStore-store-config-callback"><a href="#persistStore-store-config-callback" class="headerlink" title="persistStore(store, [config, callback])"></a><code>persistStore(store, [config, callback])</code></h4><ul>
<li>arguments<ul>
<li><strong>store</strong> <em>redux store</em> The store to be persisted.</li>
<li><strong>config</strong> <em>object</em><ul>
<li><strong>blacklist</strong> <em>array</em> keys (read: reducers) to ignore</li>
<li><strong>whitelist</strong> <em>array</em> keys (read: reducers) to persist, if set all other keys will be ignored.</li>
<li><strong>storage</strong> <em>object</em> a <a href="https://github.com/rt2zz/redux-persist#storage-engines" target="_blank" rel="external">conforming</a> storage engine.</li>
<li><strong>transforms</strong> <em>array</em> transforms to be applied during storage and during rehydration.</li>
<li><strong>debounce</strong> <em>integer</em> debounce interval applied to storage calls (in miliseconds).</li>
<li><strong>keyPrefix</strong> <em>string</em> change localstorage default key (default: <strong>reduxPersist:</strong>) <a href="https://github.com/rt2zz/redux-persist/issues/137" target="_blank" rel="external">Discussion on why we need this feature ?</a></li>
</ul>
</li>
<li><strong>callback</strong> <em>function</em> will be called after rehydration is finished.</li>
</ul>
</li>
<li>returns <strong>persistor</strong> object</li>
</ul>
<h4 id="persistor-object"><a href="#persistor-object" class="headerlink" title="persistor object"></a><code>persistor object</code></h4><ul>
<li>the persistor object is returned by persistStore with the following methods:<ul>
<li><code>.purge(keys)</code><ul>
<li><strong>keys</strong> <em>array</em> An array of keys to be purged from storage. If not provided all keys will be purged.</li>
</ul>
</li>
<li><code>.rehydrate(incoming, options)</code><ul>
<li><strong>incoming</strong> <em>object</em> Data to be rehydrated into the store.</li>
<li><strong>options</strong> <em>object</em> If <code>serial:true</code>, incoming should be a <em>string</em>, that will be deserialized and passed through the transforms defined in the persistor.</li>
<li>Manually rehydrates the store with the passed data, dispatching the rehydrate action.</li>
</ul>
</li>
<li><code>pause()</code><ul>
<li>pauses persistence</li>
</ul>
</li>
<li><code>resume()</code><ul>
<li>resumes persistence</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="autoRehydrate-config"><a href="#autoRehydrate-config" class="headerlink" title="autoRehydrate(config)"></a><code>autoRehydrate(config)</code></h4><ul>
<li>This is a store enhancer that will automatically shallow merge the persisted state for each key. Additionally it queues any actions that are dispatched before rehydration is complete, and fires them after rehydration is finished.</li>
<li>arguments<ul>
<li><strong>config</strong> <em>object</em><ul>
<li><strong>log</strong> <em>boolean</em> Turn on debug mode. Default: <em>false</em>.</li>
<li><strong>stateReconciler</strong> <em>function</em> override the default shallow merge state reconciliation.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="constants"><a href="#constants" class="headerlink" title="constants"></a><code>constants</code></h4><ul>
<li><code>import * as constants from &#39;redux-persist/constants&#39;</code>. This includes <code>REHYDRATE</code> and <code>KEY_PREFIX</code>.</li>
</ul>
<h2 id="Alternate-Usage"><a href="#Alternate-Usage" class="headerlink" title="Alternate Usage"></a>Alternate Usage</h2><h4 id="getStoredState-createPersistor"><a href="#getStoredState-createPersistor" class="headerlink" title="getStoredState / createPersistor"></a>getStoredState / createPersistor</h4><p>If you need more control over persistence flow, you can implement <code>getStoredState</code> and <code>createPersistor</code>. For example you can skip autoRehydrate and directly pass restoredState into your store as initialState:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;getStoredState, autoRehydrate, createPersistor&#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> persistConfig = &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"></div><div class="line">getStoredState(persistConfig, (err, restoredState) =&gt; &#123;</div><div class="line">  <span class="keyword">const</span> store = createStore(reducer, restoredState)</div><div class="line">  <span class="keyword">const</span> persistor = createPersistor(store, persistConfig)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="Secondary-Persistor"><a href="#Secondary-Persistor" class="headerlink" title="Secondary Persistor"></a>Secondary Persistor</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123;persistStore, createPersistor&#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"><span class="keyword">const</span> persistor = persistStore(store) <span class="comment">// persistStore restores and persists</span></div><div class="line"><span class="keyword">const</span> secondaryPersistor = createPersistor(store, &#123;<span class="attr">storage</span>: specialBackupStorage&#125;) <span class="comment">// createPersistor only persists</span></div></pre></td></tr></table></figure>
<h2 id="Storage-Engines"><a href="#Storage-Engines" class="headerlink" title="Storage Engines"></a>Storage Engines</h2><ul>
<li><strong>localStorage</strong> (default) web</li>
<li><strong>sessionStorage</strong></li>
<li><strong><a href="https://github.com/mozilla/localForage" target="_blank" rel="external">localForage</a></strong> (recommended) web, see usage below</li>
<li><strong><a href="http://facebook.github.io/react-native/docs/asyncstorage.html#content" target="_blank" rel="external">AsyncStorage</a></strong> for react-native</li>
<li><strong><a href="https://github.com/pellejacobs/redux-persist-node-storage" target="_blank" rel="external">redux-persist-node-storage</a></strong> for use in nodejs environments.</li>
<li><strong>custom</strong> any conforming storage api implementing the following methods: <code>setItem</code> <code>getItem</code> <code>removeItem</code> <code>getAllKeys</code>. [<a href="https://github.com/facebook/react-native/blob/master/Libraries/Storage/AsyncStorage.js" target="_blank" rel="external">example</a>]</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// sessionStorage</span></div><div class="line"><span class="keyword">import</span> &#123; persistStore &#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"><span class="keyword">import</span> &#123; asyncSessionStorage &#125; <span class="keyword">from</span> <span class="string">'redux-persist/storages'</span></div><div class="line">persistStore(store, &#123;<span class="attr">storage</span>: asyncSessionStorage&#125;)</div><div class="line"></div><div class="line"><span class="comment">// react-native</span></div><div class="line"><span class="keyword">import</span> &#123;AsyncStorage&#125; <span class="keyword">from</span> <span class="string">'react-native'</span></div><div class="line">persistStore(store, &#123;<span class="attr">storage</span>: AsyncStorage&#125;)</div><div class="line"></div><div class="line"><span class="comment">// web with recommended localForage</span></div><div class="line"><span class="keyword">import</span> localForage <span class="keyword">from</span> <span class="string">'localForage'</span></div><div class="line">persistStore(store, &#123;<span class="attr">storage</span>: localForage&#125;)</div></pre></td></tr></table></figure>
<h2 id="Transforms"><a href="#Transforms" class="headerlink" title="Transforms"></a>Transforms</h2><p>Transforms allow for arbitrary state transforms before saving and during rehydration.</p>
<ul>
<li><a href="https://github.com/rt2zz/redux-persist-transform-immutable" target="_blank" rel="external">immutable</a> - support immutable reducers</li>
<li><a href="https://github.com/rt2zz/redux-persist-transform-compress" target="_blank" rel="external">compress</a> - compress your serialized state with lz-string</li>
<li><a href="https://github.com/maxdeviant/redux-persist-transform-encrypt" target="_blank" rel="external">encrypt</a> - encrypt your serialized state with AES</li>
<li><a href="https://github.com/edy/redux-persist-transform-filter" target="_blank" rel="external">filter</a> - store or load a subset of your state</li>
<li><a href="https://github.com/actra-development/redux-persist-transform-filter-immutable" target="_blank" rel="external">filter-immutable</a> - store or load a subset of your state with support for immutablejs</li>
<li><a href="https://github.com/gabceb/redux-persist-transform-expire" target="_blank" rel="external">expire</a> - expire a specific subset of your state based on a property</li>
<li>custom transforms:<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; createTransform, persistStore &#125; <span class="keyword">from</span> <span class="string">'redux-persist'</span></div><div class="line"></div><div class="line"><span class="keyword">let</span> myTransform = createTransform(</div><div class="line">  <span class="comment">// transform state coming from redux on its way to being serialized and stored</span></div><div class="line">  (inboundState, key) =&gt; specialSerialize(inboundState, key),</div><div class="line">  <span class="comment">// transform state coming from storage, on its way to be rehydrated into redux</span></div><div class="line">  (outboundState, key) =&gt; specialDeserialize(outboundState, key),</div><div class="line">  <span class="comment">// configuration options</span></div><div class="line">  &#123;<span class="attr">whitelist</span>: [<span class="string">'specialReducer'</span>]&#125;</div><div class="line">)</div><div class="line"></div><div class="line">persistStore(store, &#123;<span class="attr">transforms</span>: [myTransform]&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Migrations"><a href="#Migrations" class="headerlink" title="Migrations"></a>Migrations</h2><p>One challenge developers encounter when persisting state for the first time is what happens when the shape of the application state changes between deployments? Solution: <a href="https://github.com/wildlifela/redux-persist-migrate" target="_blank" rel="external">redux-persist-migrate</a></p>
<h2 id="Action-Buffer"><a href="#Action-Buffer" class="headerlink" title="Action Buffer"></a>Action Buffer</h2><p>A common mistake is to fire actions that modify state before rehydration is complete which then will be overwritten by the rehydrate action. You can either defer firing of those actions until rehydration is complete, or you can use an <a href="https://github.com/rt2zz/redux-action-buffer/blob/master/README.md#redux-persist-example" target="_blank" rel="external">action buffer</a>.</p>
<h2 id="Why-Redux-Persist"><a href="#Why-Redux-Persist" class="headerlink" title="Why Redux Persist"></a>Why Redux Persist</h2><ul>
<li>Performant out of the box (uses a time iterator and operates on state partials)</li>
<li>Keeps custom rehydration logic in the reducers (where it intuitively belongs)</li>
<li>Supports localStorage, react-native AsyncStorage, or any conforming storage api</li>
</ul>
<p>Because persisting state is inherently stateful, <code>persistStore</code> lives outside of the redux store. Importantly this keeps the store â€˜pureâ€™ and makes testing and extending the persistor much easier.</p>
<h2 id="About-Auto-Rehydrate"><a href="#About-Auto-Rehydrate" class="headerlink" title="About Auto Rehydrate"></a>About Auto Rehydrate</h2><p>autoRehydrate is a store enhancer that automatically rehydrates state.</p>
<p>While auto rehydration works out of the box, individual reducers can opt in to handling their own rehydration, allowing for more complex operations like data transforms and cache invalidation. Simply define a handler for the rehydrate action in your reducer, and if the state is mutated, auto rehydrate will skip that key.</p>
<p>Auto rehydrate is provided as a convenience. In a large application, or one with atypical reducer composition, auto rehydration may not be convenient. In this case, simply omit autoRehydrate. Rehydration actions will still be fired by <code>persistStore</code>, and can then be handled individually by reducers or using a custom rehydration handler.</p>
]]></content>
    </entry>
    
  
  
</search>
